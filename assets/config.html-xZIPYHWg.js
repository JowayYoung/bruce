import{_ as a}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as o,o as i,c as l,a as s,b as n,d as t,e as c}from"./app-CIvSsdAP.js";const p={},d=s("h2",{id:"对接",tabindex:"-1"},[s("a",{class:"header-anchor",href:"#对接"},[s("span",null,"对接")])],-1),r=s("code",null,"@yangzw/bruce-std",-1),u={href:"https://code.visualstudio.com",target:"_blank",rel:"noopener noreferrer"},v=s("code",null,"VSCode",-1),h=s("code",null,"VSCode",-1),g=c(`<ul><li>打开<code>VSCode</code></li><li>选择左边<code>工具栏</code>的<code>插件</code>，搜索并安装<code>Prettier/Stylelint/Eslint/Markdownlint/Editorconfig</code>，安装之后重启<code>VSCode</code></li><li>选择<code>文件 → 首选项 → 设置</code>，<code>设置</code>可选<code>用户</code>或<code>工作区</code><ul><li><strong>用户</strong>：配置生效之后会作用于全局项目(<code>如果大部分项目都是单一的React应用或Vue应用，推荐使用全局配置</code>)</li><li><strong>工作区</strong>：配置生效之后只会作用于当前打开项目</li></ul></li><li>点击<code>设置</code>右上角最左边的图标<code>打开设置(json)</code>，对应文件是<code>settings.json</code>，打开配置文件</li><li>插入这些配置并重启<code>VSCode</code></li></ul><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token comment">// 系统设置</span>
	<span class="token property">&quot;css.validate&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// Stylelint</span>
	<span class="token property">&quot;less.validate&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// Stylelint</span>
	<span class="token property">&quot;scss.validate&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// Stylelint</span>
	<span class="token property">&quot;editor.codeActionsOnSave&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;source.fixAll.eslint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;explicit&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Eslint</span>
		<span class="token property">&quot;source.fixAll.stylelint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;explicit&quot;</span> <span class="token comment">// Stylelint</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esbenp.prettier-vscode&quot;</span><span class="token punctuation">,</span> <span class="token comment">// Prettier</span>
	<span class="token property">&quot;editor.detectIndentation&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	<span class="token property">&quot;editor.formatOnPaste&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Prettier</span>
	<span class="token property">&quot;editor.formatOnSave&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// Prettier</span>
	<span class="token property">&quot;editor.insertSpaces&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	<span class="token property">&quot;files.eol&quot;</span><span class="token operator">:</span> <span class="token string">&quot;\\n&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;javascript.updateImportsOnFileMove.enabled&quot;</span><span class="token operator">:</span> <span class="token string">&quot;always&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;typescript.updateImportsOnFileMove.enabled&quot;</span><span class="token operator">:</span> <span class="token string">&quot;always&quot;</span><span class="token punctuation">,</span>
	<span class="token comment">// Eslint</span>
	<span class="token property">&quot;eslint.nodePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;path/@yangzw/bruce-std/node_modules/eslint&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;eslint.options&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;overrideConfigFile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;path/@yangzw/bruce-std/dist/eslintrc.js&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// Markdownlint</span>
	<span class="token property">&quot;markdownlint.config&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		MD001<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		MD007<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		MD010<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		MD013<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		MD033<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		MD036<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		MD041<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		MD045<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
		MD047<span class="token operator">:</span> <span class="token boolean">false</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// Prettier</span>
	<span class="token property">&quot;prettier.configPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;path/@yangzw/bruce-std/dist/prettierrc.js&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;prettier.ignorePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;path/@yangzw/bruce-std/.prettierignore&quot;</span><span class="token punctuation">,</span>
	<span class="token comment">// Stylelint</span>
	<span class="token property">&quot;stylelint.configFile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;path/@yangzw/bruce-std/dist/stylelintrc.js&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;stylelint.stylelintPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;path/@yangzw/bruce-std/node_modules/stylelint&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;stylelint.validate&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;html&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;scss&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;less&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><div class="highlight-line"> </div><div class="highlight-line"> </div><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置中的<code>path</code>为<code>@yangzw/bruce-std</code>模块所在Npm根目录的<code>node_modules</code>，执行<code>npm config get prefix</code>获取Npm根目录并修改<code>path</code>。举个🌰，执行<code>npm config get prefix</code>获取的Npm根目录假设是<code>E:/Node/prefix</code>，那么将配置中的<code>path</code>替换为<code>E:/Node/prefix/node_modules</code>。</p><p>为了确保安装的插件具备有效性，<code>VSCode</code>及其所有插件都要保持最新版本。较旧版本的插件可能缺少某些功能或修复程序，会导致代码校验工具无法正常工作或产生不准确的结果。</p><p>🔥为了体验最佳效果，请始终保持<code>VSCode</code>及其所有插件的最新状态。</p><h2 id="疑问" tabindex="-1"><a class="header-anchor" href="#疑问"><span>疑问</span></a></h2><h3 id="更新eslint到v6-就会失效" tabindex="-1"><a class="header-anchor" href="#更新eslint到v6-就会失效"><span>更新eslint到v6+就会失效</span></a></h3><p>很多同学反映<code>eslint 6+</code>在<code>VSCode</code>中失效，最高使用版本只能控制在<code>v5.16.0</code>。其实这个本身就是配置问题，和版本无关。本项目的<code>eslint</code>使用<code>v8</code>，只要配置正确就能正常使用。</p><p>如果使用<code>npm</code>安装<code>@yangzw/bruce-std</code>，必须在<code>settings.json</code>中设置<code>eslint.packageManager</code>为<code>npm</code>(小写)，但是最新版本的<code>Eslint</code>已经默认此项，所以无需配置。如果使用<code>yarn</code>安装<code>@yangzw/bruce-std</code>，必须在<code>settings.json</code>中重置<code>eslint.packageManager</code>。</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;eslint.packageManager&quot;</span><span class="token operator">:</span> <span class="token string">&quot;yarn&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="首次安装eslint并对接-yangzw-bruce-std-eslint会失效" tabindex="-1"><a class="header-anchor" href="#首次安装eslint并对接-yangzw-bruce-std-eslint会失效"><span>首次安装Eslint并对接@yangzw/bruce-std，Eslint会失效</span></a></h3><p>首次安装<code>Eslint</code>，可能会在<code>js/ts/jsx/tsx/vue文件</code>的控制台中看到<code>Eslint</code>失效的警告。</p><div class="language-txt line-numbers-mode" data-ext="txt" data-title="txt"><pre class="language-txt"><code>Eslint is disabled since its execution has not been approved or denied yet. Use the light bulb menu to open the approval dialog.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这样说明<code>Eslint</code>已经被禁用，虽然配置中没有明确的禁用字段。移步到<code>VSCode</code>右下角的工具栏，会看到<code>禁用图标+ESLINT</code>的标红按钮，单击它就会弹出一个弹框，选择<code>Allow Everywhere</code>就能启用<code>Eslint</code>的校验功能。</p><p>最后，为了保障每次修改的配置都能生效，重启<code>VSCode</code>。</p><h3 id="prettier无法禁用-插入结尾空行-的功能" tabindex="-1"><a class="header-anchor" href="#prettier无法禁用-插入结尾空行-的功能"><span>prettier无法禁用“插入结尾空行”的功能</span></a></h3><p>在保存代码时，有些开发人员喜欢“插入结尾空行”，有些开发员就不喜欢“插入结尾空行”，而使用<code>prettier</code>美化代码之后就会强制使用结尾空行。 <code>prettier</code>目前没有相关的配置可以禁用“插入结尾空行”的功能，即使配置<code>.editorconfig</code>的<code>insert_final_newline = false</code>来禁止插入结尾空行也无法生效。</p><p>因为<code>prettier</code>在自己官网也说自己是一个固执己见的代码格式化程序，没有任何方式可以改变它的某些配置，除非修改它的源码。鉴于代码校验和文件格式的问题，对所有文件进行统一美化处理。</p>`,18),k=s("li",null,[s("strong",null,"css/scss/less文件"),n("：使用"),s("code",null,"stylelint"),n("和"),s("code",null,"prettier"),n("进行美化，保留结尾空行")],-1),m=s("li",null,[s("strong",null,"js/ts/jsx/tsx/vue文件"),n("：使用"),s("code",null,"eslint"),n("进行美化，删除结尾空行")],-1),b=s("strong",null,"md文件",-1),q={href:"https://marketplace.visualstudio.com/items?itemName=DoCode.vscode-remove-final-newlines",target:"_blank",rel:"noopener noreferrer"},f=s("strong",null,"其它文件",-1),y=s("code",null,"prettier",-1),_={href:"https://marketplace.visualstudio.com/items?itemName=DoCode.vscode-remove-final-newlines",target:"_blank",rel:"noopener noreferrer"},w=s("code",null,"prettier",-1),x=s("code",null,"prettier",-1),S=s("code",null,"insert_final_newline = false",-1),j={href:"https://github.com/prettier/prettier/issues/6360",target:"_blank",rel:"noopener noreferrer"},E={href:"https://lightrun.com/answers/prettier-prettier-im-trying-to-use-prettier-with-editorconfig-but-prettier-doesnt-respect",target:"_blank",rel:"noopener noreferrer"},z=s("code",null,"Remove Final Newlines",-1);function N(C,M){const e=o("ExternalLinkIcon");return i(),l("div",null,[d,s("p",null,[r,n("必须在"),s("a",u,[n("VSCode"),t(e)]),n("中使用，"),v,n("安装之后进入这些对接步骤。为了保障每次修改的配置都能生效，就必须重启"),h,n("。")]),g,s("ul",null,[k,m,s("li",null,[b,n("：不做任何处理，可以配合"),s("a",q,[n("Remove Final Newlines"),t(e)]),n("插件删除结尾空行")]),s("li",null,[f,n("：使用"),y,n("进行美化，可以配合"),s("a",_,[n("Remove Final Newlines"),t(e)]),n("插件删除结尾空行")])]),s("p",null,[w,n("以单个换行符结束所有文件且无法禁用它，所以"),x,n("无法针对"),S,n("生效，更多的解决方案可以查看"),s("a",j,[n("prettier/issues/6360"),t(e)]),n("和"),s("a",E,[n("I'm trying to use prettier with editorconfig but prettier doesn't respect"),t(e)]),n("。如果喜欢“插入结尾空行”的功能，请不要安装"),z,n("并删除相关的配置。")])])}const P=a(p,[["render",N],["__file","config.html.vue"]]),F=JSON.parse('{"path":"/std/config.html","title":"配置","lang":"zh-CN","frontmatter":{"title":"配置","icon":"gears","order":2},"headers":[{"level":2,"title":"对接","slug":"对接","link":"#对接","children":[]},{"level":2,"title":"疑问","slug":"疑问","link":"#疑问","children":[{"level":3,"title":"更新eslint到v6+就会失效","slug":"更新eslint到v6-就会失效","link":"#更新eslint到v6-就会失效","children":[]},{"level":3,"title":"首次安装Eslint并对接@yangzw/bruce-std，Eslint会失效","slug":"首次安装eslint并对接-yangzw-bruce-std-eslint会失效","link":"#首次安装eslint并对接-yangzw-bruce-std-eslint会失效","children":[]},{"level":3,"title":"prettier无法禁用“插入结尾空行”的功能","slug":"prettier无法禁用-插入结尾空行-的功能","link":"#prettier无法禁用-插入结尾空行-的功能","children":[]}]}],"git":{"createdTime":1707299699000,"updatedTime":1707299699000,"contributors":[{"name":"JowayYoung","email":"young.joway@aliyun.com","commits":1}]},"readingTime":{"minutes":3.87,"words":1160},"filePathRelative":"std/config.md","localizedDate":"2024年2月7日"}');export{P as comp,F as data};
