import{_ as a}from"./plugin-vue_export-helper-x3n3nnut.js";import{r as o,o as i,c as l,a as n,b as s,d as t,e as p}from"./app-5AmxOVUX.js";const c={},d=n("h2",{id:"对接",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#对接","aria-hidden":"true"},"#"),s(" 对接")],-1),r=n("code",null,"@yangzw/bruce-std",-1),u={href:"https://code.visualstudio.com",target:"_blank",rel:"noopener noreferrer"},v=n("code",null,"VSCode",-1),h=n("code",null,"VSCode",-1),g=p(`<ul><li>打开<code>VSCode</code></li><li>选择左边<code>工具栏</code>的<code>插件</code>，搜索并安装<code>Stylelint/Eslint/Prettier/EditorConfig/RemoveFinalNewlines</code>，安装之后重启<code>VSCode</code></li><li>选择<code>文件 → 首选项 → 设置</code>，<code>设置</code>可选<code>用户</code>或<code>工作区</code><ul><li><strong>用户</strong>：配置生效之后会作用于全局项目(<code>如果大部分项目都是单一的React应用或Vue应用，推荐使用全局配置</code>)</li><li><strong>工作区</strong>：配置生效之后只会作用于当前打开项目</li></ul></li><li>点击<code>设置</code>右上角最左边的图标<code>打开设置(json)</code>，对应文件是<code>settings.json</code>，打开配置文件</li><li>插入这些配置并重启<code>VSCode</code></li></ul><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token comment">// 系统设置</span>
	<span class="token property">&quot;css.validate&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	<span class="token property">&quot;less.validate&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	<span class="token property">&quot;scss.validate&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	<span class="token property">&quot;editor.codeActionsOnSave&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;source.fixAll.eslint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;explicit&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;source.fixAll.stylelint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;explicit&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;editor.defaultFormatter&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esbenp.prettier-vscode&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;editor.detectIndentation&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	<span class="token property">&quot;editor.formatOnSave&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
	<span class="token property">&quot;editor.insertSpaces&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
	<span class="token property">&quot;files.eol&quot;</span><span class="token operator">:</span> <span class="token string">&quot;\\n&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;files.removeFinalNewlines&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
	<span class="token property">&quot;javascript.updateImportsOnFileMove.enabled&quot;</span><span class="token operator">:</span> <span class="token string">&quot;always&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;security.workspace.trust.untrustedFiles&quot;</span><span class="token operator">:</span> <span class="token string">&quot;open&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;typescript.updateImportsOnFileMove.enabled&quot;</span><span class="token operator">:</span> <span class="token string">&quot;always&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;window.zoomLevel&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
	<span class="token property">&quot;[css]&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;files.removeFinalNewlines&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;[less]&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;files.removeFinalNewlines&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;[scss]&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;files.removeFinalNewlines&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// Prettier</span>
	<span class="token property">&quot;prettier.ignorePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;path/@yangzw/bruce-std/.prettierignore&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;prettier.arrowParens&quot;</span><span class="token operator">:</span> <span class="token string">&quot;avoid&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;prettier.quoteProps&quot;</span><span class="token operator">:</span> <span class="token string">&quot;preserve&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;prettier.tabWidth&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
	<span class="token property">&quot;prettier.trailingComma&quot;</span><span class="token operator">:</span> <span class="token string">&quot;none&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;prettier.useTabs&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
	<span class="token comment">// Eslint</span>
	<span class="token property">&quot;eslint.nodePath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;path/@yangzw/bruce-std/node_modules/eslint&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;eslint.options&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;overrideConfigFile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;path/@yangzw/bruce-std/dist/eslintrc.js&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token comment">// Stylelint</span>
	<span class="token property">&quot;stylelint.configFile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;path/@yangzw/bruce-std/dist/stylelintrc.js&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;stylelint.stylelintPath&quot;</span><span class="token operator">:</span> <span class="token string">&quot;path/@yangzw/bruce-std/node_modules/stylelint&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;stylelint.validate&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;html&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;css&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;scss&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;less&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="highlight-lines"><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置中的<code>path</code>为<code>@yangzw/bruce-std</code>模块所在Npm根目录的<code>node_modules</code>，执行<code>npm config get prefix</code>获取Npm根目录并修改<code>path</code>。举个🌰，执行<code>npm config get prefix</code>获取的Npm根目录假设是<code>E:/Node/prefix</code>，那么将配置中的<code>path</code>替换为<code>E:/Node/prefix/node_modules</code>。</p><p>为了确保安装的插件具备有效性，<code>VSCode</code>及其所有插件都要保持最新版本。较旧版本的插件可能缺少某些功能或修复程序，会导致代码校验工具无法正常工作或产生不准确的结果。</p><p>🔥为了体验最佳效果，请始终保持<code>VSCode</code>及其所有插件的最新状态。</p><h2 id="疑问" tabindex="-1"><a class="header-anchor" href="#疑问" aria-hidden="true">#</a> 疑问</h2><h3 id="更新eslint到v6-就会失效" tabindex="-1"><a class="header-anchor" href="#更新eslint到v6-就会失效" aria-hidden="true">#</a> 更新eslint到v6+就会失效</h3><p>很多同学反映<code>eslint 6+</code>在<code>VSCode</code>中失效，最高使用版本只能控制在<code>v5.16.0</code>。其实这个本身就是配置问题，和版本无关。本项目的<code>eslint</code>使用<code>v8</code>，只要配置正确就能正常使用。</p><p>如果使用<code>npm</code>安装<code>@yangzw/bruce-std</code>，必须在<code>settings.json</code>中设置<code>eslint.packageManager</code>为<code>npm</code>(小写)，但是最新版本的<code>Eslint</code>已经默认此项，所以无需配置。如果使用<code>yarn</code>安装<code>@yangzw/bruce-std</code>，必须在<code>settings.json</code>中重置<code>eslint.packageManager</code>。</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;eslint.packageManager&quot;</span><span class="token operator">:</span> <span class="token string">&quot;yarn&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="首次安装eslint并接入-yangzw-bruce-std-eslint会失效" tabindex="-1"><a class="header-anchor" href="#首次安装eslint并接入-yangzw-bruce-std-eslint会失效" aria-hidden="true">#</a> 首次安装Eslint并接入@yangzw/bruce-std，Eslint会失效</h3><p>首次安装<code>Eslint</code>，可能会在<code>js/ts/jsx/tsx/vue文件</code>的控制台中看到<code>Eslint</code>失效的警告。</p><div class="language-txt line-numbers-mode" data-ext="txt"><pre class="language-txt"><code>Eslint is disabled since its execution has not been approved or denied yet. Use the light bulb menu to open the approval dialog.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>这样说明<code>Eslint</code>已经被禁用，虽然配置中没有明确的禁用字段。移步到<code>VSCode</code>右下角的工具栏，会看到<code>禁用图标+ESLINT</code>的标红按钮，单击它就会弹出一个弹框，选择<code>Allow Everywhere</code>就能启用<code>Eslint</code>的校验功能。</p><p>最后，为了保障每次修改的配置都能生效，重启<code>VSCode</code>。</p><h3 id="prettier无法禁用-插入空行结尾-的功能" tabindex="-1"><a class="header-anchor" href="#prettier无法禁用-插入空行结尾-的功能" aria-hidden="true">#</a> prettier无法禁用“插入空行结尾”的功能</h3><p>在保存代码时，有些开发人员喜欢“插入空行结尾”，有些开发员就不喜欢“插入空行结尾”，而使用<code>prettier</code>美化代码之后就会强制使用空行结尾。 <code>prettier</code>目前没有相关的配置可以禁用“插入空行结尾”的功能，即使配置<code>.editorconfig</code>的<code>insert_final_newline = false</code>来禁止插入空行结尾也无法生效。</p><p>因为<code>prettier</code>在自己官网也说自己是一个固执己见的代码格式化程序，没有任何方式可以改变它的某些配置，除非修改它的源码。鉴于代码校验和文件格式的问题，对所有文件进行统一美化处理。</p><ul><li><strong>css/scss/less文件</strong>：使用<code>stylelint</code>和<code>prettier</code>进行美化，保留空行结尾</li><li><strong>js/ts/jsx/tsx/vue文件</strong>：使用<code>eslint</code>进行美化，删除空行结尾</li><li><strong>md文件</strong>：不做任何处理，但是使用<code>RemoveFinalNewlines</code>插件删除空行结尾</li><li><strong>其它文件</strong>：使用<code>prettier</code>进行美化，但是使用<code>RemoveFinalNewlines</code>插件删除空行结尾</li></ul>`,19),k=n("code",null,"prettier",-1),q=n("code",null,"prettier",-1),m=n("code",null,"insert_final_newline = false",-1),b={href:"https://github.com/prettier/prettier/issues/6360",target:"_blank",rel:"noopener noreferrer"},y={href:"https://lightrun.com/answers/prettier-prettier-im-trying-to-use-prettier-with-editorconfig-but-prettier-doesnt-respect",target:"_blank",rel:"noopener noreferrer"},f=n("code",null,"RemoveFinalNewlines",-1);function _(w,x){const e=o("ExternalLinkIcon");return i(),l("div",null,[d,n("p",null,[r,s("必须在"),n("a",u,[s("VSCode"),t(e)]),s("中使用，"),v,s("安装之后进入这些对接步骤。为了保障每次修改的配置都能生效，就必须重启"),h,s("。")]),g,n("p",null,[k,s("以单个换行符结束所有文件且无法禁用它，所以"),q,s("无法针对"),m,s("生效，更多的解决方案可以查看"),n("a",b,[s("prettier/issues/6360"),t(e)]),s("和"),n("a",y,[s("I'm trying to use prettier with editorconfig but prettier doesn't respect"),t(e)]),s("。如果喜欢“插入空行结尾”的功能，请不要安装"),f,s("并删除相关的配置。")])])}const S=a(c,[["render",_],["__file","config.html.vue"]]);export{S as default};
