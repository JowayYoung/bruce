---
title: 功能
order: 2
toc: menu
---

## 特色

`@yangzw/bruce-app`提供的功能均为`零配置开箱即用`，以下详细讲述其主要功能，当然也可通过配置文件覆盖默认配置。

## 命令功能

- [x] **构建应用**：根据终端交互式问答选择所需配置构建应用，可选`开发环境/测试环境/生产环境`
- [x] **初始应用**：根据终端交互式问答选择所需配置生成应用的`骨架文件`与`入口文件`
- [x] **切换语言**：根据终端交互式问答选择所需配置切换终端本地语言，可选`简体中文/繁体中文/英文`
- [x] **创建物料**：根据终端交互式问答输入所需配置在应用根目录对应路径下创建模板文件
- [x] **删除缓存**：根据终端交互式问答选择所需配置快速删除应用缓存

## 内置功能

- [x] **选择模式**：提供`开发环境`、`测试环境`和`生产环境`三种模式，每种模式对应不同构建配置与优化方案
- [x] **监听端口**：使用开发模式时，启动本地服务器并监听指定协议域名端口，可自动打开浏览器访问页面
- [x] **局部刷新**：启用Webpack内置`Hot Module Replacement`，配合`react-refresh`或`vue-loader`增量更新`css文件`与`js文件`，修哪更哪，无需刷新页面可实时预览修改结果并保存当前数据状态
- [x] **判断入口**：快速扫描应用指定的入口文件路径，判断其是否存在且合法，以递归的方式构建每个文件及其依赖文件，构建应用时以入口文件作为根节点，必须得保证其存在且合法
- [x] **插入垫片**：根据应用浏览器兼容性自动插入垫片，兼容低版本浏览器
	- 插入动态`polyfill`：根据浏览器请求时的`UserAgent`返回垫片文件，`babel`编译JS代码时就无需带上垫片编译，起到`减包作用`
	- 插入静态`polyfill`：根据`browsers`与编写JS代码中的ES6语法自动插入所需垫片
- [x] **动态导入**：可用动态导入语法(`import().then()`)，处理代码时会单独分离该模块，执行页面对应操作时才加载该模块，使用则加载不使用则不加载(`代码懒加载`)，减少首屏加载代码大小与渲染时间
- [x] **编译代码**：内置CSS编译器(`postcss/scss/less`)与JS编译器(`babel/typescript`)分别编译样式与脚本，开发时可用最新特性或草案规范的语法，使得代码更简洁，提高代码可读性
	- `txt文件`：内置`asset/source`，把文件内容以字符串的形式导入
	- `css文件`：内置`style-loader`与`css-loader`，把CSS从JS中单独抽离出来，处理的`css文件`包括`scss/less`转换后的`css文件`
	- `css文件`：内置`postcss-loader`，用于处理CSS最新特性与草案规范，根据`browsers`增加CSS属性前缀
	- `scss文件`：内置`sass-loader`，通过`dart-sass`将`scss`编译为`css`
	- `less文件`：内置`less-loader`，通过`less`将`less`编译为`css`
	- `js/ts文件`：内置`babel-loader`，根据预设环境与`browsers`并结合`polyfill`处理编写的ES6与TS，生成大众浏览器可识别的ES5
- [x] **校验代码**：确保编写的语法无错误，统一规范团队协作的编码规范与编码风格，减少代码冗余，在保证代码语法正确的前提下提高代码的可读性
	- `CSS校验`：内置`stylelint`，配置标准的CSS语法规则，检查与纠正出现的错误
	- `JS校验`：内置`eslint`，配置标准的JS与TS语法规则，检查与纠正出现的错误
- [x] **分割代码**：构建业务代码，将其分割为`WebpackRuntime代码块`、`第三方依赖代码块`和`应用业务代码块`三大部分
- [x] **合并代码**：整合相同模块、相同功能和复用多次的代码，起到`减包作用`
- [x] **友好提示**：当遇到警告与错误时输出高亮的代码片段与解决方式，帮助开发者定位问题
- [x] **压缩合并**：
	- `CSS压缩`：内置`cssnano`，压缩去重抽离出来的CSS
	- `JS压缩`：内置`uglifyjs`与`terser`，压缩去重抽离出来的JS，`uglifyjs`用于压缩ES5，`terser`用于压缩ES6
	- `图像压缩`：内置`tinyimg`，无损压缩JPG与PNG图像
- [x] **代理接口**：使用`proxy`反向代理服务端接口，解决接口跨域问题
- [x] **处理资源**：内置`asset`，用于处理字体、图像、音频和视频等媒体资源，图像小于10k时转换为`Base64`
- [x] **提升作用**：启用Webpack内置`Scope Hoisting`，分析出模块间的依赖关系，把构建好的模块合并到一个函数中，起到`减包作用`
- [x] **摇树优化**：启用Webpack内置`Tree Shaking`，禁止`babel`把代码转换为CJS规范，使用ESM规范的静态声明特点去除不被引用或不被执行的代码块，起到`减包作用`
- [x] **缓存优化**：开启文件哈希化后，根据文件哈希值是否发生变化执行构建操作，哈希无变化的文件直接从缓存中获取，减少构建生成文件的时间
- [x] **缓存文件**：首次构建速度可能慢一些，构建完毕会生成本地缓存文件，可提高后续再次构建的速度
- [x] **哈希文件**：可对生成文件设置哈希值，只有文件内容修改才会更改哈希值，用于长缓存优化
- [x] **时化目录**：可时间序列化命名输出的应用根目录，增加时间戳区分版本
- [x] **分析打包**：可在构建完毕展示构建依赖的关系，根据关系图合理分析模块
- [x] **上传文件**：暴露出构建成功的钩子，可在钩子函数上编写上传文件到服务器的代码，还可进行其他操作
- [x] **定制配置**：当部分配置不符合实际需求时，可通过应用根目录下的配置文件修改默认配置，构建启动时就会使用该配置文件覆盖默认配置