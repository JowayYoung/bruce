var g=this&&this.__awaiter||function(e,n,o,s){return new(o||(o=Promise))((function(t,i){function r(e){try{c(s.next(e))}catch(e){i(e)}}function a(e){try{c(s.throw(e))}catch(e){i(e)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof o?n:new o((function(e){e(n)}))).then(r,a)}c((s=s.apply(e,n||[])).next())}))};import{writeFileSync as ue}from"fs";import{exit as o}from"process";import{AbsPath as $,CreateDir as ns,RunCmd as dn}from"@yangzw/bruce-us/dist/node.js";import Ae from"ora";import{CreateAnswer as yt}from"../helpers/index.js";import{CREATE_TEXT as b}from"../langs/index.js";import{ShowTitle as Je}from"../utils/index.js";export default function c(){return g(this,void 0,void 0,(function*(){Je("create");const{name:e,scope:n}=yield yt(),s=Ae(b.loading).start(),t=n?`@${n}/${e}`:e;try{dn(`npm view ${t} version`),s.stop(),console.log(b.judgeInvalid(t)),o(1)}catch(i){s.stop(),console.log(b.judgeValid(t));const r=Ae(b.doing).start();ns(e);const a=Object.assign({name:t,version:"1.0.0",description:"",keywords:[],author:{name:"",email:""},homepage:"",repository:{type:"git",url:""},bugs:{email:"",url:""},main:"index.js",bin:{[e]:"index.js"},scripts:{remove:"rimraf dist node_modules package-lock.json pnpm-lock.yaml yarn.lock",test:"node index.js"},engines:{node:">=16.0.0",npm:">=7.10.0"},dependencies:{},devDependencies:{},license:"MIT"},n?{publishConfig:{access:"public"}}:{}),c=$(`${e}/package.json`),l=JSON.stringify(a,null,"\t"),d=$(`${e}/index.js`),m='const name = "JowayYoung";\nconsole.log("Hello", name);';ue(c,l,"utf8"),ue(d,m,"utf8"),r.stop(),console.log(b.done),o(1)}}))}