import{exit as o}from"process";import{AbsPath as $,Throttle as lo}from"@yangzw/bruce-us/dist/node.js";import po from"chokidar";import{WATCH_TEXT as ro}from"../langs/index.js";import{ShowTitle as so}from"../utils/index.js";import ao from"./generate.js";process.on("SIGINT",(()=>{console.log(ro.undone),o(1)}));export default function to({input:o="",output:s=""}){so("watch");const e=$(s?`${s}/icons.css`:"icons.css"),n=lo((()=>ao({alone:!1,input:o,output:s})),1e3);console.log(ro.doing($(o),e)),po.watch(o,{ignoreInitial:!0}).on("all",((o,s)=>{"add"===o&&console.log(ro.create(s)),"change"===o&&console.log(ro.update(s)),"unlink"===o&&console.log(ro.remove(s)),n()}))}