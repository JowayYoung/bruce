import{exit as s}from"node:process";import{AbsPath as E,Throttle as Io}from"@yangzw/bruce-us/dist/node.js";import zo from"chokidar";import{WATCH_TEXT as bo}from"../langs/index.js";import{ShowTitle as io}from"../utils/index.js";import vo from"./generate.js";process.on("SIGINT",(()=>{console.log(bo.undone),s(1)}));export default function wo({input:o="",output:n=""}){io("watch");const e=E(n?`${n}/icons.css`:"icons.css"),s=Io((()=>vo({alone:!1,input:o,output:n})),1e3);console.log(bo.doing(E(o),e)),zo.watch(o,{ignoreInitial:!0}).on("all",((o,n)=>{"add"===o&&console.log(bo.create(n)),"change"===o&&console.log(bo.update(n)),"unlink"===o&&console.log(bo.remove(n)),s()}))}