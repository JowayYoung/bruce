#!/usr/bin/env node
var e;import{dirname as o}from"node:path";import{argv as t,exit as s,version as i}from"node:process";import{fileURLToPath as l}from"node:url";import{ReadJson as n}from"@yangzw/bruce-us/dist/node.js";import{Command as p}from"commander";import a from"semver";import{ACTION_TEXT as m,CMD_TEXT as d}from"./langs/index.js";import{Compress as Fo,Group as zo,Mark as ko,Scan as No,Transform as Co}from"./libs/index.js";import{GROUP_TEST as Ro,TRANSFORM_TEST as Bo}from"./utils/index.js";a.lt(i,"v18.18.0")&&(console.log(d.judgeNode),s(1));const g=new p,N=o(l(import.meta.url)),{version:z="1.0.0"}=null!==(e=n("../package.json",N))&&void 0!==e?e:{};g.name(d.cmd).usage("<command> [option]").description(d.desc).version(d.version(z),"-v, --version",m.version).helpOption("-h, --help",m.help).helpCommand("help [command]",m.helpCmd),g.command("compress").alias("c").description(m.compress).action(Fo),g.command("group").alias("g").option("-t, --type [val]",m.groupType,Ro.type,"format").description(m.group).action(zo),g.command("mark").alias("m").description(m.mark).action(ko),g.command("scan").alias("s").description(m.scan).action(No),g.command("transform").alias("t").option("-b, --blur [val]",m.transformBlur,Bo.blur,0).option("-e, --extract [val]",m.transformExtract,Bo.extract,!1).option("-f, --toFormat [val]",m.transformFormat,Bo.toFormat,"").option("-fi, --flip [val]",m.transformFlip,Bo.flip,!1).option("-fo, --flop [val]",m.transformFlop,Bo.flop,!1).option("-g, --grayscale [val]",m.transformGrayscale,Bo.grayscale,!1).option("-ne, --negate [val]",m.transformNegate,Bo.negate,!1).option("-no, --normalise [val]",m.transformNormalise,Bo.normalise,!1).option("-re, --resize [val]",m.transformResize,Bo.resize,!1).option("-ro, --rotate [val]",m.transformRotate,Bo.rotate,!1).option("-s, --sharpen [val]",m.transformSharpen,Bo.sharpen,void 0).description(m.transform).action(Co),g.parse(t);