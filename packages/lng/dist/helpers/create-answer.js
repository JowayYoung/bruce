var x=this&&this.__awaiter||function(t,n,e,o){return new(e||(e=Promise))((function(r,i){function s(t){try{u(o.next(t))}catch(t){i(t)}}function l(t){try{u(o.throw(t))}catch(t){i(t)}}function u(t){var n;t.done?r(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,l)}u((o=o.apply(t,n||[])).next())}))};import{CheckPath as qe}from"@yangzw/bruce-us/dist/node.js";import{ScanI18n as qt}from"../utils/index.js";import{BuildPrompt as Ct,CoverPrompt as Dt,FeaturesPrompt as Ht,LangsPrompt as It}from"./prompt.js";export default function be(){return x(this,void 0,void 0,(function*(){const t=!qe("i18n.xlsx")||(yield Dt());if(t){const n=qt();if(n.length){if(yield Ct()){return{cover:t,features:[],jsons:n,langs:[...(yield It()).sort(),"zh"]}}{const n=yield Ht(),e=yield It();return{cover:t,features:n.length?n.split(",").filter(Boolean):["home"],jsons:[],langs:[...e.sort(),"zh"]}}}{const n=yield Ht(),e=yield It();return{cover:t,features:n.length?n.split(",").filter(Boolean):["home"],jsons:[],langs:[...e.sort(),"zh"]}}}return{cover:t,features:[],jsons:[],langs:[]}}))}