import{readFileSync as tt,writeFileSync as st}from"fs";import{homedir as fs}from"os";import{normalize as gs}from"path";import{NodeType as lt,RunCmd as gn}from"@yangzw/bruce-us/dist/node.js";import ms from"strip-json-comments";import{ACTION_TEXT as r,CMD_TEXT as m}from"../langs/index.mjs";function Io(t,s=!1){try{const s=gn("code -v");if(!s.split("\n").shift())return t.stop(),console.log(m.judgeCode),{config:"",flag:!1,path:""}}catch(s){return t.stop(),console.log(m.judgeCode),{config:"",flag:!1,path:""}}const{system:e}=lt(),o="windows"===e?gs(`${fs()}/AppData/Roaming/Code/User/settings.json`).replace(/\\/g,"/"):gs("~/Library/Application Support/Code/User/settings.json").replace(/\\/g,"/"),i=gs(`${gn("npm root -g")}/@yangzw/bruce-std`).replace(/\\/g,"/").replace(/\n/g,"").trim(),n={"css.validate":!1,"less.validate":!1,"scss.validate":!1,"editor.codeActionsOnSave":{"source.fixAll.eslint":!0,"source.fixAll.stylelint":!0},"eslint.nodePath":`${i}/node_modules/eslint`,"eslint.options":{overrideConfigFile:`${i}/dist/eslintrc.js`},"stylelint.configFile":`${i}/dist/stylelintrc.js`,"stylelint.stylelintPath":`${i}/node_modules/stylelint`,"stylelint.validate":["html","css","scss","less","vue"]};if(s){const t=tt(o,"utf8"),s=JSON.parse(ms(t));Object.entries(n).forEach((t=>Reflect.set(s,t[0],t[1]))),st(o,JSON.stringify(s,null,"\t"),"utf8")}return{config:JSON.stringify(n,null,"\t"),flag:!0,path:o}}function io(t){console.log(`##### ${r[t]} #####`)}export{Io as GenerateConfig,io as ShowTitle};