import{readFileSync as ue,writeFileSync as fe}from"node:fs";import{homedir as Mt}from"node:os";import{normalize as $t}from"node:path";import{NodeType as be,RunCmd as jn}from"@yangzw/bruce-us/dist/node.js";import Jt from"strip-json-comments";import{ACTION_TEXT as m,CMD_TEXT as d}from"../langs/index.mjs";function Pn(t,e=!1){try{const e=jn("code -v");if(!e.split("\n").shift())return t.stop(),console.log(d.judgeCode),{config:"",flag:!1,path:""}}catch(e){return t.stop(),console.log(d.judgeCode),{config:"",flag:!1,path:""}}const{system:o}=be(),s=$t({linux:`${Mt()}/.config/Code/User/settings.json`,macos:`${Mt()}/Library/Application Support/Code/User/settings.json`,windows:`${Mt()}/AppData/Roaming/Code/User/settings.json`}[o]).replace(/\\/g,"/"),i=$t(`${jn("npm root -g")}/@yangzw/bruce-std`).replace(/\\/g,"/"),n={"css.validate":!1,"less.validate":!1,"scss.validate":!1,"editor.codeActionsOnSave":{"source.fixAll.eslint":"explicit","source.fixAll.stylelint":"explicit"},"editor.defaultFormatter":"esbenp.prettier-vscode","editor.detectIndentation":!1,"editor.formatOnPaste":!0,"editor.formatOnSave":!0,"editor.insertSpaces":!1,"files.eol":"\n","javascript.updateImportsOnFileMove.enabled":"always","typescript.updateImportsOnFileMove.enabled":"always","eslint.nodePath":`${i}/node_modules/eslint`,"eslint.options":{overrideConfigFile:`${i}/dist/eslintrc.js`},"markdownlint.config":{MD001:!1,MD007:!1,MD010:!1,MD013:!1,MD033:!1,MD036:!1,MD041:!1,MD045:!1,MD047:!1},"prettier.configPath":`${i}/dist/prettierrc.js`,"prettier.ignorePath":`${i}/.prettierignore`,"stylelint.configFile":`${i}/dist/stylelintrc.js`,"stylelint.stylelintPath":`${i}/node_modules/stylelint`,"stylelint.validate":["html","css","scss","less","vue"]};if(e){const t=ue(s,"utf8"),e=JSON.parse(Jt(t));Object.entries(n).forEach((t=>Reflect.set(e,t[0],t[1]))),fe(s,JSON.stringify(e,null,"\t"),"utf8")}return{config:JSON.stringify(n,null,"\t"),flag:!0,path:s}}function io(t){console.log(`##### ${m[t]} #####`)}export{Pn as GenerateConfig,io as ShowTitle};