var g=this&&this.__awaiter||function(t,n,e,a){return new(e||(e=Promise))((function(i,o){function s(t){try{m(a.next(t))}catch(t){o(t)}}function c(t){try{m(a.throw(t))}catch(t){o(t)}}function m(t){var n;t.done?i(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(s,c)}m((a=a.apply(t,n||[])).next())}))};import{writeFileSync as ce}from"fs";import{exit as o}from"process";import{AbsPath as $,CheckPath as _e,ReadJson as l,RunCmd as sn}from"@yangzw/bruce-us/dist/node.js";import oo from"ora";import{INIT_TEXT as _T}from"../langs/index.mjs";import{ShowTitle as so}from"../utils/index.mjs";const Xt="root = true\n\n[*]\ncharset = utf-8\nend_of_line = lf\nindent_size = 4\nindent_style = tab\ninsert_final_newline = false\nmax_line_length = off\ntrim_trailing_whitespace  = true\n\n[*.{yaml,yml}]\nindent_size = 2\nindent_style = space",Ut='module.exports = {\n\tmessages: {\n\t\tbody: "è¯´æ˜æè¿°(å¯ç”¨â€œ|â€æ¢è¡Œ)ï¼š",\n\t\tbreaking: "å…¼å®¹è¯´æ˜ï¼š",\n\t\tconfirmCommit: "ç¡®å®šç»§ç»­ä»¥ä¸Šçš„æäº¤å—ï¼Ÿ",\n\t\tcustomScope: "å½±å“èŒƒå›´ï¼š",\n\t\tfooter: "å…³è”å•å·ï¼š",\n\t\tscope: "è¯·é€‰æ‹©ä¸»è¦çš„å½±å“èŒƒå›´ï¼š",\n\t\tsubject: "è¯´æ˜æ ‡é¢˜ï¼š",\n\t\ttype: "è¯·é€‰æ‹©è¯´æ˜çš„æäº¤ç±»å‹ï¼š"\n\t},\n\tscopes: [\n\t\t{ name: "ä¸šåŠ¡æ¥å£-apis" },\n\t\t{ name: "ä¸šåŠ¡èµ„æº-assets" },\n\t\t{ name: "ä¸šåŠ¡ç»„ä»¶-components" },\n\t\t{ name: "ä¸šåŠ¡é’©å­-hooks" },\n\t\t{ name: "ä¸šåŠ¡è¯­è¨€-langs" },\n\t\t{ name: "ä¸šåŠ¡æ•°æ®-stores" },\n\t\t{ name: "ä¸šåŠ¡ç±»å‹-types" },\n\t\t{ name: "ä¸šåŠ¡å·¥å…·-utils" },\n\t\t{ name: "é…ç½®æ–‡ä»¶" },\n\t\t{ name: "å…¶å®ƒå½±å“" }\n\t],\n\tsubjectSeparator: "ï¼š",\n\ttypes: [\n\t\t{ key: "build", name: "ğŸ“¦ æ„å»ºï¼šæ›´æ–°æ„å»ºï¼Œä¿®æ”¹æ„å»ºäº‹åŠ¡æˆ–é¡¹ç›®ä¾èµ–", value: "ğŸ“¦æ„å»º" },\n\t\t{ key: "chore", name: "ğŸ’¼ äº‹åŠ¡ï¼šå˜åŠ¨äº‹åŠ¡ï¼Œä¿®æ”¹å…¶å®ƒä¸å½±å“ä»£ç çš„äº‹åŠ¡", value: "ğŸ’¼äº‹åŠ¡" },\n\t\t{ key: "cicd", name: "ğŸ’» æ‰§è¡Œï¼šæ›´æ–°æ‰§è¡Œï¼Œä¿®æ”¹CICDæˆ–æ‰§è¡Œè„šæœ¬çš„é…ç½®", value: "ğŸ’»æ‰§è¡Œ" },\n\t\t{ key: "doc", name: "ğŸ“ æ–‡æ¡£ï¼šæ›´æ–°æ–‡æ¡£ï¼Œä¿®æ”¹å…¶å®ƒä¸å½±å“ä»£ç çš„æ–‡æ¡£", value: "ğŸ“æ–‡æ¡£" },\n\t\t{ key: "feat", name: "âœ¨ åŠŸèƒ½ï¼šå¢åŠ åŠŸèƒ½ï¼Œè¿­ä»£é¡¹ç›®éœ€æ±‚", value: "âœ¨åŠŸèƒ½" },\n\t\t{ key: "fix", name: "ğŸ”¨ ä¿®å¤ï¼šä¿®å¤ç¼ºé™·ï¼Œä¿®å¤ä¸Šä¸€ç‰ˆæœ¬å­˜åœ¨çš„é—®é¢˜", value: "ğŸ”¨ä¿®å¤" },\n\t\t{ key: "merge", name: "ğŸ”— åˆå¹¶ï¼šåˆå¹¶åˆ†æ”¯ï¼Œåˆå¹¶åˆ†æ”¯ä»£ç åˆ°å…¶å®ƒåˆ†æ”¯ä¸­", value: "ğŸ”—åˆå¹¶" },\n\t\t{ key: "optimize", name: "ğŸ“ˆ ä¼˜åŒ–ï¼šæ”¹è¿›åŠŸèƒ½ï¼Œå‡çº§åŠŸèƒ½æ¨¡å—", value: "ğŸ“ˆä¼˜åŒ–" },\n\t\t{ key: "pfm", name: "âš¡ï¸ æ€§èƒ½ï¼šä¼˜åŒ–æ€§èƒ½ï¼Œæé«˜ä»£ç çš„æ‰§è¡Œæ€§èƒ½", value: "âš¡ï¸æ€§èƒ½" },\n\t\t{ key: "refactor", name: "ğŸ§¬ é‡æ„ï¼šé‡æ„ä»£ç ï¼Œé‡å†™åŸæ¥åŠŸèƒ½æ¨¡å—", value: "ğŸ§¬é‡æ„" },\n\t\t{ key: "revert", name: "âª å›æ»šï¼šå›æ»šç‰ˆæœ¬ï¼Œæ’¤é”€ä»£ç æäº¤", value: "âªå›æ»š" },\n\t\t{ key: "style", name: "ğŸ¨ æ ·å¼ï¼šæ›´æ–°æ ·å¼ï¼Œä¿®æ”¹å…¶å®ƒä¸å½±å“é€»è¾‘çš„æ ·å¼", value: "ğŸ¨æ ·å¼" },\n\t\t{ key: "sync", name: "ğŸ”„ åŒæ­¥ï¼šåŒæ­¥åˆ†æ”¯ï¼ŒåŒæ­¥åˆ†æ”¯ä»£ç åˆ°å…¶å®ƒåˆ†æ”¯ä¸­", value: "ğŸ”„åŒæ­¥" },\n\t\t{ key: "test", name: "âœ… æµ‹è¯•ï¼šæ›´æ–°æµ‹è¯•ï¼Œä¿®æ”¹æµ‹è¯•ç”¨ä¾‹éªŒè¯çš„ä»£ç ", value: "âœ…æµ‹è¯•" }\n\t]\n};';export default function O(){return g(this,void 0,void 0,(function*(){so("init"),_e("package.json")||(console.log(_T.judgePackage),o(1));const t=oo(_T.doing).start();let n=l("package.json");(null==n?void 0:n.scripts)?n.scripts.commit="git add --all . && git-cz":n=Object.assign(null!=n?n:{},{scripts:{commit:"git add --all . && git-cz"}}),(null==n?void 0:n.config)?n.config["cz-customizable"]={config:"czrc.cjs"}:n=Object.assign(null!=n?n:{},{config:{"cz-customizable":{config:"czrc.cjs"}}}),ce($(".editorconfig"),Xt,"utf-8"),ce($("czrc.cjs"),Ut,"utf-8"),ce($("package.json"),JSON.stringify(n,null,"\t"),"utf-8"),sn("npm i -g commitizen cz-customizable"),t.stop(),console.log(_T.done),o(1)}))}