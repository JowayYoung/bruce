import{exec as Xe}from"child_process";import{exit as Ho}from"process";import{promisify as dr}from"util";import{AsyncTo as gr}from"@yangzw/bruce-us/dist/node.js";import Ue from"ora";import{INIT_TEXT as mo}from"../../constants/i18n/index.js";import{GetDepVers as rt,ShowMsg as it,ShowTitle as mt}from"../../constants/util/index.js";import Je from"../../generators/project/index.js";import{InitAnswer as vr}from"../../helpers/answer/index.js";export default async function Ye(){mt("init");const{deps:e,devdeps:t,ext:s,frame:o,namea:r,style:n,useInstaller:i,useTs:a}=await vr(),m=Ue(mo.doing1).start();if(Je({deps:await rt(e),devdeps:await rt(t),ext:s,frame:o,name:r,style:n,useTs:a}),m.stop(),i){const e=dr(Xe),t=Ue(mo.doing2).start(),[s,o]=await gr(e(`cd ${r} && yarn`));(s||!o)&&await e(`cd ${r} && npm i`),t.stop(),it("green",mo.done)}else it("yellow",mo.undone);it("cyan",mo.desc(r)),Ho(1)}