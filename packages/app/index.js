#!/usr/bin/env node
import{dirname as g}from"path";import{argv as Co,exit as Ho,version as No}from"process";import{fileURLToPath as h}from"url";import{ReadJson as l,WaitFor as wr}from"@yangzw/bruce-us/dist/node.js";import{Command as Oo}from"commander/esm.mjs";import Vo from"ora";import $o from"semver";import{ACTION_TEXT as D,CMD_TEXT as ho}from"./constants/i18n/index.js";import{ShowMsg as rt}from"./constants/util/index.js";const{lt:Ao}=$o;async function Do(o=""){const i=Vo(ho.doing).start();await wr(500);const n=(await import(`./scripts/bin/${o}.js`)).default;i.stop(),n()}(async()=>{const o=g(h(import.meta.url)),i=new Oo,{version:n}=l("./package.json",o);if(Ao(No,"v16.0.0"))return rt("red",ho.judgeNodeVer),Ho(1);i.usage("<command> [option]").description(ho.desc).version(ho.version(n),"-v, --version",D.version).helpOption("-h, --help",D.help).addHelpCommand(!1),i.command("build").alias("b").description(D.build).action((()=>Do("build"))),i.command("init").alias("i").description(D.init).action((()=>Do("init"))),i.command("locale").alias("l").description(D.locale).action((()=>Do("locale"))),i.command("new").alias("n").description(D.new).action((()=>Do("new"))),i.command("remove").alias("r").description(D.remove).action((()=>Do("remove"))),i.parse(Co)})();