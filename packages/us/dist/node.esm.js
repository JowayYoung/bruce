import t,{statSync as n,readdirSync as e,readFileSync as r}from"fs";import i,{join as o,extname as c}from"path";import{cwd as s}from"process";import u from"constants";import a from"stream";import f from"util";import l from"assert";import{networkInterfaces as d,type as y,release as h}from"os";import{execSync as p}from"child_process";function m(t,n){return void 0===t&&(t=[]),void 0===n&&(n=""),n?t.reduce((function(t,e){return!t[e[n]]&&(t[e[n]]=[]),t[e[n]].push(e),t}),{}):{}}function v(t,n){return void 0===t&&(t=[]),t.reduce((function(t,e,r){return e===n&&t.push(r),t}),[])}function S(t){return void 0===t&&(t=[]),t.reduce((function(t,n){return t[n]=(t[n]||0)+1,t}),{})}function w(t,n){return void 0===t&&(t=[]),void 0===n&&(n=[]),n.reduce((function(n,e){return t.some((function(t){return t.includes(e)}))&&n.push(e),n}),[])}function g(){return"undefined"!=typeof window?"web":"undefined"!=typeof global?"node":"unknow"}function b(){return"web"===g()}function E(){return"node"===g()}function k(t){return Object.prototype.toString.call(t).replace(/\[object (\w+)\]/,"$1").toLowerCase()}function $(t){return"undefined"===k(t)}function O(t){return"null"===k(t)}function D(t){return"string"===k(t)}function M(t){return"number"===k(t)}function N(t){return"boolean"===k(t)}function F(t){return"symbol"===k(t)}function P(t){return"array"===k(t)}function x(t){return"object"===k(t)}function T(t){return"date"===k(t)}function C(t){return"regexp"===k(t)}function _(t){return"function"===k(t)}function L(t){return _(t)&&/^class\s+[\dA-Za-z]/.test(t.toString())}function j(t){return"set"===k(t)}function I(t){return"map"===k(t)}function Y(t){return"weakset"===k(t)}function A(t){return"weakmap"===k(t)}function R(t){return/^html(.+?)element$/.test(k(t))}function W(t){return"asyncfunction"===k(t)}function J(t){return"function"===k(t)}function B(t){return"arguments"===k(t)}function U(t){return t instanceof Error}function G(t){return!t}function H(t){return Array.isArray(t)&&!t.length}function V(t){return x(t)&&!Object.keys(t).length}var q="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},z={exports:{}},K=z.exports=function(){var t=1e3,n=6e4,e=36e5,r="millisecond",i="second",o="minute",c="hour",s="day",u="week",a="month",f="quarter",l="year",d="date",y="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},v=function(t,n,e){var r=String(t);return!r||r.length>=n?t:""+Array(n+1-r.length).join(e)+t},S={s:v,z:function(t){var n=-t.utcOffset(),e=Math.abs(n),r=Math.floor(e/60),i=e%60;return(n<=0?"+":"-")+v(r,2,"0")+":"+v(i,2,"0")},m:function t(n,e){if(n.date()<e.date())return-t(e,n);var r=12*(e.year()-n.year())+(e.month()-n.month()),i=n.clone().add(r,a),o=e-i<0,c=n.clone().add(r+(o?-1:1),a);return+(-(r+(e-i)/(o?i-c:c-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:a,y:l,w:u,d:s,D:d,h:c,m:o,s:i,ms:r,Q:f}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},w="en",g={};g[w]=m;var b=function(t){return t instanceof O},E=function t(n,e,r){var i;if(!n)return w;if("string"==typeof n){var o=n.toLowerCase();g[o]&&(i=o),e&&(g[o]=e,i=o);var c=n.split("-");if(!i&&c.length>1)return t(c[0])}else{var s=n.name;g[s]=n,i=s}return!r&&i&&(w=i),i||!r&&w},k=function(t,n){if(b(t))return t.clone();var e="object"==typeof n?n:{};return e.date=t,e.args=arguments,new O(e)},$=S;$.l=E,$.i=b,$.w=function(t,n){return k(t,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var O=function(){function m(t){this.$L=E(t.locale,null,!0),this.parse(t)}var v=m.prototype;return v.parse=function(t){this.$d=function(t){var n=t.date,e=t.utc;if(null===n)return new Date(NaN);if($.u(n))return new Date;if(n instanceof Date)return new Date(n);if("string"==typeof n&&!/Z$/i.test(n)){var r=n.match(h);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return e?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(n)}(t),this.$x=t.x||{},this.init()},v.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},v.$utils=function(){return $},v.isValid=function(){return!(this.$d.toString()===y)},v.isSame=function(t,n){var e=k(t);return this.startOf(n)<=e&&e<=this.endOf(n)},v.isAfter=function(t,n){return k(t)<this.startOf(n)},v.isBefore=function(t,n){return this.endOf(n)<k(t)},v.$g=function(t,n,e){return $.u(t)?this[n]:this.set(e,t)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(t,n){var e=this,r=!!$.u(n)||n,f=$.p(t),y=function(t,n){var i=$.w(e.$u?Date.UTC(e.$y,n,t):new Date(e.$y,n,t),e);return r?i:i.endOf(s)},h=function(t,n){return $.w(e.toDate()[t].apply(e.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(n)),e)},p=this.$W,m=this.$M,v=this.$D,S="set"+(this.$u?"UTC":"");switch(f){case l:return r?y(1,0):y(31,11);case a:return r?y(1,m):y(0,m+1);case u:var w=this.$locale().weekStart||0,g=(p<w?p+7:p)-w;return y(r?v-g:v+(6-g),m);case s:case d:return h(S+"Hours",0);case c:return h(S+"Minutes",1);case o:return h(S+"Seconds",2);case i:return h(S+"Milliseconds",3);default:return this.clone()}},v.endOf=function(t){return this.startOf(t,!1)},v.$set=function(t,n){var e,u=$.p(t),f="set"+(this.$u?"UTC":""),y=(e={},e[s]=f+"Date",e[d]=f+"Date",e[a]=f+"Month",e[l]=f+"FullYear",e[c]=f+"Hours",e[o]=f+"Minutes",e[i]=f+"Seconds",e[r]=f+"Milliseconds",e)[u],h=u===s?this.$D+(n-this.$W):n;if(u===a||u===l){var p=this.clone().set(d,1);p.$d[y](h),p.init(),this.$d=p.set(d,Math.min(this.$D,p.daysInMonth())).$d}else y&&this.$d[y](h);return this.init(),this},v.set=function(t,n){return this.clone().$set(t,n)},v.get=function(t){return this[$.p(t)]()},v.add=function(r,f){var d,y=this;r=Number(r);var h=$.p(f),p=function(t){var n=k(y);return $.w(n.date(n.date()+Math.round(t*r)),y)};if(h===a)return this.set(a,this.$M+r);if(h===l)return this.set(l,this.$y+r);if(h===s)return p(1);if(h===u)return p(7);var m=(d={},d[o]=n,d[c]=e,d[i]=t,d)[h]||1,v=this.$d.getTime()+r*m;return $.w(v,this)},v.subtract=function(t,n){return this.add(-1*t,n)},v.format=function(t){var n=this,e=this.$locale();if(!this.isValid())return e.invalidDate||y;var r=t||"YYYY-MM-DDTHH:mm:ssZ",i=$.z(this),o=this.$H,c=this.$m,s=this.$M,u=e.weekdays,a=e.months,f=function(t,e,i,o){return t&&(t[e]||t(n,r))||i[e].slice(0,o)},l=function(t){return $.s(o%12||12,t,"0")},d=e.meridiem||function(t,n,e){var r=t<12?"AM":"PM";return e?r.toLowerCase():r},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:$.s(s+1,2,"0"),MMM:f(e.monthsShort,s,a,3),MMMM:f(a,s),D:this.$D,DD:$.s(this.$D,2,"0"),d:String(this.$W),dd:f(e.weekdaysMin,this.$W,u,2),ddd:f(e.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(o),HH:$.s(o,2,"0"),h:l(1),hh:l(2),a:d(o,c,!0),A:d(o,c,!1),m:String(c),mm:$.s(c,2,"0"),s:String(this.$s),ss:$.s(this.$s,2,"0"),SSS:$.s(this.$ms,3,"0"),Z:i};return r.replace(p,(function(t,n){return n||h[t]||i.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(r,d,y){var h,p=$.p(d),m=k(r),v=(m.utcOffset()-this.utcOffset())*n,S=this-m,w=$.m(this,m);return w=(h={},h[l]=w/12,h[a]=w,h[f]=w/3,h[u]=(S-v)/6048e5,h[s]=(S-v)/864e5,h[c]=S/e,h[o]=S/n,h[i]=S/t,h)[p]||S,y?w:$.a(w)},v.daysInMonth=function(){return this.endOf(a).$D},v.$locale=function(){return g[this.$L]},v.locale=function(t,n){if(!t)return this.$L;var e=this.clone(),r=E(t,n,!0);return r&&(e.$L=r),e},v.clone=function(){return $.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},m}(),D=O.prototype;return k.prototype=D,[["$ms",r],["$s",i],["$m",o],["$H",c],["$W",s],["$M",a],["$y",l],["$D",d]].forEach((function(t){D[t[1]]=function(n){return this.$g(n,t[0],t[1])}})),k.extend=function(t,n){return t.$i||(t(n,O,k),t.$i=!0),k},k.locale=E,k.isDayjs=b,k.unix=function(t){return k(1e3*t)},k.en=g[w],k.Ls=g,k.p={},k}();function Z(t){if(!t)return"时间无效";var n=+new Date,e=+new Date(t)-n;if(e>=0){var r=Math.floor(e/1e3/3600/24),i=Math.floor(e/1e3/60/60%24),o=Math.floor(e/1e3/60%60),c=Math.floor(e/1e3%60),s=r?"".concat(r,"天"):"",u=i?"".concat(i,"时"):"",a=o?"".concat(o,"分"):"",f=c?"".concat(c,"秒"):"";return"".concat(s).concat(u).concat(a).concat(f)}return"时间已到"}function X(t){if(!t)return"时间无效";var n=+new Date,e=+new Date(t),r=n-e,i=r>=0?"前":"后",o=Math.abs(r),c=30.4375,s=36e5,u=24*s,a=o/6e4,f=o/s,l=o/u,d=o/26298e5;return o/315576e5>=1||d>=12?K(e).format("YYYY-MM-DD HH:mm:ss"):d>=1&&d<12?"".concat(parseInt(d.toString()),"个月").concat(i):l>=1&&l<c?"".concat(parseInt(l.toString()),"天").concat(i):f>=1&&f<24?"".concat(parseInt(f.toString()),"小时").concat(i):a>=1&&a<60?"".concat(parseInt(a.toString()),"分钟").concat(i):r>=0?"刚刚":"准备"}function Q(t,n,e,r){return new(e||(e=Promise))((function(i,o){function c(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var n;t.done?i(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(c,s)}u((r=r.apply(t,n||[])).next())}))}function tt(t,n){var e,r,i,o,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;c;)try{if(e=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,r=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!(i=c.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){c=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){c.label=o[1];break}if(6===o[0]&&c.label<i[1]){c.label=i[1],i=o;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(o);break}i[2]&&c.ops.pop(),c.trys.pop();continue}o=n.call(t,c)}catch(t){o=[6,t],r=0}finally{e=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function nt(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,i,o=e.call(t),c=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return c}function et(t,n,e){if(e||2===arguments.length)for(var r,i=0,o=n.length;i<o;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return t.concat(r||Array.prototype.slice.call(n))}function rt(t,n){return Q(this,void 0,void 0,(function(){return tt(this,(function(e){switch(e.label){case 0:return[4,t.then((function(t){return[null,t]})).catch((function(t){return[n?Object.assign({},t,n):t,void 0]}))];case 1:return[2,e.sent()]}}))}))}function it(t,n){var e;return void 0===n&&(n=50),function(){for(var r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];e&&clearTimeout(e),e=setTimeout((function(){return t.apply(r,i)}),n)}}function ot(t,n){var e;void 0===n&&(n=50);var r=!1,i=0;return function(){for(var o=this,c=[],s=0;s<arguments.length;s++)c[s]=arguments[s];r?(clearTimeout(e),e=setTimeout((function(){Date.now()-i>=n&&(t.apply(o,c),i=Date.now())}),Math.max(n-(Date.now()-i),0))):(t.apply(this,c),i=Date.now(),r=!0)}}function ct(t){return void 0===t&&(t=1e3),Q(this,void 0,void 0,(function(){return tt(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n){return setTimeout((function(){return n(!0)}),t)}))];case 1:return[2,n.sent()]}}))}))}function st(t,n){return void 0===t&&(t=0),void 0===n&&(n=0),t.toString().padStart(n,"0")}function ut(t){if(void 0===t&&(t=0),0===t)return"0 B";var n=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,n)).toPrecision(3)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}function at(t,n){return void 0===t&&(t=0),void 0===n&&(n=10),Math.floor(Math.random()*(n-t+1)+t)}function ft(t,n,e){void 0===t&&(t=0),void 0===n&&(n=10),void 0===e&&(e=1);for(var r=[];;){for(var i=!1,o=at(t,n),c=0;c<r.length;c++)if(o===r[c]){i=!0;break}if(i||r.push(o),r.length===e)return r}}function lt(t,n,e){return void 0===t&&(t=0),void 0===n&&(n=2),void 0===e&&(e=!1),e?"".concat(Math.round(t*Math.pow(10,n)*100)/Math.pow(10,n),"%"):Math.round(t*Math.pow(10,n))/Math.pow(10,n)}function dt(t){return void 0===t&&(t=0),t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function yt(t,n){return void 0===t&&(t={}),void 0===n&&(n=[]),Object.keys(t).reduce((function(e,r){return n.includes(r)&&(e[r]=t[r]),e}),{})}var ht={address:{msg:"地址只能由2~200位中文、英文、数字或空格组成",regexp:/^[\u4e00-\u9fa5A-Za-z0-9 ]{2,200}$/g},count:{msg:"数量只能由数字组成",regexp:/^\d{1,}$/g},date:{msg:"日期只能由YYYY-MM-DD hh:mm:ss形式组成",regexp:/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/g},email:{msg:"邮箱只能由xxx@yyy.zzz形式组成",regexp:/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/g},idcard:{msg:"身份证只能由13位数字或12位数字与X组成",regexp:/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/g},image:{msg:"图片只能是JPG、PNG、GIF、SVG或WEBP类型",regexp:/\.(jpe?g|png|gif|svg|webp)$/g},name:{msg:"名称只能由2~50位中文、英文、数字、下划线或中划线组成",regexp:/^[\u4e00-\u9fa5\w-]{2,50}$/g},number:{msg:"计数只能由数字或小数点组成",regexp:/^[+-]?(0|([1-9]\d*))(\.\d+)?$/g},password:{msg:"密码只能由8~20位英文、数字或符号至少两种组成",regexp:/^(?![0-9]+$)(?![a-z]+$)(?![A-Z]+$)(?!([^(0-9a-zA-Z)])+$)^.{8,20}$/g},phone:{msg:"手机只能由11位数字组成且需符合通讯运营商规范",regexp:/^1\d{10}$/g}},pt="^$.*+-?=!:|\\/()[]{}".split("");function mt(t,n){void 0===t&&(t=""),void 0===n&&(n="");var e=ht[t],r=e.regexp,i=e.msg,o=r.test(n);return{flag:o,msg:o?"":i}}function vt(t,n,e){void 0===n&&(n=""),void 0===e&&(e="");var r=t.test(n);return{flag:r,msg:r?"":e}}function St(t,n){var e;void 0===t&&(t="(*)"),void 0===n&&(n="");var r=t.split("*").map((function(t){return pt.includes(t)?"\\"+t:t})),i=new RegExp(r[0]+"(.+?)"+r[1],"g");return(null!==(e=n.match(i))&&void 0!==e?e:[]).map((function(t){return t.replace(i,"$1")}))}function wt(t){return void 0===t&&(t=""),ht.phone.regexp.test(t)?t.toString().replace(/(\d{3})\d*(\d{4})/g,"$1****$2"):t}function gt(t,n){return void 0===t&&(t=""),void 0===n&&(n="-"),ht.phone.regexp.test(t)&&["-"," "].includes(n)?t.toString().replace(/(\d{3})(\d{4})(\d{4})/g,"$1".concat(n,"$2").concat(n,"$3")):t}function bt(){return"#"+Math.floor(16777215*Math.random()).toString(16).padEnd(6,"0")}function Et(t){return void 0===t&&(t=5),(t<1||t>10)&&(t=5),Math.random().toString(36).substr(3,t)}function kt(t){return void 0===t&&(t=""),t.replace(/<[^>]*>/g,"")}function $t(t){return void 0===t&&(t=""),t.split("").reduceRight((function(t,n){return t+n}))}function Ot(t,n){return void 0===t&&(t=0),void 0===n&&(n=5),t<0&&(t=0),t>n&&(t=n),et(et([],nt(new Array(n).fill("★")),!1),nt(new Array(n).fill("☆")),!1).join("").slice(n-t,2*n-t)}var Dt={},Mt={fromCallback:function(t){return Object.defineProperty((function(...n){if("function"!=typeof n[n.length-1])return new Promise(((e,r)=>{t.call(this,...n,((t,n)=>null!=t?r(t):e(n)))}));t.apply(this,n)}),"name",{value:t.name})},fromPromise:function(t){return Object.defineProperty((function(...n){const e=n[n.length-1];if("function"!=typeof e)return t.apply(this,n);t.apply(this,n.slice(0,-1)).then((t=>e(null,t)),e)}),"name",{value:t.name})}},Nt=u,Ft=process.cwd,Pt=null,xt=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Pt||(Pt=Ft.call(process)),Pt};try{process.cwd()}catch(t){}if("function"==typeof process.chdir){var Tt=process.chdir;process.chdir=function(t){Pt=null,Tt.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Tt)}var Ct=function(t){Nt.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(t){t.lchmod=function(n,e,r){t.open(n,Nt.O_WRONLY|Nt.O_SYMLINK,e,(function(n,i){n?r&&r(n):t.fchmod(i,e,(function(n){t.close(i,(function(t){r&&r(n||t)}))}))}))},t.lchmodSync=function(n,e){var r,i=t.openSync(n,Nt.O_WRONLY|Nt.O_SYMLINK,e),o=!0;try{r=t.fchmodSync(i,e),o=!1}finally{if(o)try{t.closeSync(i)}catch(t){}else t.closeSync(i)}return r}}(t);t.lutimes||function(t){Nt.hasOwnProperty("O_SYMLINK")&&t.futimes?(t.lutimes=function(n,e,r,i){t.open(n,Nt.O_SYMLINK,(function(n,o){n?i&&i(n):t.futimes(o,e,r,(function(n){t.close(o,(function(t){i&&i(n||t)}))}))}))},t.lutimesSync=function(n,e,r){var i,o=t.openSync(n,Nt.O_SYMLINK),c=!0;try{i=t.futimesSync(o,e,r),c=!1}finally{if(c)try{t.closeSync(o)}catch(t){}else t.closeSync(o)}return i}):t.futimes&&(t.lutimes=function(t,n,e,r){r&&process.nextTick(r)},t.lutimesSync=function(){})}(t);t.chown=r(t.chown),t.fchown=r(t.fchown),t.lchown=r(t.lchown),t.chmod=n(t.chmod),t.fchmod=n(t.fchmod),t.lchmod=n(t.lchmod),t.chownSync=i(t.chownSync),t.fchownSync=i(t.fchownSync),t.lchownSync=i(t.lchownSync),t.chmodSync=e(t.chmodSync),t.fchmodSync=e(t.fchmodSync),t.lchmodSync=e(t.lchmodSync),t.stat=o(t.stat),t.fstat=o(t.fstat),t.lstat=o(t.lstat),t.statSync=c(t.statSync),t.fstatSync=c(t.fstatSync),t.lstatSync=c(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(t,n,e){e&&process.nextTick(e)},t.lchmodSync=function(){});t.chown&&!t.lchown&&(t.lchown=function(t,n,e,r){r&&process.nextTick(r)},t.lchownSync=function(){});"win32"===xt&&(t.rename="function"!=typeof t.rename?t.rename:function(n){function e(e,r,i){var o=Date.now(),c=0;n(e,r,(function s(u){if(u&&("EACCES"===u.code||"EPERM"===u.code)&&Date.now()-o<6e4)return setTimeout((function(){t.stat(r,(function(t,o){t&&"ENOENT"===t.code?n(e,r,s):i(u)}))}),c),void(c<100&&(c+=10));i&&i(u)}))}return Object.setPrototypeOf&&Object.setPrototypeOf(e,n),e}(t.rename));function n(n){return n?function(e,r,i){return n.call(t,e,r,(function(t){s(t)&&(t=null),i&&i.apply(this,arguments)}))}:n}function e(n){return n?function(e,r){try{return n.call(t,e,r)}catch(t){if(!s(t))throw t}}:n}function r(n){return n?function(e,r,i,o){return n.call(t,e,r,i,(function(t){s(t)&&(t=null),o&&o.apply(this,arguments)}))}:n}function i(n){return n?function(e,r,i){try{return n.call(t,e,r,i)}catch(t){if(!s(t))throw t}}:n}function o(n){return n?function(e,r,i){function o(t,n){n&&(n.uid<0&&(n.uid+=4294967296),n.gid<0&&(n.gid+=4294967296)),i&&i.apply(this,arguments)}return"function"==typeof r&&(i=r,r=null),r?n.call(t,e,r,o):n.call(t,e,o)}:n}function c(n){return n?function(e,r){var i=r?n.call(t,e,r):n.call(t,e);return i&&(i.uid<0&&(i.uid+=4294967296),i.gid<0&&(i.gid+=4294967296)),i}:n}function s(t){return!t||("ENOSYS"===t.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==t.code&&"EPERM"!==t.code))}t.read="function"!=typeof t.read?t.read:function(n){function e(e,r,i,o,c,s){var u;if(s&&"function"==typeof s){var a=0;u=function(f,l,d){if(f&&"EAGAIN"===f.code&&a<10)return a++,n.call(t,e,r,i,o,c,u);s.apply(this,arguments)}}return n.call(t,e,r,i,o,c,u)}return Object.setPrototypeOf&&Object.setPrototypeOf(e,n),e}(t.read),t.readSync="function"!=typeof t.readSync?t.readSync:(u=t.readSync,function(n,e,r,i,o){for(var c=0;;)try{return u.call(t,n,e,r,i,o)}catch(t){if("EAGAIN"===t.code&&c<10){c++;continue}throw t}});var u};var _t=a.Stream,Lt=function(t){return{ReadStream:function n(e,r){if(!(this instanceof n))return new n(e,r);_t.call(this);var i=this;this.path=e,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,r=r||{};for(var o=Object.keys(r),c=0,s=o.length;c<s;c++){var u=o[c];this[u]=r[u]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick((function(){i._read()}));t.open(this.path,this.flags,this.mode,(function(t,n){if(t)return i.emit("error",t),void(i.readable=!1);i.fd=n,i.emit("open",n),i._read()}))},WriteStream:function n(e,r){if(!(this instanceof n))return new n(e,r);_t.call(this),this.path=e,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,r=r||{};for(var i=Object.keys(r),o=0,c=i.length;o<c;o++){var s=i[o];this[s]=r[s]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}};var jt=function(t){if(null===t||"object"!=typeof t)return t;if(t instanceof Object)var n={__proto__:It(t)};else n=Object.create(null);return Object.getOwnPropertyNames(t).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})),n},It=Object.getPrototypeOf||function(t){return t.__proto__};var Yt,At,Rt=t,Wt=Ct,Jt=Lt,Bt=jt,Ut=f;function Gt(t,n){Object.defineProperty(t,Yt,{get:function(){return n}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(Yt=Symbol.for("graceful-fs.queue"),At=Symbol.for("graceful-fs.previous")):(Yt="___graceful-fs.queue",At="___graceful-fs.previous");var Ht=function(){};if(Ut.debuglog?Ht=Ut.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Ht=function(){var t=Ut.format.apply(Ut,arguments);t="GFS4: "+t.split(/\n/).join("\nGFS4: "),console.error(t)}),!Rt[Yt]){var Vt=q[Yt]||[];Gt(Rt,Vt),Rt.close=function(t){function n(n,e){return t.call(Rt,n,(function(t){t||Xt(),"function"==typeof e&&e.apply(this,arguments)}))}return Object.defineProperty(n,At,{value:t}),n}(Rt.close),Rt.closeSync=function(t){function n(n){t.apply(Rt,arguments),Xt()}return Object.defineProperty(n,At,{value:t}),n}(Rt.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){Ht(Rt[Yt]),l.equal(Rt[Yt].length,0)}))}q[Yt]||Gt(q,Rt[Yt]);var qt,zt=Kt(Bt(Rt));function Kt(t){Wt(t),t.gracefulify=Kt,t.createReadStream=function(n,e){return new t.ReadStream(n,e)},t.createWriteStream=function(n,e){return new t.WriteStream(n,e)};var n=t.readFile;t.readFile=function(t,e,r){"function"==typeof e&&(r=e,e=null);return function t(e,r,i,o){return n(e,r,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?"function"==typeof i&&i.apply(this,arguments):Zt([t,[e,r,i],n,o||Date.now(),Date.now()])}))}(t,e,r)};var e=t.writeFile;t.writeFile=function(t,n,r,i){"function"==typeof r&&(i=r,r=null);return function t(n,r,i,o,c){return e(n,r,i,(function(e){!e||"EMFILE"!==e.code&&"ENFILE"!==e.code?"function"==typeof o&&o.apply(this,arguments):Zt([t,[n,r,i,o],e,c||Date.now(),Date.now()])}))}(t,n,r,i)};var r=t.appendFile;r&&(t.appendFile=function(t,n,e,i){"function"==typeof e&&(i=e,e=null);return function t(n,e,i,o,c){return r(n,e,i,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?"function"==typeof o&&o.apply(this,arguments):Zt([t,[n,e,i,o],r,c||Date.now(),Date.now()])}))}(t,n,e,i)});var i=t.copyFile;i&&(t.copyFile=function(t,n,e,r){"function"==typeof e&&(r=e,e=0);return function t(n,e,r,o,c){return i(n,e,r,(function(i){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?"function"==typeof o&&o.apply(this,arguments):Zt([t,[n,e,r,o],i,c||Date.now(),Date.now()])}))}(t,n,e,r)});var o=t.readdir;t.readdir=function(t,n,e){"function"==typeof n&&(e=n,n=null);var r=c.test(process.version)?function(t,n,e,r){return o(t,i(t,n,e,r))}:function(t,n,e,r){return o(t,n,i(t,n,e,r))};return r(t,n,e);function i(t,n,e,i){return function(o,c){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?(c&&c.sort&&c.sort(),"function"==typeof e&&e.call(this,o,c)):Zt([r,[t,n,e],o,i||Date.now(),Date.now()])}}};var c=/^v[0-5]\./;if("v0.8"===process.version.substr(0,4)){var s=Jt(t);d=s.ReadStream,y=s.WriteStream}var u=t.ReadStream;u&&(d.prototype=Object.create(u.prototype),d.prototype.open=function(){var t=this;p(t.path,t.flags,t.mode,(function(n,e){n?(t.autoClose&&t.destroy(),t.emit("error",n)):(t.fd=e,t.emit("open",e),t.read())}))});var a=t.WriteStream;a&&(y.prototype=Object.create(a.prototype),y.prototype.open=function(){var t=this;p(t.path,t.flags,t.mode,(function(n,e){n?(t.destroy(),t.emit("error",n)):(t.fd=e,t.emit("open",e))}))}),Object.defineProperty(t,"ReadStream",{get:function(){return d},set:function(t){d=t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return y},set:function(t){y=t},enumerable:!0,configurable:!0});var f=d;Object.defineProperty(t,"FileReadStream",{get:function(){return f},set:function(t){f=t},enumerable:!0,configurable:!0});var l=y;function d(t,n){return this instanceof d?(u.apply(this,arguments),this):d.apply(Object.create(d.prototype),arguments)}function y(t,n){return this instanceof y?(a.apply(this,arguments),this):y.apply(Object.create(y.prototype),arguments)}Object.defineProperty(t,"FileWriteStream",{get:function(){return l},set:function(t){l=t},enumerable:!0,configurable:!0});var h=t.open;function p(t,n,e,r){return"function"==typeof e&&(r=e,e=null),function t(n,e,r,i,o){return h(n,e,r,(function(c,s){!c||"EMFILE"!==c.code&&"ENFILE"!==c.code?"function"==typeof i&&i.apply(this,arguments):Zt([t,[n,e,r,i],c,o||Date.now(),Date.now()])}))}(t,n,e,r)}return t.open=p,t}function Zt(t){Ht("ENQUEUE",t[0].name,t[1]),Rt[Yt].push(t),Qt()}function Xt(){for(var t=Date.now(),n=0;n<Rt[Yt].length;++n)Rt[Yt][n].length>2&&(Rt[Yt][n][3]=t,Rt[Yt][n][4]=t);Qt()}function Qt(){if(clearTimeout(qt),qt=void 0,0!==Rt[Yt].length){var t=Rt[Yt].shift(),n=t[0],e=t[1],r=t[2],i=t[3],o=t[4];if(void 0===i)Ht("RETRY",n.name,e),n.apply(null,e);else if(Date.now()-i>=6e4){Ht("TIMEOUT",n.name,e);var c=e.pop();"function"==typeof c&&c.call(null,r)}else{var s=Date.now()-o,u=Math.max(o-i,1);s>=Math.min(1.2*u,100)?(Ht("RETRY",n.name,e),n.apply(null,e.concat([i]))):Rt[Yt].push(t)}void 0===qt&&(qt=setTimeout(Qt,0))}}process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!Rt.__patched&&(zt=Kt(Rt),Rt.__patched=!0),function(t){const n=Mt.fromCallback,e=zt,r=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter((t=>"function"==typeof e[t]));Object.assign(t,e),r.forEach((r=>{t[r]=n(e[r])})),t.exists=function(t,n){return"function"==typeof n?e.exists(t,n):new Promise((n=>e.exists(t,n)))},t.read=function(t,n,r,i,o,c){return"function"==typeof c?e.read(t,n,r,i,o,c):new Promise(((c,s)=>{e.read(t,n,r,i,o,((t,n,e)=>{if(t)return s(t);c({bytesRead:n,buffer:e})}))}))},t.write=function(t,n,...r){return"function"==typeof r[r.length-1]?e.write(t,n,...r):new Promise(((i,o)=>{e.write(t,n,...r,((t,n,e)=>{if(t)return o(t);i({bytesWritten:n,buffer:e})}))}))},"function"==typeof e.writev&&(t.writev=function(t,n,...r){return"function"==typeof r[r.length-1]?e.writev(t,n,...r):new Promise(((i,o)=>{e.writev(t,n,...r,((t,n,e)=>{if(t)return o(t);i({bytesWritten:n,buffers:e})}))}))}),"function"==typeof e.realpath.native?t.realpath.native=n(e.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")}(Dt);var tn={},nn={};const en=i;nn.checkPath=function(t){if("win32"===process.platform){if(/[<>:"|?*]/.test(t.replace(en.parse(t).root,""))){const n=new Error(`Path contains invalid characters: ${t}`);throw n.code="EINVAL",n}}};const rn=Dt,{checkPath:on}=nn,cn=t=>"number"==typeof t?t:{mode:511,...t}.mode;tn.makeDir=async(t,n)=>(on(t),rn.mkdir(t,{mode:cn(n),recursive:!0})),tn.makeDirSync=(t,n)=>(on(t),rn.mkdirSync(t,{mode:cn(n),recursive:!0}));const sn=Mt.fromPromise,{makeDir:un,makeDirSync:an}=tn,fn=sn(un);var ln={mkdirs:fn,mkdirsSync:an,mkdirp:fn,mkdirpSync:an,ensureDir:fn,ensureDirSync:an};const dn=Mt.fromPromise,yn=Dt;var hn={pathExists:dn((function(t){return yn.access(t).then((()=>!0)).catch((()=>!1))})),pathExistsSync:yn.existsSync};const pn=zt;var mn=function(t,n,e,r){pn.open(t,"r+",((t,i)=>{if(t)return r(t);pn.futimes(i,n,e,(t=>{pn.close(i,(n=>{r&&r(t||n)}))}))}))},vn=function(t,n,e){const r=pn.openSync(t,"r+");return pn.futimesSync(r,n,e),pn.closeSync(r)};const Sn=Dt,wn=i,gn=f;function bn(t,n,e){const r=e.dereference?t=>Sn.stat(t,{bigint:!0}):t=>Sn.lstat(t,{bigint:!0});return Promise.all([r(t),r(n).catch((t=>{if("ENOENT"===t.code)return null;throw t}))]).then((([t,n])=>({srcStat:t,destStat:n})))}function En(t,n){return n.ino&&n.dev&&n.ino===t.ino&&n.dev===t.dev}function kn(t,n){const e=wn.resolve(t).split(wn.sep).filter((t=>t)),r=wn.resolve(n).split(wn.sep).filter((t=>t));return e.reduce(((t,n,e)=>t&&r[e]===n),!0)}function $n(t,n,e){return`Cannot ${e} '${t}' to a subdirectory of itself, '${n}'.`}var On={checkPaths:function(t,n,e,r,i){gn.callbackify(bn)(t,n,r,((r,o)=>{if(r)return i(r);const{srcStat:c,destStat:s}=o;if(s){if(En(c,s)){const r=wn.basename(t),o=wn.basename(n);return"move"===e&&r!==o&&r.toLowerCase()===o.toLowerCase()?i(null,{srcStat:c,destStat:s,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(c.isDirectory()&&!s.isDirectory())return i(new Error(`Cannot overwrite non-directory '${n}' with directory '${t}'.`));if(!c.isDirectory()&&s.isDirectory())return i(new Error(`Cannot overwrite directory '${n}' with non-directory '${t}'.`))}return c.isDirectory()&&kn(t,n)?i(new Error($n(t,n,e))):i(null,{srcStat:c,destStat:s})}))},checkPathsSync:function(t,n,e,r){const{srcStat:i,destStat:o}=function(t,n,e){let r;const i=e.dereference?t=>Sn.statSync(t,{bigint:!0}):t=>Sn.lstatSync(t,{bigint:!0}),o=i(t);try{r=i(n)}catch(t){if("ENOENT"===t.code)return{srcStat:o,destStat:null};throw t}return{srcStat:o,destStat:r}}(t,n,r);if(o){if(En(i,o)){const r=wn.basename(t),c=wn.basename(n);if("move"===e&&r!==c&&r.toLowerCase()===c.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${n}' with directory '${t}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${n}' with non-directory '${t}'.`)}if(i.isDirectory()&&kn(t,n))throw new Error($n(t,n,e));return{srcStat:i,destStat:o}},checkParentPaths:function t(n,e,r,i,o){const c=wn.resolve(wn.dirname(n)),s=wn.resolve(wn.dirname(r));if(s===c||s===wn.parse(s).root)return o();Sn.stat(s,{bigint:!0},((c,u)=>c?"ENOENT"===c.code?o():o(c):En(e,u)?o(new Error($n(n,r,i))):t(n,e,s,i,o)))},checkParentPathsSync:function t(n,e,r,i){const o=wn.resolve(wn.dirname(n)),c=wn.resolve(wn.dirname(r));if(c===o||c===wn.parse(c).root)return;let s;try{s=Sn.statSync(c,{bigint:!0})}catch(t){if("ENOENT"===t.code)return;throw t}if(En(e,s))throw new Error($n(n,r,i));return t(n,e,c,i)},isSrcSubdir:kn,areIdentical:En};const Dn=zt,Mn=i,Nn=ln.mkdirs,Fn=hn.pathExists,Pn=mn,xn=On;function Tn(t,n,e,r,i){const o=Mn.dirname(e);Fn(o,((c,s)=>c?i(c):s?_n(t,n,e,r,i):void Nn(o,(o=>o?i(o):_n(t,n,e,r,i)))))}function Cn(t,n,e,r,i,o){Promise.resolve(i.filter(e,r)).then((c=>c?t(n,e,r,i,o):o()),(t=>o(t)))}function _n(t,n,e,r,i){(r.dereference?Dn.stat:Dn.lstat)(n,((o,c)=>o?i(o):c.isDirectory()?function(t,n,e,r,i,o){return n?Yn(e,r,i,o):function(t,n,e,r,i){Dn.mkdir(e,(o=>{if(o)return i(o);Yn(n,e,r,(n=>n?i(n):In(e,t,i)))}))}(t.mode,e,r,i,o)}(c,t,n,e,r,i):c.isFile()||c.isCharacterDevice()||c.isBlockDevice()?function(t,n,e,r,i,o){return n?function(t,n,e,r,i){if(!r.overwrite)return r.errorOnExist?i(new Error(`'${e}' already exists`)):i();Dn.unlink(e,(o=>o?i(o):Ln(t,n,e,r,i)))}(t,e,r,i,o):Ln(t,e,r,i,o)}(c,t,n,e,r,i):c.isSymbolicLink()?function(t,n,e,r,i){Dn.readlink(n,((n,o)=>n?i(n):(r.dereference&&(o=Mn.resolve(process.cwd(),o)),t?void Dn.readlink(e,((n,c)=>n?"EINVAL"===n.code||"UNKNOWN"===n.code?Dn.symlink(o,e,i):i(n):(r.dereference&&(c=Mn.resolve(process.cwd(),c)),xn.isSrcSubdir(o,c)?i(new Error(`Cannot copy '${o}' to a subdirectory of itself, '${c}'.`)):t.isDirectory()&&xn.isSrcSubdir(c,o)?i(new Error(`Cannot overwrite '${c}' with '${o}'.`)):function(t,n,e){Dn.unlink(n,(r=>r?e(r):Dn.symlink(t,n,e)))}(o,e,i)))):Dn.symlink(o,e,i))))}(t,n,e,r,i):c.isSocket()?i(new Error(`Cannot copy a socket file: ${n}`)):c.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${n}`)):i(new Error(`Unknown file: ${n}`))))}function Ln(t,n,e,r,i){Dn.copyFile(n,e,(o=>o?i(o):r.preserveTimestamps?function(t,n,e,r){if(function(t){return 0==(128&t)}(t))return function(t,n,e){return In(t,128|n,e)}(e,t,(i=>i?r(i):jn(t,n,e,r)));return jn(t,n,e,r)}(t.mode,n,e,i):In(e,t.mode,i)))}function jn(t,n,e,r){!function(t,n,e){Dn.stat(t,((t,r)=>t?e(t):Pn(n,r.atime,r.mtime,e)))}(n,e,(n=>n?r(n):In(e,t,r)))}function In(t,n,e){return Dn.chmod(t,n,e)}function Yn(t,n,e,r){Dn.readdir(t,((i,o)=>i?r(i):An(o,t,n,e,r)))}function An(t,n,e,r,i){const o=t.pop();return o?function(t,n,e,r,i,o){const c=Mn.join(e,n),s=Mn.join(r,n);xn.checkPaths(c,s,"copy",i,((n,u)=>{if(n)return o(n);const{destStat:a}=u;!function(t,n,e,r,i){r.filter?Cn(_n,t,n,e,r,i):_n(t,n,e,r,i)}(a,c,s,i,(n=>n?o(n):An(t,e,r,i,o)))}))}(t,o,n,e,r,i):i()}var Rn=function(t,n,e,r){"function"!=typeof e||r?"function"==typeof e&&(e={filter:e}):(r=e,e={}),r=r||function(){},(e=e||{}).clobber=!("clobber"in e)||!!e.clobber,e.overwrite="overwrite"in e?!!e.overwrite:e.clobber,e.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0001"),xn.checkPaths(t,n,"copy",e,((i,o)=>{if(i)return r(i);const{srcStat:c,destStat:s}=o;xn.checkParentPaths(t,c,n,"copy",(i=>i?r(i):e.filter?Cn(Tn,s,t,n,e,r):Tn(s,t,n,e,r)))}))};const Wn=zt,Jn=i,Bn=ln.mkdirsSync,Un=vn,Gn=On;function Hn(t,n,e,r){const i=(r.dereference?Wn.statSync:Wn.lstatSync)(n);if(i.isDirectory())return function(t,n,e,r,i){return n?zn(e,r,i):function(t,n,e,r){return Wn.mkdirSync(e),zn(n,e,r),qn(e,t)}(t.mode,e,r,i)}(i,t,n,e,r);if(i.isFile()||i.isCharacterDevice()||i.isBlockDevice())return function(t,n,e,r,i){return n?function(t,n,e,r){if(r.overwrite)return Wn.unlinkSync(e),Vn(t,n,e,r);if(r.errorOnExist)throw new Error(`'${e}' already exists`)}(t,e,r,i):Vn(t,e,r,i)}(i,t,n,e,r);if(i.isSymbolicLink())return function(t,n,e,r){let i=Wn.readlinkSync(n);r.dereference&&(i=Jn.resolve(process.cwd(),i));if(t){let t;try{t=Wn.readlinkSync(e)}catch(t){if("EINVAL"===t.code||"UNKNOWN"===t.code)return Wn.symlinkSync(i,e);throw t}if(r.dereference&&(t=Jn.resolve(process.cwd(),t)),Gn.isSrcSubdir(i,t))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${t}'.`);if(Wn.statSync(e).isDirectory()&&Gn.isSrcSubdir(t,i))throw new Error(`Cannot overwrite '${t}' with '${i}'.`);return function(t,n){return Wn.unlinkSync(n),Wn.symlinkSync(t,n)}(i,e)}return Wn.symlinkSync(i,e)}(t,n,e,r);if(i.isSocket())throw new Error(`Cannot copy a socket file: ${n}`);if(i.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${n}`);throw new Error(`Unknown file: ${n}`)}function Vn(t,n,e,r){return Wn.copyFileSync(n,e),r.preserveTimestamps&&function(t,n,e){(function(t){return 0==(128&t)})(t)&&function(t,n){qn(t,128|n)}(e,t);(function(t,n){const e=Wn.statSync(t);Un(n,e.atime,e.mtime)})(n,e)}(t.mode,n,e),qn(e,t.mode)}function qn(t,n){return Wn.chmodSync(t,n)}function zn(t,n,e){Wn.readdirSync(t).forEach((r=>function(t,n,e,r){const i=Jn.join(n,t),o=Jn.join(e,t),{destStat:c}=Gn.checkPathsSync(i,o,"copy",r);return function(t,n,e,r){if(!r.filter||r.filter(n,e))return Hn(t,n,e,r)}(c,i,o,r)}(r,t,n,e)))}var Kn=function(t,n,e){"function"==typeof e&&(e={filter:e}),(e=e||{}).clobber=!("clobber"in e)||!!e.clobber,e.overwrite="overwrite"in e?!!e.overwrite:e.clobber,e.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0002");const{srcStat:r,destStat:i}=Gn.checkPathsSync(t,n,"copy",e);return Gn.checkParentPathsSync(t,r,n,"copy"),function(t,n,e,r){if(r.filter&&!r.filter(n,e))return;const i=Jn.dirname(e);Wn.existsSync(i)||Bn(i);return Hn(t,n,e,r)}(i,t,n,e)};var Zn={copy:(0,Mt.fromCallback)(Rn),copySync:Kn};const Xn=zt,Qn=i,te=l,ne="win32"===process.platform;function ee(t){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach((n=>{t[n]=t[n]||Xn[n],t[n+="Sync"]=t[n]||Xn[n]})),t.maxBusyTries=t.maxBusyTries||3}function re(t,n,e){let r=0;"function"==typeof n&&(e=n,n={}),te(t,"rimraf: missing path"),te.strictEqual(typeof t,"string","rimraf: path should be a string"),te.strictEqual(typeof e,"function","rimraf: callback function required"),te(n,"rimraf: invalid options argument provided"),te.strictEqual(typeof n,"object","rimraf: options should be object"),ee(n),ie(t,n,(function i(o){if(o){if(("EBUSY"===o.code||"ENOTEMPTY"===o.code||"EPERM"===o.code)&&r<n.maxBusyTries){r++;return setTimeout((()=>ie(t,n,i)),100*r)}"ENOENT"===o.code&&(o=null)}e(o)}))}function ie(t,n,e){te(t),te(n),te("function"==typeof e),n.lstat(t,((r,i)=>r&&"ENOENT"===r.code?e(null):r&&"EPERM"===r.code&&ne?oe(t,n,r,e):i&&i.isDirectory()?se(t,n,r,e):void n.unlink(t,(r=>{if(r){if("ENOENT"===r.code)return e(null);if("EPERM"===r.code)return ne?oe(t,n,r,e):se(t,n,r,e);if("EISDIR"===r.code)return se(t,n,r,e)}return e(r)}))))}function oe(t,n,e,r){te(t),te(n),te("function"==typeof r),n.chmod(t,438,(i=>{i?r("ENOENT"===i.code?null:e):n.stat(t,((i,o)=>{i?r("ENOENT"===i.code?null:e):o.isDirectory()?se(t,n,e,r):n.unlink(t,r)}))}))}function ce(t,n,e){let r;te(t),te(n);try{n.chmodSync(t,438)}catch(t){if("ENOENT"===t.code)return;throw e}try{r=n.statSync(t)}catch(t){if("ENOENT"===t.code)return;throw e}r.isDirectory()?ae(t,n,e):n.unlinkSync(t)}function se(t,n,e,r){te(t),te(n),te("function"==typeof r),n.rmdir(t,(i=>{!i||"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code?i&&"ENOTDIR"===i.code?r(e):r(i):function(t,n,e){te(t),te(n),te("function"==typeof e),n.readdir(t,((r,i)=>{if(r)return e(r);let o,c=i.length;if(0===c)return n.rmdir(t,e);i.forEach((r=>{re(Qn.join(t,r),n,(r=>{if(!o)return r?e(o=r):void(0==--c&&n.rmdir(t,e))}))}))}))}(t,n,r)}))}function ue(t,n){let e;ee(n=n||{}),te(t,"rimraf: missing path"),te.strictEqual(typeof t,"string","rimraf: path should be a string"),te(n,"rimraf: missing options"),te.strictEqual(typeof n,"object","rimraf: options should be object");try{e=n.lstatSync(t)}catch(e){if("ENOENT"===e.code)return;"EPERM"===e.code&&ne&&ce(t,n,e)}try{e&&e.isDirectory()?ae(t,n,null):n.unlinkSync(t)}catch(e){if("ENOENT"===e.code)return;if("EPERM"===e.code)return ne?ce(t,n,e):ae(t,n,e);if("EISDIR"!==e.code)throw e;ae(t,n,e)}}function ae(t,n,e){te(t),te(n);try{n.rmdirSync(t)}catch(r){if("ENOTDIR"===r.code)throw e;if("ENOTEMPTY"===r.code||"EEXIST"===r.code||"EPERM"===r.code)!function(t,n){if(te(t),te(n),n.readdirSync(t).forEach((e=>ue(Qn.join(t,e),n))),!ne){return n.rmdirSync(t,n)}{const e=Date.now();do{try{return n.rmdirSync(t,n)}catch{}}while(Date.now()-e<500)}}(t,n);else if("ENOENT"!==r.code)throw r}}var fe=re;re.sync=ue;const le=zt,de=Mt.fromCallback,ye=fe;var he={remove:de((function(t,n){if(le.rm)return le.rm(t,{recursive:!0,force:!0},n);ye(t,n)})),removeSync:function(t){if(le.rmSync)return le.rmSync(t,{recursive:!0,force:!0});ye.sync(t)}};const pe=Mt.fromPromise,me=Dt,ve=i,Se=ln,we=he,ge=pe((async function(t){let n;try{n=await me.readdir(t)}catch{return Se.mkdirs(t)}return Promise.all(n.map((n=>we.remove(ve.join(t,n)))))}));function be(t){let n;try{n=me.readdirSync(t)}catch{return Se.mkdirsSync(t)}n.forEach((n=>{n=ve.join(t,n),we.removeSync(n)}))}var Ee={emptyDirSync:be,emptydirSync:be,emptyDir:ge,emptydir:ge};const ke=Mt.fromCallback,$e=i,Oe=zt,De=ln;var Me={createFile:ke((function(t,n){function e(){Oe.writeFile(t,"",(t=>{if(t)return n(t);n()}))}Oe.stat(t,((r,i)=>{if(!r&&i.isFile())return n();const o=$e.dirname(t);Oe.stat(o,((t,r)=>{if(t)return"ENOENT"===t.code?De.mkdirs(o,(t=>{if(t)return n(t);e()})):n(t);r.isDirectory()?e():Oe.readdir(o,(t=>{if(t)return n(t)}))}))}))})),createFileSync:function(t){let n;try{n=Oe.statSync(t)}catch{}if(n&&n.isFile())return;const e=$e.dirname(t);try{Oe.statSync(e).isDirectory()||Oe.readdirSync(e)}catch(t){if(!t||"ENOENT"!==t.code)throw t;De.mkdirsSync(e)}Oe.writeFileSync(t,"")}};const Ne=Mt.fromCallback,Fe=i,Pe=zt,xe=ln,Te=hn.pathExists,{areIdentical:Ce}=On;var _e={createLink:Ne((function(t,n,e){function r(t,n){Pe.link(t,n,(t=>{if(t)return e(t);e(null)}))}Pe.lstat(n,((i,o)=>{Pe.lstat(t,((i,c)=>{if(i)return i.message=i.message.replace("lstat","ensureLink"),e(i);if(o&&Ce(c,o))return e(null);const s=Fe.dirname(n);Te(s,((i,o)=>i?e(i):o?r(t,n):void xe.mkdirs(s,(i=>{if(i)return e(i);r(t,n)}))))}))}))})),createLinkSync:function(t,n){let e;try{e=Pe.lstatSync(n)}catch{}try{const n=Pe.lstatSync(t);if(e&&Ce(n,e))return}catch(t){throw t.message=t.message.replace("lstat","ensureLink"),t}const r=Fe.dirname(n);return Pe.existsSync(r)||xe.mkdirsSync(r),Pe.linkSync(t,n)}};const Le=i,je=zt,Ie=hn.pathExists;var Ye={symlinkPaths:function(t,n,e){if(Le.isAbsolute(t))return je.lstat(t,(n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),e(n)):e(null,{toCwd:t,toDst:t})));{const r=Le.dirname(n),i=Le.join(r,t);return Ie(i,((n,o)=>n?e(n):o?e(null,{toCwd:i,toDst:t}):je.lstat(t,(n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),e(n)):e(null,{toCwd:t,toDst:Le.relative(r,t)})))))}},symlinkPathsSync:function(t,n){let e;if(Le.isAbsolute(t)){if(e=je.existsSync(t),!e)throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}{const r=Le.dirname(n),i=Le.join(r,t);if(e=je.existsSync(i),e)return{toCwd:i,toDst:t};if(e=je.existsSync(t),!e)throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:Le.relative(r,t)}}}};const Ae=zt;var Re={symlinkType:function(t,n,e){if(e="function"==typeof n?n:e,n="function"!=typeof n&&n)return e(null,n);Ae.lstat(t,((t,r)=>{if(t)return e(null,"file");n=r&&r.isDirectory()?"dir":"file",e(null,n)}))},symlinkTypeSync:function(t,n){let e;if(n)return n;try{e=Ae.lstatSync(t)}catch{return"file"}return e&&e.isDirectory()?"dir":"file"}};const We=Mt.fromCallback,Je=i,Be=Dt,Ue=ln.mkdirs,Ge=ln.mkdirsSync,He=Ye.symlinkPaths,Ve=Ye.symlinkPathsSync,qe=Re.symlinkType,ze=Re.symlinkTypeSync,Ke=hn.pathExists,{areIdentical:Ze}=On;function Xe(t,n,e,r){He(t,n,((i,o)=>{if(i)return r(i);t=o.toDst,qe(o.toCwd,e,((e,i)=>{if(e)return r(e);const o=Je.dirname(n);Ke(o,((e,c)=>e?r(e):c?Be.symlink(t,n,i,r):void Ue(o,(e=>{if(e)return r(e);Be.symlink(t,n,i,r)}))))}))}))}var Qe={createSymlink:We((function(t,n,e,r){r="function"==typeof e?e:r,e="function"!=typeof e&&e,Be.lstat(n,((i,o)=>{!i&&o.isSymbolicLink()?Promise.all([Be.stat(t),Be.stat(n)]).then((([i,o])=>{if(Ze(i,o))return r(null);Xe(t,n,e,r)})):Xe(t,n,e,r)}))})),createSymlinkSync:function(t,n,e){let r;try{r=Be.lstatSync(n)}catch{}if(r&&r.isSymbolicLink()){const e=Be.statSync(t),r=Be.statSync(n);if(Ze(e,r))return}const i=Ve(t,n);t=i.toDst,e=ze(i.toCwd,e);const o=Je.dirname(n);return Be.existsSync(o)||Ge(o),Be.symlinkSync(t,n,e)}};const{createFile:tr,createFileSync:nr}=Me,{createLink:er,createLinkSync:rr}=_e,{createSymlink:ir,createSymlinkSync:or}=Qe;var cr={createFile:tr,createFileSync:nr,ensureFile:tr,ensureFileSync:nr,createLink:er,createLinkSync:rr,ensureLink:er,ensureLinkSync:rr,createSymlink:ir,createSymlinkSync:or,ensureSymlink:ir,ensureSymlinkSync:or};var sr={stringify:function(t,{EOL:n="\n",finalEOL:e=!0,replacer:r=null,spaces:i}={}){const o=e?n:"";return JSON.stringify(t,r,i).replace(/\n/g,n)+o},stripBom:function(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t.replace(/^\uFEFF/,"")}};let ur;try{ur=zt}catch(n){ur=t}const ar=Mt,{stringify:fr,stripBom:lr}=sr;const dr=ar.fromPromise((async function(t,n={}){"string"==typeof n&&(n={encoding:n});const e=n.fs||ur,r=!("throws"in n)||n.throws;let i,o=await ar.fromCallback(e.readFile)(t,n);o=lr(o);try{i=JSON.parse(o,n?n.reviver:null)}catch(n){if(r)throw n.message=`${t}: ${n.message}`,n;return null}return i}));const yr=ar.fromPromise((async function(t,n,e={}){const r=e.fs||ur,i=fr(n,e);await ar.fromCallback(r.writeFile)(t,i,e)}));const hr={readFile:dr,readFileSync:function(t,n={}){"string"==typeof n&&(n={encoding:n});const e=n.fs||ur,r=!("throws"in n)||n.throws;try{let r=e.readFileSync(t,n);return r=lr(r),JSON.parse(r,n.reviver)}catch(n){if(r)throw n.message=`${t}: ${n.message}`,n;return null}},writeFile:yr,writeFileSync:function(t,n,e={}){const r=e.fs||ur,i=fr(n,e);return r.writeFileSync(t,i,e)}};var pr={readJson:hr.readFile,readJsonSync:hr.readFileSync,writeJson:hr.writeFile,writeJsonSync:hr.writeFileSync};const mr=Mt.fromCallback,vr=zt,Sr=i,wr=ln,gr=hn.pathExists;var br={outputFile:mr((function(t,n,e,r){"function"==typeof e&&(r=e,e="utf8");const i=Sr.dirname(t);gr(i,((o,c)=>o?r(o):c?vr.writeFile(t,n,e,r):void wr.mkdirs(i,(i=>{if(i)return r(i);vr.writeFile(t,n,e,r)}))))})),outputFileSync:function(t,...n){const e=Sr.dirname(t);if(vr.existsSync(e))return vr.writeFileSync(t,...n);wr.mkdirsSync(e),vr.writeFileSync(t,...n)}};const{stringify:Er}=sr,{outputFile:kr}=br;var $r=async function(t,n,e={}){const r=Er(n,e);await kr(t,r,e)};const{stringify:Or}=sr,{outputFileSync:Dr}=br;var Mr=function(t,n,e){const r=Or(n,e);Dr(t,r,e)};const Nr=Mt.fromPromise,Fr=pr;Fr.outputJson=Nr($r),Fr.outputJsonSync=Mr,Fr.outputJSON=Fr.outputJson,Fr.outputJSONSync=Fr.outputJsonSync,Fr.writeJSON=Fr.writeJson,Fr.writeJSONSync=Fr.writeJsonSync,Fr.readJSON=Fr.readJson,Fr.readJSONSync=Fr.readJsonSync;var Pr=Fr;const xr=zt,Tr=i,Cr=Zn.copy,_r=he.remove,Lr=ln.mkdirp,jr=hn.pathExists,Ir=On;function Yr(t,n,e,r,i){return r?Ar(t,n,e,i):e?_r(n,(r=>r?i(r):Ar(t,n,e,i))):void jr(n,((r,o)=>r?i(r):o?i(new Error("dest already exists.")):Ar(t,n,e,i)))}function Ar(t,n,e,r){xr.rename(t,n,(i=>i?"EXDEV"!==i.code?r(i):function(t,n,e,r){Cr(t,n,{overwrite:e,errorOnExist:!0},(n=>n?r(n):_r(t,r)))}(t,n,e,r):r()))}var Rr=function(t,n,e,r){"function"==typeof e&&(r=e,e={});const i=(e=e||{}).overwrite||e.clobber||!1;Ir.checkPaths(t,n,"move",e,((e,o)=>{if(e)return r(e);const{srcStat:c,isChangingCase:s=!1}=o;Ir.checkParentPaths(t,c,n,"move",(e=>e?r(e):function(t){const n=Tr.dirname(t);return Tr.parse(n).root===n}(n)?Yr(t,n,i,s,r):void Lr(Tr.dirname(n),(e=>e?r(e):Yr(t,n,i,s,r)))))}))};const Wr=zt,Jr=i,Br=Zn.copySync,Ur=he.removeSync,Gr=ln.mkdirpSync,Hr=On;function Vr(t,n,e){try{Wr.renameSync(t,n)}catch(r){if("EXDEV"!==r.code)throw r;return function(t,n,e){return Br(t,n,{overwrite:e,errorOnExist:true}),Ur(t)}(t,n,e)}}var qr=function(t,n,e){const r=(e=e||{}).overwrite||e.clobber||!1,{srcStat:i,isChangingCase:o=!1}=Hr.checkPathsSync(t,n,"move",e);return Hr.checkParentPathsSync(t,i,n,"move"),function(t){const n=Jr.dirname(t);return Jr.parse(n).root===n}(n)||Gr(Jr.dirname(n)),function(t,n,e,r){if(r)return Vr(t,n,e);if(e)return Ur(n),Vr(t,n,e);if(Wr.existsSync(n))throw new Error("dest already exists.");return Vr(t,n,e)}(t,n,r,o)};var zr={move:(0,Mt.fromCallback)(Rr),moveSync:qr},Kr={...Dt,...Zn,...Ee,...cr,...Pr,...ln,...zr,...br,...hn,...he};function Zr(t,n){return void 0===t&&(t=""),void 0===n&&(n=s()),o(n,t)}function Xr(t,n,e){void 0===t&&(t=""),void 0===n&&(n=""),Kr.copySync(t,n,{filter:e})}function Qr(t){void 0===t&&(t=""),Kr.ensureDirSync(t)}function ti(t,r,i){var c;if(void 0===t&&(t="bfs"),void 0===r&&(r=s()),void 0===i&&(i=/(node_modules|\.git|\.DS_Store)$/),"bfs"===t){var u=[],a=[];!i.test(r)&&a.unshift(r);for(var f=function(){var t=null!==(c=a.shift())&&void 0!==c?c:"",r=n(t);if(r&&!i.test(t)){var s=r.isDirectory,f=r.isFile;s()?e(t).forEach((function(n){var e=o(t,n);a.push(e)})):f()&&u.push(t)}};a.length;)f();return u}if("dfs"===t){u=[];var l=n(r);return i.test(r)||(l.isDirectory()?e(r).reduce((function(t,n){var e=ti("dfs",o(r,n),i);return t.push.apply(t,et([],nt(e),!1)),t}),u):l.isFile()&&u.push(r)),u}return[]}function ni(t,n){void 0===t&&(t=""),void 0===n&&(n=s());var e=Zr(t,n),i=c(e);if(!/^\.json$/.test(i))return{};var o=r(e,"utf8");return JSON.parse(o)}function ei(t){void 0===t&&(t=""),Kr.removeSync(t)}function ri(){var t,n="127.0.0.1",e=d();for(var r in e)for(var i=null!==(t=e[r])&&void 0!==t?t:[],o=0;o<i.length;o++){var c=i[o],s=c.address,u=c.family,a=c.internal;if("IPv4"===u&&s!==n&&!a)return s}return n}function ii(t){return void 0===t&&(t="node -v"),p(t,{encoding:"utf8"})}function oi(){var t,n=y().toLocaleLowerCase(),e={windows:/windows/g,macos:/darwin/g,linux:/linux/g},r=null!==(t=Object.keys(e).find((function(t){return e[t].test(n)})))&&void 0!==t?t:"unknow";return{nodeVs:ii("node -v").replace(/(v|\n|\r\n)/g,""),npmVs:ii("npm -v").replace(/\n/g,""),system:r,systemVs:h().split("-")[0]}}export{Zr as AbsPath,rt as AsyncTo,mt as CheckText,vt as CheckTextPlus,Xr as CopyDir,Qr as CreateDir,it as Debounce,wt as DesePhone,g as EnvType,st as FillNum,yt as FilterObj,ut as FormatByte,Z as FormatCountdown,gt as FormatPhone,X as FormatTimeDiff,ri as GetIP,m as GroupArrKey,B as IsArguments,P as IsArray,W as IsAsyncFunction,N as IsBoolean,L as IsClass,T as IsDate,R as IsElement,G as IsEmpty,H as IsEmptyArray,V as IsEmptyObject,U as IsError,_ as IsFunction,I as IsMap,E as IsNode,O as IsNull,M as IsNumber,x as IsObject,C as IsRegExp,j as IsSet,D as IsString,F as IsSymbol,J as IsSyncFunction,$ as IsUndefined,A as IsWeakMap,Y as IsWeakSet,b as IsWeb,St as MatchBracketText,oi as NodeType,bt as RandomColor,Et as RandomId,at as RandomNum,ft as RandomNumPlus,ti as ReadDir,ni as ReadJson,v as RecordArrPosition,ei as RemoveDir,kt as RemoveTag,$t as ReverseText,lt as RoundNum,ii as RunCmd,Ot as StartScore,S as StatArrCount,w as StatArrKeyword,dt as ThousandNum,ot as Throttle,k as TypeOf,ct as WaitFor};
