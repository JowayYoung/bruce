import e,{existsSync as t,statSync as n,readdirSync as s,readFileSync as r}from"fs";import i,{join as o,extname as c}from"path";import{cwd as a}from"process";import l from"constants";import u from"stream";import f from"util";import h from"assert";import{createConnection as d}from"net";import{networkInterfaces as p,type as m,release as y}from"os";import{execSync as g}from"child_process";function b(e,t){return void 0===e&&(e=[]),void 0===t&&(t=1),e.length?e.reduce((function(e,n){return e[e.length-1].length===t?e.push([n]):e[e.length-1].push(n),e}),[[]]):[]}function v(e,t){return void 0===e&&(e=[]),void 0===t&&(t=""),t?e.reduce((function(e,n){return!e[n[t]]&&(e[n[t]]=[]),e[n[t]].push(n),e}),{}):{}}function w(e){return void 0===e&&(e=[]),e.reduce((function(e,t){return e[t]=(e[t]||0)+1,e}),{})}function S(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),t.reduce((function(t,n){return e.some((function(e){return e.includes(n)}))&&t.push(n),t}),[])}function k(e,t){return void 0===e&&(e=[]),e.reduce((function(e,n,s){return n===t&&e.push(s),e}),[])}function E(){return"undefined"==typeof window?"node":"web"}function O(){return"web"===E()}function N(){return"node"===E()}function $(e){return Object.prototype.toString.call(e).replace(/\[object (\w+)\]/,"$1").toLowerCase()}function A(e){return"undefined"===$(e)}function T(e){return"null"===$(e)}function L(e){return"string"===$(e)}function x(e){return"number"===$(e)}function I(e){return"boolean"===$(e)}function C(e){return"symbol"===$(e)}function D(e){return"array"===$(e)}function _(e){return"object"===$(e)}function M(e){return"date"===$(e)}function j(e){return"regexp"===$(e)}function P(e){return"function"===$(e)}function F(e){return P(e)&&/^class\s+[\dA-Za-z]/.test(e.toString())}function B(e){return"set"===$(e)}function K(e){return"map"===$(e)}function U(e){return"weakset"===$(e)}function q(e){return"weakmap"===$(e)}function R(e){return/^html(.+?)element$/.test($(e))}function Y(e){return"asyncfunction"===$(e)}function W(e){return"function"===$(e)}function J(e){return"arguments"===$(e)}function V(e){return e instanceof Error}function G(e){return!e}function H(e){return Array.isArray(e)&&!e.length}function Q(e){return _(e)&&!Object.keys(e).length}var z="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},X={};({get exports(){return X},set exports(e){X=e}}).exports=function(){var e=1e3,t=6e4,n=36e5,s="millisecond",r="second",i="minute",o="hour",c="day",a="week",l="month",u="quarter",f="year",h="date",d="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],n=e%100;return"["+e+(t[(n-20)%10]||t[n]||t[0])+"]"}},g=function(e,t,n){var s=String(e);return!s||s.length>=t?e:""+Array(t+1-s.length).join(n)+e},b={s:g,z:function(e){var t=-e.utcOffset(),n=Math.abs(t),s=Math.floor(n/60),r=n%60;return(t<=0?"+":"-")+g(s,2,"0")+":"+g(r,2,"0")},m:function e(t,n){if(t.date()<n.date())return-e(n,t);var s=12*(n.year()-t.year())+(n.month()-t.month()),r=t.clone().add(s,l),i=n-r<0,o=t.clone().add(s+(i?-1:1),l);return+(-(s+(n-r)/(i?r-o:o-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:f,w:a,d:c,D:h,h:o,m:i,s:r,ms:s,Q:u}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},v="en",w={};w[v]=y;var S=function(e){return e instanceof N},k=function e(t,n,s){var r;if(!t)return v;if("string"==typeof t){var i=t.toLowerCase();w[i]&&(r=i),n&&(w[i]=n,r=i);var o=t.split("-");if(!r&&o.length>1)return e(o[0])}else{var c=t.name;w[c]=t,r=c}return!s&&r&&(v=r),r||!s&&v},E=function(e,t){if(S(e))return e.clone();var n="object"==typeof t?t:{};return n.date=e,n.args=arguments,new N(n)},O=b;O.l=k,O.i=S,O.w=function(e,t){return E(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var N=function(){function y(e){this.$L=k(e.locale,null,!0),this.parse(e)}var g=y.prototype;return g.parse=function(e){this.$d=function(e){var t=e.date,n=e.utc;if(null===t)return new Date(NaN);if(O.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var s=t.match(p);if(s){var r=s[2]-1||0,i=(s[7]||"0").substring(0,3);return n?new Date(Date.UTC(s[1],r,s[3]||1,s[4]||0,s[5]||0,s[6]||0,i)):new Date(s[1],r,s[3]||1,s[4]||0,s[5]||0,s[6]||0,i)}}return new Date(t)}(e),this.$x=e.x||{},this.init()},g.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},g.$utils=function(){return O},g.isValid=function(){return!(this.$d.toString()===d)},g.isSame=function(e,t){var n=E(e);return this.startOf(t)<=n&&n<=this.endOf(t)},g.isAfter=function(e,t){return E(e)<this.startOf(t)},g.isBefore=function(e,t){return this.endOf(t)<E(e)},g.$g=function(e,t,n){return O.u(e)?this[t]:this.set(n,e)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(e,t){var n=this,s=!!O.u(t)||t,u=O.p(e),d=function(e,t){var r=O.w(n.$u?Date.UTC(n.$y,t,e):new Date(n.$y,t,e),n);return s?r:r.endOf(c)},p=function(e,t){return O.w(n.toDate()[e].apply(n.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(t)),n)},m=this.$W,y=this.$M,g=this.$D,b="set"+(this.$u?"UTC":"");switch(u){case f:return s?d(1,0):d(31,11);case l:return s?d(1,y):d(0,y+1);case a:var v=this.$locale().weekStart||0,w=(m<v?m+7:m)-v;return d(s?g-w:g+(6-w),y);case c:case h:return p(b+"Hours",0);case o:return p(b+"Minutes",1);case i:return p(b+"Seconds",2);case r:return p(b+"Milliseconds",3);default:return this.clone()}},g.endOf=function(e){return this.startOf(e,!1)},g.$set=function(e,t){var n,a=O.p(e),u="set"+(this.$u?"UTC":""),d=(n={},n[c]=u+"Date",n[h]=u+"Date",n[l]=u+"Month",n[f]=u+"FullYear",n[o]=u+"Hours",n[i]=u+"Minutes",n[r]=u+"Seconds",n[s]=u+"Milliseconds",n)[a],p=a===c?this.$D+(t-this.$W):t;if(a===l||a===f){var m=this.clone().set(h,1);m.$d[d](p),m.init(),this.$d=m.set(h,Math.min(this.$D,m.daysInMonth())).$d}else d&&this.$d[d](p);return this.init(),this},g.set=function(e,t){return this.clone().$set(e,t)},g.get=function(e){return this[O.p(e)]()},g.add=function(s,u){var h,d=this;s=Number(s);var p=O.p(u),m=function(e){var t=E(d);return O.w(t.date(t.date()+Math.round(e*s)),d)};if(p===l)return this.set(l,this.$M+s);if(p===f)return this.set(f,this.$y+s);if(p===c)return m(1);if(p===a)return m(7);var y=(h={},h[i]=t,h[o]=n,h[r]=e,h)[p]||1,g=this.$d.getTime()+s*y;return O.w(g,this)},g.subtract=function(e,t){return this.add(-1*e,t)},g.format=function(e){var t=this,n=this.$locale();if(!this.isValid())return n.invalidDate||d;var s=e||"YYYY-MM-DDTHH:mm:ssZ",r=O.z(this),i=this.$H,o=this.$m,c=this.$M,a=n.weekdays,l=n.months,u=function(e,n,r,i){return e&&(e[n]||e(t,s))||r[n].slice(0,i)},f=function(e){return O.s(i%12||12,e,"0")},h=n.meridiem||function(e,t,n){var s=e<12?"AM":"PM";return n?s.toLowerCase():s},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:c+1,MM:O.s(c+1,2,"0"),MMM:u(n.monthsShort,c,l,3),MMMM:u(l,c),D:this.$D,DD:O.s(this.$D,2,"0"),d:String(this.$W),dd:u(n.weekdaysMin,this.$W,a,2),ddd:u(n.weekdaysShort,this.$W,a,3),dddd:a[this.$W],H:String(i),HH:O.s(i,2,"0"),h:f(1),hh:f(2),a:h(i,o,!0),A:h(i,o,!1),m:String(o),mm:O.s(o,2,"0"),s:String(this.$s),ss:O.s(this.$s,2,"0"),SSS:O.s(this.$ms,3,"0"),Z:r};return s.replace(m,(function(e,t){return t||p[e]||r.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(s,h,d){var p,m=O.p(h),y=E(s),g=(y.utcOffset()-this.utcOffset())*t,b=this-y,v=O.m(this,y);return v=(p={},p[f]=v/12,p[l]=v,p[u]=v/3,p[a]=(b-g)/6048e5,p[c]=(b-g)/864e5,p[o]=b/n,p[i]=b/t,p[r]=b/e,p)[m]||b,d?v:O.a(v)},g.daysInMonth=function(){return this.endOf(l).$D},g.$locale=function(){return w[this.$L]},g.locale=function(e,t){if(!e)return this.$L;var n=this.clone(),s=k(e,t,!0);return s&&(n.$L=s),n},g.clone=function(){return O.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},y}(),$=N.prototype;return E.prototype=$,[["$ms",s],["$s",r],["$m",i],["$H",o],["$W",c],["$M",l],["$y",f],["$D",h]].forEach((function(e){$[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),E.extend=function(e,t){return e.$i||(e(t,N,E),e.$i=!0),E},E.locale=k,E.isDayjs=S,E.unix=function(e){return E(1e3*e)},E.en=w[v],E.Ls=w,E.p={},E}();var Z=X;function ee(e){if(!e)return"时间无效";var t=+new Date,n=+new Date(e)-t;if(n>=0){var s=Math.floor(n/1e3/3600/24),r=Math.floor(n/1e3/60/60%24),i=Math.floor(n/1e3/60%60),o=Math.floor(n/1e3%60),c=s?"".concat(s,"天"):"",a=r?"".concat(r,"时"):"",l=i?"".concat(i,"分"):"",u=o?"".concat(o,"秒"):"";return"".concat(c).concat(a).concat(l).concat(u)}return"时间已到"}function te(e,t){if(void 0===t&&(t="YYYY-MM-DD"),!e)return"时间无效";var n=+new Date,s=+new Date(e),r=n-s,i=r>=0?"前":"后",o=Math.abs(r),c=30.4375,a=36e5,l=24*a,u=o/6e4,f=o/a,h=o/l,d=o/26298e5;return o/315576e5>=1||d>=12?Z(s).format(t):d>=1&&d<12?"".concat(parseInt(d.toString()),"个月").concat(i):h>=1&&h<c?"".concat(parseInt(h.toString()),"天").concat(i):f>=1&&f<24?"".concat(parseInt(f.toString()),"小时").concat(i):u>=1&&u<60?"".concat(parseInt(u.toString()),"分钟").concat(i):r>=0?"刚刚":"准备"}function ne(e,t,n,s){return new(n||(n=Promise))((function(r,i){function o(e){try{a(s.next(e))}catch(e){i(e)}}function c(e){try{a(s.throw(e))}catch(e){i(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}a((s=s.apply(e,t||[])).next())}))}function se(e,t){var n,s,r,i,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(a){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(o=0)),o;)try{if(n=1,s&&(r=2&c[0]?s.return:c[0]?s.throw||((r=s.return)&&r.call(s),0):s.next)&&!(r=r.call(s,c[1])).done)return r;switch(s=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,s=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==c[0]&&2!==c[0])){o=0;continue}if(3===c[0]&&(!r||c[1]>r[0]&&c[1]<r[3])){o.label=c[1];break}if(6===c[0]&&o.label<r[1]){o.label=r[1],r=c;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(c);break}r[2]&&o.ops.pop(),o.trys.pop();continue}c=t.call(e,o)}catch(e){c=[6,e],s=0}finally{n=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,a])}}}function re(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var s,r,i=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(s=i.next()).done;)o.push(s.value)}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o}function ie(e,t,n){if(n||2===arguments.length)for(var s,r=0,i=t.length;r<i;r++)!s&&r in t||(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function oe(e,t){return ne(this,void 0,void 0,(function(){return se(this,(function(n){switch(n.label){case 0:return[4,e.then((function(e){return[null,e]})).catch((function(e){return[t?Object.assign({},e,t):e,void 0]}))];case 1:return[2,n.sent()]}}))}))}function ce(e,t){var n;return void 0===t&&(t=50),function(){for(var s=this,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];n&&clearTimeout(n),n=setTimeout((function(){return e.apply(s,r)}),t)}}function ae(e,t){var n;void 0===t&&(t=50);var s=!1,r=0;return function(){for(var i=this,o=[],c=0;c<arguments.length;c++)o[c]=arguments[c];s?(clearTimeout(n),n=setTimeout((function(){Date.now()-r>=t&&(e.apply(i,o),r=Date.now())}),Math.max(t-(Date.now()-r),0))):(e.apply(this,o),r=Date.now(),s=!0)}}function le(e){return void 0===e&&(e=1e3),ne(this,void 0,void 0,(function(){return se(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){return setTimeout((function(){return t(!0)}),e)}))];case 1:return[2,t.sent()]}}))}))}function ue(e,t,n){if(void 0===e&&(e="+"),void 0===t&&(t=0),void 0===n&&(n=0),t=parseFloat(t.toString()),n=parseFloat(n.toString()),isNaN(t)||isNaN(n))return NaN;var s=(t.toString().split(".")[1]||"").length,r=(n.toString().split(".")[1]||"").length,i=Math.max(s,r,0),o=Math.pow(10,i),c=Math.round(t*o),a=Math.round(n*o);return"+"===e?(c+a)/o:"-"===e?(c-a)/o:"*"===e?c*a/(o*o):"/"===e?c/a:(c+a)/o}function fe(e){void 0===e&&(e="+");for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var s={"*":1,"+":0,"/":1,"-":0}[e]||0,r=0;r<t.length;r++)s=0!==r||"-"!==e&&"/"!==e?ue(e,s,t[r]):t[r];return s}function he(e,t){return void 0===e&&(e=0),void 0===t&&(t=0),e.toString().padStart(t,"0")}function de(e){var t=e.dec,n=void 0===t?2:t,s=e.num,r=void 0===s?0:s,i=e.type,o=void 0===i?"round":i,c=Math.pow(10,n);return(Math[o]||Math.round)(r*c)/c}function pe(e){if(void 0===e&&(e=0),0===e)return"0 B";var t=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,t)).toPrecision(3)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t]}function me(e,t){return void 0===e&&(e=0),void 0===t&&(t=10),Math.floor(Math.random()*(t-e+1)+e)}function ye(e,t,n){void 0===e&&(e=0),void 0===t&&(t=10),void 0===n&&(n=1);for(var s=[];;){for(var r=!1,i=me(e,t),o=0;o<s.length;o++)if(i===s[o]){r=!0;break}if(r||s.push(i),s.length===n)return s}}function ge(e){var t=e.dec,n=void 0===t?2:t,s=e.num,r=void 0===s?0:s,i=e.per;return void 0!==i&&i?"".concat(Math.round(r*Math.pow(10,n)*100)/Math.pow(10,n),"%"):Math.round(r*Math.pow(10,n))/Math.pow(10,n)}function be(e){return void 0===e&&(e=0),e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function ve(e,t){return void 0===e&&(e={}),void 0===t&&(t=""),t in e}function we(e,t){return void 0===e&&(e={}),void 0===t&&(t=[]),Object.keys(e).reduce((function(n,s){return t.includes(s)&&(n[s]=e[s]),n}),{})}function Se(e,t){for(var n in void 0===e&&(e={}),void 0===t&&(t=!1),e)if({}.hasOwnProperty.call(e,n)){var s=e[n];(t?!s:""===s)&&delete e[n]}}var ke={address:{msg:"地址只能由2~200位中文、英文、数字或空格组成",regexp:/^[\u4e00-\u9fa5A-Za-z0-9 ]{2,200}$/g},count:{msg:"数量只能由数字组成",regexp:/^\d{1,}$/g},date:{msg:"日期只能由YYYY-MM-DD HH:mm:ss形式组成",regexp:/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/g},email:{msg:"邮箱只能由xxx@yyy.zzz形式组成",regexp:/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/g},idcard:{msg:"身份证只能由13位数字或12位数字与X组成",regexp:/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/g},image:{msg:"图片只能是JPG、PNG、GIF、SVG或WEBP类型",regexp:/\.(jpe?g|png|gif|svg|webp)$/g},name:{msg:"名称只能由2~50位中文、英文、数字、下划线或中划线组成",regexp:/^[\u4e00-\u9fa5\w-]{2,50}$/g},number:{msg:"计数只能由数字或小数点组成",regexp:/^[+-]?(0|([1-9]\d*))(\.\d+)?$/g},password:{msg:"密码只能由8~20位英文、数字或符号至少两种组成",regexp:/^(?![0-9]+$)(?![a-z]+$)(?![A-Z]+$)(?!([^(0-9a-zA-Z)])+$)^.{8,20}$/g},phone:{msg:"手机只能由11位数字组成且符合通讯运营商规范",regexp:/^1\d{10}$/g}},Ee="^$.*+-?=!:|\\/()[]{}".split("");function Oe(e,t){void 0===e&&(e="phone"),void 0===t&&(t="");var n=ke[e],s=n.regexp,r=n.msg,i=s.test(t);return{flag:i,msg:i?"":r}}function Ne(e,t,n){void 0===t&&(t=""),void 0===n&&(n="");var s=e.test(t);return{flag:s,msg:s?"":n}}function $e(e,t){var n;void 0===e&&(e="(*)"),void 0===t&&(t="");var s=e.split("*").map((function(e){return Ee.includes(e)?"\\"+e:e})),r=new RegExp(s[0]+"(.+?)"+s[1],"g");return(null!==(n=t.match(r))&&void 0!==n?n:[]).map((function(e){return e.replace(r,"$1")}))}function Ae(e){return void 0===e&&(e=""),ke.phone.regexp.test(e)?e.toString().replace(/(\d{3})\d*(\d{4})/g,"$1****$2"):e}function Te(e,t){return void 0===e&&(e=""),void 0===t&&(t="-"),ke.phone.regexp.test(e)&&["-"," "].includes(t)?e.toString().replace(/(\d{3})(\d{4})(\d{4})/g,"$1".concat(t,"$2").concat(t,"$3")):e}function Le(){return"#"+Math.floor(16777215*Math.random()).toString(16).padEnd(6,"0")}function xe(e){return void 0===e&&(e=5),(e<1||e>10)&&(e=5),Math.random().toString(36).substr(3,e)}function Ie(e){return void 0===e&&(e=""),e.replace(/<[^>]*>/g,"")}function Ce(e){return void 0===e&&(e=""),e.split("").reduceRight((function(e,t){return e+t}))}function De(e,t){return void 0===e&&(e=0),void 0===t&&(t=5),e<0&&(e=0),e>t&&(e=t),ie(ie([],re(new Array(t).fill("★")),!1),re(new Array(t).fill("☆")),!1).join("").slice(t-e,2*t-e)}var _e={},Me={fromCallback:function(e){return Object.defineProperty((function(...t){if("function"!=typeof t[t.length-1])return new Promise(((n,s)=>{e.call(this,...t,((e,t)=>null!=e?s(e):n(t)))}));e.apply(this,t)}),"name",{value:e.name})},fromPromise:function(e){return Object.defineProperty((function(...t){const n=t[t.length-1];if("function"!=typeof n)return e.apply(this,t);e.apply(this,t.slice(0,-1)).then((e=>n(null,e)),n)}),"name",{value:e.name})}},je=l,Pe=process.cwd,Fe=null,Be=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Fe||(Fe=Pe.call(process)),Fe};try{process.cwd()}catch(e){}if("function"==typeof process.chdir){var Ke=process.chdir;process.chdir=function(e){Fe=null,Ke.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Ke)}var Ue=function(e){je.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(e){e.lchmod=function(t,n,s){e.open(t,je.O_WRONLY|je.O_SYMLINK,n,(function(t,r){t?s&&s(t):e.fchmod(r,n,(function(t){e.close(r,(function(e){s&&s(t||e)}))}))}))},e.lchmodSync=function(t,n){var s,r=e.openSync(t,je.O_WRONLY|je.O_SYMLINK,n),i=!0;try{s=e.fchmodSync(r,n),i=!1}finally{if(i)try{e.closeSync(r)}catch(e){}else e.closeSync(r)}return s}}(e);e.lutimes||function(e){je.hasOwnProperty("O_SYMLINK")&&e.futimes?(e.lutimes=function(t,n,s,r){e.open(t,je.O_SYMLINK,(function(t,i){t?r&&r(t):e.futimes(i,n,s,(function(t){e.close(i,(function(e){r&&r(t||e)}))}))}))},e.lutimesSync=function(t,n,s){var r,i=e.openSync(t,je.O_SYMLINK),o=!0;try{r=e.futimesSync(i,n,s),o=!1}finally{if(o)try{e.closeSync(i)}catch(e){}else e.closeSync(i)}return r}):e.futimes&&(e.lutimes=function(e,t,n,s){s&&process.nextTick(s)},e.lutimesSync=function(){})}(e);e.chown=s(e.chown),e.fchown=s(e.fchown),e.lchown=s(e.lchown),e.chmod=t(e.chmod),e.fchmod=t(e.fchmod),e.lchmod=t(e.lchmod),e.chownSync=r(e.chownSync),e.fchownSync=r(e.fchownSync),e.lchownSync=r(e.lchownSync),e.chmodSync=n(e.chmodSync),e.fchmodSync=n(e.fchmodSync),e.lchmodSync=n(e.lchmodSync),e.stat=i(e.stat),e.fstat=i(e.fstat),e.lstat=i(e.lstat),e.statSync=o(e.statSync),e.fstatSync=o(e.fstatSync),e.lstatSync=o(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(e,t,n){n&&process.nextTick(n)},e.lchmodSync=function(){});e.chown&&!e.lchown&&(e.lchown=function(e,t,n,s){s&&process.nextTick(s)},e.lchownSync=function(){});"win32"===Be&&(e.rename="function"!=typeof e.rename?e.rename:function(t){function n(n,s,r){var i=Date.now(),o=0;t(n,s,(function c(a){if(a&&("EACCES"===a.code||"EPERM"===a.code)&&Date.now()-i<6e4)return setTimeout((function(){e.stat(s,(function(e,i){e&&"ENOENT"===e.code?t(n,s,c):r(a)}))}),o),void(o<100&&(o+=10));r&&r(a)}))}return Object.setPrototypeOf&&Object.setPrototypeOf(n,t),n}(e.rename));function t(t){return t?function(n,s,r){return t.call(e,n,s,(function(e){c(e)&&(e=null),r&&r.apply(this,arguments)}))}:t}function n(t){return t?function(n,s){try{return t.call(e,n,s)}catch(e){if(!c(e))throw e}}:t}function s(t){return t?function(n,s,r,i){return t.call(e,n,s,r,(function(e){c(e)&&(e=null),i&&i.apply(this,arguments)}))}:t}function r(t){return t?function(n,s,r){try{return t.call(e,n,s,r)}catch(e){if(!c(e))throw e}}:t}function i(t){return t?function(n,s,r){function i(e,t){t&&(t.uid<0&&(t.uid+=4294967296),t.gid<0&&(t.gid+=4294967296)),r&&r.apply(this,arguments)}return"function"==typeof s&&(r=s,s=null),s?t.call(e,n,s,i):t.call(e,n,i)}:t}function o(t){return t?function(n,s){var r=s?t.call(e,n,s):t.call(e,n);return r&&(r.uid<0&&(r.uid+=4294967296),r.gid<0&&(r.gid+=4294967296)),r}:t}function c(e){return!e||("ENOSYS"===e.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code))}e.read="function"!=typeof e.read?e.read:function(t){function n(n,s,r,i,o,c){var a;if(c&&"function"==typeof c){var l=0;a=function(u,f,h){if(u&&"EAGAIN"===u.code&&l<10)return l++,t.call(e,n,s,r,i,o,a);c.apply(this,arguments)}}return t.call(e,n,s,r,i,o,a)}return Object.setPrototypeOf&&Object.setPrototypeOf(n,t),n}(e.read),e.readSync="function"!=typeof e.readSync?e.readSync:(a=e.readSync,function(t,n,s,r,i){for(var o=0;;)try{return a.call(e,t,n,s,r,i)}catch(e){if("EAGAIN"===e.code&&o<10){o++;continue}throw e}});var a};var qe=u.Stream,Re=function(e){return{ReadStream:function t(n,s){if(!(this instanceof t))return new t(n,s);qe.call(this);var r=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,s=s||{};for(var i=Object.keys(s),o=0,c=i.length;o<c;o++){var a=i[o];this[a]=s[a]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick((function(){r._read()}));e.open(this.path,this.flags,this.mode,(function(e,t){if(e)return r.emit("error",e),void(r.readable=!1);r.fd=t,r.emit("open",t),r._read()}))},WriteStream:function t(n,s){if(!(this instanceof t))return new t(n,s);qe.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,s=s||{};for(var r=Object.keys(s),i=0,o=r.length;i<o;i++){var c=r[i];this[c]=s[c]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}};var Ye=function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var t={__proto__:We(e)};else t=Object.create(null);return Object.getOwnPropertyNames(e).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})),t},We=Object.getPrototypeOf||function(e){return e.__proto__};var Je,Ve,Ge=e,He=Ue,Qe=Re,ze=Ye,Xe=f;function Ze(e,t){Object.defineProperty(e,Je,{get:function(){return t}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(Je=Symbol.for("graceful-fs.queue"),Ve=Symbol.for("graceful-fs.previous")):(Je="___graceful-fs.queue",Ve="___graceful-fs.previous");var et=function(){};if(Xe.debuglog?et=Xe.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(et=function(){var e=Xe.format.apply(Xe,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),!Ge[Je]){var tt=z[Je]||[];Ze(Ge,tt),Ge.close=function(e){function t(t,n){return e.call(Ge,t,(function(e){e||ot(),"function"==typeof n&&n.apply(this,arguments)}))}return Object.defineProperty(t,Ve,{value:e}),t}(Ge.close),Ge.closeSync=function(e){function t(t){e.apply(Ge,arguments),ot()}return Object.defineProperty(t,Ve,{value:e}),t}(Ge.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){et(Ge[Je]),h.equal(Ge[Je].length,0)}))}z[Je]||Ze(z,Ge[Je]);var nt,st=rt(ze(Ge));function rt(e){He(e),e.gracefulify=rt,e.createReadStream=function(t,n){return new e.ReadStream(t,n)},e.createWriteStream=function(t,n){return new e.WriteStream(t,n)};var t=e.readFile;e.readFile=function(e,n,s){"function"==typeof n&&(s=n,n=null);return function e(n,s,r,i){return t(n,s,(function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?"function"==typeof r&&r.apply(this,arguments):it([e,[n,s,r],t,i||Date.now(),Date.now()])}))}(e,n,s)};var n=e.writeFile;e.writeFile=function(e,t,s,r){"function"==typeof s&&(r=s,s=null);return function e(t,s,r,i,o){return n(t,s,r,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?"function"==typeof i&&i.apply(this,arguments):it([e,[t,s,r,i],n,o||Date.now(),Date.now()])}))}(e,t,s,r)};var s=e.appendFile;s&&(e.appendFile=function(e,t,n,r){"function"==typeof n&&(r=n,n=null);return function e(t,n,r,i,o){return s(t,n,r,(function(s){!s||"EMFILE"!==s.code&&"ENFILE"!==s.code?"function"==typeof i&&i.apply(this,arguments):it([e,[t,n,r,i],s,o||Date.now(),Date.now()])}))}(e,t,n,r)});var r=e.copyFile;r&&(e.copyFile=function(e,t,n,s){"function"==typeof n&&(s=n,n=0);return function e(t,n,s,i,o){return r(t,n,s,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?"function"==typeof i&&i.apply(this,arguments):it([e,[t,n,s,i],r,o||Date.now(),Date.now()])}))}(e,t,n,s)});var i=e.readdir;e.readdir=function(e,t,n){"function"==typeof t&&(n=t,t=null);var s=o.test(process.version)?function(e,t,n,s){return i(e,r(e,t,n,s))}:function(e,t,n,s){return i(e,t,r(e,t,n,s))};return s(e,t,n);function r(e,t,n,r){return function(i,o){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?(o&&o.sort&&o.sort(),"function"==typeof n&&n.call(this,i,o)):it([s,[e,t,n],i,r||Date.now(),Date.now()])}}};var o=/^v[0-5]\./;if("v0.8"===process.version.substr(0,4)){var c=Qe(e);h=c.ReadStream,d=c.WriteStream}var a=e.ReadStream;a&&(h.prototype=Object.create(a.prototype),h.prototype.open=function(){var e=this;m(e.path,e.flags,e.mode,(function(t,n){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=n,e.emit("open",n),e.read())}))});var l=e.WriteStream;l&&(d.prototype=Object.create(l.prototype),d.prototype.open=function(){var e=this;m(e.path,e.flags,e.mode,(function(t,n){t?(e.destroy(),e.emit("error",t)):(e.fd=n,e.emit("open",n))}))}),Object.defineProperty(e,"ReadStream",{get:function(){return h},set:function(e){h=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return d},set:function(e){d=e},enumerable:!0,configurable:!0});var u=h;Object.defineProperty(e,"FileReadStream",{get:function(){return u},set:function(e){u=e},enumerable:!0,configurable:!0});var f=d;function h(e,t){return this instanceof h?(a.apply(this,arguments),this):h.apply(Object.create(h.prototype),arguments)}function d(e,t){return this instanceof d?(l.apply(this,arguments),this):d.apply(Object.create(d.prototype),arguments)}Object.defineProperty(e,"FileWriteStream",{get:function(){return f},set:function(e){f=e},enumerable:!0,configurable:!0});var p=e.open;function m(e,t,n,s){return"function"==typeof n&&(s=n,n=null),function e(t,n,s,r,i){return p(t,n,s,(function(o,c){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?"function"==typeof r&&r.apply(this,arguments):it([e,[t,n,s,r],o,i||Date.now(),Date.now()])}))}(e,t,n,s)}return e.open=m,e}function it(e){et("ENQUEUE",e[0].name,e[1]),Ge[Je].push(e),ct()}function ot(){for(var e=Date.now(),t=0;t<Ge[Je].length;++t)Ge[Je][t].length>2&&(Ge[Je][t][3]=e,Ge[Je][t][4]=e);ct()}function ct(){if(clearTimeout(nt),nt=void 0,0!==Ge[Je].length){var e=Ge[Je].shift(),t=e[0],n=e[1],s=e[2],r=e[3],i=e[4];if(void 0===r)et("RETRY",t.name,n),t.apply(null,n);else if(Date.now()-r>=6e4){et("TIMEOUT",t.name,n);var o=n.pop();"function"==typeof o&&o.call(null,s)}else{var c=Date.now()-i,a=Math.max(i-r,1);c>=Math.min(1.2*a,100)?(et("RETRY",t.name,n),t.apply(null,n.concat([r]))):Ge[Je].push(e)}void 0===nt&&(nt=setTimeout(ct,0))}}process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!Ge.__patched&&(st=rt(Ge),Ge.__patched=!0),function(e){const t=Me.fromCallback,n=st,s=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter((e=>"function"==typeof n[e]));Object.assign(e,n),s.forEach((s=>{e[s]=t(n[s])})),e.exists=function(e,t){return"function"==typeof t?n.exists(e,t):new Promise((t=>n.exists(e,t)))},e.read=function(e,t,s,r,i,o){return"function"==typeof o?n.read(e,t,s,r,i,o):new Promise(((o,c)=>{n.read(e,t,s,r,i,((e,t,n)=>{if(e)return c(e);o({bytesRead:t,buffer:n})}))}))},e.write=function(e,t,...s){return"function"==typeof s[s.length-1]?n.write(e,t,...s):new Promise(((r,i)=>{n.write(e,t,...s,((e,t,n)=>{if(e)return i(e);r({bytesWritten:t,buffer:n})}))}))},e.readv=function(e,t,...s){return"function"==typeof s[s.length-1]?n.readv(e,t,...s):new Promise(((r,i)=>{n.readv(e,t,...s,((e,t,n)=>{if(e)return i(e);r({bytesRead:t,buffers:n})}))}))},e.writev=function(e,t,...s){return"function"==typeof s[s.length-1]?n.writev(e,t,...s):new Promise(((r,i)=>{n.writev(e,t,...s,((e,t,n)=>{if(e)return i(e);r({bytesWritten:t,buffers:n})}))}))},"function"==typeof n.realpath.native?e.realpath.native=t(n.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")}(_e);var at={},lt={};const ut=i;lt.checkPath=function(e){if("win32"===process.platform){if(/[<>:"|?*]/.test(e.replace(ut.parse(e).root,""))){const t=new Error(`Path contains invalid characters: ${e}`);throw t.code="EINVAL",t}}};const ft=_e,{checkPath:ht}=lt,dt=e=>"number"==typeof e?e:{mode:511,...e}.mode;at.makeDir=async(e,t)=>(ht(e),ft.mkdir(e,{mode:dt(t),recursive:!0})),at.makeDirSync=(e,t)=>(ht(e),ft.mkdirSync(e,{mode:dt(t),recursive:!0}));const pt=Me.fromPromise,{makeDir:mt,makeDirSync:yt}=at,gt=pt(mt);var bt={mkdirs:gt,mkdirsSync:yt,mkdirp:gt,mkdirpSync:yt,ensureDir:gt,ensureDirSync:yt};const vt=Me.fromPromise,wt=_e;var St={pathExists:vt((function(e){return wt.access(e).then((()=>!0)).catch((()=>!1))})),pathExistsSync:wt.existsSync};const kt=st;var Et=function(e,t,n,s){kt.open(e,"r+",((e,r)=>{if(e)return s(e);kt.futimes(r,t,n,(e=>{kt.close(r,(t=>{s&&s(e||t)}))}))}))},Ot=function(e,t,n){const s=kt.openSync(e,"r+");return kt.futimesSync(s,t,n),kt.closeSync(s)};const Nt=_e,$t=i,At=f;function Tt(e,t,n){const s=n.dereference?e=>Nt.stat(e,{bigint:!0}):e=>Nt.lstat(e,{bigint:!0});return Promise.all([s(e),s(t).catch((e=>{if("ENOENT"===e.code)return null;throw e}))]).then((([e,t])=>({srcStat:e,destStat:t})))}function Lt(e,t){return t.ino&&t.dev&&t.ino===e.ino&&t.dev===e.dev}function xt(e,t){const n=$t.resolve(e).split($t.sep).filter((e=>e)),s=$t.resolve(t).split($t.sep).filter((e=>e));return n.reduce(((e,t,n)=>e&&s[n]===t),!0)}function It(e,t,n){return`Cannot ${n} '${e}' to a subdirectory of itself, '${t}'.`}var Ct={checkPaths:function(e,t,n,s,r){At.callbackify(Tt)(e,t,s,((s,i)=>{if(s)return r(s);const{srcStat:o,destStat:c}=i;if(c){if(Lt(o,c)){const s=$t.basename(e),i=$t.basename(t);return"move"===n&&s!==i&&s.toLowerCase()===i.toLowerCase()?r(null,{srcStat:o,destStat:c,isChangingCase:!0}):r(new Error("Source and destination must not be the same."))}if(o.isDirectory()&&!c.isDirectory())return r(new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`));if(!o.isDirectory()&&c.isDirectory())return r(new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`))}return o.isDirectory()&&xt(e,t)?r(new Error(It(e,t,n))):r(null,{srcStat:o,destStat:c})}))},checkPathsSync:function(e,t,n,s){const{srcStat:r,destStat:i}=function(e,t,n){let s;const r=n.dereference?e=>Nt.statSync(e,{bigint:!0}):e=>Nt.lstatSync(e,{bigint:!0}),i=r(e);try{s=r(t)}catch(e){if("ENOENT"===e.code)return{srcStat:i,destStat:null};throw e}return{srcStat:i,destStat:s}}(e,t,s);if(i){if(Lt(r,i)){const s=$t.basename(e),o=$t.basename(t);if("move"===n&&s!==o&&s.toLowerCase()===o.toLowerCase())return{srcStat:r,destStat:i,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(r.isDirectory()&&!i.isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);if(!r.isDirectory()&&i.isDirectory())throw new Error(`Cannot overwrite directory '${t}' with non-directory '${e}'.`)}if(r.isDirectory()&&xt(e,t))throw new Error(It(e,t,n));return{srcStat:r,destStat:i}},checkParentPaths:function e(t,n,s,r,i){const o=$t.resolve($t.dirname(t)),c=$t.resolve($t.dirname(s));if(c===o||c===$t.parse(c).root)return i();Nt.stat(c,{bigint:!0},((o,a)=>o?"ENOENT"===o.code?i():i(o):Lt(n,a)?i(new Error(It(t,s,r))):e(t,n,c,r,i)))},checkParentPathsSync:function e(t,n,s,r){const i=$t.resolve($t.dirname(t)),o=$t.resolve($t.dirname(s));if(o===i||o===$t.parse(o).root)return;let c;try{c=Nt.statSync(o,{bigint:!0})}catch(e){if("ENOENT"===e.code)return;throw e}if(Lt(n,c))throw new Error(It(t,s,r));return e(t,n,o,r)},isSrcSubdir:xt,areIdentical:Lt};const Dt=st,_t=i,Mt=bt.mkdirs,jt=St.pathExists,Pt=Et,Ft=Ct;function Bt(e,t,n,s){if(!n.filter)return s(null,!0);Promise.resolve(n.filter(e,t)).then((e=>s(null,e)),(e=>s(e)))}function Kt(e,t,n,s,r){(s.dereference?Dt.stat:Dt.lstat)(t,((i,o)=>i?r(i):o.isDirectory()?function(e,t,n,s,r,i){return t?Yt(n,s,r,i):function(e,t,n,s,r){Dt.mkdir(n,(i=>{if(i)return r(i);Yt(t,n,s,(t=>t?r(t):Rt(n,e,r)))}))}(e.mode,n,s,r,i)}(o,e,t,n,s,r):o.isFile()||o.isCharacterDevice()||o.isBlockDevice()?function(e,t,n,s,r,i){return t?function(e,t,n,s,r){if(!s.overwrite)return s.errorOnExist?r(new Error(`'${n}' already exists`)):r();Dt.unlink(n,(i=>i?r(i):Ut(e,t,n,s,r)))}(e,n,s,r,i):Ut(e,n,s,r,i)}(o,e,t,n,s,r):o.isSymbolicLink()?function(e,t,n,s,r){Dt.readlink(t,((t,i)=>t?r(t):(s.dereference&&(i=_t.resolve(process.cwd(),i)),e?void Dt.readlink(n,((e,t)=>e?"EINVAL"===e.code||"UNKNOWN"===e.code?Dt.symlink(i,n,r):r(e):(s.dereference&&(t=_t.resolve(process.cwd(),t)),Ft.isSrcSubdir(i,t)?r(new Error(`Cannot copy '${i}' to a subdirectory of itself, '${t}'.`)):Ft.isSrcSubdir(t,i)?r(new Error(`Cannot overwrite '${t}' with '${i}'.`)):function(e,t,n){Dt.unlink(t,(s=>s?n(s):Dt.symlink(e,t,n)))}(i,n,r)))):Dt.symlink(i,n,r))))}(e,t,n,s,r):o.isSocket()?r(new Error(`Cannot copy a socket file: ${t}`)):o.isFIFO()?r(new Error(`Cannot copy a FIFO pipe: ${t}`)):r(new Error(`Unknown file: ${t}`))))}function Ut(e,t,n,s,r){Dt.copyFile(t,n,(i=>i?r(i):s.preserveTimestamps?function(e,t,n,s){if(function(e){return 0==(128&e)}(e))return function(e,t,n){return Rt(e,128|t,n)}(n,e,(r=>r?s(r):qt(e,t,n,s)));return qt(e,t,n,s)}(e.mode,t,n,r):Rt(n,e.mode,r)))}function qt(e,t,n,s){!function(e,t,n){Dt.stat(e,((e,s)=>e?n(e):Pt(t,s.atime,s.mtime,n)))}(t,n,(t=>t?s(t):Rt(n,e,s)))}function Rt(e,t,n){return Dt.chmod(e,t,n)}function Yt(e,t,n,s){Dt.readdir(e,((r,i)=>r?s(r):Wt(i,e,t,n,s)))}function Wt(e,t,n,s,r){const i=e.pop();return i?function(e,t,n,s,r,i){const o=_t.join(n,t),c=_t.join(s,t);Bt(o,c,r,((t,a)=>t?i(t):a?void Ft.checkPaths(o,c,"copy",r,((t,a)=>{if(t)return i(t);const{destStat:l}=a;Kt(l,o,c,r,(t=>t?i(t):Wt(e,n,s,r,i)))})):Wt(e,n,s,r,i)))}(e,i,t,n,s,r):r()}var Jt=function(e,t,n,s){"function"!=typeof n||s?"function"==typeof n&&(n={filter:n}):(s=n,n={}),s=s||function(){},(n=n||{}).clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0001"),Ft.checkPaths(e,t,"copy",n,((r,i)=>{if(r)return s(r);const{srcStat:o,destStat:c}=i;Ft.checkParentPaths(e,o,t,"copy",(r=>{if(r)return s(r);Bt(e,t,n,((r,i)=>r?s(r):i?void function(e,t,n,s,r){const i=_t.dirname(n);jt(i,((o,c)=>o?r(o):c?Kt(e,t,n,s,r):void Mt(i,(i=>i?r(i):Kt(e,t,n,s,r)))))}(c,e,t,n,s):s()))}))}))};const Vt=st,Gt=i,Ht=bt.mkdirsSync,Qt=Ot,zt=Ct;function Xt(e,t,n,s){const r=(s.dereference?Vt.statSync:Vt.lstatSync)(t);if(r.isDirectory())return function(e,t,n,s,r){return t?tn(n,s,r):function(e,t,n,s){return Vt.mkdirSync(n),tn(t,n,s),en(n,e)}(e.mode,n,s,r)}(r,e,t,n,s);if(r.isFile()||r.isCharacterDevice()||r.isBlockDevice())return function(e,t,n,s,r){return t?function(e,t,n,s){if(s.overwrite)return Vt.unlinkSync(n),Zt(e,t,n,s);if(s.errorOnExist)throw new Error(`'${n}' already exists`)}(e,n,s,r):Zt(e,n,s,r)}(r,e,t,n,s);if(r.isSymbolicLink())return function(e,t,n,s){let r=Vt.readlinkSync(t);s.dereference&&(r=Gt.resolve(process.cwd(),r));if(e){let e;try{e=Vt.readlinkSync(n)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return Vt.symlinkSync(r,n);throw e}if(s.dereference&&(e=Gt.resolve(process.cwd(),e)),zt.isSrcSubdir(r,e))throw new Error(`Cannot copy '${r}' to a subdirectory of itself, '${e}'.`);if(zt.isSrcSubdir(e,r))throw new Error(`Cannot overwrite '${e}' with '${r}'.`);return function(e,t){return Vt.unlinkSync(t),Vt.symlinkSync(e,t)}(r,n)}return Vt.symlinkSync(r,n)}(e,t,n,s);if(r.isSocket())throw new Error(`Cannot copy a socket file: ${t}`);if(r.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${t}`);throw new Error(`Unknown file: ${t}`)}function Zt(e,t,n,s){return Vt.copyFileSync(t,n),s.preserveTimestamps&&function(e,t,n){(function(e){return 0==(128&e)})(e)&&function(e,t){en(e,128|t)}(n,e);(function(e,t){const n=Vt.statSync(e);Qt(t,n.atime,n.mtime)})(t,n)}(e.mode,t,n),en(n,e.mode)}function en(e,t){return Vt.chmodSync(e,t)}function tn(e,t,n){Vt.readdirSync(e).forEach((s=>function(e,t,n,s){const r=Gt.join(t,e),i=Gt.join(n,e);if(s.filter&&!s.filter(r,i))return;const{destStat:o}=zt.checkPathsSync(r,i,"copy",s);return Xt(o,r,i,s)}(s,e,t,n)))}var nn=function(e,t,n){"function"==typeof n&&(n={filter:n}),(n=n||{}).clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0002");const{srcStat:s,destStat:r}=zt.checkPathsSync(e,t,"copy",n);if(zt.checkParentPathsSync(e,s,t,"copy"),n.filter&&!n.filter(e,t))return;const i=Gt.dirname(t);return Vt.existsSync(i)||Ht(i),Xt(r,e,t,n)};var sn={copy:(0,Me.fromCallback)(Jt),copySync:nn};const rn=st;var on={remove:(0,Me.fromCallback)((function(e,t){rn.rm(e,{recursive:!0,force:!0},t)})),removeSync:function(e){rn.rmSync(e,{recursive:!0,force:!0})}};const cn=Me.fromPromise,an=_e,ln=i,un=bt,fn=on,hn=cn((async function(e){let t;try{t=await an.readdir(e)}catch{return un.mkdirs(e)}return Promise.all(t.map((t=>fn.remove(ln.join(e,t)))))}));function dn(e){let t;try{t=an.readdirSync(e)}catch{return un.mkdirsSync(e)}t.forEach((t=>{t=ln.join(e,t),fn.removeSync(t)}))}var pn={emptyDirSync:dn,emptydirSync:dn,emptyDir:hn,emptydir:hn};const mn=Me.fromCallback,yn=i,gn=st,bn=bt;var vn={createFile:mn((function(e,t){function n(){gn.writeFile(e,"",(e=>{if(e)return t(e);t()}))}gn.stat(e,((s,r)=>{if(!s&&r.isFile())return t();const i=yn.dirname(e);gn.stat(i,((e,s)=>{if(e)return"ENOENT"===e.code?bn.mkdirs(i,(e=>{if(e)return t(e);n()})):t(e);s.isDirectory()?n():gn.readdir(i,(e=>{if(e)return t(e)}))}))}))})),createFileSync:function(e){let t;try{t=gn.statSync(e)}catch{}if(t&&t.isFile())return;const n=yn.dirname(e);try{gn.statSync(n).isDirectory()||gn.readdirSync(n)}catch(e){if(!e||"ENOENT"!==e.code)throw e;bn.mkdirsSync(n)}gn.writeFileSync(e,"")}};const wn=Me.fromCallback,Sn=i,kn=st,En=bt,On=St.pathExists,{areIdentical:Nn}=Ct;var $n={createLink:wn((function(e,t,n){function s(e,t){kn.link(e,t,(e=>{if(e)return n(e);n(null)}))}kn.lstat(t,((r,i)=>{kn.lstat(e,((r,o)=>{if(r)return r.message=r.message.replace("lstat","ensureLink"),n(r);if(i&&Nn(o,i))return n(null);const c=Sn.dirname(t);On(c,((r,i)=>r?n(r):i?s(e,t):void En.mkdirs(c,(r=>{if(r)return n(r);s(e,t)}))))}))}))})),createLinkSync:function(e,t){let n;try{n=kn.lstatSync(t)}catch{}try{const t=kn.lstatSync(e);if(n&&Nn(t,n))return}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}const s=Sn.dirname(t);return kn.existsSync(s)||En.mkdirsSync(s),kn.linkSync(e,t)}};const An=i,Tn=st,Ln=St.pathExists;var xn={symlinkPaths:function(e,t,n){if(An.isAbsolute(e))return Tn.lstat(e,(t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),n(t)):n(null,{toCwd:e,toDst:e})));{const s=An.dirname(t),r=An.join(s,e);return Ln(r,((t,i)=>t?n(t):i?n(null,{toCwd:r,toDst:e}):Tn.lstat(e,(t=>t?(t.message=t.message.replace("lstat","ensureSymlink"),n(t)):n(null,{toCwd:e,toDst:An.relative(s,e)})))))}},symlinkPathsSync:function(e,t){let n;if(An.isAbsolute(e)){if(n=Tn.existsSync(e),!n)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}{const s=An.dirname(t),r=An.join(s,e);if(n=Tn.existsSync(r),n)return{toCwd:r,toDst:e};if(n=Tn.existsSync(e),!n)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:An.relative(s,e)}}}};const In=st;var Cn={symlinkType:function(e,t,n){if(n="function"==typeof t?t:n,t="function"!=typeof t&&t)return n(null,t);In.lstat(e,((e,s)=>{if(e)return n(null,"file");t=s&&s.isDirectory()?"dir":"file",n(null,t)}))},symlinkTypeSync:function(e,t){let n;if(t)return t;try{n=In.lstatSync(e)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}};const Dn=Me.fromCallback,_n=i,Mn=_e,jn=bt.mkdirs,Pn=bt.mkdirsSync,Fn=xn.symlinkPaths,Bn=xn.symlinkPathsSync,Kn=Cn.symlinkType,Un=Cn.symlinkTypeSync,qn=St.pathExists,{areIdentical:Rn}=Ct;function Yn(e,t,n,s){Fn(e,t,((r,i)=>{if(r)return s(r);e=i.toDst,Kn(i.toCwd,n,((n,r)=>{if(n)return s(n);const i=_n.dirname(t);qn(i,((n,o)=>n?s(n):o?Mn.symlink(e,t,r,s):void jn(i,(n=>{if(n)return s(n);Mn.symlink(e,t,r,s)}))))}))}))}var Wn={createSymlink:Dn((function(e,t,n,s){s="function"==typeof n?n:s,n="function"!=typeof n&&n,Mn.lstat(t,((r,i)=>{!r&&i.isSymbolicLink()?Promise.all([Mn.stat(e),Mn.stat(t)]).then((([r,i])=>{if(Rn(r,i))return s(null);Yn(e,t,n,s)})):Yn(e,t,n,s)}))})),createSymlinkSync:function(e,t,n){let s;try{s=Mn.lstatSync(t)}catch{}if(s&&s.isSymbolicLink()){const n=Mn.statSync(e),s=Mn.statSync(t);if(Rn(n,s))return}const r=Bn(e,t);e=r.toDst,n=Un(r.toCwd,n);const i=_n.dirname(t);return Mn.existsSync(i)||Pn(i),Mn.symlinkSync(e,t,n)}};const{createFile:Jn,createFileSync:Vn}=vn,{createLink:Gn,createLinkSync:Hn}=$n,{createSymlink:Qn,createSymlinkSync:zn}=Wn;var Xn={createFile:Jn,createFileSync:Vn,ensureFile:Jn,ensureFileSync:Vn,createLink:Gn,createLinkSync:Hn,ensureLink:Gn,ensureLinkSync:Hn,createSymlink:Qn,createSymlinkSync:zn,ensureSymlink:Qn,ensureSymlinkSync:zn};var Zn={stringify:function(e,{EOL:t="\n",finalEOL:n=!0,replacer:s=null,spaces:r}={}){const i=n?t:"";return JSON.stringify(e,s,r).replace(/\n/g,t)+i},stripBom:function(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}};let es;try{es=st}catch(t){es=e}const ts=Me,{stringify:ns,stripBom:ss}=Zn;const rs=ts.fromPromise((async function(e,t={}){"string"==typeof t&&(t={encoding:t});const n=t.fs||es,s=!("throws"in t)||t.throws;let r,i=await ts.fromCallback(n.readFile)(e,t);i=ss(i);try{r=JSON.parse(i,t?t.reviver:null)}catch(t){if(s)throw t.message=`${e}: ${t.message}`,t;return null}return r}));const is=ts.fromPromise((async function(e,t,n={}){const s=n.fs||es,r=ns(t,n);await ts.fromCallback(s.writeFile)(e,r,n)}));const os={readFile:rs,readFileSync:function(e,t={}){"string"==typeof t&&(t={encoding:t});const n=t.fs||es,s=!("throws"in t)||t.throws;try{let s=n.readFileSync(e,t);return s=ss(s),JSON.parse(s,t.reviver)}catch(t){if(s)throw t.message=`${e}: ${t.message}`,t;return null}},writeFile:is,writeFileSync:function(e,t,n={}){const s=n.fs||es,r=ns(t,n);return s.writeFileSync(e,r,n)}};var cs={readJson:os.readFile,readJsonSync:os.readFileSync,writeJson:os.writeFile,writeJsonSync:os.writeFileSync};const as=Me.fromCallback,ls=st,us=i,fs=bt,hs=St.pathExists;var ds={outputFile:as((function(e,t,n,s){"function"==typeof n&&(s=n,n="utf8");const r=us.dirname(e);hs(r,((i,o)=>i?s(i):o?ls.writeFile(e,t,n,s):void fs.mkdirs(r,(r=>{if(r)return s(r);ls.writeFile(e,t,n,s)}))))})),outputFileSync:function(e,...t){const n=us.dirname(e);if(ls.existsSync(n))return ls.writeFileSync(e,...t);fs.mkdirsSync(n),ls.writeFileSync(e,...t)}};const{stringify:ps}=Zn,{outputFile:ms}=ds;var ys=async function(e,t,n={}){const s=ps(t,n);await ms(e,s,n)};const{stringify:gs}=Zn,{outputFileSync:bs}=ds;var vs=function(e,t,n){const s=gs(t,n);bs(e,s,n)};const ws=Me.fromPromise,Ss=cs;Ss.outputJson=ws(ys),Ss.outputJsonSync=vs,Ss.outputJSON=Ss.outputJson,Ss.outputJSONSync=Ss.outputJsonSync,Ss.writeJSON=Ss.writeJson,Ss.writeJSONSync=Ss.writeJsonSync,Ss.readJSON=Ss.readJson,Ss.readJSONSync=Ss.readJsonSync;var ks=Ss;const Es=st,Os=i,Ns=sn.copy,$s=on.remove,As=bt.mkdirp,Ts=St.pathExists,Ls=Ct;function xs(e,t,n,s,r){return s?Is(e,t,n,r):n?$s(t,(s=>s?r(s):Is(e,t,n,r))):void Ts(t,((s,i)=>s?r(s):i?r(new Error("dest already exists.")):Is(e,t,n,r)))}function Is(e,t,n,s){Es.rename(e,t,(r=>r?"EXDEV"!==r.code?s(r):function(e,t,n,s){const r={overwrite:n,errorOnExist:!0};Ns(e,t,r,(t=>t?s(t):$s(e,s)))}(e,t,n,s):s()))}var Cs=function(e,t,n,s){"function"==typeof n&&(s=n,n={});const r=(n=n||{}).overwrite||n.clobber||!1;Ls.checkPaths(e,t,"move",n,((n,i)=>{if(n)return s(n);const{srcStat:o,isChangingCase:c=!1}=i;Ls.checkParentPaths(e,o,t,"move",(n=>n?s(n):function(e){const t=Os.dirname(e);return Os.parse(t).root===t}(t)?xs(e,t,r,c,s):void As(Os.dirname(t),(n=>n?s(n):xs(e,t,r,c,s)))))}))};const Ds=st,_s=i,Ms=sn.copySync,js=on.removeSync,Ps=bt.mkdirpSync,Fs=Ct;function Bs(e,t,n){try{Ds.renameSync(e,t)}catch(s){if("EXDEV"!==s.code)throw s;return function(e,t,n){const s={overwrite:n,errorOnExist:!0};return Ms(e,t,s),js(e)}(e,t,n)}}var Ks=function(e,t,n){const s=(n=n||{}).overwrite||n.clobber||!1,{srcStat:r,isChangingCase:i=!1}=Fs.checkPathsSync(e,t,"move",n);return Fs.checkParentPathsSync(e,r,t,"move"),function(e){const t=_s.dirname(e);return _s.parse(t).root===t}(t)||Ps(_s.dirname(t)),function(e,t,n,s){if(s)return Bs(e,t,n);if(n)return js(t),Bs(e,t,n);if(Ds.existsSync(t))throw new Error("dest already exists.");return Bs(e,t,n)}(e,t,s,i)};var Us={move:(0,Me.fromCallback)(Cs),moveSync:Ks},qs={..._e,...sn,...pn,...Xn,...ks,...bt,...Us,...ds,...St,...on};const Rs=Symbol.for("yaml.alias"),Ys=Symbol.for("yaml.document"),Ws=Symbol.for("yaml.map"),Js=Symbol.for("yaml.pair"),Vs=Symbol.for("yaml.scalar"),Gs=Symbol.for("yaml.seq"),Hs=Symbol.for("yaml.node.type"),Qs=e=>!!e&&"object"==typeof e&&e[Hs]===Rs,zs=e=>!!e&&"object"==typeof e&&e[Hs]===Ys,Xs=e=>!!e&&"object"==typeof e&&e[Hs]===Ws,Zs=e=>!!e&&"object"==typeof e&&e[Hs]===Js,er=e=>!!e&&"object"==typeof e&&e[Hs]===Vs,tr=e=>!!e&&"object"==typeof e&&e[Hs]===Gs;function nr(e){if(e&&"object"==typeof e)switch(e[Hs]){case Ws:case Gs:return!0}return!1}function sr(e){if(e&&"object"==typeof e)switch(e[Hs]){case Rs:case Ws:case Vs:case Gs:return!0}return!1}const rr=e=>(er(e)||nr(e))&&!!e.anchor;class ir{constructor(e){Object.defineProperty(this,Hs,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}}const or=Symbol("break visit"),cr=Symbol("skip children"),ar=Symbol("remove node");function lr(e,t){const n=dr(t);if(zs(e)){ur(null,e.contents,n,Object.freeze([e]))===ar&&(e.contents=null)}else ur(null,e,n,Object.freeze([]))}function ur(e,t,n,s){const r=pr(e,t,n,s);if(sr(r)||Zs(r))return mr(e,s,r),ur(e,r,n,s);if("symbol"!=typeof r)if(nr(t)){s=Object.freeze(s.concat(t));for(let e=0;e<t.items.length;++e){const r=ur(e,t.items[e],n,s);if("number"==typeof r)e=r-1;else{if(r===or)return or;r===ar&&(t.items.splice(e,1),e-=1)}}}else if(Zs(t)){s=Object.freeze(s.concat(t));const e=ur("key",t.key,n,s);if(e===or)return or;e===ar&&(t.key=null);const r=ur("value",t.value,n,s);if(r===or)return or;r===ar&&(t.value=null)}return r}async function fr(e,t){const n=dr(t);if(zs(e)){await hr(null,e.contents,n,Object.freeze([e]))===ar&&(e.contents=null)}else await hr(null,e,n,Object.freeze([]))}async function hr(e,t,n,s){const r=await pr(e,t,n,s);if(sr(r)||Zs(r))return mr(e,s,r),hr(e,r,n,s);if("symbol"!=typeof r)if(nr(t)){s=Object.freeze(s.concat(t));for(let e=0;e<t.items.length;++e){const r=await hr(e,t.items[e],n,s);if("number"==typeof r)e=r-1;else{if(r===or)return or;r===ar&&(t.items.splice(e,1),e-=1)}}}else if(Zs(t)){s=Object.freeze(s.concat(t));const e=await hr("key",t.key,n,s);if(e===or)return or;e===ar&&(t.key=null);const r=await hr("value",t.value,n,s);if(r===or)return or;r===ar&&(t.value=null)}return r}function dr(e){return"object"==typeof e&&(e.Collection||e.Node||e.Value)?Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e):e}function pr(e,t,n,s){return"function"==typeof n?n(e,t,s):Xs(t)?n.Map?.(e,t,s):tr(t)?n.Seq?.(e,t,s):Zs(t)?n.Pair?.(e,t,s):er(t)?n.Scalar?.(e,t,s):Qs(t)?n.Alias?.(e,t,s):void 0}function mr(e,t,n){const s=t[t.length-1];if(nr(s))s.items[e]=n;else if(Zs(s))"key"===e?s.key=n:s.value=n;else{if(!zs(s)){const e=Qs(s)?"alias":"scalar";throw new Error(`Cannot replace node with ${e} parent`)}s.contents=n}}lr.BREAK=or,lr.SKIP=cr,lr.REMOVE=ar,fr.BREAK=or,fr.SKIP=cr,fr.REMOVE=ar;const yr={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"};class gr{constructor(e,t){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},gr.defaultYaml,e),this.tags=Object.assign({},gr.defaultTags,t)}clone(){const e=new gr(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new gr(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:gr.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},gr.defaultTags)}return e}add(e,t){this.atNextDocument&&(this.yaml={explicit:gr.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},gr.defaultTags),this.atNextDocument=!1);const n=e.trim().split(/[ \t]+/),s=n.shift();switch(s){case"%TAG":{if(2!==n.length&&(t(0,"%TAG directive should contain exactly two parts"),n.length<2))return!1;const[e,s]=n;return this.tags[e]=s,!0}case"%YAML":{if(this.yaml.explicit=!0,1!==n.length)return t(0,"%YAML directive should contain exactly one part"),!1;const[e]=n;if("1.1"===e||"1.2"===e)return this.yaml.version=e,!0;return t(6,`Unsupported YAML version ${e}`,/^\d+\.\d+$/.test(e)),!1}default:return t(0,`Unknown directive ${s}`,!0),!1}}tagName(e,t){if("!"===e)return"!";if("!"!==e[0])return t(`Not a valid tag: ${e}`),null;if("<"===e[1]){const n=e.slice(2,-1);return"!"===n||"!!"===n?(t(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(">"!==e[e.length-1]&&t("Verbatim tags must end with a >"),n)}const[,n,s]=e.match(/^(.*!)([^!]*)$/);s||t(`The ${e} tag has no suffix`);const r=this.tags[n];return r?r+decodeURIComponent(s):"!"===n?e:(t(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[t,n]of Object.entries(this.tags))if(e.startsWith(n))return t+e.substring(n.length).replace(/[!,[\]{}]/g,(e=>yr[e]));return"!"===e[0]?e:`!<${e}>`}toString(e){const t=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],n=Object.entries(this.tags);let s;if(e&&n.length>0&&sr(e.contents)){const t={};lr(e.contents,((e,n)=>{sr(n)&&n.tag&&(t[n.tag]=!0)})),s=Object.keys(t)}else s=[];for(const[r,i]of n)"!!"===r&&"tag:yaml.org,2002:"===i||e&&!s.some((e=>e.startsWith(i)))||t.push(`%TAG ${r} ${i}`);return t.join("\n")}}function br(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){const t=JSON.stringify(e);throw new Error(`Anchor must not contain whitespace or control characters: ${t}`)}return!0}function vr(e){const t=new Set;return lr(e,{Value(e,n){n.anchor&&t.add(n.anchor)}}),t}function wr(e,t){for(let n=1;;++n){const s=`${e}${n}`;if(!t.has(s))return s}}gr.defaultYaml={explicit:!1,version:"1.2"},gr.defaultTags={"!!":"tag:yaml.org,2002:"};class Sr extends ir{constructor(e){super(Rs),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e){let t;return lr(e,{Node:(e,n)=>{if(n===this)return lr.BREAK;n.anchor===this.source&&(t=n)}}),t}toJSON(e,t){if(!t)return{source:this.source};const{anchors:n,doc:s,maxAliasCount:r}=t,i=this.resolve(s);if(!i){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(e)}const o=n.get(i);if(!o||void 0===o.res){throw new ReferenceError("This should not happen: Alias anchor was not resolved?")}if(r>=0&&(o.count+=1,0===o.aliasCount&&(o.aliasCount=kr(s,i,n)),o.count*o.aliasCount>r)){throw new ReferenceError("Excessive alias count indicates a resource exhaustion attack")}return o.res}toString(e,t,n){const s=`*${this.source}`;if(e){if(br(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const e=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(e)}if(e.implicitKey)return`${s} `}return s}}function kr(e,t,n){if(Qs(t)){const s=t.resolve(e),r=n&&s&&n.get(s);return r?r.count*r.aliasCount:0}if(nr(t)){let s=0;for(const r of t.items){const t=kr(e,r,n);t>s&&(s=t)}return s}if(Zs(t)){const s=kr(e,t.key,n),r=kr(e,t.value,n);return Math.max(s,r)}return 1}function Er(e,t,n){if(Array.isArray(e))return e.map(((e,t)=>Er(e,String(t),n)));if(e&&"function"==typeof e.toJSON){if(!n||!rr(e))return e.toJSON(t,n);const s={aliasCount:0,count:1,res:void 0};n.anchors.set(e,s),n.onCreate=e=>{s.res=e,delete n.onCreate};const r=e.toJSON(t,n);return n.onCreate&&n.onCreate(r),r}return"bigint"!=typeof e||n?.keep?e:Number(e)}const Or=e=>!e||"function"!=typeof e&&"object"!=typeof e;class Nr extends ir{constructor(e){super(Vs),this.value=e}toJSON(e,t){return t?.keep?this.value:Er(this.value,e,t)}toString(){return String(this.value)}}Nr.BLOCK_FOLDED="BLOCK_FOLDED",Nr.BLOCK_LITERAL="BLOCK_LITERAL",Nr.PLAIN="PLAIN",Nr.QUOTE_DOUBLE="QUOTE_DOUBLE",Nr.QUOTE_SINGLE="QUOTE_SINGLE";const $r="tag:yaml.org,2002:";function Ar(e,t,n){if(zs(e)&&(e=e.contents),sr(e))return e;if(Zs(e)){const t=n.schema[Ws].createNode?.(n.schema,null,n);return t.items.push(e),t}(e instanceof String||e instanceof Number||e instanceof Boolean||"undefined"!=typeof BigInt&&e instanceof BigInt)&&(e=e.valueOf());const{aliasDuplicateObjects:s,onAnchor:r,onTagObj:i,schema:o,sourceObjects:c}=n;let a;if(s&&e&&"object"==typeof e){if(a=c.get(e),a)return a.anchor||(a.anchor=r(e)),new Sr(a.anchor);a={anchor:null,node:null},c.set(e,a)}t?.startsWith("!!")&&(t=$r+t.slice(2));let l=function(e,t,n){if(t){const e=n.filter((e=>e.tag===t)),s=e.find((e=>!e.format))??e[0];if(!s)throw new Error(`Tag ${t} not found`);return s}return n.find((t=>t.identify?.(e)&&!t.format))}(e,t,o.tags);if(!l){if(e&&"function"==typeof e.toJSON&&(e=e.toJSON()),!e||"object"!=typeof e){const t=new Nr(e);return a&&(a.node=t),t}l=e instanceof Map?o[Ws]:Symbol.iterator in Object(e)?o[Gs]:o[Ws]}i&&(i(l),delete n.onTagObj);const u=l?.createNode?l.createNode(n.schema,e,n):new Nr(e);return t&&(u.tag=t),a&&(a.node=u),u}function Tr(e,t,n){let s=n;for(let e=t.length-1;e>=0;--e){const n=t[e];if("number"==typeof n&&Number.isInteger(n)&&n>=0){const e=[];e[n]=s,s=e}else s=new Map([[n,s]])}return Ar(s,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:e,sourceObjects:new Map})}const Lr=e=>null==e||"object"==typeof e&&!!e[Symbol.iterator]().next().done;class xr extends ir{constructor(e,t){super(e),Object.defineProperty(this,"schema",{value:t,configurable:!0,enumerable:!1,writable:!0})}clone(e){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(t.schema=e),t.items=t.items.map((t=>sr(t)||Zs(t)?t.clone(e):t)),this.range&&(t.range=this.range.slice()),t}addIn(e,t){if(Lr(e))this.add(t);else{const[n,...s]=e,r=this.get(n,!0);if(nr(r))r.addIn(s,t);else{if(void 0!==r||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${s}`);this.set(n,Tr(this.schema,s,t))}}}deleteIn(e){const[t,...n]=e;if(0===n.length)return this.delete(t);const s=this.get(t,!0);if(nr(s))return s.deleteIn(n);throw new Error(`Expected YAML collection at ${t}. Remaining path: ${n}`)}getIn(e,t){const[n,...s]=e,r=this.get(n,!0);return 0===s.length?!t&&er(r)?r.value:r:nr(r)?r.getIn(s,t):void 0}hasAllNullValues(e){return this.items.every((t=>{if(!Zs(t))return!1;const n=t.value;return null==n||e&&er(n)&&null==n.value&&!n.commentBefore&&!n.comment&&!n.tag}))}hasIn(e){const[t,...n]=e;if(0===n.length)return this.has(t);const s=this.get(t,!0);return!!nr(s)&&s.hasIn(n)}setIn(e,t){const[n,...s]=e;if(0===s.length)this.set(n,t);else{const e=this.get(n,!0);if(nr(e))e.setIn(s,t);else{if(void 0!==e||!this.schema)throw new Error(`Expected YAML collection at ${n}. Remaining path: ${s}`);this.set(n,Tr(this.schema,s,t))}}}}xr.maxFlowStringSingleLineLength=60;const Ir=e=>e.replace(/^(?!$)(?: $)?/gm,"#");function Cr(e,t){return/^\n+$/.test(e)?e.substring(1):t?e.replace(/^(?! *$)/gm,t):e}const Dr=(e,t,n)=>e.endsWith("\n")?Cr(n,t):n.includes("\n")?"\n"+Cr(n,t):(e.endsWith(" ")?"":" ")+n,_r="flow",Mr="block",jr="quoted";function Pr(e,t,n="flow",{indentAtStart:s,lineWidth:r=80,minContentWidth:i=20,onFold:o,onOverflow:c}={}){if(!r||r<0)return e;const a=Math.max(1+i,1+r-t.length);if(e.length<=a)return e;const l=[],u={};let f,h,d=r-t.length;"number"==typeof s&&(s>r-Math.max(2,i)?l.push(0):d=r-s);let p=!1,m=-1,y=-1,g=-1;n===Mr&&(m=Fr(e,m),-1!==m&&(d=m+a));for(let t;t=e[m+=1];){if(n===jr&&"\\"===t){switch(y=m,e[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}g=m}if("\n"===t)n===Mr&&(m=Fr(e,m)),d=m+a,f=void 0;else{if(" "===t&&h&&" "!==h&&"\n"!==h&&"\t"!==h){const t=e[m+1];t&&" "!==t&&"\n"!==t&&"\t"!==t&&(f=m)}if(m>=d)if(f)l.push(f),d=f+a,f=void 0;else if(n===jr){for(;" "===h||"\t"===h;)h=t,t=e[m+=1],p=!0;const n=m>g+1?m-2:y-1;if(u[n])return e;l.push(n),u[n]=!0,d=n+a,f=void 0}else p=!0}h=t}if(p&&c&&c(),0===l.length)return e;o&&o();let b=e.slice(0,l[0]);for(let s=0;s<l.length;++s){const r=l[s],i=l[s+1]||e.length;0===r?b=`\n${t}${e.slice(0,i)}`:(n===jr&&u[r]&&(b+=`${e[r]}\\`),b+=`\n${t}${e.slice(r+1,i)}`)}return b}function Fr(e,t){let n=e[t+1];for(;" "===n||"\t"===n;){do{n=e[t+=1]}while(n&&"\n"!==n);n=e[t+1]}return t}const Br=e=>({indentAtStart:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),Kr=e=>/^(%|---|\.\.\.)/m.test(e);function Ur(e,t){const n=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return n;const{implicitKey:s}=t,r=t.options.doubleQuotedMinMultiLineLength,i=t.indent||(Kr(e)?"  ":"");let o="",c=0;for(let e=0,t=n[e];t;t=n[++e])if(" "===t&&"\\"===n[e+1]&&"n"===n[e+2]&&(o+=n.slice(c,e)+"\\ ",e+=1,c=e,t="\\"),"\\"===t)switch(n[e+1]){case"u":{o+=n.slice(c,e);const t=n.substr(e+2,4);switch(t){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:"00"===t.substr(0,2)?o+="\\x"+t.substr(2):o+=n.substr(e,6)}e+=5,c=e+1}break;case"n":if(s||'"'===n[e+2]||n.length<r)e+=1;else{for(o+=n.slice(c,e)+"\n\n";"\\"===n[e+2]&&"n"===n[e+3]&&'"'!==n[e+4];)o+="\n",e+=2;o+=i," "===n[e+2]&&(o+="\\"),e+=1,c=e+1}break;default:e+=1}return o=c?o+n.slice(c):n,s?o:Pr(o,i,jr,Br(t))}function qr(e,t){if(!1===t.options.singleQuote||t.implicitKey&&e.includes("\n")||/[ \t]\n|\n[ \t]/.test(e))return Ur(e,t);const n=t.indent||(Kr(e)?"  ":""),s="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&\n${n}`)+"'";return t.implicitKey?s:Pr(s,n,_r,Br(t))}function Rr(e,t){const{singleQuote:n}=t.options;let s;if(!1===n)s=Ur;else{const t=e.includes('"'),r=e.includes("'");s=t&&!r?qr:r&&!t?Ur:n?qr:Ur}return s(e,t)}function Yr({comment:e,type:t,value:n},s,r,i){const{blockQuote:o,commentString:c,lineWidth:a}=s.options;if(!o||/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return Rr(n,s);const l=s.indent||(s.forceBlockIndent||Kr(n)?"  ":""),u="literal"===o||"folded"!==o&&t!==Nr.BLOCK_FOLDED&&(t===Nr.BLOCK_LITERAL||!function(e,t,n){if(!t||t<0)return!1;const s=t-n,r=e.length;if(r<=s)return!1;for(let t=0,n=0;t<r;++t)if("\n"===e[t]){if(t-n>s)return!0;if(n=t+1,r-n<=s)return!1}return!0}(n,a,l.length));if(!n)return u?"|\n":">\n";let f,h;for(h=n.length;h>0;--h){const e=n[h-1];if("\n"!==e&&"\t"!==e&&" "!==e)break}let d=n.substring(h);const p=d.indexOf("\n");-1===p?f="-":n===d||p!==d.length-1?(f="+",i&&i()):f="",d&&(n=n.slice(0,-d.length),"\n"===d[d.length-1]&&(d=d.slice(0,-1)),d=d.replace(/\n+(?!\n|$)/g,`$&${l}`));let m,y=!1,g=-1;for(m=0;m<n.length;++m){const e=n[m];if(" "===e)y=!0;else{if("\n"!==e)break;g=m}}let b=n.substring(0,g<m?g+1:m);b&&(n=n.substring(b.length),b=b.replace(/\n+/g,`$&${l}`));let v=(u?"|":">")+(y?l?"2":"1":"")+f;if(e&&(v+=" "+c(e.replace(/ ?[\r\n]+/g," ")),r&&r()),u)return`${v}\n${l}${b}${n=n.replace(/\n+/g,`$&${l}`)}${d}`;return`${v}\n${l}${Pr(`${b}${n=n.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${l}`)}${d}`,l,Mr,Br(s))}`}function Wr(e,t,n,s){const{implicitKey:r,inFlow:i}=t,o="string"==typeof e.value?e:Object.assign({},e,{value:String(e.value)});let{type:c}=e;c!==Nr.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(c=Nr.QUOTE_DOUBLE);const a=e=>{switch(e){case Nr.BLOCK_FOLDED:case Nr.BLOCK_LITERAL:return r||i?Rr(o.value,t):Yr(o,t,n,s);case Nr.QUOTE_DOUBLE:return Ur(o.value,t);case Nr.QUOTE_SINGLE:return qr(o.value,t);case Nr.PLAIN:return function(e,t,n,s){const{type:r,value:i}=e,{actualString:o,implicitKey:c,indent:a,indentStep:l,inFlow:u}=t;if(c&&/[\n[\]{},]/.test(i)||u&&/[[\]{},]/.test(i))return Rr(i,t);if(!i||/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(i))return c||u||!i.includes("\n")?Rr(i,t):Yr(e,t,n,s);if(!c&&!u&&r!==Nr.PLAIN&&i.includes("\n"))return Yr(e,t,n,s);if(Kr(i)){if(""===a)return t.forceBlockIndent=!0,Yr(e,t,n,s);if(c&&a===l)return Rr(i,t)}const f=i.replace(/\n+/g,`$&\n${a}`);if(o){const e=e=>e.default&&"tag:yaml.org,2002:str"!==e.tag&&e.test?.test(f),{compat:n,tags:s}=t.doc.schema;if(s.some(e)||n?.some(e))return Rr(i,t)}return c?f:Pr(f,a,_r,Br(t))}(o,t,n,s);default:return null}};let l=a(c);if(null===l){const{defaultKeyType:e,defaultStringType:n}=t.options,s=r&&e||n;if(l=a(s),null===l)throw new Error(`Unsupported default string type ${s}`)}return l}function Jr(e,t){const n=Object.assign({blockQuote:!0,commentString:Ir,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},e.schema.toStringOptions,t);let s;switch(n.collectionStyle){case"block":s=!1;break;case"flow":s=!0;break;default:s=null}return{anchors:new Set,doc:e,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:"number"==typeof n.indent?" ".repeat(n.indent):"  ",inFlow:s,options:n}}function Vr(e,t,n,s){if(Zs(e))return e.toString(t,n,s);if(Qs(e)){if(t.doc.directives)return e.toString(t);if(t.resolvedAliases?.has(e))throw new TypeError("Cannot stringify circular structure without alias nodes");t.resolvedAliases?t.resolvedAliases.add(e):t.resolvedAliases=new Set([e]),e=e.resolve(t.doc)}let r;const i=sr(e)?e:t.doc.createNode(e,{onTagObj:e=>r=e});r||(r=function(e,t){if(t.tag){const n=e.filter((e=>e.tag===t.tag));if(n.length>0)return n.find((e=>e.format===t.format))??n[0]}let n,s;if(er(t)){s=t.value;const r=e.filter((e=>e.identify?.(s)));n=r.find((e=>e.format===t.format))??r.find((e=>!e.format))}else s=t,n=e.find((e=>e.nodeClass&&s instanceof e.nodeClass));if(!n)throw new Error(`Tag not resolved for ${s?.constructor?.name??typeof s} value`);return n}(t.doc.schema.tags,i));const o=function(e,t,{anchors:n,doc:s}){if(!s.directives)return"";const r=[],i=(er(e)||nr(e))&&e.anchor;i&&br(i)&&(n.add(i),r.push(`&${i}`));const o=e.tag?e.tag:t.default?null:t.tag;return o&&r.push(s.directives.tagString(o)),r.join(" ")}(i,r,t);o.length>0&&(t.indentAtStart=(t.indentAtStart??0)+o.length+1);const c="function"==typeof r.stringify?r.stringify(i,t,n,s):er(i)?Wr(i,t,n,s):i.toString(t,n,s);return o?er(i)||"{"===c[0]||"["===c[0]?`${o} ${c}`:`${o}\n${t.indent}${c}`:c}function Gr(e,t){"debug"!==e&&"warn"!==e||("undefined"!=typeof process&&process.emitWarning?process.emitWarning(t):console.warn(t))}function Hr(e,t,{key:n,value:s}){if(e?.doc.schema.merge&&Qr(n))if(s=Qs(s)?s.resolve(e.doc):s,tr(s))for(const n of s.items)zr(e,t,n);else if(Array.isArray(s))for(const n of s)zr(e,t,n);else zr(e,t,s);else{const r=Er(n,"",e);if(t instanceof Map)t.set(r,Er(s,r,e));else if(t instanceof Set)t.add(r);else{const i=function(e,t,n){if(null===t)return"";if("object"!=typeof t)return String(t);if(sr(e)&&n&&n.doc){const t=Jr(n.doc,{});t.anchors=new Set;for(const e of n.anchors.keys())t.anchors.add(e.anchor);t.inFlow=!0,t.inStringifyKey=!0;const s=e.toString(t);if(!n.mapKeyWarned){let e=JSON.stringify(s);e.length>40&&(e=e.substring(0,36)+'..."'),Gr(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${e}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return s}return JSON.stringify(t)}(n,r,e),o=Er(s,i,e);i in t?Object.defineProperty(t,i,{value:o,writable:!0,enumerable:!0,configurable:!0}):t[i]=o}}return t}const Qr=e=>"<<"===e||er(e)&&"<<"===e.value&&(!e.type||e.type===Nr.PLAIN);function zr(e,t,n){const s=e&&Qs(n)?n.resolve(e.doc):n;if(!Xs(s))throw new Error("Merge sources must be maps or map aliases");const r=s.toJSON(null,e,Map);for(const[e,n]of r)t instanceof Map?t.has(e)||t.set(e,n):t instanceof Set?t.add(e):Object.prototype.hasOwnProperty.call(t,e)||Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0});return t}function Xr(e,t,n){const s=Ar(e,void 0,n),r=Ar(t,void 0,n);return new Zr(s,r)}class Zr{constructor(e,t=null){Object.defineProperty(this,Hs,{value:Js}),this.key=e,this.value=t}clone(e){let{key:t,value:n}=this;return sr(t)&&(t=t.clone(e)),sr(n)&&(n=n.clone(e)),new Zr(t,n)}toJSON(e,t){return Hr(t,t?.mapAsMap?new Map:{},this)}toString(e,t,n){return e?.doc?function({key:e,value:t},n,s,r){const{allNullValues:i,doc:o,indent:c,indentStep:a,options:{commentString:l,indentSeq:u,simpleKeys:f}}=n;let h=sr(e)&&e.comment||null;if(f){if(h)throw new Error("With simple keys, key nodes cannot have comments");if(nr(e))throw new Error("With simple keys, collection cannot be used as a key value")}let d=!f&&(!e||h&&null==t&&!n.inFlow||nr(e)||(er(e)?e.type===Nr.BLOCK_FOLDED||e.type===Nr.BLOCK_LITERAL:"object"==typeof e));n=Object.assign({},n,{allNullValues:!1,implicitKey:!d&&(f||!i),indent:c+a});let p,m,y,g=!1,b=!1,v=Vr(e,n,(()=>g=!0),(()=>b=!0));if(!d&&!n.inFlow&&v.length>1024){if(f)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");d=!0}if(n.inFlow){if(i||null==t)return g&&s&&s(),""===v?"?":d?`? ${v}`:v}else if(i&&!f||null==t&&d)return v=`? ${v}`,h&&!g?v+=Dr(v,n.indent,l(h)):b&&r&&r(),v;g&&(h=null),d?(h&&(v+=Dr(v,n.indent,l(h))),v=`? ${v}\n${c}:`):(v=`${v}:`,h&&(v+=Dr(v,n.indent,l(h)))),sr(t)?(p=!!t.spaceBefore,m=t.commentBefore,y=t.comment):(p=!1,m=null,y=null,t&&"object"==typeof t&&(t=o.createNode(t))),n.implicitKey=!1,d||h||!er(t)||(n.indentAtStart=v.length+1),b=!1,u||!(a.length>=2)||n.inFlow||d||!tr(t)||t.flow||t.tag||t.anchor||(n.indent=n.indent.substring(2));let w=!1;const S=Vr(t,n,(()=>w=!0),(()=>b=!0));let k=" ";if(h||p||m)k=p?"\n":"",m&&(k+=`\n${Cr(l(m),n.indent)}`),""!==S||n.inFlow?k+=`\n${n.indent}`:"\n"===k&&(k="\n\n");else if(!d&&nr(t)){const e=S[0],s=S.indexOf("\n"),r=-1!==s,i=n.inFlow??t.flow??0===t.items.length;if(r||!i){let t=!1;if(r&&("&"===e||"!"===e)){let n=S.indexOf(" ");"&"===e&&-1!==n&&n<s&&"!"===S[n+1]&&(n=S.indexOf(" ",n+1)),(-1===n||s<n)&&(t=!0)}t||(k=`\n${n.indent}`)}}else""!==S&&"\n"!==S[0]||(k="");return v+=k+S,n.inFlow?w&&s&&s():y&&!w?v+=Dr(v,n.indent,l(y)):b&&r&&r(),v}(this,e,t,n):JSON.stringify(this)}}function ei(e,t,n){return(t.inFlow??e.flow?ni:ti)(e,t,n)}function ti({comment:e,items:t},n,{blockItemPrefix:s,flowChars:r,itemIndent:i,onChompKeep:o,onComment:c}){const{indent:a,options:{commentString:l}}=n,u=Object.assign({},n,{indent:i,type:null});let f=!1;const h=[];for(let e=0;e<t.length;++e){const r=t[e];let o=null;if(sr(r))!f&&r.spaceBefore&&h.push(""),si(n,h,r.commentBefore,f),r.comment&&(o=r.comment);else if(Zs(r)){const e=sr(r.key)?r.key:null;e&&(!f&&e.spaceBefore&&h.push(""),si(n,h,e.commentBefore,f))}f=!1;let c=Vr(r,u,(()=>o=null),(()=>f=!0));o&&(c+=Dr(c,i,l(o))),f&&o&&(f=!1),h.push(s+c)}let d;if(0===h.length)d=r.start+r.end;else{d=h[0];for(let e=1;e<h.length;++e){const t=h[e];d+=t?`\n${a}${t}`:"\n"}}return e?(d+="\n"+Cr(l(e),a),c&&c()):f&&o&&o(),d}function ni({comment:e,items:t},n,{flowChars:s,itemIndent:r,onComment:i}){const{indent:o,indentStep:c,flowCollectionPadding:a,options:{commentString:l}}=n;r+=c;const u=Object.assign({},n,{indent:r,inFlow:!0,type:null});let f=!1,h=0;const d=[];for(let e=0;e<t.length;++e){const s=t[e];let i=null;if(sr(s))s.spaceBefore&&d.push(""),si(n,d,s.commentBefore,!1),s.comment&&(i=s.comment);else if(Zs(s)){const e=sr(s.key)?s.key:null;e&&(e.spaceBefore&&d.push(""),si(n,d,e.commentBefore,!1),e.comment&&(f=!0));const t=sr(s.value)?s.value:null;t?(t.comment&&(i=t.comment),t.commentBefore&&(f=!0)):null==s.value&&e&&e.comment&&(i=e.comment)}i&&(f=!0);let o=Vr(s,u,(()=>i=null));e<t.length-1&&(o+=","),i&&(o+=Dr(o,r,l(i))),!f&&(d.length>h||o.includes("\n"))&&(f=!0),d.push(o),h=d.length}let p;const{start:m,end:y}=s;if(0===d.length)p=m+y;else{if(!f){f=d.reduce(((e,t)=>e+t.length+2),2)>xr.maxFlowStringSingleLineLength}if(f){p=m;for(const e of d)p+=e?`\n${c}${o}${e}`:"\n";p+=`\n${o}${y}`}else p=`${m}${a}${d.join(" ")}${a}${y}`}return e&&(p+=Dr(p,l(e),o),i&&i()),p}function si({indent:e,options:{commentString:t}},n,s,r){if(s&&r&&(s=s.replace(/^\n+/,"")),s){const r=Cr(t(s),e);n.push(r.trimStart())}}function ri(e,t){const n=er(t)?t.value:t;for(const s of e)if(Zs(s)){if(s.key===t||s.key===n)return s;if(er(s.key)&&s.key.value===n)return s}}class ii extends xr{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(Ws,e),this.items=[]}add(e,t){let n;n=Zs(e)?e:e&&"object"==typeof e&&"key"in e?new Zr(e.key,e.value):new Zr(e,e?.value);const s=ri(this.items,n.key),r=this.schema?.sortMapEntries;if(s){if(!t)throw new Error(`Key ${n.key} already set`);er(s.value)&&Or(n.value)?s.value.value=n.value:s.value=n.value}else if(r){const e=this.items.findIndex((e=>r(n,e)<0));-1===e?this.items.push(n):this.items.splice(e,0,n)}else this.items.push(n)}delete(e){const t=ri(this.items,e);if(!t)return!1;return this.items.splice(this.items.indexOf(t),1).length>0}get(e,t){const n=ri(this.items,e),s=n?.value;return(!t&&er(s)?s.value:s)??void 0}has(e){return!!ri(this.items,e)}set(e,t){this.add(new Zr(e,t),!0)}toJSON(e,t,n){const s=n?new n:t?.mapAsMap?new Map:{};t?.onCreate&&t.onCreate(s);for(const e of this.items)Hr(t,s,e);return s}toString(e,t,n){if(!e)return JSON.stringify(this);for(const e of this.items)if(!Zs(e))throw new Error(`Map items must all be pairs; found ${JSON.stringify(e)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),ei(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:n,onComment:t})}}const oi={collection:"map",createNode:function(e,t,n){const{keepUndefined:s,replacer:r}=n,i=new ii(e),o=(e,o)=>{if("function"==typeof r)o=r.call(t,e,o);else if(Array.isArray(r)&&!r.includes(e))return;(void 0!==o||s)&&i.items.push(Xr(e,o,n))};if(t instanceof Map)for(const[e,n]of t)o(e,n);else if(t&&"object"==typeof t)for(const e of Object.keys(t))o(e,t[e]);return"function"==typeof e.sortMapEntries&&i.items.sort(e.sortMapEntries),i},default:!0,nodeClass:ii,tag:"tag:yaml.org,2002:map",resolve:(e,t)=>(Xs(e)||t("Expected a mapping for this tag"),e)};class ci extends xr{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(Gs,e),this.items=[]}add(e){this.items.push(e)}delete(e){const t=ai(e);if("number"!=typeof t)return!1;return this.items.splice(t,1).length>0}get(e,t){const n=ai(e);if("number"!=typeof n)return;const s=this.items[n];return!t&&er(s)?s.value:s}has(e){const t=ai(e);return"number"==typeof t&&t<this.items.length}set(e,t){const n=ai(e);if("number"!=typeof n)throw new Error(`Expected a valid index, not ${e}.`);const s=this.items[n];er(s)&&Or(t)?s.value=t:this.items[n]=t}toJSON(e,t){const n=[];t?.onCreate&&t.onCreate(n);let s=0;for(const e of this.items)n.push(Er(e,String(s++),t));return n}toString(e,t,n){return e?ei(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:n,onComment:t}):JSON.stringify(this)}}function ai(e){let t=er(e)?e.value:e;return t&&"string"==typeof t&&(t=Number(t)),"number"==typeof t&&Number.isInteger(t)&&t>=0?t:null}const li={collection:"seq",createNode:function(e,t,n){const{replacer:s}=n,r=new ci(e);if(t&&Symbol.iterator in Object(t)){let e=0;for(let i of t){if("function"==typeof s){const n=t instanceof Set?i:String(e++);i=s.call(t,n,i)}r.items.push(Ar(i,void 0,n))}}return r},default:!0,nodeClass:ci,tag:"tag:yaml.org,2002:seq",resolve:(e,t)=>(tr(e)||t("Expected a sequence for this tag"),e)},ui={identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:(e,t,n,s)=>Wr(e,t=Object.assign({actualString:!0},t),n,s)},fi={identify:e=>null==e,createNode:()=>new Nr(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new Nr(null),stringify:({source:e},t)=>"string"==typeof e&&fi.test.test(e)?e:t.options.nullStr},hi={identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new Nr("t"===e[0]||"T"===e[0]),stringify({source:e,value:t},n){if(e&&hi.test.test(e)){if(t===("t"===e[0]||"T"===e[0]))return e}return t?n.options.trueStr:n.options.falseStr}};function di({format:e,minFractionDigits:t,tag:n,value:s}){if("bigint"==typeof s)return String(s);const r="number"==typeof s?s:Number(s);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let i=JSON.stringify(s);if(!e&&t&&(!n||"tag:yaml.org,2002:float"===n)&&/^\d/.test(i)){let e=i.indexOf(".");e<0&&(e=i.length,i+=".");let n=t-(i.length-e-1);for(;n-- >0;)i+="0"}return i}const pi={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN))$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:di},mi={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():di(e)}},yi={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){const t=new Nr(parseFloat(e)),n=e.indexOf(".");return-1!==n&&"0"===e[e.length-1]&&(t.minFractionDigits=e.length-n-1),t},stringify:di},gi=e=>"bigint"==typeof e||Number.isInteger(e),bi=(e,t,n,{intAsBigInt:s})=>s?BigInt(e):parseInt(e.substring(t),n);function vi(e,t,n){const{value:s}=e;return gi(s)&&s>=0?n+s.toString(t):di(e)}const wi={identify:e=>gi(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,n)=>bi(e,2,8,n),stringify:e=>vi(e,8,"0o")},Si={identify:gi,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,n)=>bi(e,0,10,n),stringify:di},ki={identify:e=>gi(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,n)=>bi(e,2,16,n),stringify:e=>vi(e,16,"0x")},Ei=[oi,li,ui,fi,hi,wi,Si,ki,pi,mi,yi];function Oi(e){return"bigint"==typeof e||Number.isInteger(e)}const Ni=({value:e})=>JSON.stringify(e),$i=[oi,li].concat([{identify:e=>"string"==typeof e,default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:Ni},{identify:e=>null==e,createNode:()=>new Nr(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Ni},{identify:e=>"boolean"==typeof e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true|false$/,resolve:e=>"true"===e,stringify:Ni},{identify:Oi,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:n})=>n?BigInt(e):parseInt(e,10),stringify:({value:e})=>Oi(e)?e.toString():JSON.stringify(e)},{identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:Ni}],{default:!0,tag:"",test:/^/,resolve:(e,t)=>(t(`Unresolved plain scalar ${JSON.stringify(e)}`),e)}),Ai={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if("function"==typeof Buffer)return Buffer.from(e,"base64");if("function"==typeof atob){const t=atob(e.replace(/[\n\r]/g,"")),n=new Uint8Array(t.length);for(let e=0;e<t.length;++e)n[e]=t.charCodeAt(e);return n}return t("This environment does not support reading binary tags; either Buffer or atob is required"),e},stringify({comment:e,type:t,value:n},s,r,i){const o=n;let c;if("function"==typeof Buffer)c=o instanceof Buffer?o.toString("base64"):Buffer.from(o.buffer).toString("base64");else{if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");{let e="";for(let t=0;t<o.length;++t)e+=String.fromCharCode(o[t]);c=btoa(e)}}if(t||(t=Nr.BLOCK_LITERAL),t!==Nr.QUOTE_DOUBLE){const e=Math.max(s.options.lineWidth-s.indent.length,s.options.minContentWidth),n=Math.ceil(c.length/e),r=new Array(n);for(let t=0,s=0;t<n;++t,s+=e)r[t]=c.substr(s,e);c=r.join(t===Nr.BLOCK_LITERAL?"\n":" ")}return Wr({comment:e,type:t,value:c},s,r,i)}};function Ti(e,t){if(tr(e))for(let n=0;n<e.items.length;++n){let s=e.items[n];if(!Zs(s)){if(Xs(s)){s.items.length>1&&t("Each pair must have its own sequence indicator");const e=s.items[0]||new Zr(new Nr(null));if(s.commentBefore&&(e.key.commentBefore=e.key.commentBefore?`${s.commentBefore}\n${e.key.commentBefore}`:s.commentBefore),s.comment){const t=e.value??e.key;t.comment=t.comment?`${s.comment}\n${t.comment}`:s.comment}s=e}e.items[n]=Zs(s)?s:new Zr(s)}}else t("Expected a sequence for this tag");return e}function Li(e,t,n){const{replacer:s}=n,r=new ci(e);r.tag="tag:yaml.org,2002:pairs";let i=0;if(t&&Symbol.iterator in Object(t))for(let e of t){let o,c;if("function"==typeof s&&(e=s.call(t,String(i++),e)),Array.isArray(e)){if(2!==e.length)throw new TypeError(`Expected [key, value] tuple: ${e}`);o=e[0],c=e[1]}else if(e&&e instanceof Object){const t=Object.keys(e);if(1!==t.length)throw new TypeError(`Expected { key: value } tuple: ${e}`);o=t[0],c=e[o]}else o=e;r.items.push(Xr(o,c,n))}return r}const xi={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:Ti,createNode:Li};class Ii extends ci{constructor(){super(),this.add=ii.prototype.add.bind(this),this.delete=ii.prototype.delete.bind(this),this.get=ii.prototype.get.bind(this),this.has=ii.prototype.has.bind(this),this.set=ii.prototype.set.bind(this),this.tag=Ii.tag}toJSON(e,t){if(!t)return super.toJSON(e);const n=new Map;t?.onCreate&&t.onCreate(n);for(const e of this.items){let s,r;if(Zs(e)?(s=Er(e.key,"",t),r=Er(e.value,s,t)):s=Er(e,"",t),n.has(s))throw new Error("Ordered maps must not include duplicate keys");n.set(s,r)}return n}}Ii.tag="tag:yaml.org,2002:omap";const Ci={collection:"seq",identify:e=>e instanceof Map,nodeClass:Ii,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){const n=Ti(e,t),s=[];for(const{key:e}of n.items)er(e)&&(s.includes(e.value)?t(`Ordered maps must not include duplicate keys: ${e.value}`):s.push(e.value));return Object.assign(new Ii,n)},createNode(e,t,n){const s=Li(e,t,n),r=new Ii;return r.items=s.items,r}};function Di({value:e,source:t},n){return t&&(e?_i:Mi).test.test(t)?t:e?n.options.trueStr:n.options.falseStr}const _i={identify:e=>!0===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new Nr(!0),stringify:Di},Mi={identify:e=>!1===e,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/i,resolve:()=>new Nr(!1),stringify:Di},ji={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?\.(?:inf|Inf|INF|nan|NaN|NAN)$/,resolve:e=>"nan"===e.slice(-3).toLowerCase()?NaN:"-"===e[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:di},Pi={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify(e){const t=Number(e.value);return isFinite(t)?t.toExponential():di(e)}},Fi={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){const t=new Nr(parseFloat(e.replace(/_/g,""))),n=e.indexOf(".");if(-1!==n){const s=e.substring(n+1).replace(/_/g,"");"0"===s[s.length-1]&&(t.minFractionDigits=s.length)}return t},stringify:di},Bi=e=>"bigint"==typeof e||Number.isInteger(e);function Ki(e,t,n,{intAsBigInt:s}){const r=e[0];if("-"!==r&&"+"!==r||(t+=1),e=e.substring(t).replace(/_/g,""),s){switch(n){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`}const t=BigInt(e);return"-"===r?BigInt(-1)*t:t}const i=parseInt(e,n);return"-"===r?-1*i:i}function Ui(e,t,n){const{value:s}=e;if(Bi(s)){const e=s.toString(t);return s<0?"-"+n+e.substr(1):n+e}return di(e)}const qi={identify:Bi,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,n)=>Ki(e,2,2,n),stringify:e=>Ui(e,2,"0b")},Ri={identify:Bi,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,n)=>Ki(e,1,8,n),stringify:e=>Ui(e,8,"0")},Yi={identify:Bi,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,n)=>Ki(e,0,10,n),stringify:di},Wi={identify:Bi,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,n)=>Ki(e,2,16,n),stringify:e=>Ui(e,16,"0x")};class Ji extends ii{constructor(e){super(e),this.tag=Ji.tag}add(e){let t;t=Zs(e)?e:e&&"object"==typeof e&&"key"in e&&"value"in e&&null===e.value?new Zr(e.key,null):new Zr(e,null);ri(this.items,t.key)||this.items.push(t)}get(e,t){const n=ri(this.items,e);return!t&&Zs(n)?er(n.key)?n.key.value:n.key:n}set(e,t){if("boolean"!=typeof t)throw new Error("Expected boolean value for set(key, value) in a YAML set, not "+typeof t);const n=ri(this.items,e);n&&!t?this.items.splice(this.items.indexOf(n),1):!n&&t&&this.items.push(new Zr(e))}toJSON(e,t){return super.toJSON(e,t,Set)}toString(e,t,n){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),t,n);throw new Error("Set items must all have null values")}}Ji.tag="tag:yaml.org,2002:set";const Vi={collection:"map",identify:e=>e instanceof Set,nodeClass:Ji,default:!1,tag:"tag:yaml.org,2002:set",resolve(e,t){if(Xs(e)){if(e.hasAllNullValues(!0))return Object.assign(new Ji,e);t("Set items must all have null values")}else t("Expected a mapping for this tag");return e},createNode(e,t,n){const{replacer:s}=n,r=new Ji(e);if(t&&Symbol.iterator in Object(t))for(let e of t)"function"==typeof s&&(e=s.call(t,e,e)),r.items.push(Xr(e,null,n));return r}};function Gi(e,t){const n=e[0],s="-"===n||"+"===n?e.substring(1):e,r=e=>t?BigInt(e):Number(e),i=s.replace(/_/g,"").split(":").reduce(((e,t)=>e*r(60)+r(t)),r(0));return"-"===n?r(-1)*i:i}function Hi(e){let{value:t}=e,n=e=>e;if("bigint"==typeof t)n=e=>BigInt(e);else if(isNaN(t)||!isFinite(t))return di(e);let s="";t<0&&(s="-",t*=n(-1));const r=n(60),i=[t%r];return t<60?i.unshift(0):(t=(t-i[0])/r,i.unshift(t%r),t>=60&&(t=(t-i[0])/r,i.unshift(t))),s+i.map((e=>e<10?"0"+String(e):String(e))).join(":").replace(/000000\d*$/,"")}const Qi={identify:e=>"bigint"==typeof e||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:n})=>Gi(e,n),stringify:Hi},zi={identify:e=>"number"==typeof e,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>Gi(e,!1),stringify:Hi},Xi={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){const t=e.match(Xi.test);if(!t)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,s,r,i,o,c]=t.map(Number),a=t[7]?Number((t[7]+"00").substr(1,3)):0;let l=Date.UTC(n,s-1,r,i||0,o||0,c||0,a);const u=t[8];if(u&&"Z"!==u){let e=Gi(u,!1);Math.abs(e)<30&&(e*=60),l-=6e4*e}return new Date(l)},stringify:({value:e})=>e.toISOString().replace(/((T00:00)?:00)?\.000Z$/,"")},Zi=[oi,li,ui,fi,_i,Mi,qi,Ri,Yi,Wi,ji,Pi,Fi,Ai,Ci,xi,Vi,Qi,zi,Xi],eo=new Map([["core",Ei],["failsafe",[oi,li,ui]],["json",$i],["yaml11",Zi],["yaml-1.1",Zi]]),to={binary:Ai,bool:hi,float:yi,floatExp:mi,floatNaN:pi,floatTime:zi,int:Si,intHex:ki,intOct:wi,intTime:Qi,map:oi,null:fi,omap:Ci,pairs:xi,seq:li,set:Vi,timestamp:Xi},no={"tag:yaml.org,2002:binary":Ai,"tag:yaml.org,2002:omap":Ci,"tag:yaml.org,2002:pairs":xi,"tag:yaml.org,2002:set":Vi,"tag:yaml.org,2002:timestamp":Xi};function so(e,t){let n=eo.get(t);if(!n){if(!Array.isArray(e)){const e=Array.from(eo.keys()).filter((e=>"yaml11"!==e)).map((e=>JSON.stringify(e))).join(", ");throw new Error(`Unknown schema "${t}"; use one of ${e} or define customTags array`)}n=[]}if(Array.isArray(e))for(const t of e)n=n.concat(t);else"function"==typeof e&&(n=e(n.slice()));return n.map((e=>{if("string"!=typeof e)return e;const t=to[e];if(t)return t;const n=Object.keys(to).map((e=>JSON.stringify(e))).join(", ");throw new Error(`Unknown custom tag "${e}"; use one of ${n}`)}))}const ro=(e,t)=>e.key<t.key?-1:e.key>t.key?1:0;class io{constructor({compat:e,customTags:t,merge:n,resolveKnownTags:s,schema:r,sortMapEntries:i,toStringDefaults:o}){this.compat=Array.isArray(e)?so(e,"compat"):e?so(null,e):null,this.merge=!!n,this.name="string"==typeof r&&r||"core",this.knownTags=s?no:{},this.tags=so(t,this.name),this.toStringOptions=o??null,Object.defineProperty(this,Ws,{value:oi}),Object.defineProperty(this,Vs,{value:ui}),Object.defineProperty(this,Gs,{value:li}),this.sortMapEntries="function"==typeof i?i:!0===i?ro:null}clone(){const e=Object.create(io.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function oo(e,t,n,s){if(s&&"object"==typeof s)if(Array.isArray(s))for(let t=0,n=s.length;t<n;++t){const n=s[t],r=oo(e,s,String(t),n);void 0===r?delete s[t]:r!==n&&(s[t]=r)}else if(s instanceof Map)for(const t of Array.from(s.keys())){const n=s.get(t),r=oo(e,s,t,n);void 0===r?s.delete(t):r!==n&&s.set(t,r)}else if(s instanceof Set)for(const t of Array.from(s)){const n=oo(e,s,t,t);void 0===n?s.delete(t):n!==t&&(s.delete(t),s.add(n))}else for(const[t,n]of Object.entries(s)){const r=oo(e,s,t,n);void 0===r?delete s[t]:r!==n&&(s[t]=r)}return e.call(t,n,s)}class co{constructor(e,t,n){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,Hs,{value:Ys});let s=null;"function"==typeof t||Array.isArray(t)?s=t:void 0===n&&t&&(n=t,t=void 0);const r=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,uniqueKeys:!0,version:"1.2"},n);this.options=r;let{version:i}=r;n?._directives?(this.directives=n._directives.atDocument(),this.directives.yaml.explicit&&(i=this.directives.yaml.version)):this.directives=new gr({version:i}),this.setSchema(i,n),this.contents=void 0===e?null:this.createNode(e,s,n)}clone(){const e=Object.create(co.prototype,{[Hs]:{value:Ys}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=sr(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){ao(this.contents)&&this.contents.add(e)}addIn(e,t){ao(this.contents)&&this.contents.addIn(e,t)}createAlias(e,t){if(!e.anchor){const n=vr(this);e.anchor=!t||n.has(t)?wr(t||"a",n):t}return new Sr(e.anchor)}createNode(e,t,n){let s;if("function"==typeof t)e=t.call({"":e},"",e),s=t;else if(Array.isArray(t)){const e=e=>"number"==typeof e||e instanceof String||e instanceof Number,n=t.filter(e).map(String);n.length>0&&(t=t.concat(n)),s=t}else void 0===n&&t&&(n=t,t=void 0);const{aliasDuplicateObjects:r,anchorPrefix:i,flow:o,keepUndefined:c,onTagObj:a,tag:l}=n??{},{onAnchor:u,setAnchors:f,sourceObjects:h}=function(e,t){const n=[],s=new Map;let r=null;return{onAnchor:s=>{n.push(s),r||(r=vr(e));const i=wr(t,r);return r.add(i),i},setAnchors:()=>{for(const e of n){const t=s.get(e);if("object"!=typeof t||!t.anchor||!er(t.node)&&!nr(t.node)){const t=new Error("Failed to resolve repeated object (this should not happen)");throw t.source=e,t}t.node.anchor=t.anchor}},sourceObjects:s}}(this,i||"a"),d=Ar(e,l,{aliasDuplicateObjects:r??!0,keepUndefined:c??!1,onAnchor:u,onTagObj:a,replacer:s,schema:this.schema,sourceObjects:h});return o&&nr(d)&&(d.flow=!0),f(),d}createPair(e,t,n={}){const s=this.createNode(e,null,n),r=this.createNode(t,null,n);return new Zr(s,r)}delete(e){return!!ao(this.contents)&&this.contents.delete(e)}deleteIn(e){return Lr(e)?null!=this.contents&&(this.contents=null,!0):!!ao(this.contents)&&this.contents.deleteIn(e)}get(e,t){return nr(this.contents)?this.contents.get(e,t):void 0}getIn(e,t){return Lr(e)?!t&&er(this.contents)?this.contents.value:this.contents:nr(this.contents)?this.contents.getIn(e,t):void 0}has(e){return!!nr(this.contents)&&this.contents.has(e)}hasIn(e){return Lr(e)?void 0!==this.contents:!!nr(this.contents)&&this.contents.hasIn(e)}set(e,t){null==this.contents?this.contents=Tr(this.schema,[e],t):ao(this.contents)&&this.contents.set(e,t)}setIn(e,t){Lr(e)?this.contents=t:null==this.contents?this.contents=Tr(this.schema,Array.from(e),t):ao(this.contents)&&this.contents.setIn(e,t)}setSchema(e,t={}){let n;switch("number"==typeof e&&(e=String(e)),e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new gr({version:"1.1"}),n={merge:!0,resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new gr({version:e}),n={merge:!1,resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,n=null;break;default:{const t=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${t}`)}}if(t.schema instanceof Object)this.schema=t.schema;else{if(!n)throw new Error("With a null YAML version, the { schema: Schema } option is required");this.schema=new io(Object.assign(n,t))}}toJS({json:e,jsonArg:t,mapAsMap:n,maxAliasCount:s,onAnchor:r,reviver:i}={}){const o={anchors:new Map,doc:this,keep:!e,mapAsMap:!0===n,mapKeyWarned:!1,maxAliasCount:"number"==typeof s?s:100,stringify:Vr},c=Er(this.contents,t??"",o);if("function"==typeof r)for(const{count:e,res:t}of o.anchors.values())r(t,e);return"function"==typeof i?oo(i,{"":c},"",c):c}toJSON(e,t){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:t})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const t=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${t}`)}return function(e,t){const n=[];let s=!0===t.directives;if(!1!==t.directives&&e.directives){const t=e.directives.toString(e);t?(n.push(t),s=!0):e.directives.docStart&&(s=!0)}s&&n.push("---");const r=Jr(e,t),{commentString:i}=r.options;if(e.commentBefore){1!==n.length&&n.unshift("");const t=i(e.commentBefore);n.unshift(Cr(t,""))}let o=!1,c=null;if(e.contents){if(sr(e.contents)){if(e.contents.spaceBefore&&s&&n.push(""),e.contents.commentBefore){const t=i(e.contents.commentBefore);n.push(Cr(t,""))}r.forceBlockIndent=!!e.comment,c=e.contents.comment}const t=c?void 0:()=>o=!0;let a=Vr(e.contents,r,(()=>c=null),t);c&&(a+=Dr(a,"",i(c))),"|"!==a[0]&&">"!==a[0]||"---"!==n[n.length-1]?n.push(a):n[n.length-1]=`--- ${a}`}else n.push(Vr(e.contents,r));if(e.directives?.docEnd)if(e.comment){const t=i(e.comment);t.includes("\n")?(n.push("..."),n.push(Cr(t,""))):n.push(`... ${t}`)}else n.push("...");else{let t=e.comment;t&&o&&(t=t.replace(/^\n+/,"")),t&&(o&&!c||""===n[n.length-1]||n.push(""),n.push(Cr(i(t),"")))}return n.join("\n")+"\n"}(this,e)}}function ao(e){if(nr(e))return!0;throw new Error("Expected a YAML collection as document contents")}class lo extends Error{constructor(e,t,n,s){super(),this.name=e,this.code=n,this.message=s,this.pos=t}}class uo extends lo{constructor(e,t,n){super("YAMLParseError",e,t,n)}}class fo extends lo{constructor(e,t,n){super("YAMLWarning",e,t,n)}}const ho=(e,t)=>n=>{if(-1===n.pos[0])return;n.linePos=n.pos.map((e=>t.linePos(e)));const{line:s,col:r}=n.linePos[0];n.message+=` at line ${s}, column ${r}`;let i=r-1,o=e.substring(t.lineStarts[s-1],t.lineStarts[s]).replace(/[\n\r]+$/,"");if(i>=60&&o.length>80){const e=Math.min(i-39,o.length-79);o="…"+o.substring(e),i-=e-1}if(o.length>80&&(o=o.substring(0,79)+"…"),s>1&&/^ *$/.test(o.substring(0,i))){let n=e.substring(t.lineStarts[s-2],t.lineStarts[s-1]);n.length>80&&(n=n.substring(0,79)+"…\n"),o=n+o}if(/[^ ]/.test(o)){let e=1;const t=n.linePos[1];t&&t.line===s&&t.col>r&&(e=Math.min(t.col-r,80-i));const c=" ".repeat(i)+"^".repeat(e);n.message+=`:\n\n${o}\n${c}\n`}};function po(e,{flow:t,indicator:n,next:s,offset:r,onError:i,startOnNewline:o}){let c=!1,a=o,l=o,u="",f="",h=!1,d=!1,p=!1,m=null,y=null,g=null,b=null,v=null;for(const s of e)switch(p&&("space"!==s.type&&"newline"!==s.type&&"comma"!==s.type&&i(s.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),p=!1),s.type){case"space":!t&&a&&"doc-start"!==n&&"\t"===s.source[0]&&i(s,"TAB_AS_INDENT","Tabs are not allowed as indentation"),l=!0;break;case"comment":{l||i(s,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const e=s.source.substring(1)||" ";u?u+=f+e:u=e,f="",a=!1;break}case"newline":a?u?u+=s.source:c=!0:f+=s.source,a=!0,h=!0,(m||y)&&(d=!0),l=!0;break;case"anchor":m&&i(s,"MULTIPLE_ANCHORS","A node can have at most one anchor"),s.source.endsWith(":")&&i(s.offset+s.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),m=s,null===v&&(v=s.offset),a=!1,l=!1,p=!0;break;case"tag":y&&i(s,"MULTIPLE_TAGS","A node can have at most one tag"),y=s,null===v&&(v=s.offset),a=!1,l=!1,p=!0;break;case n:(m||y)&&i(s,"BAD_PROP_ORDER",`Anchors and tags must be after the ${s.source} indicator`),b&&i(s,"UNEXPECTED_TOKEN",`Unexpected ${s.source} in ${t??"collection"}`),b=s,a=!1,l=!1;break;case"comma":if(t){g&&i(s,"UNEXPECTED_TOKEN",`Unexpected , in ${t}`),g=s,a=!1,l=!1;break}default:i(s,"UNEXPECTED_TOKEN",`Unexpected ${s.type} token`),a=!1,l=!1}const w=e[e.length-1],S=w?w.offset+w.source.length:r;return p&&s&&"space"!==s.type&&"newline"!==s.type&&"comma"!==s.type&&("scalar"!==s.type||""!==s.source)&&i(s.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),{comma:g,found:b,spaceBefore:c,comment:u,hasNewline:h,hasNewlineAfterProp:d,anchor:m,tag:y,end:S,start:v??S}}function mo(e){if(!e)return null;switch(e.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(e.source.includes("\n"))return!0;if(e.end)for(const t of e.end)if("newline"===t.type)return!0;return!1;case"flow-collection":for(const t of e.items){for(const e of t.start)if("newline"===e.type)return!0;if(t.sep)for(const e of t.sep)if("newline"===e.type)return!0;if(mo(t.key)||mo(t.value))return!0}return!1;default:return!0}}function yo(e,t,n){if("flow-collection"===t?.type){const s=t.end[0];if(s.indent===e&&("]"===s.source||"}"===s.source)&&mo(t)){n(s,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}}function go(e,t,n){const{uniqueKeys:s}=e.options;if(!1===s)return!1;const r="function"==typeof s?s:(t,n)=>t===n||er(t)&&er(n)&&t.value===n.value&&!("<<"===t.value&&e.schema.merge);return t.some((e=>r(e.key,n)))}const bo="All mapping items must start at the same column";function vo(e,t,n,s){let r="";if(e){let i=!1,o="";for(const c of e){const{source:e,type:a}=c;switch(a){case"space":i=!0;break;case"comment":{n&&!i&&s(c,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const t=e.substring(1)||" ";r?r+=o+t:r=t,o="";break}case"newline":r&&(o+=e),i=!0;break;default:s(c,"UNEXPECTED_TOKEN",`Unexpected ${a} at node end`)}t+=e.length}}return{comment:r,offset:t}}const wo="Block collections are not allowed within flow collections",So=e=>e&&("block-map"===e.type||"block-seq"===e.type);function ko(e,t,n,s,r){let i;switch(n.type){case"block-map":i=function({composeNode:e,composeEmptyNode:t},n,s,r){const i=new ii(n.schema);n.atRoot&&(n.atRoot=!1);let o=s.offset,c=null;for(const a of s.items){const{start:l,key:u,sep:f,value:h}=a,d=po(l,{indicator:"explicit-key-ind",next:u??f?.[0],offset:o,onError:r,startOnNewline:!0}),p=!d.found;if(p){if(u&&("block-seq"===u.type?r(o,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in u&&u.indent!==s.indent&&r(o,"BAD_INDENT",bo)),!d.anchor&&!d.tag&&!f){c=d.end,d.comment&&(i.comment?i.comment+="\n"+d.comment:i.comment=d.comment);continue}(d.hasNewlineAfterProp||mo(u))&&r(u??l[l.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else d.found?.indent!==s.indent&&r(o,"BAD_INDENT",bo);const m=d.end,y=u?e(n,u,d,r):t(n,m,l,null,d,r);n.schema.compat&&yo(s.indent,u,r),go(n,i.items,y)&&r(m,"DUPLICATE_KEY","Map keys must be unique");const g=po(f??[],{indicator:"map-value-ind",next:h,offset:y.range[2],onError:r,startOnNewline:!u||"block-scalar"===u.type});if(o=g.end,g.found){p&&("block-map"!==h?.type||g.hasNewline||r(o,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&d.start<g.found.offset-1024&&r(y.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const c=h?e(n,h,g,r):t(n,o,f,null,g,r);n.schema.compat&&yo(s.indent,h,r),o=c.range[2];const l=new Zr(y,c);n.options.keepSourceTokens&&(l.srcToken=a),i.items.push(l)}else{p&&r(y.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),g.comment&&(y.comment?y.comment+="\n"+g.comment:y.comment=g.comment);const e=new Zr(y);n.options.keepSourceTokens&&(e.srcToken=a),i.items.push(e)}}return c&&c<o&&r(c,"IMPOSSIBLE","Map comment with trailing content"),i.range=[s.offset,o,c??o],i}(e,t,n,r);break;case"block-seq":i=function({composeNode:e,composeEmptyNode:t},n,s,r){const i=new ci(n.schema);n.atRoot&&(n.atRoot=!1);let o=s.offset,c=null;for(const{start:a,value:l}of s.items){const u=po(a,{indicator:"seq-item-ind",next:l,offset:o,onError:r,startOnNewline:!0});if(!u.found){if(!(u.anchor||u.tag||l)){c=u.end,u.comment&&(i.comment=u.comment);continue}l&&"block-seq"===l.type?r(u.end,"BAD_INDENT","All sequence items must start at the same column"):r(o,"MISSING_CHAR","Sequence item without - indicator")}const f=l?e(n,l,u,r):t(n,u.end,a,null,u,r);n.schema.compat&&yo(s.indent,l,r),o=f.range[2],i.items.push(f)}return i.range=[s.offset,o,c??o],i}(e,t,n,r);break;case"flow-collection":i=function({composeNode:e,composeEmptyNode:t},n,s,r){const i="{"===s.start.source,o=i?"flow map":"flow sequence",c=i?new ii(n.schema):new ci(n.schema);c.flow=!0;const a=n.atRoot;a&&(n.atRoot=!1);let l=s.offset+s.start.source.length;for(let a=0;a<s.items.length;++a){const u=s.items[a],{start:f,key:h,sep:d,value:p}=u,m=po(f,{flow:o,indicator:"explicit-key-ind",next:h??d?.[0],offset:l,onError:r,startOnNewline:!1});if(!m.found){if(!(m.anchor||m.tag||d||p)){0===a&&m.comma?r(m.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${o}`):a<s.items.length-1&&r(m.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${o}`),m.comment&&(c.comment?c.comment+="\n"+m.comment:c.comment=m.comment),l=m.end;continue}!i&&n.options.strict&&mo(h)&&r(h,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(0===a)m.comma&&r(m.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${o}`);else if(m.comma||r(m.start,"MISSING_CHAR",`Missing , between ${o} items`),m.comment){let e="";e:for(const t of f)switch(t.type){case"comma":case"space":break;case"comment":e=t.source.substring(1);break e;default:break e}if(e){let t=c.items[c.items.length-1];Zs(t)&&(t=t.value??t.key),t.comment?t.comment+="\n"+e:t.comment=e,m.comment=m.comment.substring(e.length+1)}}if(i||d||m.found){const s=m.end,a=h?e(n,h,m,r):t(n,s,f,null,m,r);So(h)&&r(a.range,"BLOCK_IN_FLOW",wo);const y=po(d??[],{flow:o,indicator:"map-value-ind",next:p,offset:a.range[2],onError:r,startOnNewline:!1});if(y.found){if(!i&&!m.found&&n.options.strict){if(d)for(const e of d){if(e===y.found)break;if("newline"===e.type){r(e,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}m.start<y.found.offset-1024&&r(y.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else p&&("source"in p&&p.source&&":"===p.source[0]?r(p,"MISSING_CHAR",`Missing space after : in ${o}`):r(y.start,"MISSING_CHAR",`Missing , or : between ${o} items`));const g=p?e(n,p,y,r):y.found?t(n,y.end,d,null,y,r):null;g?So(p)&&r(g.range,"BLOCK_IN_FLOW",wo):y.comment&&(a.comment?a.comment+="\n"+y.comment:a.comment=y.comment);const b=new Zr(a,g);if(n.options.keepSourceTokens&&(b.srcToken=u),i){const e=c;go(n,e.items,a)&&r(s,"DUPLICATE_KEY","Map keys must be unique"),e.items.push(b)}else{const e=new ii(n.schema);e.flow=!0,e.items.push(b),c.items.push(e)}l=g?g.range[2]:y.end}else{const s=p?e(n,p,m,r):t(n,m.end,d,null,m,r);c.items.push(s),l=s.range[2],So(p)&&r(s.range,"BLOCK_IN_FLOW",wo)}}const u=i?"}":"]",[f,...h]=s.end;let d=l;if(f&&f.source===u)d=f.offset+f.source.length;else{const e=o[0].toUpperCase()+o.substring(1);r(l,a?"MISSING_CHAR":"BAD_INDENT",a?`${e} must end with a ${u}`:`${e} in block collection must be sufficiently indented and end with a ${u}`),f&&1!==f.source.length&&h.unshift(f)}if(h.length>0){const e=vo(h,d,n.options.strict,r);e.comment&&(c.comment?c.comment+="\n"+e.comment:c.comment=e.comment),c.range=[s.offset,d,e.offset]}else c.range=[s.offset,d,d];return c}(e,t,n,r)}if(!s)return i;const o=t.directives.tagName(s.source,(e=>r(s,"TAG_RESOLVE_FAILED",e)));if(!o)return i;const c=i.constructor;if("!"===o||o===c.tagName)return i.tag=c.tagName,i;const a=Xs(i)?"map":"seq";let l=t.schema.tags.find((e=>e.collection===a&&e.tag===o));if(!l){const e=t.schema.knownTags[o];if(!e||e.collection!==a)return r(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),i.tag=o,i;t.schema.tags.push(Object.assign({},e,{default:!1})),l=e}const u=l.resolve(i,(e=>r(s,"TAG_RESOLVE_FAILED",e)),t.options),f=sr(u)?u:new Nr(u);return f.range=i.range,f.tag=o,l?.format&&(f.format=l.format),f}function Eo(e,t,n){const s=e.offset,r=function({offset:e,props:t},n,s){if("block-scalar-header"!==t[0].type)return s(t[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:r}=t[0],i=r[0];let o=0,c="",a=-1;for(let t=1;t<r.length;++t){const n=r[t];if(c||"-"!==n&&"+"!==n){const s=Number(n);!o&&s?o=s:-1===a&&(a=e+t)}else c=n}-1!==a&&s(a,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${r}`);let l=!1,u="",f=r.length;for(let e=1;e<t.length;++e){const r=t[e];switch(r.type){case"space":l=!0;case"newline":f+=r.source.length;break;case"comment":if(n&&!l){s(r,"MISSING_CHAR","Comments must be separated from other tokens by white space characters")}f+=r.source.length,u=r.source.substring(1);break;case"error":s(r,"UNEXPECTED_TOKEN",r.message),f+=r.source.length;break;default:{s(r,"UNEXPECTED_TOKEN",`Unexpected token in block scalar header: ${r.type}`);const e=r.source;e&&"string"==typeof e&&(f+=e.length)}}}return{mode:i,indent:o,chomp:c,comment:u,length:f}}(e,t,n);if(!r)return{value:"",type:null,comment:"",range:[s,s,s]};const i=">"===r.mode?Nr.BLOCK_FOLDED:Nr.BLOCK_LITERAL,o=e.source?function(e){const t=e.split(/\n( *)/),n=t[0],s=n.match(/^( *)/),r=[s?.[1]?[s[1],n.slice(s[1].length)]:["",n]];for(let e=1;e<t.length;e+=2)r.push([t[e],t[e+1]]);return r}(e.source):[];let c=o.length;for(let e=o.length-1;e>=0;--e){const t=o[e][1];if(""!==t&&"\r"!==t)break;c=e}if(0===c){const t="+"===r.chomp&&o.length>0?"\n".repeat(Math.max(1,o.length-1)):"";let n=s+r.length;return e.source&&(n+=e.source.length),{value:t,type:i,comment:r.comment,range:[s,n,n]}}let a=e.indent+r.indent,l=e.offset+r.length,u=0;for(let e=0;e<c;++e){const[t,s]=o[e];if(""!==s&&"\r"!==s){if(t.length<a){const e="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";n(l+t.length,"MISSING_CHAR",e)}0===r.indent&&(a=t.length),u=e;break}0===r.indent&&t.length>a&&(a=t.length),l+=t.length+s.length+1}for(let e=o.length-1;e>=c;--e)o[e][0].length>a&&(c=e+1);let f="",h="",d=!1;for(let e=0;e<u;++e)f+=o[e][0].slice(a)+"\n";for(let e=u;e<c;++e){let[t,s]=o[e];l+=t.length+s.length+1;const c="\r"===s[s.length-1];if(c&&(s=s.slice(0,-1)),s&&t.length<a){const e=`Block scalar lines must not be less indented than their ${r.indent?"explicit indentation indicator":"first line"}`;n(l-s.length-(c?2:1),"BAD_INDENT",e),t=""}i===Nr.BLOCK_LITERAL?(f+=h+t.slice(a)+s,h="\n"):t.length>a||"\t"===s[0]?(" "===h?h="\n":d||"\n"!==h||(h="\n\n"),f+=h+t.slice(a)+s,h="\n",d=!0):""===s?"\n"===h?f+="\n":h="\n":(f+=h+s,h=" ",d=!1)}switch(r.chomp){case"-":break;case"+":for(let e=c;e<o.length;++e)f+="\n"+o[e][0].slice(a);"\n"!==f[f.length-1]&&(f+="\n");break;default:f+="\n"}const p=s+r.length+e.source.length;return{value:f,type:i,comment:r.comment,range:[s,p,p]}}function Oo(e,t,n){const{offset:s,type:r,source:i,end:o}=e;let c,a;const l=(e,t,r)=>n(s+e,t,r);switch(r){case"scalar":c=Nr.PLAIN,a=function(e,t){let n="";switch(e[0]){case"\t":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":n=`block scalar indicator ${e[0]}`;break;case"@":case"`":n=`reserved character ${e[0]}`}n&&t(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`);return No(e)}(i,l);break;case"single-quoted-scalar":c=Nr.QUOTE_SINGLE,a=function(e,t){"'"===e[e.length-1]&&1!==e.length||t(e.length,"MISSING_CHAR","Missing closing 'quote");return No(e.slice(1,-1)).replace(/''/g,"'")}(i,l);break;case"double-quoted-scalar":c=Nr.QUOTE_DOUBLE,a=function(e,t){let n="";for(let s=1;s<e.length-1;++s){const r=e[s];if("\r"!==r||"\n"!==e[s+1])if("\n"===r){const{fold:t,offset:r}=$o(e,s);n+=t,s=r}else if("\\"===r){let r=e[++s];const i=Ao[r];if(i)n+=i;else if("\n"===r)for(r=e[s+1];" "===r||"\t"===r;)r=e[1+ ++s];else if("\r"===r&&"\n"===e[s+1])for(r=e[1+ ++s];" "===r||"\t"===r;)r=e[1+ ++s];else if("x"===r||"u"===r||"U"===r){const i={x:2,u:4,U:8}[r];n+=To(e,s+1,i,t),s+=i}else{const r=e.substr(s-1,2);t(s-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${r}`),n+=r}}else if(" "===r||"\t"===r){const t=s;let i=e[s+1];for(;" "===i||"\t"===i;)i=e[1+ ++s];"\n"===i||"\r"===i&&"\n"===e[s+2]||(n+=s>t?e.slice(t,s+1):r)}else n+=r}'"'===e[e.length-1]&&1!==e.length||t(e.length,"MISSING_CHAR",'Missing closing "quote');return n}(i,l);break;default:return n(e,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${r}`),{value:"",type:null,comment:"",range:[s,s+i.length,s+i.length]}}const u=s+i.length,f=vo(o,u,t,n);return{value:a,type:c,comment:f.comment,range:[s,u,f.offset]}}function No(e){let t,n;try{t=new RegExp("(.*?)(?<![ \t])[ \t]*\r?\n","sy"),n=new RegExp("[ \t]*(.*?)(?:(?<![ \t])[ \t]*)?\r?\n","sy")}catch(e){t=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let s=t.exec(e);if(!s)return e;let r=s[1],i=" ",o=t.lastIndex;for(n.lastIndex=o;s=n.exec(e);)""===s[1]?"\n"===i?r+=i:i="\n":(r+=i+s[1],i=" "),o=n.lastIndex;const c=/[ \t]*(.*)/sy;return c.lastIndex=o,s=c.exec(e),r+i+(s?.[1]??"")}function $o(e,t){let n="",s=e[t+1];for(;!(" "!==s&&"\t"!==s&&"\n"!==s&&"\r"!==s||"\r"===s&&"\n"!==e[t+2]);)"\n"===s&&(n+="\n"),s=e[(t+=1)+1];return n||(n=" "),{fold:n,offset:t}}const Ao={0:"\0",a:"",b:"\b",e:"",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v",N:"",_:" ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","\t":"\t"};function To(e,t,n,s){const r=e.substr(t,n),i=r.length===n&&/^[0-9a-fA-F]+$/.test(r)?parseInt(r,16):NaN;if(isNaN(i)){const r=e.substr(t-2,n+2);return s(t-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${r}`),r}return String.fromCodePoint(i)}function Lo(e,t,n,s){const{value:r,type:i,comment:o,range:c}="block-scalar"===t.type?Eo(t,e.options.strict,s):Oo(t,e.options.strict,s),a=n?e.directives.tagName(n.source,(e=>s(n,"TAG_RESOLVE_FAILED",e))):null,l=n&&a?function(e,t,n,s,r){if("!"===n)return e[Vs];const i=[];for(const t of e.tags)if(!t.collection&&t.tag===n){if(!t.default||!t.test)return t;i.push(t)}for(const e of i)if(e.test?.test(t))return e;const o=e.knownTags[n];if(o&&!o.collection)return e.tags.push(Object.assign({},o,{default:!1,test:void 0})),o;return r(s,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,"tag:yaml.org,2002:str"!==n),e[Vs]}(e.schema,r,a,n,s):"scalar"===t.type?function({directives:e,schema:t},n,s,r){const i=t.tags.find((e=>e.default&&e.test?.test(n)))||t[Vs];if(t.compat){const o=t.compat.find((e=>e.default&&e.test?.test(n)))??t[Vs];if(i.tag!==o.tag){r(s,"TAG_RESOLVE_FAILED",`Value may be parsed as either ${e.tagString(i.tag)} or ${e.tagString(o.tag)}`,!0)}}return i}(e,r,t,s):e.schema[Vs];let u;try{const i=l.resolve(r,(e=>s(n??t,"TAG_RESOLVE_FAILED",e)),e.options);u=er(i)?i:new Nr(i)}catch(e){const i=e instanceof Error?e.message:String(e);s(n??t,"TAG_RESOLVE_FAILED",i),u=new Nr(r)}return u.range=c,u.source=r,i&&(u.type=i),a&&(u.tag=a),l.format&&(u.format=l.format),o&&(u.comment=o),u}function xo(e,t,n){if(t){null===n&&(n=t.length);for(let s=n-1;s>=0;--s){let n=t[s];switch(n.type){case"space":case"comment":case"newline":e-=n.source.length;continue}for(n=t[++s];"space"===n?.type;)e+=n.source.length,n=t[++s];break}}return e}const Io={composeNode:Co,composeEmptyNode:Do};function Co(e,t,n,s){const{spaceBefore:r,comment:i,anchor:o,tag:c}=n;let a,l=!0;switch(t.type){case"alias":a=function({options:e},{offset:t,source:n,end:s},r){const i=new Sr(n.substring(1));""===i.source&&r(t,"BAD_ALIAS","Alias cannot be an empty string");i.source.endsWith(":")&&r(t+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const o=t+n.length,c=vo(s,o,e.strict,r);i.range=[t,o,c.offset],c.comment&&(i.comment=c.comment);return i}(e,t,s),(o||c)&&s(t,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":a=Lo(e,t,c,s),o&&(a.anchor=o.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":a=ko(Io,e,t,c,s),o&&(a.anchor=o.source.substring(1));break;default:s(t,"UNEXPECTED_TOKEN","error"===t.type?t.message:`Unsupported token (type: ${t.type})`),a=Do(e,t.offset,void 0,null,n,s),l=!1}return o&&""===a.anchor&&s(o,"BAD_ALIAS","Anchor cannot be an empty string"),r&&(a.spaceBefore=!0),i&&("scalar"===t.type&&""===t.source?a.comment=i:a.commentBefore=i),e.options.keepSourceTokens&&l&&(a.srcToken=t),a}function Do(e,t,n,s,{spaceBefore:r,comment:i,anchor:o,tag:c,end:a},l){const u=Lo(e,{type:"scalar",offset:xo(t,n,s),indent:-1,source:""},c,l);return o&&(u.anchor=o.source.substring(1),""===u.anchor&&l(o,"BAD_ALIAS","Anchor cannot be an empty string")),r&&(u.spaceBefore=!0),i&&(u.comment=i,u.range[2]=a),u}function _o(e){if("number"==typeof e)return[e,e+1];if(Array.isArray(e))return 2===e.length?e:[e[0],e[1]];const{offset:t,source:n}=e;return[t,t+("string"==typeof n?n.length:1)]}function Mo(e){let t="",n=!1,s=!1;for(let r=0;r<e.length;++r){const i=e[r];switch(i[0]){case"#":t+=(""===t?"":s?"\n\n":"\n")+(i.substring(1)||" "),n=!0,s=!1;break;case"%":"#"!==e[r+1]?.[0]&&(r+=1),n=!1;break;default:n||(s=!0),n=!1}}return{comment:t,afterEmptyLine:s}}class jo{constructor(e={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(e,t,n,s)=>{const r=_o(e);s?this.warnings.push(new fo(r,t,n)):this.errors.push(new uo(r,t,n))},this.directives=new gr({version:e.version||"1.2"}),this.options=e}decorate(e,t){const{comment:n,afterEmptyLine:s}=Mo(this.prelude);if(n){const r=e.contents;if(t)e.comment=e.comment?`${e.comment}\n${n}`:n;else if(s||e.directives.docStart||!r)e.commentBefore=n;else if(nr(r)&&!r.flow&&r.items.length>0){let e=r.items[0];Zs(e)&&(e=e.key);const t=e.commentBefore;e.commentBefore=t?`${n}\n${t}`:n}else{const e=r.commentBefore;r.commentBefore=e?`${n}\n${e}`:n}}t?(Array.prototype.push.apply(e.errors,this.errors),Array.prototype.push.apply(e.warnings,this.warnings)):(e.errors=this.errors,e.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:Mo(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(e,t=!1,n=-1){for(const t of e)yield*this.next(t);yield*this.end(t,n)}*next(e){switch(e.type){case"directive":this.directives.add(e.source,((t,n,s)=>{const r=_o(e);r[0]+=t,this.onError(r,"BAD_DIRECTIVE",n,s)})),this.prelude.push(e.source),this.atDirectives=!0;break;case"document":{const t=function(e,t,{offset:n,start:s,value:r,end:i},o){const c=Object.assign({_directives:t},e),a=new co(void 0,c),l={atRoot:!0,directives:a.directives,options:a.options,schema:a.schema},u=po(s,{indicator:"doc-start",next:r??i?.[0],offset:n,onError:o,startOnNewline:!0});u.found&&(a.directives.docStart=!0,!r||"block-map"!==r.type&&"block-seq"!==r.type||u.hasNewline||o(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),a.contents=r?Co(l,r,u,o):Do(l,u.end,s,null,u,o);const f=a.contents.range[2],h=vo(i,f,!1,o);return h.comment&&(a.comment=h.comment),a.range=[n,f,h.offset],a}(this.options,this.directives,e,this.onError);this.atDirectives&&!t.directives.docStart&&this.onError(e,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(t,!1),this.doc&&(yield this.doc),this.doc=t,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(e.source);break;case"error":{const t=e.source?`${e.message}: ${JSON.stringify(e.source)}`:e.message,n=new uo(_o(e),"UNEXPECTED_TOKEN",t);this.atDirectives||!this.doc?this.errors.push(n):this.doc.errors.push(n);break}case"doc-end":{if(!this.doc){const t="Unexpected doc-end without preceding document";this.errors.push(new uo(_o(e),"UNEXPECTED_TOKEN",t));break}this.doc.directives.docEnd=!0;const t=vo(e.end,e.offset+e.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),t.comment){const e=this.doc.comment;this.doc.comment=e?`${e}\n${t.comment}`:t.comment}this.doc.range[2]=t.offset;break}default:this.errors.push(new uo(_o(e),"UNEXPECTED_TOKEN",`Unsupported token ${e.type}`))}}*end(e=!1,t=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(e){const e=Object.assign({_directives:this.directives},this.options),n=new co(void 0,e);this.atDirectives&&this.onError(t,"MISSING_CHAR","Missing directives-end indicator line"),n.range=[0,t,t],this.decorate(n,!1),yield n}}}function Po(e,t){if(t)for(const n of t)switch(n.type){case"space":case"comment":e.push(n);break;case"newline":return e.push(n),!0}return!1}function Fo(e,t,n){switch(e.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":e.type=n,e.source=t;break;case"block-scalar":{const s=e.props.slice(1);let r=t.length;"block-scalar-header"===e.props[0].type&&(r-=e.props[0].source.length);for(const e of s)e.offset+=r;delete e.props,Object.assign(e,{type:n,source:t,end:s});break}case"block-map":case"block-seq":{const s={type:"newline",offset:e.offset+t.length,indent:e.indent,source:"\n"};delete e.items,Object.assign(e,{type:n,source:t,end:[s]});break}default:{const s="indent"in e?e.indent:-1,r="end"in e&&Array.isArray(e.end)?e.end.filter((e=>"space"===e.type||"comment"===e.type||"newline"===e.type)):[];for(const t of Object.keys(e))"type"!==t&&"offset"!==t&&delete e[t];Object.assign(e,{type:n,indent:s,source:t,end:r})}}}function Bo(e){switch(e.type){case"block-scalar":{let t="";for(const n of e.props)t+=Bo(n);return t+e.source}case"block-map":case"block-seq":{let t="";for(const n of e.items)t+=Ko(n);return t}case"flow-collection":{let t=e.start.source;for(const n of e.items)t+=Ko(n);for(const n of e.end)t+=n.source;return t}case"document":{let t=Ko(e);if(e.end)for(const n of e.end)t+=n.source;return t}default:{let t=e.source;if("end"in e&&e.end)for(const n of e.end)t+=n.source;return t}}}function Ko({start:e,key:t,sep:n,value:s}){let r="";for(const t of e)r+=t.source;if(t&&(r+=Bo(t)),n)for(const e of n)r+=e.source;return s&&(r+=Bo(s)),r}const Uo=Symbol("break visit"),qo=Symbol("skip children"),Ro=Symbol("remove item");function Yo(e,t){"type"in e&&"document"===e.type&&(e={start:e.start,value:e.value}),Wo(Object.freeze([]),e,t)}function Wo(e,t,n){let s=n(t,e);if("symbol"==typeof s)return s;for(const r of["key","value"]){const i=t[r];if(i&&"items"in i){for(let t=0;t<i.items.length;++t){const s=Wo(Object.freeze(e.concat([[r,t]])),i.items[t],n);if("number"==typeof s)t=s-1;else{if(s===Uo)return Uo;s===Ro&&(i.items.splice(t,1),t-=1)}}"function"==typeof s&&"key"===r&&(s=s(t,e))}}return"function"==typeof s?s(t,e):s}Yo.BREAK=Uo,Yo.SKIP=qo,Yo.REMOVE=Ro,Yo.itemAtPath=(e,t)=>{let n=e;for(const[e,s]of t){const t=n?.[e];if(!t||!("items"in t))return;n=t.items[s]}return n},Yo.parentCollection=(e,t)=>{const n=Yo.itemAtPath(e,t.slice(0,-1)),s=t[t.length-1][0],r=n?.[s];if(r&&"items"in r)return r;throw new Error("Parent collection not found")};const Jo="\ufeff",Vo="",Go="",Ho="";function Qo(e){switch(e){case Jo:return"byte-order-mark";case Vo:return"doc-mode";case Go:return"flow-error-end";case Ho:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case"\n":case"\r\n":return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(e[0]){case" ":case"\t":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}var zo=Object.freeze({__proto__:null,BOM:Jo,DOCUMENT:Vo,FLOW_END:Go,SCALAR:Ho,createScalarToken:function(e,t){const{implicitKey:n=!1,indent:s,inFlow:r=!1,offset:i=-1,type:o="PLAIN"}=t,c=Wr({type:o,value:e},{implicitKey:n,indent:s>0?" ".repeat(s):"",inFlow:r,options:{blockQuote:!0,lineWidth:-1}}),a=t.end??[{type:"newline",offset:-1,indent:s,source:"\n"}];switch(c[0]){case"|":case">":{const e=c.indexOf("\n"),t=c.substring(0,e),n=c.substring(e+1)+"\n",r=[{type:"block-scalar-header",offset:i,indent:s,source:t}];return Po(r,a)||r.push({type:"newline",offset:-1,indent:s,source:"\n"}),{type:"block-scalar",offset:i,indent:s,props:r,source:n}}case'"':return{type:"double-quoted-scalar",offset:i,indent:s,source:c,end:a};case"'":return{type:"single-quoted-scalar",offset:i,indent:s,source:c,end:a};default:return{type:"scalar",offset:i,indent:s,source:c,end:a}}},isCollection:e=>!!e&&"items"in e,isScalar:e=>!!e&&("scalar"===e.type||"single-quoted-scalar"===e.type||"double-quoted-scalar"===e.type||"block-scalar"===e.type),prettyToken:function(e){switch(e){case Jo:return"<BOM>";case Vo:return"<DOC>";case Go:return"<FLOW_END>";case Ho:return"<SCALAR>";default:return JSON.stringify(e)}},resolveAsScalar:function(e,t=!0,n){if(e){const s=(e,t,s)=>{const r="number"==typeof e?e:Array.isArray(e)?e[0]:e.offset;if(!n)throw new uo([r,r+1],t,s);n(r,t,s)};switch(e.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return Oo(e,t,s);case"block-scalar":return Eo(e,t,s)}}return null},setScalarValue:function(e,t,n={}){let{afterKey:s=!1,implicitKey:r=!1,inFlow:i=!1,type:o}=n,c="indent"in e?e.indent:null;if(s&&"number"==typeof c&&(c+=2),!o)switch(e.type){case"single-quoted-scalar":o="QUOTE_SINGLE";break;case"double-quoted-scalar":o="QUOTE_DOUBLE";break;case"block-scalar":{const t=e.props[0];if("block-scalar-header"!==t.type)throw new Error("Invalid block scalar header");o=">"===t.source[0]?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:o="PLAIN"}const a=Wr({type:o,value:t},{implicitKey:r||null===c,indent:null!==c&&c>0?" ".repeat(c):"",inFlow:i,options:{blockQuote:!0,lineWidth:-1}});switch(a[0]){case"|":case">":!function(e,t){const n=t.indexOf("\n"),s=t.substring(0,n),r=t.substring(n+1)+"\n";if("block-scalar"===e.type){const t=e.props[0];if("block-scalar-header"!==t.type)throw new Error("Invalid block scalar header");t.source=s,e.source=r}else{const{offset:t}=e,n="indent"in e?e.indent:-1,i=[{type:"block-scalar-header",offset:t,indent:n,source:s}];Po(i,"end"in e?e.end:void 0)||i.push({type:"newline",offset:-1,indent:n,source:"\n"});for(const t of Object.keys(e))"type"!==t&&"offset"!==t&&delete e[t];Object.assign(e,{type:"block-scalar",indent:n,props:i,source:r})}}(e,a);break;case'"':Fo(e,a,"double-quoted-scalar");break;case"'":Fo(e,a,"single-quoted-scalar");break;default:Fo(e,a,"scalar")}},stringify:e=>"type"in e?Bo(e):Ko(e),tokenType:Qo,visit:Yo});function Xo(e){switch(e){case void 0:case" ":case"\n":case"\r":case"\t":return!0;default:return!1}}const Zo="0123456789ABCDEFabcdef".split(""),ec="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()".split(""),tc=",[]{}".split(""),nc=" ,[]{}\n\r\t".split(""),sc=e=>!e||nc.includes(e);class rc{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(e,t=!1){e&&(this.buffer=this.buffer?this.buffer+e:e,this.lineEndPos=null),this.atEnd=!t;let n=this.next??"stream";for(;n&&(t||this.hasChars(1));)n=yield*this.parseNext(n)}atLineEnd(){let e=this.pos,t=this.buffer[e];for(;" "===t||"\t"===t;)t=this.buffer[++e];return!t||"#"===t||"\n"===t||"\r"===t&&"\n"===this.buffer[e+1]}charAt(e){return this.buffer[this.pos+e]}continueScalar(e){let t=this.buffer[e];if(this.indentNext>0){let n=0;for(;" "===t;)t=this.buffer[++n+e];if("\r"===t){const t=this.buffer[n+e+1];if("\n"===t||!t&&!this.atEnd)return e+n+1}return"\n"===t||n>=this.indentNext||!t&&!this.atEnd?e+n:-1}if("-"===t||"."===t){const t=this.buffer.substr(e,3);if(("---"===t||"..."===t)&&Xo(this.buffer[e+3]))return-1}return e}getLine(){let e=this.lineEndPos;return("number"!=typeof e||-1!==e&&e<this.pos)&&(e=this.buffer.indexOf("\n",this.pos),this.lineEndPos=e),-1===e?this.atEnd?this.buffer.substring(this.pos):null:("\r"===this.buffer[e-1]&&(e-=1),this.buffer.substring(this.pos,e))}hasChars(e){return this.pos+e<=this.buffer.length}setNext(e){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=e,null}peek(e){return this.buffer.substr(this.pos,e)}*parseNext(e){switch(e){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let e=this.getLine();if(null===e)return this.setNext("stream");if(e[0]===Jo&&(yield*this.pushCount(1),e=e.substring(1)),"%"===e[0]){let t=e.length;const n=e.indexOf("#");if(-1!==n){const s=e[n-1];" "!==s&&"\t"!==s||(t=n-1)}for(;;){const n=e[t-1];if(" "!==n&&"\t"!==n)break;t-=1}const s=(yield*this.pushCount(t))+(yield*this.pushSpaces(!0));return yield*this.pushCount(e.length-s),this.pushNewline(),"stream"}if(this.atLineEnd()){const t=yield*this.pushSpaces(!0);return yield*this.pushCount(e.length-t),yield*this.pushNewline(),"stream"}return yield Vo,yield*this.parseLineStart()}*parseLineStart(){const e=this.charAt(0);if(!e&&!this.atEnd)return this.setNext("line-start");if("-"===e||"."===e){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const e=this.peek(3);if("---"===e&&Xo(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"doc";if("..."===e&&Xo(this.charAt(3)))return yield*this.pushCount(3),"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!Xo(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[e,t]=this.peek(2);if(!t&&!this.atEnd)return this.setNext("block-start");if(("-"===e||"?"===e||":"===e)&&Xo(t)){const e=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=e,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const e=this.getLine();if(null===e)return this.setNext("doc");let t=yield*this.pushIndicators();switch(e[t]){case"#":yield*this.pushCount(e.length-t);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(sc),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return t+=(yield*this.parseBlockScalarHeader()),t+=(yield*this.pushSpaces(!0)),yield*this.pushCount(e.length-t),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let e,t,n=-1;do{e=yield*this.pushNewline(),e>0?(t=yield*this.pushSpaces(!1),this.indentValue=n=t):t=0,t+=(yield*this.pushSpaces(!0))}while(e+t>0);const s=this.getLine();if(null===s)return this.setNext("flow");if(-1!==n&&n<this.indentNext&&"#"!==s[0]||0===n&&(s.startsWith("---")||s.startsWith("..."))&&Xo(s[3])){if(!(n===this.indentNext-1&&1===this.flowLevel&&("]"===s[0]||"}"===s[0])))return this.flowLevel=0,yield Go,yield*this.parseLineStart()}let r=0;for(;","===s[r];)r+=(yield*this.pushCount(1)),r+=(yield*this.pushSpaces(!0)),this.flowKey=!1;switch(r+=(yield*this.pushIndicators()),s[r]){case void 0:return"flow";case"#":return yield*this.pushCount(s.length-r),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(sc),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const e=this.charAt(1);if(this.flowKey||Xo(e)||","===e)return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const e=this.charAt(0);let t=this.buffer.indexOf(e,this.pos+1);if("'"===e)for(;-1!==t&&"'"===this.buffer[t+1];)t=this.buffer.indexOf("'",t+2);else for(;-1!==t;){let e=0;for(;"\\"===this.buffer[t-1-e];)e+=1;if(e%2==0)break;t=this.buffer.indexOf('"',t+1)}const n=this.buffer.substring(0,t);let s=n.indexOf("\n",this.pos);if(-1!==s){for(;-1!==s;){const e=this.continueScalar(s+1);if(-1===e)break;s=n.indexOf("\n",e)}-1!==s&&(t=s-("\r"===n[s-1]?2:1))}if(-1===t){if(!this.atEnd)return this.setNext("quoted-scalar");t=this.buffer.length}return yield*this.pushToIndex(t+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let e=this.pos;for(;;){const t=this.buffer[++e];if("+"===t)this.blockScalarKeep=!0;else if(t>"0"&&t<="9")this.blockScalarIndent=Number(t)-1;else if("-"!==t)break}return yield*this.pushUntil((e=>Xo(e)||"#"===e))}*parseBlockScalar(){let e,t=this.pos-1,n=0;e:for(let s=this.pos;e=this.buffer[s];++s)switch(e){case" ":n+=1;break;case"\n":t=s,n=0;break;case"\r":{const e=this.buffer[s+1];if(!e&&!this.atEnd)return this.setNext("block-scalar");if("\n"===e)break}default:break e}if(!e&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){-1===this.blockScalarIndent?this.indentNext=n:this.indentNext+=this.blockScalarIndent;do{const e=this.continueScalar(t+1);if(-1===e)break;t=this.buffer.indexOf("\n",e)}while(-1!==t);if(-1===t){if(!this.atEnd)return this.setNext("block-scalar");t=this.buffer.length}}if(!this.blockScalarKeep)for(;;){let e=t-1,s=this.buffer[e];"\r"===s&&(s=this.buffer[--e]);const r=e;for(;" "===s||"\t"===s;)s=this.buffer[--e];if(!("\n"===s&&e>=this.pos&&e+1+n>r))break;t=e}return yield Ho,yield*this.pushToIndex(t+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const e=this.flowLevel>0;let t,n=this.pos-1,s=this.pos-1;for(;t=this.buffer[++s];)if(":"===t){const t=this.buffer[s+1];if(Xo(t)||e&&","===t)break;n=s}else if(Xo(t)){let r=this.buffer[s+1];if("\r"===t&&("\n"===r?(s+=1,t="\n",r=this.buffer[s+1]):n=s),"#"===r||e&&tc.includes(r))break;if("\n"===t){const e=this.continueScalar(s+1);if(-1===e)break;s=Math.max(s,e-2)}}else{if(e&&tc.includes(t))break;n=s}return t||this.atEnd?(yield Ho,yield*this.pushToIndex(n+1,!0),e?"flow":"doc"):this.setNext("plain-scalar")}*pushCount(e){return e>0?(yield this.buffer.substr(this.pos,e),this.pos+=e,e):0}*pushToIndex(e,t){const n=this.buffer.slice(this.pos,e);return n?(yield n,this.pos+=n.length,n.length):(t&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(sc))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const e=this.flowLevel>0,t=this.charAt(1);if(Xo(t)||e&&tc.includes(t))return e?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if("<"===this.charAt(1)){let e=this.pos+2,t=this.buffer[e];for(;!Xo(t)&&">"!==t;)t=this.buffer[++e];return yield*this.pushToIndex(">"===t?e+1:e,!1)}{let e=this.pos+1,t=this.buffer[e];for(;t;)if(ec.includes(t))t=this.buffer[++e];else{if("%"!==t||!Zo.includes(this.buffer[e+1])||!Zo.includes(this.buffer[e+2]))break;t=this.buffer[e+=3]}return yield*this.pushToIndex(e,!1)}}*pushNewline(){const e=this.buffer[this.pos];return"\n"===e?yield*this.pushCount(1):"\r"===e&&"\n"===this.charAt(1)?yield*this.pushCount(2):0}*pushSpaces(e){let t,n=this.pos-1;do{t=this.buffer[++n]}while(" "===t||e&&"\t"===t);const s=n-this.pos;return s>0&&(yield this.buffer.substr(this.pos,s),this.pos=n),s}*pushUntil(e){let t=this.pos,n=this.buffer[t];for(;!e(n);)n=this.buffer[++t];return yield*this.pushToIndex(t,!1)}}class ic{constructor(){this.lineStarts=[],this.addNewLine=e=>this.lineStarts.push(e),this.linePos=e=>{let t=0,n=this.lineStarts.length;for(;t<n;){const s=t+n>>1;this.lineStarts[s]<e?t=s+1:n=s}if(this.lineStarts[t]===e)return{line:t+1,col:1};if(0===t)return{line:0,col:e};return{line:t,col:e-this.lineStarts[t-1]+1}}}}function oc(e,t){for(let n=0;n<e.length;++n)if(e[n].type===t)return!0;return!1}function cc(e){for(let t=0;t<e.length;++t)switch(e[t].type){case"space":case"comment":case"newline":break;default:return t}return-1}function ac(e){switch(e?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function lc(e){switch(e.type){case"document":return e.start;case"block-map":{const t=e.items[e.items.length-1];return t.sep??t.start}case"block-seq":return e.items[e.items.length-1].start;default:return[]}}function uc(e){if(0===e.length)return[];let t=e.length;e:for(;--t>=0;)switch(e[t].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;"space"===e[++t]?.type;);return e.splice(t,e.length)}function fc(e){if("flow-seq-start"===e.start.type)for(const t of e.items)!t.sep||t.value||oc(t.start,"explicit-key-ind")||oc(t.sep,"map-value-ind")||(t.key&&(t.value=t.key),delete t.key,ac(t.value)?t.value.end?Array.prototype.push.apply(t.value.end,t.sep):t.value.end=t.sep:Array.prototype.push.apply(t.start,t.sep),delete t.sep)}class hc{constructor(e){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new rc,this.onNewLine=e}*parse(e,t=!1){this.onNewLine&&0===this.offset&&this.onNewLine(0);for(const n of this.lexer.lex(e,t))yield*this.next(n);t||(yield*this.end())}*next(e){if(this.source=e,this.atScalar)return this.atScalar=!1,yield*this.step(),void(this.offset+=e.length);const t=Qo(e);if(t)if("scalar"===t)this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=t,yield*this.step(),t){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+e.length);break;case"space":this.atNewLine&&" "===e[0]&&(this.indent+=e.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=e.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=e.length}else{const t=`Not a YAML token: ${e}`;yield*this.pop({type:"error",offset:this.offset,message:t,source:e}),this.offset+=e.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const e=this.peek(1);if("doc-end"!==this.type||e&&"doc-end"===e.type){if(!e)return yield*this.stream();switch(e.type){case"document":return yield*this.document(e);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(e);case"block-scalar":return yield*this.blockScalar(e);case"block-map":return yield*this.blockMap(e);case"block-seq":return yield*this.blockSequence(e);case"flow-collection":return yield*this.flowCollection(e);case"doc-end":return yield*this.documentEnd(e)}yield*this.pop()}else{for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source})}}peek(e){return this.stack[this.stack.length-e]}*pop(e){const t=e??this.stack.pop();if(t)if(0===this.stack.length)yield t;else{const e=this.peek(1);switch("block-scalar"===t.type?t.indent="indent"in e?e.indent:0:"flow-collection"===t.type&&"document"===e.type&&(t.indent=0),"flow-collection"===t.type&&fc(t),e.type){case"document":e.value=t;break;case"block-scalar":e.props.push(t);break;case"block-map":{const n=e.items[e.items.length-1];if(n.value)return e.items.push({start:[],key:t,sep:[]}),void(this.onKeyLine=!0);if(!n.sep)return Object.assign(n,{key:t,sep:[]}),void(this.onKeyLine=!oc(n.start,"explicit-key-ind"));n.value=t;break}case"block-seq":{const n=e.items[e.items.length-1];n.value?e.items.push({start:[],value:t}):n.value=t;break}case"flow-collection":{const n=e.items[e.items.length-1];return void(!n||n.value?e.items.push({start:[],key:t,sep:[]}):n.sep?n.value=t:Object.assign(n,{key:t,sep:[]}))}default:yield*this.pop(),yield*this.pop(t)}if(!("document"!==e.type&&"block-map"!==e.type&&"block-seq"!==e.type||"block-map"!==t.type&&"block-seq"!==t.type)){const n=t.items[t.items.length-1];n&&!n.sep&&!n.value&&n.start.length>0&&-1===cc(n.start)&&(0===t.indent||n.start.every((e=>"comment"!==e.type||e.indent<t.indent)))&&("document"===e.type?e.end=n.start:e.items.push({start:n.start}),t.items.splice(-1,1))}}else{const e="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:e}}}*stream(){switch(this.type){case"directive-line":return void(yield{type:"directive",offset:this.offset,source:this.source});case"byte-order-mark":case"space":case"comment":case"newline":return void(yield this.sourceToken);case"doc-mode":case"doc-start":{const e={type:"document",offset:this.offset,start:[]};return"doc-start"===this.type&&e.start.push(this.sourceToken),void this.stack.push(e)}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(e){if(e.value)return yield*this.lineEnd(e);switch(this.type){case"doc-start":return void(-1!==cc(e.start)?(yield*this.pop(),yield*this.step()):e.start.push(this.sourceToken));case"anchor":case"tag":case"space":case"comment":case"newline":return void e.start.push(this.sourceToken)}const t=this.startBlockValue(e);t?this.stack.push(t):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(e){if("map-value-ind"===this.type){const t=uc(lc(this.peek(2)));let n;e.end?(n=e.end,n.push(this.sourceToken),delete e.end):n=[this.sourceToken];const s={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:t,key:e,sep:n}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=s}else yield*this.lineEnd(e)}*blockScalar(e){switch(this.type){case"space":case"comment":case"newline":return void e.props.push(this.sourceToken);case"scalar":if(e.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(e){const t=e.items[e.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,t.value){const n="end"in t.value?t.value.end:void 0,s=Array.isArray(n)?n[n.length-1]:void 0;"comment"===s?.type?n?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else if(t.sep)t.sep.push(this.sourceToken);else{if(this.atIndentedComment(t.start,e.indent)){const n=e.items[e.items.length-2],s=n?.value?.end;if(Array.isArray(s))return Array.prototype.push.apply(s,t.start),s.push(this.sourceToken),void e.items.pop()}t.start.push(this.sourceToken)}return}if(this.indent>=e.indent){const n=!this.onKeyLine&&this.indent===e.indent&&t.sep;let s=[];if(n&&t.sep&&!t.value){const n=[];for(let s=0;s<t.sep.length;++s){const r=t.sep[s];switch(r.type){case"newline":n.push(s);break;case"space":break;case"comment":r.indent>e.indent&&(n.length=0);break;default:n.length=0}}n.length>=2&&(s=t.sep.splice(n[1]))}switch(this.type){case"anchor":case"tag":return void(n||t.value?(s.push(this.sourceToken),e.items.push({start:s}),this.onKeyLine=!0):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken));case"explicit-key-ind":return t.sep||oc(t.start,"explicit-key-ind")?n||t.value?(s.push(this.sourceToken),e.items.push({start:s})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]}):t.start.push(this.sourceToken),void(this.onKeyLine=!0);case"map-value-ind":if(oc(t.start,"explicit-key-ind"))if(t.sep)if(t.value)e.items.push({start:[],key:null,sep:[this.sourceToken]});else if(oc(t.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]});else if(ac(t.key)&&!oc(t.sep,"newline")){const e=uc(t.start),n=t.key,s=t.sep;s.push(this.sourceToken),delete t.key,delete t.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:n,sep:s}]})}else s.length>0?t.sep=t.sep.concat(s,this.sourceToken):t.sep.push(this.sourceToken);else if(oc(t.start,"newline"))Object.assign(t,{key:null,sep:[this.sourceToken]});else{const e=uc(t.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:null,sep:[this.sourceToken]}]})}else t.sep?t.value||n?e.items.push({start:s,key:null,sep:[this.sourceToken]}):oc(t.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]});return void(this.onKeyLine=!0);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const r=this.flowScalar(this.type);return void(n||t.value?(e.items.push({start:s,key:r,sep:[]}),this.onKeyLine=!0):t.sep?this.stack.push(r):(Object.assign(t,{key:r,sep:[]}),this.onKeyLine=!0))}default:{const r=this.startBlockValue(e);if(r)return n&&"block-seq"!==r.type&&oc(t.start,"explicit-key-ind")&&e.items.push({start:s}),void this.stack.push(r)}}}yield*this.pop(),yield*this.step()}*blockSequence(e){const t=e.items[e.items.length-1];switch(this.type){case"newline":if(t.value){const n="end"in t.value?t.value.end:void 0,s=Array.isArray(n)?n[n.length-1]:void 0;"comment"===s?.type?n?.push(this.sourceToken):e.items.push({start:[this.sourceToken]})}else t.start.push(this.sourceToken);return;case"space":case"comment":if(t.value)e.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(t.start,e.indent)){const n=e.items[e.items.length-2],s=n?.value?.end;if(Array.isArray(s))return Array.prototype.push.apply(s,t.start),s.push(this.sourceToken),void e.items.pop()}t.start.push(this.sourceToken)}return;case"anchor":case"tag":if(t.value||this.indent<=e.indent)break;return void t.start.push(this.sourceToken);case"seq-item-ind":if(this.indent!==e.indent)break;return void(t.value||oc(t.start,"seq-item-ind")?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken))}if(this.indent>e.indent){const t=this.startBlockValue(e);if(t)return void this.stack.push(t)}yield*this.pop(),yield*this.step()}*flowCollection(e){const t=e.items[e.items.length-1];if("flow-error-end"===this.type){let e;do{yield*this.pop(),e=this.peek(1)}while(e&&"flow-collection"===e.type)}else if(0===e.end.length){switch(this.type){case"comma":case"explicit-key-ind":return void(!t||t.sep?e.items.push({start:[this.sourceToken]}):t.start.push(this.sourceToken));case"map-value-ind":return void(!t||t.value?e.items.push({start:[],key:null,sep:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):Object.assign(t,{key:null,sep:[this.sourceToken]}));case"space":case"comment":case"newline":case"anchor":case"tag":return void(!t||t.value?e.items.push({start:[this.sourceToken]}):t.sep?t.sep.push(this.sourceToken):t.start.push(this.sourceToken));case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const n=this.flowScalar(this.type);return void(!t||t.value?e.items.push({start:[],key:n,sep:[]}):t.sep?this.stack.push(n):Object.assign(t,{key:n,sep:[]}))}case"flow-map-end":case"flow-seq-end":return void e.end.push(this.sourceToken)}const n=this.startBlockValue(e);n?this.stack.push(n):(yield*this.pop(),yield*this.step())}else{const t=this.peek(2);if("block-map"===t.type&&("map-value-ind"===this.type&&t.indent===e.indent||"newline"===this.type&&!t.items[t.items.length-1].sep))yield*this.pop(),yield*this.step();else if("map-value-ind"===this.type&&"flow-collection"!==t.type){const n=uc(lc(t));fc(e);const s=e.end.splice(1,e.end.length);s.push(this.sourceToken);const r={type:"block-map",offset:e.offset,indent:e.indent,items:[{start:n,key:e,sep:s}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=r}else yield*this.lineEnd(e)}}flowScalar(e){if(this.onNewLine){let e=this.source.indexOf("\n")+1;for(;0!==e;)this.onNewLine(this.offset+e),e=this.source.indexOf("\n",e)+1}return{type:e,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(e){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const t=uc(lc(e));return t.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t}]}}case"map-value-ind":{this.onKeyLine=!0;const t=uc(lc(e));return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(e,t){return"comment"===this.type&&(!(this.indent<=t)&&e.every((e=>"newline"===e.type||"space"===e.type)))}*documentEnd(e){"doc-mode"!==this.type&&(e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop()))}*lineEnd(e){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:e.end?e.end.push(this.sourceToken):e.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop())}}}function dc(e){const t=!1!==e.prettyErrors;return{lineCounter:e.lineCounter||t&&new ic||null,prettyErrors:t}}function pc(e,t={}){const{lineCounter:n,prettyErrors:s}=dc(t),r=new hc(n?.addNewLine),i=new jo(t);let o=null;for(const t of i.compose(r.parse(e),!0,e.length))if(o){if("silent"!==o.options.logLevel){o.errors.push(new uo(t.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}}else o=t;return s&&n&&(o.errors.forEach(ho(e,n)),o.warnings.forEach(ho(e,n))),o}var mc=Object.freeze({__proto__:null,Alias:Sr,CST:zo,Composer:jo,Document:co,Lexer:rc,LineCounter:ic,Pair:Zr,Parser:hc,Scalar:Nr,Schema:io,YAMLError:lo,YAMLMap:ii,YAMLParseError:uo,YAMLSeq:ci,YAMLWarning:fo,isAlias:Qs,isCollection:nr,isDocument:zs,isMap:Xs,isNode:sr,isPair:Zs,isScalar:er,isSeq:tr,parse:function(e,t,n){let s;"function"==typeof t?s=t:void 0===n&&t&&"object"==typeof t&&(n=t);const r=pc(e,n);if(!r)return null;if(r.warnings.forEach((e=>Gr(r.options.logLevel,e))),r.errors.length>0){if("silent"!==r.options.logLevel)throw r.errors[0];r.errors=[]}return r.toJS(Object.assign({reviver:s},n))},parseAllDocuments:function(e,t={}){const{lineCounter:n,prettyErrors:s}=dc(t),r=new hc(n?.addNewLine),i=new jo(t),o=Array.from(i.compose(r.parse(e)));if(s&&n)for(const t of o)t.errors.forEach(ho(e,n)),t.warnings.forEach(ho(e,n));return o.length>0?o:Object.assign([],{empty:!0},i.streamInfo())},parseDocument:pc,stringify:function(e,t,n){let s=null;if("function"==typeof t||Array.isArray(t)?s=t:void 0===n&&t&&(n=t),"string"==typeof n&&(n=n.length),"number"==typeof n){const e=Math.round(n);n=e<1?void 0:e>8?{indent:8}:{indent:e}}if(void 0===e){const{keepUndefined:e}=n??t??{};if(!e)return}return new co(e,s,n).toString(n)},visit:lr,visitAsync:fr});function yc(e,t){return void 0===e&&(e=""),void 0===t&&(t=a()),o(t,e)}function gc(e,n){return void 0===e&&(e=""),void 0===n&&(n=a()),t(yc(e,n))}function bc(e){var t=e.dist,n=void 0===t?"":t,s=e.filter,r=e.src,i=void 0===r?"":r;qs.copySync(i,n,{filter:s})}function vc(e){void 0===e&&(e=""),qs.ensureDirSync(e)}function wc(e){var t,r=e.dir,i=void 0===r?a():r,c=e.regexp,l=void 0===c?/(node_modules|\.git|\.DS_Store)$/:c,u=e.type,f=void 0===u?"bfs":u;if("bfs"===f){var h=[],d=[];!l.test(i)&&d.unshift(i);for(var p=function(){var e=null!==(t=d.shift())&&void 0!==t?t:"",r=n(e);if(r&&!l.test(e)){var i=r.isDirectory,c=r.isFile;i()?s(e).forEach((function(t){var n=o(e,t);d.push(n)})):c()&&h.push(e)}};d.length;)p();return h}if("dfs"===f){h=[];var m=n(i);return l.test(i)||(m.isDirectory()?s(i).reduce((function(e,t){var n=wc({dir:o(i,t),regexp:l,type:"dfs"});return e.push.apply(e,ie([],re(n),!1)),e}),h):m.isFile()&&h.push(i)),h}return[]}function Sc(e,t){void 0===e&&(e=""),void 0===t&&(t=a());var n=yc(e,t),s=c(n);if(!/^\.json$/.test(s))return{};var i=r(n,"utf8");return JSON.parse(i)}function kc(e,t){void 0===e&&(e=""),void 0===t&&(t=a());var n=yc(e,t),s=c(n);if(!/^\.ya?ml$/.test(s))return{};var i=r(n,"utf8");return mc.parse(i)}function Ec(e){void 0===e&&(e=""),qs.removeSync(e)}function Oc(e){var t=e.cb,n=e.host,s=void 0===n?$c():n,r=e.port,i=void 0===r?80:r;return ne(this,void 0,void 0,(function(){return se(this,(function(e){switch(e.label){case 0:return[4,Nc({host:s,port:i})];case 1:return e.sent()?(null==t||t(i),[3,4]):[3,2];case 2:return[4,Oc({cb:t,host:s,port:i<0||i>65535?0:i+1})];case 3:e.sent(),e.label=4;case 4:return[2]}}))}))}function Nc(e){var t=e.host,n=void 0===t?$c():t,s=e.port,r=void 0===s?80:s;return ne(this,void 0,void 0,(function(){var e,t,s;return se(this,(function(i){switch(i.label){case 0:return[4,oe(new Promise((function(e){(r<0||r>65535)&&e(!1);var t=d({host:n,port:r});t.on("connect",(function(){t.end(),e(!1)})),t.on("error",(function(){e(!0)}))})))];case 1:return e=re.apply(void 0,[i.sent(),2]),t=e[0],s=e[1],[2,!t&&s]}}))}))}function $c(){var e,t="127.0.0.1",n=p();for(var s in n)for(var r=null!==(e=n[s])&&void 0!==e?e:[],i=0;i<r.length;i++){var o=r[i],c=o.address,a=o.family,l=o.internal;if("IPv4"===a&&c!==t&&!l)return c}return t}function Ac(e){return void 0===e&&(e="node -v"),g(e,{encoding:"utf8"})}function Tc(){var e=m().toLocaleLowerCase(),t={windows:/windows/g,macos:/darwin/g,linux:/linux/g},n=Object.keys(t).find((function(n){return t[n].test(e)}));return{nodeVs:Ac("node -v").replace(/(v|\n|\r\n)/g,""),npmVs:Ac("npm -v").replace(/\n/g,""),system:n,systemVs:y().split("-")[0]}}export{yc as AbsPath,oe as AsyncTo,Oc as AutoPort,ue as CalcNum,fe as CalcNumPlus,ve as CheckObjValidKey,gc as CheckPath,Nc as CheckPort,Oe as CheckText,Ne as CheckTextPlus,b as ChunkArr,bc as CopyDir,vc as CreateDir,ce as Debounce,Ae as DesePhone,E as EnvType,he as FillNum,we as FilterObjKey,de as FixedNum,pe as FormatByte,ee as FormatCountdown,Te as FormatPhone,te as FormatTimeDiff,$c as GetIP,v as GroupArr,J as IsArguments,D as IsArray,Y as IsAsyncFunction,I as IsBoolean,F as IsClass,M as IsDate,R as IsElement,G as IsEmpty,H as IsEmptyArray,Q as IsEmptyObject,V as IsError,P as IsFunction,K as IsMap,N as IsNode,T as IsNull,x as IsNumber,_ as IsObject,j as IsRegExp,B as IsSet,L as IsString,C as IsSymbol,W as IsSyncFunction,A as IsUndefined,q as IsWeakMap,U as IsWeakSet,O as IsWeb,$e as MatchBracketText,Tc as NodeType,Le as RandomColor,xe as RandomId,me as RandomNum,ye as RandomNumPlus,wc as ReadDir,Sc as ReadJson,kc as ReadYaml,Ec as RemoveDir,Se as RemoveObjEmptyKey,Ie as RemoveTag,Ce as ReverseText,ge as RoundNum,Ac as RunCmd,De as StartScore,w as StatArrMemCount,S as StatArrMemKeyword,k as StatArrMemPosition,be as ThousandNum,ae as Throttle,$ as TypeOf,le as WaitFor};
