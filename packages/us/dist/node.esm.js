import t,{statSync as n,readdirSync as e}from"fs";import r,{join as i}from"path";import{cwd as o}from"process";import c from"constants";import s from"stream";import u from"util";import a from"assert";import{networkInterfaces as f,type as l,release as d}from"os";import{execSync as h}from"child_process";function y(t,n){return void 0===t&&(t=[]),void 0===n&&(n=""),n?t.reduce((function(t,e){return!t[e[n]]&&(t[e[n]]=[]),t[e[n]].push(e),t}),{}):{}}function p(t,n){return void 0===t&&(t=[]),t.reduce((function(t,e,r){return e===n&&t.push(r),t}),[])}function m(t){return void 0===t&&(t=[]),t.reduce((function(t,n){return t[n]=(t[n]||0)+1,t}),{})}function v(t,n){return void 0===t&&(t=[]),void 0===n&&(n=[]),n.reduce((function(n,e){return t.some((function(t){return t.includes(e)}))&&n.push(e),n}),[])}function S(){return"undefined"!=typeof window?"web":"undefined"!=typeof global?"node":"unknow"}function w(){return"web"===S()}function g(){return"node"===S()}function b(t){return Object.prototype.toString.call(t).replace(/\[object (\w+)\]/,"$1").toLowerCase()}function E(t){return"undefined"===b(t)}function k(t){return"null"===b(t)}function $(t){return"string"===b(t)}function D(t){return"number"===b(t)}function O(t){return"boolean"===b(t)}function M(t){return"symbol"===b(t)}function N(t){return"array"===b(t)}function F(t){return"object"===b(t)}function P(t){return"date"===b(t)}function x(t){return"regexp"===b(t)}function T(t){return"function"===b(t)}function _(t){return T(t)&&/^class\s+[\dA-Za-z]/.test(t.toString())}function C(t){return"set"===b(t)}function L(t){return"map"===b(t)}function j(t){return"weakset"===b(t)}function I(t){return"weakmap"===b(t)}function Y(t){return/^html(.+?)element$/.test(b(t))}function A(t){return"asyncfunction"===b(t)}function R(t){return"function"===b(t)}function B(t){return"arguments"===b(t)}function J(t){return t instanceof Error}function W(t){return!t}function U(t){return Array.isArray(t)&&!t.length}function G(t){return F(t)&&!Object.keys(t).length}var H="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},q={exports:{}},V=q.exports=function(){var t=1e3,n=6e4,e=36e5,r="millisecond",i="second",o="minute",c="hour",s="day",u="week",a="month",f="quarter",l="year",d="date",h="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},v=function(t,n,e){var r=String(t);return!r||r.length>=n?t:""+Array(n+1-r.length).join(e)+t},S={s:v,z:function(t){var n=-t.utcOffset(),e=Math.abs(n),r=Math.floor(e/60),i=e%60;return(n<=0?"+":"-")+v(r,2,"0")+":"+v(i,2,"0")},m:function t(n,e){if(n.date()<e.date())return-t(e,n);var r=12*(e.year()-n.year())+(e.month()-n.month()),i=n.clone().add(r,a),o=e-i<0,c=n.clone().add(r+(o?-1:1),a);return+(-(r+(e-i)/(o?i-c:c-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:a,y:l,w:u,d:s,D:d,h:c,m:o,s:i,ms:r,Q:f}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},w="en",g={};g[w]=m;var b=function(t){return t instanceof D},E=function(t,n,e){var r;if(!t)return w;if("string"==typeof t)g[t]&&(r=t),n&&(g[t]=n,r=t);else{var i=t.name;g[i]=t,r=i}return!e&&r&&(w=r),r||!e&&w},k=function(t,n){if(b(t))return t.clone();var e="object"==typeof n?n:{};return e.date=t,e.args=arguments,new D(e)},$=S;$.l=E,$.i=b,$.w=function(t,n){return k(t,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var D=function(){function m(t){this.$L=E(t.locale,null,!0),this.parse(t)}var v=m.prototype;return v.parse=function(t){this.$d=function(t){var n=t.date,e=t.utc;if(null===n)return new Date(NaN);if($.u(n))return new Date;if(n instanceof Date)return new Date(n);if("string"==typeof n&&!/Z$/i.test(n)){var r=n.match(y);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return e?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(n)}(t),this.$x=t.x||{},this.init()},v.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},v.$utils=function(){return $},v.isValid=function(){return!(this.$d.toString()===h)},v.isSame=function(t,n){var e=k(t);return this.startOf(n)<=e&&e<=this.endOf(n)},v.isAfter=function(t,n){return k(t)<this.startOf(n)},v.isBefore=function(t,n){return this.endOf(n)<k(t)},v.$g=function(t,n,e){return $.u(t)?this[n]:this.set(e,t)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(t,n){var e=this,r=!!$.u(n)||n,f=$.p(t),h=function(t,n){var i=$.w(e.$u?Date.UTC(e.$y,n,t):new Date(e.$y,n,t),e);return r?i:i.endOf(s)},y=function(t,n){return $.w(e.toDate()[t].apply(e.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(n)),e)},p=this.$W,m=this.$M,v=this.$D,S="set"+(this.$u?"UTC":"");switch(f){case l:return r?h(1,0):h(31,11);case a:return r?h(1,m):h(0,m+1);case u:var w=this.$locale().weekStart||0,g=(p<w?p+7:p)-w;return h(r?v-g:v+(6-g),m);case s:case d:return y(S+"Hours",0);case c:return y(S+"Minutes",1);case o:return y(S+"Seconds",2);case i:return y(S+"Milliseconds",3);default:return this.clone()}},v.endOf=function(t){return this.startOf(t,!1)},v.$set=function(t,n){var e,u=$.p(t),f="set"+(this.$u?"UTC":""),h=(e={},e[s]=f+"Date",e[d]=f+"Date",e[a]=f+"Month",e[l]=f+"FullYear",e[c]=f+"Hours",e[o]=f+"Minutes",e[i]=f+"Seconds",e[r]=f+"Milliseconds",e)[u],y=u===s?this.$D+(n-this.$W):n;if(u===a||u===l){var p=this.clone().set(d,1);p.$d[h](y),p.init(),this.$d=p.set(d,Math.min(this.$D,p.daysInMonth())).$d}else h&&this.$d[h](y);return this.init(),this},v.set=function(t,n){return this.clone().$set(t,n)},v.get=function(t){return this[$.p(t)]()},v.add=function(r,f){var d,h=this;r=Number(r);var y=$.p(f),p=function(t){var n=k(h);return $.w(n.date(n.date()+Math.round(t*r)),h)};if(y===a)return this.set(a,this.$M+r);if(y===l)return this.set(l,this.$y+r);if(y===s)return p(1);if(y===u)return p(7);var m=(d={},d[o]=n,d[c]=e,d[i]=t,d)[y]||1,v=this.$d.getTime()+r*m;return $.w(v,this)},v.subtract=function(t,n){return this.add(-1*t,n)},v.format=function(t){var n=this,e=this.$locale();if(!this.isValid())return e.invalidDate||h;var r=t||"YYYY-MM-DDTHH:mm:ssZ",i=$.z(this),o=this.$H,c=this.$m,s=this.$M,u=e.weekdays,a=e.months,f=function(t,e,i,o){return t&&(t[e]||t(n,r))||i[e].substr(0,o)},l=function(t){return $.s(o%12||12,t,"0")},d=e.meridiem||function(t,n,e){var r=t<12?"AM":"PM";return e?r.toLowerCase():r},y={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:$.s(s+1,2,"0"),MMM:f(e.monthsShort,s,a,3),MMMM:f(a,s),D:this.$D,DD:$.s(this.$D,2,"0"),d:String(this.$W),dd:f(e.weekdaysMin,this.$W,u,2),ddd:f(e.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(o),HH:$.s(o,2,"0"),h:l(1),hh:l(2),a:d(o,c,!0),A:d(o,c,!1),m:String(c),mm:$.s(c,2,"0"),s:String(this.$s),ss:$.s(this.$s,2,"0"),SSS:$.s(this.$ms,3,"0"),Z:i};return r.replace(p,(function(t,n){return n||y[t]||i.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(r,d,h){var y,p=$.p(d),m=k(r),v=(m.utcOffset()-this.utcOffset())*n,S=this-m,w=$.m(this,m);return w=(y={},y[l]=w/12,y[a]=w,y[f]=w/3,y[u]=(S-v)/6048e5,y[s]=(S-v)/864e5,y[c]=S/e,y[o]=S/n,y[i]=S/t,y)[p]||S,h?w:$.a(w)},v.daysInMonth=function(){return this.endOf(a).$D},v.$locale=function(){return g[this.$L]},v.locale=function(t,n){if(!t)return this.$L;var e=this.clone(),r=E(t,n,!0);return r&&(e.$L=r),e},v.clone=function(){return $.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},m}(),O=D.prototype;return k.prototype=O,[["$ms",r],["$s",i],["$m",o],["$H",c],["$W",s],["$M",a],["$y",l],["$D",d]].forEach((function(t){O[t[1]]=function(n){return this.$g(n,t[0],t[1])}})),k.extend=function(t,n){return t.$i||(t(n,D,k),t.$i=!0),k},k.locale=E,k.isDayjs=b,k.unix=function(t){return k(1e3*t)},k.en=g[w],k.Ls=g,k.p={},k}();function z(t){if(!t)return"时间无效";var n=+new Date,e=+new Date(t)-n;if(e>=0){var r=Math.floor(e/1e3/3600/24),i=Math.floor(e/1e3/60/60%24),o=Math.floor(e/1e3/60%60),c=Math.floor(e/1e3%60),s=r?"".concat(r,"天"):"",u=i?"".concat(i,"时"):"",a=o?"".concat(o,"分"):"",f=c?"".concat(c,"秒"):"";return"".concat(s).concat(u).concat(a).concat(f)}return"时间已到"}function K(t){if(!t)return"时间无效";var n=+new Date,e=+new Date(t),r=n-e,i=r>=0?"前":"后",o=Math.abs(r),c=30.4375,s=36e5,u=24*s,a=o/6e4,f=o/s,l=o/u,d=o/26298e5;return o/315576e5>=1||d>=12?V(e).format("YYYY-MM-DD HH:mm:ss"):d>=1&&d<12?"".concat(parseInt(d.toString()),"个月").concat(i):l>=1&&l<c?"".concat(parseInt(l.toString()),"天").concat(i):f>=1&&f<24?"".concat(parseInt(f.toString()),"小时").concat(i):a>=1&&a<60?"".concat(parseInt(a.toString()),"分钟").concat(i):r>=0?"刚刚":"准备"}function Z(t,n,e,r){return new(e||(e=Promise))((function(i,o){function c(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var n;t.done?i(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(c,s)}u((r=r.apply(t,n||[])).next())}))}function X(t,n){var e,r,i,o,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;c;)try{if(e=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,r=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!(i=c.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){c=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){c.label=o[1];break}if(6===o[0]&&c.label<i[1]){c.label=i[1],i=o;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(o);break}i[2]&&c.ops.pop(),c.trys.pop();continue}o=n.call(t,c)}catch(t){o=[6,t],r=0}finally{e=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function Q(t,n){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var r,i,o=e.call(t),c=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(e=o.return)&&e.call(o)}finally{if(i)throw i.error}}return c}function tt(t,n,e){if(e||2===arguments.length)for(var r,i=0,o=n.length;i<o;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return t.concat(r||Array.prototype.slice.call(n))}function nt(t,n){return Z(this,void 0,void 0,(function(){return X(this,(function(e){switch(e.label){case 0:return[4,t.then((function(t){return[null,t]})).catch((function(t){return[n?Object.assign({},t,n):t,void 0]}))];case 1:return[2,e.sent()]}}))}))}function et(t,n){var e;return void 0===n&&(n=50),function(){for(var r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];e&&clearTimeout(e),e=setTimeout((function(){return t.apply(r,i)}),n)}}function rt(t,n){var e;void 0===n&&(n=50);var r=!1,i=0;return function(){for(var o=this,c=[],s=0;s<arguments.length;s++)c[s]=arguments[s];r?(clearTimeout(e),e=setTimeout((function(){Date.now()-i>=n&&(t.apply(o,c),i=Date.now())}),Math.max(n-(Date.now()-i),0))):(t.apply(this,c),i=Date.now(),r=!0)}}function it(t){return void 0===t&&(t=1e3),Z(this,void 0,void 0,(function(){return X(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n){return setTimeout((function(){return n(!0)}),t)}))];case 1:return[2,n.sent()]}}))}))}function ot(t,n){return void 0===t&&(t=0),void 0===n&&(n=0),t.toString().padStart(n,"0")}function ct(t){if(void 0===t&&(t=0),0===t)return"0 B";var n=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,n)).toPrecision(3)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}function st(t,n){return void 0===t&&(t=0),void 0===n&&(n=10),Math.floor(Math.random()*(n-t+1)+t)}function ut(t,n,e){void 0===t&&(t=0),void 0===n&&(n=10),void 0===e&&(e=1);for(var r=[];;){for(var i=!1,o=st(t,n),c=0;c<r.length;c++)if(o===r[c]){i=!0;break}if(i||r.push(o),r.length===e)return r}}function at(t,n,e){return void 0===t&&(t=0),void 0===n&&(n=2),void 0===e&&(e=!1),e?"".concat(Math.round(t*Math.pow(10,n)*100)/Math.pow(10,n),"%"):Math.round(t*Math.pow(10,n))/Math.pow(10,n)}function ft(t){return void 0===t&&(t=0),t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function lt(t,n){return void 0===t&&(t={}),void 0===n&&(n=[]),Object.keys(t).reduce((function(e,r){return n.includes(r)&&(e[r]=t[r]),e}),{})}var dt={address:{msg:"地址只能由2~200位中文、英文、数字或空格组成",regexp:/^[\u4e00-\u9fa5A-Za-z0-9 ]{2,200}$/g},count:{msg:"数量只能由数字组成",regexp:/^\d{1,}$/g},date:{msg:"日期只能由YYYY-MM-DD hh:mm:ss形式组成",regexp:/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/g},email:{msg:"邮箱只能由xxx@yyy.zzz形式组成",regexp:/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/g},idcard:{msg:"身份证只能由13位数字或12位数字与X组成",regexp:/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/g},image:{msg:"图片只能是JPG、PNG、GIF、SVG或WEBP类型",regexp:/\.(jpe?g|png|gif|svg|webp)$/g},name:{msg:"名称只能由2~50位中文、英文、数字、下划线或中划线组成",regexp:/^[\u4e00-\u9fa5\w-]{2,50}$/g},number:{msg:"计数只能由数字或小数点组成",regexp:/^[+-]?(0|([1-9]\d*))(\.\d+)?$/g},password:{msg:"密码只能由8~20位英文、数字或符号至少两种组成",regexp:/^(?![0-9]+$)(?![a-z]+$)(?![A-Z]+$)(?!([^(0-9a-zA-Z)])+$)^.{8,20}$/g},phone:{msg:"手机只能由11位数字组成且需符合通讯运营商规范",regexp:/^1\d{10}$/g}},ht="^$.*+-?=!:|\\/()[]{}".split("");function yt(t,n){void 0===t&&(t=""),void 0===n&&(n="");var e=dt[t],r=e.regexp,i=e.msg,o=r.test(n);return{flag:o,msg:o?"":i}}function pt(t,n,e){void 0===n&&(n=""),void 0===e&&(e="");var r=t.test(n);return{flag:r,msg:r?"":e}}function mt(t,n){var e;void 0===t&&(t="(*)"),void 0===n&&(n="");var r=t.split("*").map((function(t){return ht.includes(t)?"\\"+t:t})),i=new RegExp(r[0]+"(.+?)"+r[1],"g");return(null!==(e=n.match(i))&&void 0!==e?e:[]).map((function(t){return t.replace(i,"$1")}))}function vt(t){return void 0===t&&(t=""),dt.phone.regexp.test(t)?t.toString().replace(/(\d{3})\d*(\d{4})/g,"$1****$2"):t}function St(t,n){return void 0===t&&(t=""),void 0===n&&(n="-"),dt.phone.regexp.test(t)&&["-"," "].includes(n)?t.toString().replace(/(\d{3})(\d{4})(\d{4})/g,"$1".concat(n,"$2").concat(n,"$3")):t}function wt(){return"#"+Math.floor(16777215*Math.random()).toString(16).padEnd(6,"0")}function gt(t){return void 0===t&&(t=5),(t<1||t>10)&&(t=5),Math.random().toString(36).substr(3,t)}function bt(t){return void 0===t&&(t=""),t.replace(/<[^>]*>/g,"")}function Et(t){return void 0===t&&(t=""),t.split("").reduceRight((function(t,n){return t+n}))}function kt(t,n){return void 0===t&&(t=0),void 0===n&&(n=5),t<0&&(t=0),t>n&&(t=n),tt(tt([],Q(new Array(n).fill("★")),!1),Q(new Array(n).fill("☆")),!1).join("").slice(n-t,2*n-t)}var $t={},Dt={fromCallback:function(t){return Object.defineProperty((function(...n){if("function"!=typeof n[n.length-1])return new Promise(((e,r)=>{t.call(this,...n,((t,n)=>null!=t?r(t):e(n)))}));t.apply(this,n)}),"name",{value:t.name})},fromPromise:function(t){return Object.defineProperty((function(...n){const e=n[n.length-1];if("function"!=typeof e)return t.apply(this,n);t.apply(this,n.slice(0,-1)).then((t=>e(null,t)),e)}),"name",{value:t.name})}},Ot=c,Mt=process.cwd,Nt=null,Ft=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Nt||(Nt=Mt.call(process)),Nt};try{process.cwd()}catch(t){}if("function"==typeof process.chdir){var Pt=process.chdir;process.chdir=function(t){Nt=null,Pt.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Pt)}var xt=function(t){Ot.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(t){t.lchmod=function(n,e,r){t.open(n,Ot.O_WRONLY|Ot.O_SYMLINK,e,(function(n,i){n?r&&r(n):t.fchmod(i,e,(function(n){t.close(i,(function(t){r&&r(n||t)}))}))}))},t.lchmodSync=function(n,e){var r,i=t.openSync(n,Ot.O_WRONLY|Ot.O_SYMLINK,e),o=!0;try{r=t.fchmodSync(i,e),o=!1}finally{if(o)try{t.closeSync(i)}catch(t){}else t.closeSync(i)}return r}}(t);t.lutimes||function(t){Ot.hasOwnProperty("O_SYMLINK")?(t.lutimes=function(n,e,r,i){t.open(n,Ot.O_SYMLINK,(function(n,o){n?i&&i(n):t.futimes(o,e,r,(function(n){t.close(o,(function(t){i&&i(n||t)}))}))}))},t.lutimesSync=function(n,e,r){var i,o=t.openSync(n,Ot.O_SYMLINK),c=!0;try{i=t.futimesSync(o,e,r),c=!1}finally{if(c)try{t.closeSync(o)}catch(t){}else t.closeSync(o)}return i}):(t.lutimes=function(t,n,e,r){r&&process.nextTick(r)},t.lutimesSync=function(){})}(t);t.chown=i(t.chown),t.fchown=i(t.fchown),t.lchown=i(t.lchown),t.chmod=e(t.chmod),t.fchmod=e(t.fchmod),t.lchmod=e(t.lchmod),t.chownSync=o(t.chownSync),t.fchownSync=o(t.fchownSync),t.lchownSync=o(t.lchownSync),t.chmodSync=r(t.chmodSync),t.fchmodSync=r(t.fchmodSync),t.lchmodSync=r(t.lchmodSync),t.stat=c(t.stat),t.fstat=c(t.fstat),t.lstat=c(t.lstat),t.statSync=s(t.statSync),t.fstatSync=s(t.fstatSync),t.lstatSync=s(t.lstatSync),t.lchmod||(t.lchmod=function(t,n,e){e&&process.nextTick(e)},t.lchmodSync=function(){});t.lchown||(t.lchown=function(t,n,e,r){r&&process.nextTick(r)},t.lchownSync=function(){});"win32"===Ft&&(t.rename=(n=t.rename,function(e,r,i){var o=Date.now(),c=0;n(e,r,(function s(u){if(u&&("EACCES"===u.code||"EPERM"===u.code)&&Date.now()-o<6e4)return setTimeout((function(){t.stat(r,(function(t,o){t&&"ENOENT"===t.code?n(e,r,s):i(u)}))}),c),void(c<100&&(c+=10));i&&i(u)}))}));var n;function e(n){return n?function(e,r,i){return n.call(t,e,r,(function(t){u(t)&&(t=null),i&&i.apply(this,arguments)}))}:n}function r(n){return n?function(e,r){try{return n.call(t,e,r)}catch(t){if(!u(t))throw t}}:n}function i(n){return n?function(e,r,i,o){return n.call(t,e,r,i,(function(t){u(t)&&(t=null),o&&o.apply(this,arguments)}))}:n}function o(n){return n?function(e,r,i){try{return n.call(t,e,r,i)}catch(t){if(!u(t))throw t}}:n}function c(n){return n?function(e,r,i){function o(t,n){n&&(n.uid<0&&(n.uid+=4294967296),n.gid<0&&(n.gid+=4294967296)),i&&i.apply(this,arguments)}return"function"==typeof r&&(i=r,r=null),r?n.call(t,e,r,o):n.call(t,e,o)}:n}function s(n){return n?function(e,r){var i=r?n.call(t,e,r):n.call(t,e);return i&&(i.uid<0&&(i.uid+=4294967296),i.gid<0&&(i.gid+=4294967296)),i}:n}function u(t){return!t||("ENOSYS"===t.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==t.code&&"EPERM"!==t.code))}t.read=function(n){function e(e,r,i,o,c,s){var u;if(s&&"function"==typeof s){var a=0;u=function(f,l,d){if(f&&"EAGAIN"===f.code&&a<10)return a++,n.call(t,e,r,i,o,c,u);s.apply(this,arguments)}}return n.call(t,e,r,i,o,c,u)}return Object.setPrototypeOf&&Object.setPrototypeOf(e,n),e}(t.read),t.readSync=(a=t.readSync,function(n,e,r,i,o){for(var c=0;;)try{return a.call(t,n,e,r,i,o)}catch(t){if("EAGAIN"===t.code&&c<10){c++;continue}throw t}});var a};var Tt=s.Stream,_t=function(t){return{ReadStream:function n(e,r){if(!(this instanceof n))return new n(e,r);Tt.call(this);var i=this;this.path=e,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,r=r||{};for(var o=Object.keys(r),c=0,s=o.length;c<s;c++){var u=o[c];this[u]=r[u]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick((function(){i._read()}));t.open(this.path,this.flags,this.mode,(function(t,n){if(t)return i.emit("error",t),void(i.readable=!1);i.fd=n,i.emit("open",n),i._read()}))},WriteStream:function n(e,r){if(!(this instanceof n))return new n(e,r);Tt.call(this),this.path=e,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,r=r||{};for(var i=Object.keys(r),o=0,c=i.length;o<c;o++){var s=i[o];this[s]=r[s]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}};var Ct=function(t){if(null===t||"object"!=typeof t)return t;if(t instanceof Object)var n={__proto__:Lt(t)};else n=Object.create(null);return Object.getOwnPropertyNames(t).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})),n},Lt=Object.getPrototypeOf||function(t){return t.__proto__};var jt,It,Yt=t,At=xt,Rt=_t,Bt=Ct,Jt=u;function Wt(t,n){Object.defineProperty(t,jt,{get:function(){return n}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(jt=Symbol.for("graceful-fs.queue"),It=Symbol.for("graceful-fs.previous")):(jt="___graceful-fs.queue",It="___graceful-fs.previous");var Ut=function(){};if(Jt.debuglog?Ut=Jt.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Ut=function(){var t=Jt.format.apply(Jt,arguments);t="GFS4: "+t.split(/\n/).join("\nGFS4: "),console.error(t)}),!Yt[jt]){var Gt=H[jt]||[];Wt(Yt,Gt),Yt.close=function(t){function n(n,e){return t.call(Yt,n,(function(t){t||Kt(),"function"==typeof e&&e.apply(this,arguments)}))}return Object.defineProperty(n,It,{value:t}),n}(Yt.close),Yt.closeSync=function(t){function n(n){t.apply(Yt,arguments),Kt()}return Object.defineProperty(n,It,{value:t}),n}(Yt.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){Ut(Yt[jt]),a.equal(Yt[jt].length,0)}))}H[jt]||Wt(H,Yt[jt]);var Ht,qt=Vt(Bt(Yt));function Vt(t){At(t),t.gracefulify=Vt,t.createReadStream=function(n,e){return new t.ReadStream(n,e)},t.createWriteStream=function(n,e){return new t.WriteStream(n,e)};var n=t.readFile;t.readFile=function(t,e,r){"function"==typeof e&&(r=e,e=null);return function t(e,r,i,o){return n(e,r,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?"function"==typeof i&&i.apply(this,arguments):zt([t,[e,r,i],n,o||Date.now(),Date.now()])}))}(t,e,r)};var e=t.writeFile;t.writeFile=function(t,n,r,i){"function"==typeof r&&(i=r,r=null);return function t(n,r,i,o,c){return e(n,r,i,(function(e){!e||"EMFILE"!==e.code&&"ENFILE"!==e.code?"function"==typeof o&&o.apply(this,arguments):zt([t,[n,r,i,o],e,c||Date.now(),Date.now()])}))}(t,n,r,i)};var r=t.appendFile;r&&(t.appendFile=function(t,n,e,i){"function"==typeof e&&(i=e,e=null);return function t(n,e,i,o,c){return r(n,e,i,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?"function"==typeof o&&o.apply(this,arguments):zt([t,[n,e,i,o],r,c||Date.now(),Date.now()])}))}(t,n,e,i)});var i=t.copyFile;i&&(t.copyFile=function(t,n,e,r){"function"==typeof e&&(r=e,e=0);return function t(n,e,r,o,c){return i(n,e,r,(function(i){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?"function"==typeof o&&o.apply(this,arguments):zt([t,[n,e,r,o],i,c||Date.now(),Date.now()])}))}(t,n,e,r)});var o=t.readdir;if(t.readdir=function(t,n,e){"function"==typeof n&&(e=n,n=null);return function t(n,e,r,i){return o(n,e,(function(o,c){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?(c&&c.sort&&c.sort(),"function"==typeof r&&r.call(this,o,c)):zt([t,[n,e,r],o,i||Date.now(),Date.now()])}))}(t,n,e)},"v0.8"===process.version.substr(0,4)){var c=Rt(t);l=c.ReadStream,d=c.WriteStream}var s=t.ReadStream;s&&(l.prototype=Object.create(s.prototype),l.prototype.open=function(){var t=this;y(t.path,t.flags,t.mode,(function(n,e){n?(t.autoClose&&t.destroy(),t.emit("error",n)):(t.fd=e,t.emit("open",e),t.read())}))});var u=t.WriteStream;u&&(d.prototype=Object.create(u.prototype),d.prototype.open=function(){var t=this;y(t.path,t.flags,t.mode,(function(n,e){n?(t.destroy(),t.emit("error",n)):(t.fd=e,t.emit("open",e))}))}),Object.defineProperty(t,"ReadStream",{get:function(){return l},set:function(t){l=t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return d},set:function(t){d=t},enumerable:!0,configurable:!0});var a=l;Object.defineProperty(t,"FileReadStream",{get:function(){return a},set:function(t){a=t},enumerable:!0,configurable:!0});var f=d;function l(t,n){return this instanceof l?(s.apply(this,arguments),this):l.apply(Object.create(l.prototype),arguments)}function d(t,n){return this instanceof d?(u.apply(this,arguments),this):d.apply(Object.create(d.prototype),arguments)}Object.defineProperty(t,"FileWriteStream",{get:function(){return f},set:function(t){f=t},enumerable:!0,configurable:!0});var h=t.open;function y(t,n,e,r){return"function"==typeof e&&(r=e,e=null),function t(n,e,r,i,o){return h(n,e,r,(function(c,s){!c||"EMFILE"!==c.code&&"ENFILE"!==c.code?"function"==typeof i&&i.apply(this,arguments):zt([t,[n,e,r,i],c,o||Date.now(),Date.now()])}))}(t,n,e,r)}return t.open=y,t}function zt(t){Ut("ENQUEUE",t[0].name,t[1]),Yt[jt].push(t),Zt()}function Kt(){for(var t=Date.now(),n=0;n<Yt[jt].length;++n)Yt[jt][n].length>2&&(Yt[jt][n][3]=t,Yt[jt][n][4]=t);Zt()}function Zt(){if(clearTimeout(Ht),Ht=void 0,0!==Yt[jt].length){var t=Yt[jt].shift(),n=t[0],e=t[1],r=t[2],i=t[3],o=t[4];if(void 0===i)Ut("RETRY",n.name,e),n.apply(null,e);else if(Date.now()-i>=6e4){Ut("TIMEOUT",n.name,e);var c=e.pop();"function"==typeof c&&c.call(null,r)}else{var s=Date.now()-o,u=Math.max(o-i,1);s>=Math.min(1.2*u,100)?(Ut("RETRY",n.name,e),n.apply(null,e.concat([i]))):Yt[jt].push(t)}void 0===Ht&&(Ht=setTimeout(Zt,0))}}process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!Yt.__patched&&(qt=Vt(Yt),Yt.__patched=!0),function(t){const n=Dt.fromCallback,e=qt,r=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter((t=>"function"==typeof e[t]));Object.assign(t,e),r.forEach((r=>{t[r]=n(e[r])})),t.realpath.native=n(e.realpath.native),t.exists=function(t,n){return"function"==typeof n?e.exists(t,n):new Promise((n=>e.exists(t,n)))},t.read=function(t,n,r,i,o,c){return"function"==typeof c?e.read(t,n,r,i,o,c):new Promise(((c,s)=>{e.read(t,n,r,i,o,((t,n,e)=>{if(t)return s(t);c({bytesRead:n,buffer:e})}))}))},t.write=function(t,n,...r){return"function"==typeof r[r.length-1]?e.write(t,n,...r):new Promise(((i,o)=>{e.write(t,n,...r,((t,n,e)=>{if(t)return o(t);i({bytesWritten:n,buffer:e})}))}))},"function"==typeof e.writev&&(t.writev=function(t,n,...r){return"function"==typeof r[r.length-1]?e.writev(t,n,...r):new Promise(((i,o)=>{e.writev(t,n,...r,((t,n,e)=>{if(t)return o(t);i({bytesWritten:n,buffers:e})}))}))})}($t);var Xt={},Qt={};const tn=r;Qt.checkPath=function(t){if("win32"===process.platform){if(/[<>:"|?*]/.test(t.replace(tn.parse(t).root,""))){const n=new Error(`Path contains invalid characters: ${t}`);throw n.code="EINVAL",n}}};const nn=$t,{checkPath:en}=Qt,rn=t=>"number"==typeof t?t:{mode:511,...t}.mode;Xt.makeDir=async(t,n)=>(en(t),nn.mkdir(t,{mode:rn(n),recursive:!0})),Xt.makeDirSync=(t,n)=>(en(t),nn.mkdirSync(t,{mode:rn(n),recursive:!0}));const on=Dt.fromPromise,{makeDir:cn,makeDirSync:sn}=Xt,un=on(cn);var an={mkdirs:un,mkdirsSync:sn,mkdirp:un,mkdirpSync:sn,ensureDir:un,ensureDirSync:sn};const fn=Dt.fromPromise,ln=$t;var dn={pathExists:fn((function(t){return ln.access(t).then((()=>!0)).catch((()=>!1))})),pathExistsSync:ln.existsSync};const hn=qt;var yn=function(t,n,e,r){hn.open(t,"r+",((t,i)=>{if(t)return r(t);hn.futimes(i,n,e,(t=>{hn.close(i,(n=>{r&&r(t||n)}))}))}))},pn=function(t,n,e){const r=hn.openSync(t,"r+");return hn.futimesSync(r,n,e),hn.closeSync(r)};const mn=$t,vn=r,Sn=u;function wn(t,n,e){const r=e.dereference?t=>mn.stat(t,{bigint:!0}):t=>mn.lstat(t,{bigint:!0});return Promise.all([r(t),r(n).catch((t=>{if("ENOENT"===t.code)return null;throw t}))]).then((([t,n])=>({srcStat:t,destStat:n})))}function gn(t,n){return n.ino&&n.dev&&n.ino===t.ino&&n.dev===t.dev}function bn(t,n){const e=vn.resolve(t).split(vn.sep).filter((t=>t)),r=vn.resolve(n).split(vn.sep).filter((t=>t));return e.reduce(((t,n,e)=>t&&r[e]===n),!0)}function En(t,n,e){return`Cannot ${e} '${t}' to a subdirectory of itself, '${n}'.`}var kn={checkPaths:function(t,n,e,r,i){Sn.callbackify(wn)(t,n,r,((r,o)=>{if(r)return i(r);const{srcStat:c,destStat:s}=o;if(s){if(gn(c,s)){const r=vn.basename(t),o=vn.basename(n);return"move"===e&&r!==o&&r.toLowerCase()===o.toLowerCase()?i(null,{srcStat:c,destStat:s,isChangingCase:!0}):i(new Error("Source and destination must not be the same."))}if(c.isDirectory()&&!s.isDirectory())return i(new Error(`Cannot overwrite non-directory '${n}' with directory '${t}'.`));if(!c.isDirectory()&&s.isDirectory())return i(new Error(`Cannot overwrite directory '${n}' with non-directory '${t}'.`))}return c.isDirectory()&&bn(t,n)?i(new Error(En(t,n,e))):i(null,{srcStat:c,destStat:s})}))},checkPathsSync:function(t,n,e,r){const{srcStat:i,destStat:o}=function(t,n,e){let r;const i=e.dereference?t=>mn.statSync(t,{bigint:!0}):t=>mn.lstatSync(t,{bigint:!0}),o=i(t);try{r=i(n)}catch(t){if("ENOENT"===t.code)return{srcStat:o,destStat:null};throw t}return{srcStat:o,destStat:r}}(t,n,r);if(o){if(gn(i,o)){const r=vn.basename(t),c=vn.basename(n);if("move"===e&&r!==c&&r.toLowerCase()===c.toLowerCase())return{srcStat:i,destStat:o,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!o.isDirectory())throw new Error(`Cannot overwrite non-directory '${n}' with directory '${t}'.`);if(!i.isDirectory()&&o.isDirectory())throw new Error(`Cannot overwrite directory '${n}' with non-directory '${t}'.`)}if(i.isDirectory()&&bn(t,n))throw new Error(En(t,n,e));return{srcStat:i,destStat:o}},checkParentPaths:function t(n,e,r,i,o){const c=vn.resolve(vn.dirname(n)),s=vn.resolve(vn.dirname(r));if(s===c||s===vn.parse(s).root)return o();mn.stat(s,{bigint:!0},((c,u)=>c?"ENOENT"===c.code?o():o(c):gn(e,u)?o(new Error(En(n,r,i))):t(n,e,s,i,o)))},checkParentPathsSync:function t(n,e,r,i){const o=vn.resolve(vn.dirname(n)),c=vn.resolve(vn.dirname(r));if(c===o||c===vn.parse(c).root)return;let s;try{s=mn.statSync(c,{bigint:!0})}catch(t){if("ENOENT"===t.code)return;throw t}if(gn(e,s))throw new Error(En(n,r,i));return t(n,e,c,i)},isSrcSubdir:bn,areIdentical:gn};const $n=qt,Dn=r,On=an.mkdirs,Mn=dn.pathExists,Nn=yn,Fn=kn;function Pn(t,n,e,r,i){const o=Dn.dirname(e);Mn(o,((c,s)=>c?i(c):s?Tn(t,n,e,r,i):void On(o,(o=>o?i(o):Tn(t,n,e,r,i)))))}function xn(t,n,e,r,i,o){Promise.resolve(i.filter(e,r)).then((c=>c?t(n,e,r,i,o):o()),(t=>o(t)))}function Tn(t,n,e,r,i){(r.dereference?$n.stat:$n.lstat)(n,((o,c)=>o?i(o):c.isDirectory()?function(t,n,e,r,i,o){return n?jn(e,r,i,o):function(t,n,e,r,i){$n.mkdir(e,(o=>{if(o)return i(o);jn(n,e,r,(n=>n?i(n):Ln(e,t,i)))}))}(t.mode,e,r,i,o)}(c,t,n,e,r,i):c.isFile()||c.isCharacterDevice()||c.isBlockDevice()?function(t,n,e,r,i,o){return n?function(t,n,e,r,i){if(!r.overwrite)return r.errorOnExist?i(new Error(`'${e}' already exists`)):i();$n.unlink(e,(o=>o?i(o):_n(t,n,e,r,i)))}(t,e,r,i,o):_n(t,e,r,i,o)}(c,t,n,e,r,i):c.isSymbolicLink()?function(t,n,e,r,i){$n.readlink(n,((n,o)=>n?i(n):(r.dereference&&(o=Dn.resolve(process.cwd(),o)),t?void $n.readlink(e,((n,c)=>n?"EINVAL"===n.code||"UNKNOWN"===n.code?$n.symlink(o,e,i):i(n):(r.dereference&&(c=Dn.resolve(process.cwd(),c)),Fn.isSrcSubdir(o,c)?i(new Error(`Cannot copy '${o}' to a subdirectory of itself, '${c}'.`)):t.isDirectory()&&Fn.isSrcSubdir(c,o)?i(new Error(`Cannot overwrite '${c}' with '${o}'.`)):function(t,n,e){$n.unlink(n,(r=>r?e(r):$n.symlink(t,n,e)))}(o,e,i)))):$n.symlink(o,e,i))))}(t,n,e,r,i):c.isSocket()?i(new Error(`Cannot copy a socket file: ${n}`)):c.isFIFO()?i(new Error(`Cannot copy a FIFO pipe: ${n}`)):i(new Error(`Unknown file: ${n}`))))}function _n(t,n,e,r,i){$n.copyFile(n,e,(o=>o?i(o):r.preserveTimestamps?function(t,n,e,r){if(function(t){return 0==(128&t)}(t))return function(t,n,e){return Ln(t,128|n,e)}(e,t,(i=>i?r(i):Cn(t,n,e,r)));return Cn(t,n,e,r)}(t.mode,n,e,i):Ln(e,t.mode,i)))}function Cn(t,n,e,r){!function(t,n,e){$n.stat(t,((t,r)=>t?e(t):Nn(n,r.atime,r.mtime,e)))}(n,e,(n=>n?r(n):Ln(e,t,r)))}function Ln(t,n,e){return $n.chmod(t,n,e)}function jn(t,n,e,r){$n.readdir(t,((i,o)=>i?r(i):In(o,t,n,e,r)))}function In(t,n,e,r,i){const o=t.pop();return o?function(t,n,e,r,i,o){const c=Dn.join(e,n),s=Dn.join(r,n);Fn.checkPaths(c,s,"copy",i,((n,u)=>{if(n)return o(n);const{destStat:a}=u;!function(t,n,e,r,i){r.filter?xn(Tn,t,n,e,r,i):Tn(t,n,e,r,i)}(a,c,s,i,(n=>n?o(n):In(t,e,r,i,o)))}))}(t,o,n,e,r,i):i()}var Yn=function(t,n,e,r){"function"!=typeof e||r?"function"==typeof e&&(e={filter:e}):(r=e,e={}),r=r||function(){},(e=e||{}).clobber=!("clobber"in e)||!!e.clobber,e.overwrite="overwrite"in e?!!e.overwrite:e.clobber,e.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269"),Fn.checkPaths(t,n,"copy",e,((i,o)=>{if(i)return r(i);const{srcStat:c,destStat:s}=o;Fn.checkParentPaths(t,c,n,"copy",(i=>i?r(i):e.filter?xn(Pn,s,t,n,e,r):Pn(s,t,n,e,r)))}))};const An=qt,Rn=r,Bn=an.mkdirsSync,Jn=pn,Wn=kn;function Un(t,n,e,r){const i=(r.dereference?An.statSync:An.lstatSync)(n);if(i.isDirectory())return function(t,n,e,r,i){return n?qn(e,r,i):function(t,n,e,r){return An.mkdirSync(e),qn(n,e,r),Hn(e,t)}(t.mode,e,r,i)}(i,t,n,e,r);if(i.isFile()||i.isCharacterDevice()||i.isBlockDevice())return function(t,n,e,r,i){return n?function(t,n,e,r){if(r.overwrite)return An.unlinkSync(e),Gn(t,n,e,r);if(r.errorOnExist)throw new Error(`'${e}' already exists`)}(t,e,r,i):Gn(t,e,r,i)}(i,t,n,e,r);if(i.isSymbolicLink())return function(t,n,e,r){let i=An.readlinkSync(n);r.dereference&&(i=Rn.resolve(process.cwd(),i));if(t){let t;try{t=An.readlinkSync(e)}catch(t){if("EINVAL"===t.code||"UNKNOWN"===t.code)return An.symlinkSync(i,e);throw t}if(r.dereference&&(t=Rn.resolve(process.cwd(),t)),Wn.isSrcSubdir(i,t))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${t}'.`);if(An.statSync(e).isDirectory()&&Wn.isSrcSubdir(t,i))throw new Error(`Cannot overwrite '${t}' with '${i}'.`);return function(t,n){return An.unlinkSync(n),An.symlinkSync(t,n)}(i,e)}return An.symlinkSync(i,e)}(t,n,e,r);if(i.isSocket())throw new Error(`Cannot copy a socket file: ${n}`);if(i.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${n}`);throw new Error(`Unknown file: ${n}`)}function Gn(t,n,e,r){return An.copyFileSync(n,e),r.preserveTimestamps&&function(t,n,e){(function(t){return 0==(128&t)})(t)&&function(t,n){Hn(t,128|n)}(e,t);(function(t,n){const e=An.statSync(t);Jn(n,e.atime,e.mtime)})(n,e)}(t.mode,n,e),Hn(e,t.mode)}function Hn(t,n){return An.chmodSync(t,n)}function qn(t,n,e){An.readdirSync(t).forEach((r=>function(t,n,e,r){const i=Rn.join(n,t),o=Rn.join(e,t),{destStat:c}=Wn.checkPathsSync(i,o,"copy",r);return function(t,n,e,r){if(!r.filter||r.filter(n,e))return Un(t,n,e,r)}(c,i,o,r)}(r,t,n,e)))}var Vn=function(t,n,e){"function"==typeof e&&(e={filter:e}),(e=e||{}).clobber=!("clobber"in e)||!!e.clobber,e.overwrite="overwrite"in e?!!e.overwrite:e.clobber,e.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269");const{srcStat:r,destStat:i}=Wn.checkPathsSync(t,n,"copy",e);return Wn.checkParentPathsSync(t,r,n,"copy"),function(t,n,e,r){if(r.filter&&!r.filter(n,e))return;const i=Rn.dirname(e);An.existsSync(i)||Bn(i);return Un(t,n,e,r)}(i,t,n,e)};var zn={copy:(0,Dt.fromCallback)(Yn),copySync:Vn};const Kn=qt,Zn=r,Xn=a,Qn="win32"===process.platform;function te(t){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach((n=>{t[n]=t[n]||Kn[n],t[n+="Sync"]=t[n]||Kn[n]})),t.maxBusyTries=t.maxBusyTries||3}function ne(t,n,e){let r=0;"function"==typeof n&&(e=n,n={}),Xn(t,"rimraf: missing path"),Xn.strictEqual(typeof t,"string","rimraf: path should be a string"),Xn.strictEqual(typeof e,"function","rimraf: callback function required"),Xn(n,"rimraf: invalid options argument provided"),Xn.strictEqual(typeof n,"object","rimraf: options should be object"),te(n),ee(t,n,(function i(o){if(o){if(("EBUSY"===o.code||"ENOTEMPTY"===o.code||"EPERM"===o.code)&&r<n.maxBusyTries){r++;return setTimeout((()=>ee(t,n,i)),100*r)}"ENOENT"===o.code&&(o=null)}e(o)}))}function ee(t,n,e){Xn(t),Xn(n),Xn("function"==typeof e),n.lstat(t,((r,i)=>r&&"ENOENT"===r.code?e(null):r&&"EPERM"===r.code&&Qn?re(t,n,r,e):i&&i.isDirectory()?oe(t,n,r,e):void n.unlink(t,(r=>{if(r){if("ENOENT"===r.code)return e(null);if("EPERM"===r.code)return Qn?re(t,n,r,e):oe(t,n,r,e);if("EISDIR"===r.code)return oe(t,n,r,e)}return e(r)}))))}function re(t,n,e,r){Xn(t),Xn(n),Xn("function"==typeof r),n.chmod(t,438,(i=>{i?r("ENOENT"===i.code?null:e):n.stat(t,((i,o)=>{i?r("ENOENT"===i.code?null:e):o.isDirectory()?oe(t,n,e,r):n.unlink(t,r)}))}))}function ie(t,n,e){let r;Xn(t),Xn(n);try{n.chmodSync(t,438)}catch(t){if("ENOENT"===t.code)return;throw e}try{r=n.statSync(t)}catch(t){if("ENOENT"===t.code)return;throw e}r.isDirectory()?se(t,n,e):n.unlinkSync(t)}function oe(t,n,e,r){Xn(t),Xn(n),Xn("function"==typeof r),n.rmdir(t,(i=>{!i||"ENOTEMPTY"!==i.code&&"EEXIST"!==i.code&&"EPERM"!==i.code?i&&"ENOTDIR"===i.code?r(e):r(i):function(t,n,e){Xn(t),Xn(n),Xn("function"==typeof e),n.readdir(t,((r,i)=>{if(r)return e(r);let o,c=i.length;if(0===c)return n.rmdir(t,e);i.forEach((r=>{ne(Zn.join(t,r),n,(r=>{if(!o)return r?e(o=r):void(0==--c&&n.rmdir(t,e))}))}))}))}(t,n,r)}))}function ce(t,n){let e;te(n=n||{}),Xn(t,"rimraf: missing path"),Xn.strictEqual(typeof t,"string","rimraf: path should be a string"),Xn(n,"rimraf: missing options"),Xn.strictEqual(typeof n,"object","rimraf: options should be object");try{e=n.lstatSync(t)}catch(e){if("ENOENT"===e.code)return;"EPERM"===e.code&&Qn&&ie(t,n,e)}try{e&&e.isDirectory()?se(t,n,null):n.unlinkSync(t)}catch(e){if("ENOENT"===e.code)return;if("EPERM"===e.code)return Qn?ie(t,n,e):se(t,n,e);if("EISDIR"!==e.code)throw e;se(t,n,e)}}function se(t,n,e){Xn(t),Xn(n);try{n.rmdirSync(t)}catch(r){if("ENOTDIR"===r.code)throw e;if("ENOTEMPTY"===r.code||"EEXIST"===r.code||"EPERM"===r.code)!function(t,n){if(Xn(t),Xn(n),n.readdirSync(t).forEach((e=>ce(Zn.join(t,e),n))),!Qn){return n.rmdirSync(t,n)}{const e=Date.now();do{try{return n.rmdirSync(t,n)}catch{}}while(Date.now()-e<500)}}(t,n);else if("ENOENT"!==r.code)throw r}}var ue=ne;ne.sync=ce;const ae=qt,fe=Dt.fromCallback,le=ue;var de={remove:fe((function(t,n){if(ae.rm)return ae.rm(t,{recursive:!0,force:!0},n);le(t,n)})),removeSync:function(t){if(ae.rmSync)return ae.rmSync(t,{recursive:!0,force:!0});le.sync(t)}};const he=Dt.fromPromise,ye=$t,pe=r,me=an,ve=de,Se=he((async function(t){let n;try{n=await ye.readdir(t)}catch{return me.mkdirs(t)}return Promise.all(n.map((n=>ve.remove(pe.join(t,n)))))}));function we(t){let n;try{n=ye.readdirSync(t)}catch{return me.mkdirsSync(t)}n.forEach((n=>{n=pe.join(t,n),ve.removeSync(n)}))}var ge={emptyDirSync:we,emptydirSync:we,emptyDir:Se,emptydir:Se};const be=Dt.fromCallback,Ee=r,ke=qt,$e=an;var De={createFile:be((function(t,n){function e(){ke.writeFile(t,"",(t=>{if(t)return n(t);n()}))}ke.stat(t,((r,i)=>{if(!r&&i.isFile())return n();const o=Ee.dirname(t);ke.stat(o,((t,r)=>{if(t)return"ENOENT"===t.code?$e.mkdirs(o,(t=>{if(t)return n(t);e()})):n(t);r.isDirectory()?e():ke.readdir(o,(t=>{if(t)return n(t)}))}))}))})),createFileSync:function(t){let n;try{n=ke.statSync(t)}catch{}if(n&&n.isFile())return;const e=Ee.dirname(t);try{ke.statSync(e).isDirectory()||ke.readdirSync(e)}catch(t){if(!t||"ENOENT"!==t.code)throw t;$e.mkdirsSync(e)}ke.writeFileSync(t,"")}};const Oe=Dt.fromCallback,Me=r,Ne=qt,Fe=an,Pe=dn.pathExists,{areIdentical:xe}=kn;var Te={createLink:Oe((function(t,n,e){function r(t,n){Ne.link(t,n,(t=>{if(t)return e(t);e(null)}))}Ne.lstat(n,((i,o)=>{Ne.lstat(t,((i,c)=>{if(i)return i.message=i.message.replace("lstat","ensureLink"),e(i);if(o&&xe(c,o))return e(null);const s=Me.dirname(n);Pe(s,((i,o)=>i?e(i):o?r(t,n):void Fe.mkdirs(s,(i=>{if(i)return e(i);r(t,n)}))))}))}))})),createLinkSync:function(t,n){let e;try{e=Ne.lstatSync(n)}catch{}try{const n=Ne.lstatSync(t);if(e&&xe(n,e))return}catch(t){throw t.message=t.message.replace("lstat","ensureLink"),t}const r=Me.dirname(n);return Ne.existsSync(r)||Fe.mkdirsSync(r),Ne.linkSync(t,n)}};const _e=r,Ce=qt,Le=dn.pathExists;var je={symlinkPaths:function(t,n,e){if(_e.isAbsolute(t))return Ce.lstat(t,(n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),e(n)):e(null,{toCwd:t,toDst:t})));{const r=_e.dirname(n),i=_e.join(r,t);return Le(i,((n,o)=>n?e(n):o?e(null,{toCwd:i,toDst:t}):Ce.lstat(t,(n=>n?(n.message=n.message.replace("lstat","ensureSymlink"),e(n)):e(null,{toCwd:t,toDst:_e.relative(r,t)})))))}},symlinkPathsSync:function(t,n){let e;if(_e.isAbsolute(t)){if(e=Ce.existsSync(t),!e)throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}{const r=_e.dirname(n),i=_e.join(r,t);if(e=Ce.existsSync(i),e)return{toCwd:i,toDst:t};if(e=Ce.existsSync(t),!e)throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:_e.relative(r,t)}}}};const Ie=qt;var Ye={symlinkType:function(t,n,e){if(e="function"==typeof n?n:e,n="function"!=typeof n&&n)return e(null,n);Ie.lstat(t,((t,r)=>{if(t)return e(null,"file");n=r&&r.isDirectory()?"dir":"file",e(null,n)}))},symlinkTypeSync:function(t,n){let e;if(n)return n;try{e=Ie.lstatSync(t)}catch{return"file"}return e&&e.isDirectory()?"dir":"file"}};const Ae=Dt.fromCallback,Re=r,Be=$t,Je=an.mkdirs,We=an.mkdirsSync,Ue=je.symlinkPaths,Ge=je.symlinkPathsSync,He=Ye.symlinkType,qe=Ye.symlinkTypeSync,Ve=dn.pathExists,{areIdentical:ze}=kn;function Ke(t,n,e,r){Ue(t,n,((i,o)=>{if(i)return r(i);t=o.toDst,He(o.toCwd,e,((e,i)=>{if(e)return r(e);const o=Re.dirname(n);Ve(o,((e,c)=>e?r(e):c?Be.symlink(t,n,i,r):void Je(o,(e=>{if(e)return r(e);Be.symlink(t,n,i,r)}))))}))}))}var Ze={createSymlink:Ae((function(t,n,e,r){r="function"==typeof e?e:r,e="function"!=typeof e&&e,Be.lstat(n,((i,o)=>{!i&&o.isSymbolicLink()?Promise.all([Be.stat(t),Be.stat(n)]).then((([i,o])=>{if(ze(i,o))return r(null);Ke(t,n,e,r)})):Ke(t,n,e,r)}))})),createSymlinkSync:function(t,n,e){let r;try{r=Be.lstatSync(n)}catch{}if(r&&r.isSymbolicLink()){const e=Be.statSync(t),r=Be.statSync(n);if(ze(e,r))return}const i=Ge(t,n);t=i.toDst,e=qe(i.toCwd,e);const o=Re.dirname(n);return Be.existsSync(o)||We(o),Be.symlinkSync(t,n,e)}};const{createFile:Xe,createFileSync:Qe}=De,{createLink:tr,createLinkSync:nr}=Te,{createSymlink:er,createSymlinkSync:rr}=Ze;var ir={createFile:Xe,createFileSync:Qe,ensureFile:Xe,ensureFileSync:Qe,createLink:tr,createLinkSync:nr,ensureLink:tr,ensureLinkSync:nr,createSymlink:er,createSymlinkSync:rr,ensureSymlink:er,ensureSymlinkSync:rr};var or={stringify:function(t,{EOL:n="\n",finalEOL:e=!0,replacer:r=null,spaces:i}={}){const o=e?n:"";return JSON.stringify(t,r,i).replace(/\n/g,n)+o},stripBom:function(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t.replace(/^\uFEFF/,"")}};let cr;try{cr=require("graceful-fs")}catch(n){cr=t}const sr=Dt,{stringify:ur,stripBom:ar}=or;const fr=sr.fromPromise((async function(t,n={}){"string"==typeof n&&(n={encoding:n});const e=n.fs||cr,r=!("throws"in n)||n.throws;let i,o=await sr.fromCallback(e.readFile)(t,n);o=ar(o);try{i=JSON.parse(o,n?n.reviver:null)}catch(n){if(r)throw n.message=`${t}: ${n.message}`,n;return null}return i}));const lr=sr.fromPromise((async function(t,n,e={}){const r=e.fs||cr,i=ur(n,e);await sr.fromCallback(r.writeFile)(t,i,e)}));const dr={readFile:fr,readFileSync:function(t,n={}){"string"==typeof n&&(n={encoding:n});const e=n.fs||cr,r=!("throws"in n)||n.throws;try{let r=e.readFileSync(t,n);return r=ar(r),JSON.parse(r,n.reviver)}catch(n){if(r)throw n.message=`${t}: ${n.message}`,n;return null}},writeFile:lr,writeFileSync:function(t,n,e={}){const r=e.fs||cr,i=ur(n,e);return r.writeFileSync(t,i,e)}};var hr={readJson:dr.readFile,readJsonSync:dr.readFileSync,writeJson:dr.writeFile,writeJsonSync:dr.writeFileSync};const yr=Dt.fromCallback,pr=qt,mr=r,vr=an,Sr=dn.pathExists;var wr={outputFile:yr((function(t,n,e,r){"function"==typeof e&&(r=e,e="utf8");const i=mr.dirname(t);Sr(i,((o,c)=>o?r(o):c?pr.writeFile(t,n,e,r):void vr.mkdirs(i,(i=>{if(i)return r(i);pr.writeFile(t,n,e,r)}))))})),outputFileSync:function(t,...n){const e=mr.dirname(t);if(pr.existsSync(e))return pr.writeFileSync(t,...n);vr.mkdirsSync(e),pr.writeFileSync(t,...n)}};const{stringify:gr}=or,{outputFile:br}=wr;var Er=async function(t,n,e={}){const r=gr(n,e);await br(t,r,e)};const{stringify:kr}=or,{outputFileSync:$r}=wr;var Dr=function(t,n,e){const r=kr(n,e);$r(t,r,e)};const Or=Dt.fromPromise,Mr=hr;Mr.outputJson=Or(Er),Mr.outputJsonSync=Dr,Mr.outputJSON=Mr.outputJson,Mr.outputJSONSync=Mr.outputJsonSync,Mr.writeJSON=Mr.writeJson,Mr.writeJSONSync=Mr.writeJsonSync,Mr.readJSON=Mr.readJson,Mr.readJSONSync=Mr.readJsonSync;var Nr=Mr;const Fr=qt,Pr=r,xr=zn.copy,Tr=de.remove,_r=an.mkdirp,Cr=dn.pathExists,Lr=kn;function jr(t,n,e,r,i){return r?Ir(t,n,e,i):e?Tr(n,(r=>r?i(r):Ir(t,n,e,i))):void Cr(n,((r,o)=>r?i(r):o?i(new Error("dest already exists.")):Ir(t,n,e,i)))}function Ir(t,n,e,r){Fr.rename(t,n,(i=>i?"EXDEV"!==i.code?r(i):function(t,n,e,r){xr(t,n,{overwrite:e,errorOnExist:!0},(n=>n?r(n):Tr(t,r)))}(t,n,e,r):r()))}var Yr=function(t,n,e,r){"function"==typeof e&&(r=e,e={});const i=e.overwrite||e.clobber||!1;Lr.checkPaths(t,n,"move",e,((e,o)=>{if(e)return r(e);const{srcStat:c,isChangingCase:s=!1}=o;Lr.checkParentPaths(t,c,n,"move",(e=>e?r(e):function(t){const n=Pr.dirname(t);return Pr.parse(n).root===n}(n)?jr(t,n,i,s,r):void _r(Pr.dirname(n),(e=>e?r(e):jr(t,n,i,s,r)))))}))};const Ar=qt,Rr=r,Br=zn.copySync,Jr=de.removeSync,Wr=an.mkdirpSync,Ur=kn;function Gr(t,n,e){try{Ar.renameSync(t,n)}catch(r){if("EXDEV"!==r.code)throw r;return function(t,n,e){return Br(t,n,{overwrite:e,errorOnExist:true}),Jr(t)}(t,n,e)}}var Hr=function(t,n,e){const r=(e=e||{}).overwrite||e.clobber||!1,{srcStat:i,isChangingCase:o=!1}=Ur.checkPathsSync(t,n,"move",e);return Ur.checkParentPathsSync(t,i,n,"move"),function(t){const n=Rr.dirname(t);return Rr.parse(n).root===n}(n)||Wr(Rr.dirname(n)),function(t,n,e,r){if(r)return Gr(t,n,e);if(e)return Jr(n),Gr(t,n,e);if(Ar.existsSync(n))throw new Error("dest already exists.");return Gr(t,n,e)}(t,n,r,o)};var qr={move:(0,Dt.fromCallback)(Yr),moveSync:Hr},Vr={...$t,...zn,...ge,...ir,...Nr,...an,...qr,...wr,...dn,...de};function zr(t,n){return void 0===t&&(t=""),void 0===n&&(n=o()),i(n,t)}function Kr(t,n,e){void 0===t&&(t=""),void 0===n&&(n=""),Vr.copySync(t,n,{filter:e})}function Zr(t){void 0===t&&(t=""),Vr.ensureDirSync(t)}function Xr(t,r,c){var s;if(void 0===t&&(t="bfs"),void 0===r&&(r=o()),void 0===c&&(c=/(node_modules|\.git|\.DS_Store)$/),"bfs"===t){var u=[],a=[];!c.test(r)&&a.unshift(r);for(var f=function(){var t=null!==(s=a.shift())&&void 0!==s?s:"",r=n(t);if(r&&!c.test(t)){var o=r.isDirectory,f=r.isFile;o()?e(t).forEach((function(n){var e=i(t,n);a.push(e)})):f()&&u.push(t)}};a.length;)f();return u}if("dfs"===t){u=[];var l=n(r);return c.test(r)||(l.isDirectory()?e(r).reduce((function(t,n){var e=Xr("dfs",i(r,n),c);return t.push.apply(t,tt([],Q(e),!1)),t}),u):l.isFile()&&u.push(r)),u}return[]}function Qr(t){void 0===t&&(t=""),Vr.removeSync(t)}function ti(){var t,n="127.0.0.1",e=f();for(var r in e)for(var i=null!==(t=e[r])&&void 0!==t?t:[],o=0;o<i.length;o++){var c=i[o],s=c.address,u=c.family,a=c.internal;if("IPv4"===u&&s!==n&&!a)return s}return n}function ni(t){return void 0===t&&(t="node -v"),h(t,{encoding:"utf8"})}function ei(){var t,n=l().toLocaleLowerCase(),e={windows:/windows/g,macos:/darwin/g,linux:/linux/g},r=null!==(t=Object.keys(e).find((function(t){return e[t].test(n)})))&&void 0!==t?t:"unknow";return{nodeVs:ni("node -v").replace(/(v|\n|\r\n)/g,""),npmVs:ni("npm -v").replace(/\n/g,""),system:r,systemVs:d().split("-")[0]}}export{zr as AbsPath,nt as AsyncTo,yt as CheckText,pt as CheckTextPlus,Kr as CopyDir,Zr as CreateDir,et as Debounce,vt as DesePhone,S as EnvType,ot as FillNum,lt as FilterObj,ct as FormatByte,z as FormatCountdown,St as FormatPhone,K as FormatTimeDiff,ti as GetIP,y as GroupArrKey,B as IsArguments,N as IsArray,A as IsAsyncFunction,O as IsBoolean,_ as IsClass,P as IsDate,Y as IsElement,W as IsEmpty,U as IsEmptyArray,G as IsEmptyObject,J as IsError,T as IsFunction,L as IsMap,g as IsNode,k as IsNull,D as IsNumber,F as IsObject,x as IsRegExp,C as IsSet,$ as IsString,M as IsSymbol,R as IsSyncFunction,E as IsUndefined,I as IsWeakMap,j as IsWeakSet,w as IsWeb,mt as MatchBracketText,ei as NodeType,wt as RandomColor,gt as RandomId,st as RandomNum,ut as RandomNumPlus,Xr as ReadDir,p as RecordArrPosition,Qr as RemoveDir,bt as RemoveTag,Et as ReverseText,at as RoundNum,ni as RunCmd,kt as StartScore,m as StatArrCount,v as StatArrKeyword,ft as ThousandNum,rt as Throttle,b as TypeOf,it as WaitFor};
