import*as t from"node:fs";import{existsSync as e,statSync as s,readdirSync as n,readFileSync as i}from"node:fs";import{platform as r,networkInterfaces as o,release as a,hostname as c,homedir as l,cpus as h,arch as u}from"node:os";import{win32 as f,posix as d,join as p,extname as m,sep as y,isAbsolute as g,normalize as w}from"node:path";import{cwd as b}from"node:process";import v,{realpathSync as S,readlinkSync as k,readdirSync as E,readdir as O,lstatSync as x,unlinkSync as N,rmdirSync as T,chmodSync as A,statSync as L,renameSync as C,rmSync as M}from"fs";import $ from"constants";import I from"stream";import _,{inspect as D}from"util";import F from"assert";import P,{resolve as j,parse as R,basename as B}from"path";import{fileURLToPath as z}from"node:url";import{realpath as W,readlink as U,readdir as K,lstat as q}from"node:fs/promises";import{EventEmitter as G}from"node:events";import Y from"node:stream";import{StringDecoder as V}from"node:string_decoder";import{tmpdir as J}from"os";import{createConnection as H}from"node:net";import{execSync as Q}from"node:child_process";function X(t,e){return void 0===t&&(t=[]),void 0===e&&(e=1),t.length?t.reduce((function(t,s){return t[t.length-1].length===e?t.push([s]):t[t.length-1].push(s),t}),[[]]):[]}function Z(t,e){return void 0===t&&(t=[]),t.reduce((function(t,s){var n=s[e];return null!=n&&(!t[n]&&(t[n]=[]),t[n].push(s)),t}),{})}function tt(t){return void 0===t&&(t=[]),t.reduce((function(t,e){return t[e]=(t[e]||0)+1,t}),{})}function et(t,e){return void 0===t&&(t=[]),void 0===e&&(e=[]),e.reduce((function(e,s){return t.some((function(t){return t.includes(s)}))&&e.push(s),e}),[])}function st(t,e){return void 0===t&&(t=[]),t.reduce((function(t,s,n){return s===e&&t.push(n),t}),[])}function nt(){return"undefined"==typeof window?"node":"web"}function it(){return"web"===nt()}function rt(){return"node"===nt()}function ot(t){return Object.prototype.toString.call(t).replace(/\[object (\w+)\]/,"$1").toLowerCase()}function at(t){return"undefined"===ot(t)}function ct(t){return"null"===ot(t)}function lt(t){return"string"===ot(t)}function ht(t){return"number"===ot(t)}function ut(t){return"boolean"===ot(t)}function ft(t){return"symbol"===ot(t)}function dt(t){return"array"===ot(t)}function pt(t){return"object"===ot(t)}function mt(t){return"date"===ot(t)}function yt(t){return"regexp"===ot(t)}function gt(t){return"function"===ot(t)}function wt(t){return gt(t)&&/^class\s+[\dA-Za-z]/.test(t.toString())}function bt(t){return"set"===ot(t)}function vt(t){return"map"===ot(t)}function St(t){return"weakset"===ot(t)}function kt(t){return"weakmap"===ot(t)}function Et(t){return"formdata"===ot(t)}function Ot(t){return/^html(.+?)element$/.test(ot(t))}function xt(t){return"asyncfunction"===ot(t)}function Nt(t){return"function"===ot(t)}function Tt(t){return"arguments"===ot(t)}function At(t){return t instanceof Error}function Lt(t){return!t}function Ct(t){return Array.isArray(t)&&!t.length}function Mt(t){return pt(t)&&!Object.keys(t).length}var $t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function It(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _t,Dt={exports:{}};var Ft=It((_t||(_t=1,Dt.exports=function(){var t=1e3,e=6e4,s=36e5,n="millisecond",i="second",r="minute",o="hour",a="day",c="week",l="month",h="quarter",u="year",f="date",d="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,y={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],s=t%100;return"["+t+(e[(s-20)%10]||e[s]||e[0])+"]"}},g=function(t,e,s){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(s)+t},w={s:g,z:function(t){var e=-t.utcOffset(),s=Math.abs(e),n=Math.floor(s/60),i=s%60;return(e<=0?"+":"-")+g(n,2,"0")+":"+g(i,2,"0")},m:function t(e,s){if(e.date()<s.date())return-t(s,e);var n=12*(s.year()-e.year())+(s.month()-e.month()),i=e.clone().add(n,l),r=s-i<0,o=e.clone().add(n+(r?-1:1),l);return+(-(n+(s-i)/(r?i-o:o-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:l,y:u,w:c,d:a,D:f,h:o,m:r,s:i,ms:n,Q:h}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},b="en",v={};v[b]=y;var S="$isDayjsObject",k=function(t){return t instanceof N||!(!t||!t[S])},E=function t(e,s,n){var i;if(!e)return b;if("string"==typeof e){var r=e.toLowerCase();v[r]&&(i=r),s&&(v[r]=s,i=r);var o=e.split("-");if(!i&&o.length>1)return t(o[0])}else{var a=e.name;v[a]=e,i=a}return!n&&i&&(b=i),i||!n&&b},O=function(t,e){if(k(t))return t.clone();var s="object"==typeof e?e:{};return s.date=t,s.args=arguments,new N(s)},x=w;x.l=E,x.i=k,x.w=function(t,e){return O(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var N=function(){function y(t){this.$L=E(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[S]=!0}var g=y.prototype;return g.parse=function(t){this.$d=function(t){var e=t.date,s=t.utc;if(null===e)return new Date(NaN);if(x.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(p);if(n){var i=n[2]-1||0,r=(n[7]||"0").substring(0,3);return s?new Date(Date.UTC(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,r)):new Date(n[1],i,n[3]||1,n[4]||0,n[5]||0,n[6]||0,r)}}return new Date(e)}(t),this.init()},g.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},g.$utils=function(){return x},g.isValid=function(){return!(this.$d.toString()===d)},g.isSame=function(t,e){var s=O(t);return this.startOf(e)<=s&&s<=this.endOf(e)},g.isAfter=function(t,e){return O(t)<this.startOf(e)},g.isBefore=function(t,e){return this.endOf(e)<O(t)},g.$g=function(t,e,s){return x.u(t)?this[e]:this.set(s,t)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(t,e){var s=this,n=!!x.u(e)||e,h=x.p(t),d=function(t,e){var i=x.w(s.$u?Date.UTC(s.$y,e,t):new Date(s.$y,e,t),s);return n?i:i.endOf(a)},p=function(t,e){return x.w(s.toDate()[t].apply(s.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(e)),s)},m=this.$W,y=this.$M,g=this.$D,w="set"+(this.$u?"UTC":"");switch(h){case u:return n?d(1,0):d(31,11);case l:return n?d(1,y):d(0,y+1);case c:var b=this.$locale().weekStart||0,v=(m<b?m+7:m)-b;return d(n?g-v:g+(6-v),y);case a:case f:return p(w+"Hours",0);case o:return p(w+"Minutes",1);case r:return p(w+"Seconds",2);case i:return p(w+"Milliseconds",3);default:return this.clone()}},g.endOf=function(t){return this.startOf(t,!1)},g.$set=function(t,e){var s,c=x.p(t),h="set"+(this.$u?"UTC":""),d=(s={},s[a]=h+"Date",s[f]=h+"Date",s[l]=h+"Month",s[u]=h+"FullYear",s[o]=h+"Hours",s[r]=h+"Minutes",s[i]=h+"Seconds",s[n]=h+"Milliseconds",s)[c],p=c===a?this.$D+(e-this.$W):e;if(c===l||c===u){var m=this.clone().set(f,1);m.$d[d](p),m.init(),this.$d=m.set(f,Math.min(this.$D,m.daysInMonth())).$d}else d&&this.$d[d](p);return this.init(),this},g.set=function(t,e){return this.clone().$set(t,e)},g.get=function(t){return this[x.p(t)]()},g.add=function(n,h){var f,d=this;n=Number(n);var p=x.p(h),m=function(t){var e=O(d);return x.w(e.date(e.date()+Math.round(t*n)),d)};if(p===l)return this.set(l,this.$M+n);if(p===u)return this.set(u,this.$y+n);if(p===a)return m(1);if(p===c)return m(7);var y=(f={},f[r]=e,f[o]=s,f[i]=t,f)[p]||1,g=this.$d.getTime()+n*y;return x.w(g,this)},g.subtract=function(t,e){return this.add(-1*t,e)},g.format=function(t){var e=this,s=this.$locale();if(!this.isValid())return s.invalidDate||d;var n=t||"YYYY-MM-DDTHH:mm:ssZ",i=x.z(this),r=this.$H,o=this.$m,a=this.$M,c=s.weekdays,l=s.months,h=s.meridiem,u=function(t,s,i,r){return t&&(t[s]||t(e,n))||i[s].slice(0,r)},f=function(t){return x.s(r%12||12,t,"0")},p=h||function(t,e,s){var n=t<12?"AM":"PM";return s?n.toLowerCase():n};return n.replace(m,(function(t,n){return n||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return x.s(e.$y,4,"0");case"M":return a+1;case"MM":return x.s(a+1,2,"0");case"MMM":return u(s.monthsShort,a,l,3);case"MMMM":return u(l,a);case"D":return e.$D;case"DD":return x.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return u(s.weekdaysMin,e.$W,c,2);case"ddd":return u(s.weekdaysShort,e.$W,c,3);case"dddd":return c[e.$W];case"H":return String(r);case"HH":return x.s(r,2,"0");case"h":return f(1);case"hh":return f(2);case"a":return p(r,o,!0);case"A":return p(r,o,!1);case"m":return String(o);case"mm":return x.s(o,2,"0");case"s":return String(e.$s);case"ss":return x.s(e.$s,2,"0");case"SSS":return x.s(e.$ms,3,"0");case"Z":return i}return null}(t)||i.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(n,f,d){var p,m=this,y=x.p(f),g=O(n),w=(g.utcOffset()-this.utcOffset())*e,b=this-g,v=function(){return x.m(m,g)};switch(y){case u:p=v()/12;break;case l:p=v();break;case h:p=v()/3;break;case c:p=(b-w)/6048e5;break;case a:p=(b-w)/864e5;break;case o:p=b/s;break;case r:p=b/e;break;case i:p=b/t;break;default:p=b}return d?p:x.a(p)},g.daysInMonth=function(){return this.endOf(l).$D},g.$locale=function(){return v[this.$L]},g.locale=function(t,e){if(!t)return this.$L;var s=this.clone(),n=E(t,e,!0);return n&&(s.$L=n),s},g.clone=function(){return x.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},y}(),T=N.prototype;return O.prototype=T,[["$ms",n],["$s",i],["$m",r],["$H",o],["$W",a],["$M",l],["$y",u],["$D",f]].forEach((function(t){T[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),O.extend=function(t,e){return t.$i||(t(e,N,O),t.$i=!0),O},O.locale=E,O.isDayjs=k,O.unix=function(t){return O(1e3*t)},O.en=v[b],O.Ls=v,O.p={},O}()),Dt.exports));function Pt(t){if(void 0===t&&(t=""),!t)return"时间无效";var e=+new Date,s=+new Date(t)-e;if(s>=0){var n=Math.floor(s/1e3/3600/24),i=Math.floor(s/1e3/60/60%24),r=Math.floor(s/1e3/60%60),o=Math.floor(s/1e3%60),a=n?"".concat(n,"天"):"",c=i?"".concat(i,"时"):"",l=r?"".concat(r,"分"):"",h=o?"".concat(o,"秒"):"";return"".concat(a).concat(c).concat(l).concat(h)}return"时间已到"}function jt(t,e){if(void 0===t&&(t=""),void 0===e&&(e="YYYY-MM-DD"),!t)return"时间无效";var s=+new Date,n=+new Date(t),i=s-n,r=i>=0?"前":"后",o=Math.abs(i),a=30.4375,c=36e5,l=24*c,h=o/6e4,u=o/c,f=o/l,d=o/26298e5;return o/315576e5>=1||d>=12?Ft(n).format(e):d>=1&&d<12?"".concat(parseInt(d.toString()),"个月").concat(r):f>=1&&f<a?"".concat(parseInt(f.toString()),"天").concat(r):u>=1&&u<24?"".concat(parseInt(u.toString()),"小时").concat(r):h>=1&&h<60?"".concat(parseInt(h.toString()),"分钟").concat(r):i>=0?"刚刚":"准备"}function Rt(t,e){void 0===t&&(t=6),void 0===e&&(e="YYYY-MM");for(var s=Ft(),n=[s.format(e)],i=1;i<t;i++){var r=s.subtract(i,"month");n.unshift(r.format(e))}return n}function Bt(t,e,s,n){return new(s||(s=Promise))((function(i,r){function o(t){try{c(n.next(t))}catch(t){r(t)}}function a(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(o,a)}c((n=n.apply(t,e||[])).next())}))}function zt(t,e){var s,n,i,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(c){return function(a){if(s)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(r=0)),r;)try{if(s=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=r.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(t){a=[6,t],n=0}finally{s=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}}function Wt(t,e){var s="function"==typeof Symbol&&t[Symbol.iterator];if(!s)return t;var n,i,r=s.call(t),o=[];try{for(;(void 0===e||e-- >0)&&!(n=r.next()).done;)o.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(s=r.return)&&s.call(r)}finally{if(i)throw i.error}}return o}function Ut(t,e,s){if(s||2===arguments.length)for(var n,i=0,r=e.length;i<r;i++)!n&&i in e||(n||(n=Array.prototype.slice.call(e,0,i)),n[i]=e[i]);return t.concat(n||Array.prototype.slice.call(e))}function Kt(t,e){return Bt(this,void 0,void 0,(function(){return zt(this,(function(s){switch(s.label){case 0:return[4,t.then((function(t){return[null,t]})).catch((function(t){return[e?Object.assign({},t,e):t,void 0]}))];case 1:return[2,s.sent()]}}))}))}function qt(t,e){void 0===e&&(e=50);var s,n=null;return function(){for(var i=this,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return n&&clearTimeout(n),n=setTimeout((function(){s=t.apply(i,r),n=null}),e),s}}function Gt(t,e){void 0===e&&(e=50);var s,n=null,i=!1,r=0;return function(){for(var o=this,a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];if(i){n&&(clearTimeout(n),n=null);var l=Date.now(),h=e-(l-r);h<=0?(s=t.apply(this,a),r=l):n=setTimeout((function(){s=t.apply(o,a),r=Date.now(),n=null}),h)}else s=t.apply(this,a),r=Date.now(),i=!0;return s}}function Yt(){return Bt(this,arguments,void 0,(function(t){return void 0===t&&(t=1e3),zt(this,(function(e){switch(e.label){case 0:return[4,new Promise((function(e){return setTimeout((function(){return e(!0)}),t)}))];case 1:return[2,e.sent()]}}))}))}function Vt(t,e,s){if(void 0===t&&(t="+"),void 0===e&&(e=0),void 0===s&&(s=0),e=parseFloat(e.toString()),s=parseFloat(s.toString()),isNaN(e)||isNaN(s))return NaN;var n=(e.toString().split(".")[1]||"").length,i=(s.toString().split(".")[1]||"").length,r=Math.max(n,i,0),o=Math.pow(10,r),a=Math.round(e*o),c=Math.round(s*o);return"+"===t?(a+c)/o:"-"===t?(a-c)/o:"*"===t?a*c/(o*o):"/"===t?a/c:(a+c)/o}function Jt(t){void 0===t&&(t="+");for(var e=[],s=1;s<arguments.length;s++)e[s-1]=arguments[s];for(var n={"*":1,"+":0,"/":1,"-":0}[t]||0,i=0;i<e.length;i++)n=0!==i||"-"!==t&&"/"!==t?Vt(t,n,e[i]):e[i];return n}function Ht(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),t.toString().padStart(e,"0")}function Qt(t){var e=t.dec,s=void 0===e?2:e,n=t.num,i=void 0===n?0:n,r=t.type,o=void 0===r?"round":r,a=Math.pow(10,s);return(Math[o]||Math.round)(i*a)/a}function Xt(t){if(void 0===t&&(t=0),0===t)return"0 B";var e=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,e)).toPrecision(3)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][e]}function Zt(t,e){return void 0===t&&(t=0),void 0===e&&(e=10),Math.floor(Math.random()*(e-t+1)+t)}function te(t,e,s){void 0===t&&(t=0),void 0===e&&(e=10),void 0===s&&(s=1);for(var n=[];;){for(var i=!1,r=Zt(t,e),o=0;o<n.length;o++)if(r===n[o]){i=!0;break}if(i||n.push(r),n.length===s)return n}}function ee(t){var e=t.dec,s=void 0===e?2:e,n=t.num,i=void 0===n?0:n,r=t.per;return void 0!==r&&r?"".concat(Math.round(i*Math.pow(10,s)*100)/Math.pow(10,s),"%"):Math.round(i*Math.pow(10,s))/Math.pow(10,s)}function se(t){return void 0===t&&(t=0),t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function ne(t,e){return void 0===t&&(t={}),void 0===e&&(e=""),e in t}function ie(t,e){return void 0===t&&(t={}),void 0===e&&(e=[]),Object.keys(t).reduce((function(s,n){return e.includes(n)&&(s[n]=t[n]),s}),{})}function re(t,e){void 0===t&&(t={}),void 0===e&&(e=!1);var s={};for(var n in t)if({}.hasOwnProperty.call(t,n)){var i=t[n];(e?!i:""===i)&&(s[n]=t[n])}return s}"function"==typeof SuppressedError&&SuppressedError;var oe={address:{msg:"地址只能由2~200位中文、英文、数字或空格组成",regexp:/^[\u4e00-\u9fa5A-Za-z0-9 ]{2,200}$/},count:{msg:"数量只能由数字组成",regexp:/^\d{1,}$/},date:{msg:"日期只能由YYYY-MM-DD HH:mm:ss形式组成",regexp:/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/},email:{msg:"邮箱只能由xxx@yyy.zzz形式组成",regexp:/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/},idcard:{msg:"身份证只能由13位数字或12位数字和X组成",regexp:/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/},image:{msg:"图像只能是JPG、PNG、GIF、SVG或WEBP类型",regexp:/\.(jpe?g|png|gif|svg|webp)$/},name:{msg:"名称只能由2~50位中文、英文、数字、下划线或中划线组成",regexp:/^[\u4e00-\u9fa5\w-]{2,50}$/},number:{msg:"计数只能由数字或小数点组成",regexp:/^[+-]?(0|([1-9]\d*))(\.\d+)?$/},password:{msg:"密码只能由8~20位英文、数字或符号至少两种组成",regexp:/^(?![0-9]+$)(?![a-z]+$)(?![A-Z]+$)(?!([^(0-9a-zA-Z)])+$)^.{8,20}$/},phone:{msg:"手机只能由11位数字组成且符合通讯运营商规范",regexp:/^1\d{10}$/}},ae="^$.*+-?=!:|\\/()[]{}".split("");function ce(t,e){void 0===t&&(t="phone"),void 0===e&&(e="");var s=oe[t],n=s.regexp,i=s.msg,r=n.test(e);return{flag:r,msg:r?"":i}}function le(t,e,s){void 0===e&&(e=""),void 0===s&&(s="");var n=t.test(e);return{flag:n,msg:n?"":s}}function he(t,e){var s;void 0===t&&(t="(*)"),void 0===e&&(e="");var n=t.split("*").map((function(t){return ae.includes(t)?"\\"+t:t})),i=new RegExp(n[0]+"(.+?)"+n[1],"g");return(null!==(s=e.match(i))&&void 0!==s?s:[]).map((function(t){return t.replace(i,"$1")}))}function ue(t){return void 0===t&&(t=""),oe.phone.regexp.test(t)?t.toString().replace(/(\d{3})\d*(\d{4})/,"$1****$2"):t}function fe(t,e){return void 0===t&&(t=""),void 0===e&&(e="-"),oe.phone.regexp.test(t)&&["-"," "].includes(e)?t.toString().replace(/(\d{3})(\d{4})(\d{4})/,"$1".concat(e,"$2").concat(e,"$3")):t}function de(){return"#"+Math.floor(16777215*Math.random()).toString(16).padEnd(6,"0")}function pe(t){return void 0===t&&(t=5),t=Math.min(10,Math.max(1,t)),Math.random().toString(36).slice(2,t+2)}function me(t){return void 0===t&&(t=""),t.replace(/<[^>]*>/g,"")}function ye(t){return void 0===t&&(t=""),t.split("").reduceRight((function(t,e){return t+e}),"")}function ge(t,e){return void 0===t&&(t=0),void 0===e&&(e=5),t=Math.min(e,Math.max(0,t)),"★".repeat(t)+"☆".repeat(e-t)}function we(t){var e,s,n,i;void 0===t&&(t="");var r=!t&&it()?navigator.userAgent.toLowerCase():t.toLowerCase(),o=function(t){return t.test(r)},a=function(t){var e;return t?(null!==(e=r.match(t))&&void 0!==e?e:"").toString().replace(/[^0-9|_.]/g,"").replace(/_/g,"."):"unknow"},c={windows:/windows|win32|win64|wow32|wow64/g,macos:/macintosh|macintel/g,linux:/x11|ubuntu/g,android:/android|adr/g,ios:/ios|iphone|ipad|ipod/g},l=null!==(e=Object.keys(c).find((function(t){return o(c[t])})))&&void 0!==e?e:"unknow",h="unknow"===l?"unknow version":"windows"===l?function(){var t,e,s=(null!==(t=r.match(/(windows nt [\d._]+)|(windows [\w._]+)/g))&&void 0!==t?t:"").toString().replace(/windows( nt)? /g,""),n={2e3:/^(5\.0|2000)/g,xp:/^(5\.1|xp)/g,2003:/^(5\.2|2003)/g,vista:/^(6\.0|vista)/g,7:/^(6\.1|7)/g,8:/^(6\.2|8)/g,8.1:/^(6\.3|8\.1)/g,10:/^(10\.0|10)/g};return null!==(e=Object.keys(n).find((function(t){return n[t].test(s)})))&&void 0!==e?e:"unknow"}():a({macos:/mac os x [\d._]+/g,linux:/ubuntu\/[\d._]+/g,android:/android [\d._]+/g,ios:/os [\d._]+/g}[l])||"unknow version",u=o(/mobile/g)?"mobile":"desktop",f={webkit:[/applewebkit/g,/applewebkit\/[\d._]+/g],gecko:[/gecko\//g,/rv:[\d._]+/g],presto:[/presto/g,/presto\/[\d._]+/g],trident:[/compatible|msie|trident/g,/trident\/[\d._]+/g]},d=null!==(s=Object.keys(f).find((function(t){return o(f[t][0])})))&&void 0!==s?s:"unknow",p="unknow"===d?"unknow version":a(f[d][1])||"unknow version",m={safari:[/.*safari.*version.*|.*version.*safari.*/g,/version\/[\d._]+/g],edge:[/edge?/g,/edge?\/[\d._]+/g],firefox:[/firefox/g,/firefox\/[\d._]+/g],opera:[/op(era|r)/g,/(version|opr)\/[\d._]+/g],iexplore:[/compatible|msie|trident/g,/(msie |rv:)[\d._]+/g],chrome:[/chrome/g,/chrome\/[\d._]+/g]},y=null!==(n=Object.keys(m).find((function(t){return o(m[t][0])})))&&void 0!==n?n:"unknow",g="unknow"===y?"unknow version":a(m[y][1])||"unknow version",w={uc:[/ucweb|uc?browser|uclite/g,/(ucweb|uc?browser\/|uclite\/)[\d._]+/g],qq:[/qqbrowser/g,/qqbrowser\/[\d._]+/g],sougou:[/metasr|sogoumobilebrowser/g,/(metasr |sogoumobilebrowser\/)[\d._]+/],maxthon:[/maxthon/g,/maxthon(\/| )[\d._]+/g],2345:[/2345explorer/g,/2345explorer\/[\d._]+/g],360:[/360se/g],liebao:[/lbbrowser/g],xiaomi:[/xiaomi|miuibrowser/g,/miuibrowser\/[\d._]+/g],huawei:[/huaweibrowser/g,/huaweibrowser\/[\d._]+/g],oppo:[/heytapbrowser/g,/heytapbrowser\/[\d._]+/g],vivo:[/vivobrowser/g,/vivobrowser\/[\d._]+/g],wechat:[/micromessenger/g,/micromessenger\/[\d._]+/g],baidu:[/baiduboxapp/g,/baiduboxapp\/[\d._]+/g],toutiao:[/newsarticle|ttwebview/g,/(newsarticle|ttwebview)\/[\d._]+/g]},b=null!==(i=Object.keys(w).find((function(t){return o(w[t][0])})))&&void 0!==i?i:"none",v="none"===b?"none":w[b][1]&&a(w[b][1])||"unknow version";return Object.assign({engine:d,engineVs:p,platform:u,supporter:y,supporterVs:g,system:l,systemVs:h},"none"===b?{}:{shell:b,shellVs:v})}function be(t){void 0===t&&(t="");var e=!t&&it()?location.search:t;return e?e.replace(/(^\?)|(&$)/g,"").split("&").reduce((function(t,e){var s=Wt(e.split("="),2),n=s[0],i=s[1];return t[n]=decodeURIComponent(i),t}),{}):{}}function ve(t,e){return void 0===t&&(t={}),void 0===e&&(e=!1),Object.entries(t).reduce((function(t,s){return e&&[void 0,null,"",NaN,!1].includes(s[1])?t:"".concat(t).concat(s[0],"=").concat(void 0===s[1]||null===s[1]?"":encodeURIComponent(s[1]),"&")}),Mt(t)?"":"?").replace(/&$/,"")}var Se,ke,Ee,Oe,xe,Ne,Te,Ae,Le,Ce,Me={},$e={};function Ie(){return Se||(Se=1,$e.fromCallback=function(t){return Object.defineProperty((function(...e){if("function"!=typeof e[e.length-1])return new Promise(((s,n)=>{e.push(((t,e)=>null!=t?n(t):s(e))),t.apply(this,e)}));t.apply(this,e)}),"name",{value:t.name})},$e.fromPromise=function(t){return Object.defineProperty((function(...e){const s=e[e.length-1];if("function"!=typeof s)return t.apply(this,e);e.pop(),t.apply(this,e).then((t=>s(null,t)),s)}),"name",{value:t.name})}),$e}function _e(){if(Ee)return ke;Ee=1;var t=$,e=process.cwd,s=null,n=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return s||(s=e.call(process)),s};try{process.cwd()}catch(t){}if("function"==typeof process.chdir){var i=process.chdir;process.chdir=function(t){s=null,i.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,i)}return ke=function(e){t.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(e){e.lchmod=function(s,n,i){e.open(s,t.O_WRONLY|t.O_SYMLINK,n,(function(t,s){t?i&&i(t):e.fchmod(s,n,(function(t){e.close(s,(function(e){i&&i(t||e)}))}))}))},e.lchmodSync=function(s,n){var i,r=e.openSync(s,t.O_WRONLY|t.O_SYMLINK,n),o=!0;try{i=e.fchmodSync(r,n),o=!1}finally{if(o)try{e.closeSync(r)}catch(t){}else e.closeSync(r)}return i}}(e);e.lutimes||function(e){t.hasOwnProperty("O_SYMLINK")&&e.futimes?(e.lutimes=function(s,n,i,r){e.open(s,t.O_SYMLINK,(function(t,s){t?r&&r(t):e.futimes(s,n,i,(function(t){e.close(s,(function(e){r&&r(t||e)}))}))}))},e.lutimesSync=function(s,n,i){var r,o=e.openSync(s,t.O_SYMLINK),a=!0;try{r=e.futimesSync(o,n,i),a=!1}finally{if(a)try{e.closeSync(o)}catch(t){}else e.closeSync(o)}return r}):e.futimes&&(e.lutimes=function(t,e,s,n){n&&process.nextTick(n)},e.lutimesSync=function(){})}(e);e.chown=r(e.chown),e.fchown=r(e.fchown),e.lchown=r(e.lchown),e.chmod=s(e.chmod),e.fchmod=s(e.fchmod),e.lchmod=s(e.lchmod),e.chownSync=o(e.chownSync),e.fchownSync=o(e.fchownSync),e.lchownSync=o(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=a(e.stat),e.fstat=a(e.fstat),e.lstat=a(e.lstat),e.statSync=c(e.statSync),e.fstatSync=c(e.fstatSync),e.lstatSync=c(e.lstatSync),e.chmod&&!e.lchmod&&(e.lchmod=function(t,e,s){s&&process.nextTick(s)},e.lchmodSync=function(){});e.chown&&!e.lchown&&(e.lchown=function(t,e,s,n){n&&process.nextTick(n)},e.lchownSync=function(){});"win32"===n&&(e.rename="function"!=typeof e.rename?e.rename:function(t){function s(s,n,i){var r=Date.now(),o=0;t(s,n,(function a(c){if(c&&("EACCES"===c.code||"EPERM"===c.code||"EBUSY"===c.code)&&Date.now()-r<6e4)return setTimeout((function(){e.stat(n,(function(e,r){e&&"ENOENT"===e.code?t(s,n,a):i(c)}))}),o),void(o<100&&(o+=10));i&&i(c)}))}return Object.setPrototypeOf&&Object.setPrototypeOf(s,t),s}(e.rename));function s(t){return t?function(s,n,i){return t.call(e,s,n,(function(t){l(t)&&(t=null),i&&i.apply(this,arguments)}))}:t}function i(t){return t?function(s,n){try{return t.call(e,s,n)}catch(t){if(!l(t))throw t}}:t}function r(t){return t?function(s,n,i,r){return t.call(e,s,n,i,(function(t){l(t)&&(t=null),r&&r.apply(this,arguments)}))}:t}function o(t){return t?function(s,n,i){try{return t.call(e,s,n,i)}catch(t){if(!l(t))throw t}}:t}function a(t){return t?function(s,n,i){function r(t,e){e&&(e.uid<0&&(e.uid+=4294967296),e.gid<0&&(e.gid+=4294967296)),i&&i.apply(this,arguments)}return"function"==typeof n&&(i=n,n=null),n?t.call(e,s,n,r):t.call(e,s,r)}:t}function c(t){return t?function(s,n){var i=n?t.call(e,s,n):t.call(e,s);return i&&(i.uid<0&&(i.uid+=4294967296),i.gid<0&&(i.gid+=4294967296)),i}:t}function l(t){return!t||("ENOSYS"===t.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==t.code&&"EPERM"!==t.code))}e.read="function"!=typeof e.read?e.read:function(t){function s(s,n,i,r,o,a){var c;if(a&&"function"==typeof a){var l=0;c=function(h,u,f){if(h&&"EAGAIN"===h.code&&l<10)return l++,t.call(e,s,n,i,r,o,c);a.apply(this,arguments)}}return t.call(e,s,n,i,r,o,c)}return Object.setPrototypeOf&&Object.setPrototypeOf(s,t),s}(e.read),e.readSync="function"!=typeof e.readSync?e.readSync:(h=e.readSync,function(t,s,n,i,r){for(var o=0;;)try{return h.call(e,t,s,n,i,r)}catch(t){if("EAGAIN"===t.code&&o<10){o++;continue}throw t}});var h},ke}function De(){if(Le)return Ae;Le=1;var t,e,s=v,n=_e(),i=function(){if(xe)return Oe;xe=1;var t=I.Stream;return Oe=function(e){return{ReadStream:function s(n,i){if(!(this instanceof s))return new s(n,i);t.call(this);var r=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,i=i||{};for(var o=Object.keys(i),a=0,c=o.length;a<c;a++){var l=o[a];this[l]=i[l]}if(this.encoding&&this.setEncoding(this.encoding),void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}null===this.fd?e.open(this.path,this.flags,this.mode,(function(t,e){if(t)return r.emit("error",t),void(r.readable=!1);r.fd=e,r.emit("open",e),r._read()})):process.nextTick((function(){r._read()}))},WriteStream:function s(n,i){if(!(this instanceof s))return new s(n,i);t.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var r=Object.keys(i),o=0,a=r.length;o<a;o++){var c=r[o];this[c]=i[c]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}},Oe}(),r=function(){if(Te)return Ne;Te=1,Ne=function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var s={__proto__:t(e)};else s=Object.create(null);return Object.getOwnPropertyNames(e).forEach((function(t){Object.defineProperty(s,t,Object.getOwnPropertyDescriptor(e,t))})),s};var t=Object.getPrototypeOf||function(t){return t.__proto__};return Ne}(),o=_;function a(e,s){Object.defineProperty(e,t,{get:function(){return s}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(t=Symbol.for("graceful-fs.queue"),e=Symbol.for("graceful-fs.previous")):(t="___graceful-fs.queue",e="___graceful-fs.previous");var c,l=function(){};if(o.debuglog?l=o.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(l=function(){var t=o.format.apply(o,arguments);t="GFS4: "+t.split(/\n/).join("\nGFS4: "),console.error(t)}),!s[t]){var h=$t[t]||[];a(s,h),s.close=function(t){function n(e,n){return t.call(s,e,(function(t){t||d(),"function"==typeof n&&n.apply(this,arguments)}))}return Object.defineProperty(n,e,{value:t}),n}(s.close),s.closeSync=function(t){function n(e){t.apply(s,arguments),d()}return Object.defineProperty(n,e,{value:t}),n}(s.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){l(s[t]),F.equal(s[t].length,0)}))}function u(t){n(t),t.gracefulify=u,t.createReadStream=function(e,s){return new t.ReadStream(e,s)},t.createWriteStream=function(e,s){return new t.WriteStream(e,s)};var e=t.readFile;t.readFile=function(t,s,n){"function"==typeof s&&(n=s,s=null);return function t(s,n,i,r){return e(s,n,(function(e){!e||"EMFILE"!==e.code&&"ENFILE"!==e.code?"function"==typeof i&&i.apply(this,arguments):f([t,[s,n,i],e,r||Date.now(),Date.now()])}))}(t,s,n)};var s=t.writeFile;t.writeFile=function(t,e,n,i){"function"==typeof n&&(i=n,n=null);return function t(e,n,i,r,o){return s(e,n,i,(function(s){!s||"EMFILE"!==s.code&&"ENFILE"!==s.code?"function"==typeof r&&r.apply(this,arguments):f([t,[e,n,i,r],s,o||Date.now(),Date.now()])}))}(t,e,n,i)};var r=t.appendFile;r&&(t.appendFile=function(t,e,s,n){"function"==typeof s&&(n=s,s=null);return function t(e,s,n,i,o){return r(e,s,n,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?"function"==typeof i&&i.apply(this,arguments):f([t,[e,s,n,i],r,o||Date.now(),Date.now()])}))}(t,e,s,n)});var o=t.copyFile;o&&(t.copyFile=function(t,e,s,n){"function"==typeof s&&(n=s,s=0);return function t(e,s,n,i,r){return o(e,s,n,(function(o){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?"function"==typeof i&&i.apply(this,arguments):f([t,[e,s,n,i],o,r||Date.now(),Date.now()])}))}(t,e,s,n)});var a=t.readdir;t.readdir=function(t,e,s){"function"==typeof e&&(s=e,e=null);var n=c.test(process.version)?function(t,e,s,n){return a(t,i(t,e,s,n))}:function(t,e,s,n){return a(t,e,i(t,e,s,n))};return n(t,e,s);function i(t,e,s,i){return function(r,o){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?(o&&o.sort&&o.sort(),"function"==typeof s&&s.call(this,r,o)):f([n,[t,e,s],r,i||Date.now(),Date.now()])}}};var c=/^v[0-5]\./;if("v0.8"===process.version.substr(0,4)){var l=i(t);y=l.ReadStream,g=l.WriteStream}var h=t.ReadStream;h&&(y.prototype=Object.create(h.prototype),y.prototype.open=function(){var t=this;b(t.path,t.flags,t.mode,(function(e,s){e?(t.autoClose&&t.destroy(),t.emit("error",e)):(t.fd=s,t.emit("open",s),t.read())}))});var d=t.WriteStream;d&&(g.prototype=Object.create(d.prototype),g.prototype.open=function(){var t=this;b(t.path,t.flags,t.mode,(function(e,s){e?(t.destroy(),t.emit("error",e)):(t.fd=s,t.emit("open",s))}))}),Object.defineProperty(t,"ReadStream",{get:function(){return y},set:function(t){y=t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return g},set:function(t){g=t},enumerable:!0,configurable:!0});var p=y;Object.defineProperty(t,"FileReadStream",{get:function(){return p},set:function(t){p=t},enumerable:!0,configurable:!0});var m=g;function y(t,e){return this instanceof y?(h.apply(this,arguments),this):y.apply(Object.create(y.prototype),arguments)}function g(t,e){return this instanceof g?(d.apply(this,arguments),this):g.apply(Object.create(g.prototype),arguments)}Object.defineProperty(t,"FileWriteStream",{get:function(){return m},set:function(t){m=t},enumerable:!0,configurable:!0});var w=t.open;function b(t,e,s,n){return"function"==typeof s&&(n=s,s=null),function t(e,s,n,i,r){return w(e,s,n,(function(o,a){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?"function"==typeof i&&i.apply(this,arguments):f([t,[e,s,n,i],o,r||Date.now(),Date.now()])}))}(t,e,s,n)}return t.open=b,t}function f(e){l("ENQUEUE",e[0].name,e[1]),s[t].push(e),p()}function d(){for(var e=Date.now(),n=0;n<s[t].length;++n)s[t][n].length>2&&(s[t][n][3]=e,s[t][n][4]=e);p()}function p(){if(clearTimeout(c),c=void 0,0!==s[t].length){var e=s[t].shift(),n=e[0],i=e[1],r=e[2],o=e[3],a=e[4];if(void 0===o)l("RETRY",n.name,i),n.apply(null,i);else if(Date.now()-o>=6e4){l("TIMEOUT",n.name,i);var h=i.pop();"function"==typeof h&&h.call(null,r)}else{var u=Date.now()-a,f=Math.max(a-o,1);u>=Math.min(1.2*f,100)?(l("RETRY",n.name,i),n.apply(null,i.concat([o]))):s[t].push(e)}void 0===c&&(c=setTimeout(p,0))}}return $t[t]||a($t,s[t]),Ae=u(r(s)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!s.__patched&&(Ae=u(s),s.__patched=!0),Ae}function Fe(){return Ce||(Ce=1,function(t){const e=Ie().fromCallback,s=De(),n=["access","appendFile","chmod","chown","close","copyFile","cp","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","glob","lchmod","lchown","lutimes","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","statfs","symlink","truncate","unlink","utimes","writeFile"].filter((t=>"function"==typeof s[t]));Object.assign(t,s),n.forEach((n=>{t[n]=e(s[n])})),t.exists=function(t,e){return"function"==typeof e?s.exists(t,e):new Promise((e=>s.exists(t,e)))},t.read=function(t,e,n,i,r,o){return"function"==typeof o?s.read(t,e,n,i,r,o):new Promise(((o,a)=>{s.read(t,e,n,i,r,((t,e,s)=>{if(t)return a(t);o({bytesRead:e,buffer:s})}))}))},t.write=function(t,e,...n){return"function"==typeof n[n.length-1]?s.write(t,e,...n):new Promise(((i,r)=>{s.write(t,e,...n,((t,e,s)=>{if(t)return r(t);i({bytesWritten:e,buffer:s})}))}))},t.readv=function(t,e,...n){return"function"==typeof n[n.length-1]?s.readv(t,e,...n):new Promise(((i,r)=>{s.readv(t,e,...n,((t,e,s)=>{if(t)return r(t);i({bytesRead:e,buffers:s})}))}))},t.writev=function(t,e,...n){return"function"==typeof n[n.length-1]?s.writev(t,e,...n):new Promise(((i,r)=>{s.writev(t,e,...n,((t,e,s)=>{if(t)return r(t);i({bytesWritten:e,buffers:s})}))}))},"function"==typeof s.realpath.native?t.realpath.native=e(s.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")}(Me)),Me}var Pe,je,Re,Be,ze,We,Ue,Ke,qe,Ge,Ye,Ve,Je,He,Qe,Xe,Ze,ts,es,ss,ns,is,rs,os,as,cs,ls,hs,us,fs,ds,ps,ms,ys,gs,ws,bs,vs,Ss,ks,Es,Os,xs,Ns,Ts,As,Ls,Cs,Ms,$s,Is,_s,Ds,Fs,Ps={},js={};function Rs(){if(Pe)return js;Pe=1;const t=P;return js.checkPath=function(e){if("win32"===process.platform){if(/[<>:"|?*]/.test(e.replace(t.parse(e).root,""))){const t=new Error(`Path contains invalid characters: ${e}`);throw t.code="EINVAL",t}}},js}function Bs(){if(je)return Ps;je=1;const t=Fe(),{checkPath:e}=Rs(),s=t=>"number"==typeof t?t:{mode:511,...t}.mode;return Ps.makeDir=async(n,i)=>(e(n),t.mkdir(n,{mode:s(i),recursive:!0})),Ps.makeDirSync=(n,i)=>(e(n),t.mkdirSync(n,{mode:s(i),recursive:!0})),Ps}function zs(){if(Be)return Re;Be=1;const t=Ie().fromPromise,{makeDir:e,makeDirSync:s}=Bs(),n=t(e);return Re={mkdirs:n,mkdirsSync:s,mkdirp:n,mkdirpSync:s,ensureDir:n,ensureDirSync:s}}function Ws(){if(We)return ze;We=1;const t=Ie().fromPromise,e=Fe();return ze={pathExists:t((function(t){return e.access(t).then((()=>!0)).catch((()=>!1))})),pathExistsSync:e.existsSync},ze}function Us(){if(Ke)return Ue;Ke=1;const t=Fe(),e=Ie().fromPromise;return Ue={utimesMillis:e((async function(e,s,n){const i=await t.open(e,"r+");let r=null;try{await t.futimes(i,s,n)}finally{try{await t.close(i)}catch(t){r=t}}if(r)throw r})),utimesMillisSync:function(e,s,n){const i=t.openSync(e,"r+");return t.futimesSync(i,s,n),t.closeSync(i)}},Ue}function Ks(){if(Ge)return qe;Ge=1;const t=Fe(),e=P,s=Ie().fromPromise;function n(t,e){return e.ino&&e.dev&&e.ino===t.ino&&e.dev===t.dev}function i(t,s){const n=e.resolve(t).split(e.sep).filter((t=>t)),i=e.resolve(s).split(e.sep).filter((t=>t));return n.every(((t,e)=>i[e]===t))}function r(t,e,s){return`Cannot ${s} '${t}' to a subdirectory of itself, '${e}'.`}return qe={checkPaths:s((async function(s,o,a,c){const{srcStat:l,destStat:h}=await function(e,s,n){const i=n.dereference?e=>t.stat(e,{bigint:!0}):e=>t.lstat(e,{bigint:!0});return Promise.all([i(e),i(s).catch((t=>{if("ENOENT"===t.code)return null;throw t}))]).then((([t,e])=>({srcStat:t,destStat:e})))}(s,o,c);if(h){if(n(l,h)){const t=e.basename(s),n=e.basename(o);if("move"===a&&t!==n&&t.toLowerCase()===n.toLowerCase())return{srcStat:l,destStat:h,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(l.isDirectory()&&!h.isDirectory())throw new Error(`Cannot overwrite non-directory '${o}' with directory '${s}'.`);if(!l.isDirectory()&&h.isDirectory())throw new Error(`Cannot overwrite directory '${o}' with non-directory '${s}'.`)}if(l.isDirectory()&&i(s,o))throw new Error(r(s,o,a));return{srcStat:l,destStat:h}})),checkPathsSync:function(s,o,a,c){const{srcStat:l,destStat:h}=function(e,s,n){let i;const r=n.dereference?e=>t.statSync(e,{bigint:!0}):e=>t.lstatSync(e,{bigint:!0}),o=r(e);try{i=r(s)}catch(t){if("ENOENT"===t.code)return{srcStat:o,destStat:null};throw t}return{srcStat:o,destStat:i}}(s,o,c);if(h){if(n(l,h)){const t=e.basename(s),n=e.basename(o);if("move"===a&&t!==n&&t.toLowerCase()===n.toLowerCase())return{srcStat:l,destStat:h,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(l.isDirectory()&&!h.isDirectory())throw new Error(`Cannot overwrite non-directory '${o}' with directory '${s}'.`);if(!l.isDirectory()&&h.isDirectory())throw new Error(`Cannot overwrite directory '${o}' with non-directory '${s}'.`)}if(l.isDirectory()&&i(s,o))throw new Error(r(s,o,a));return{srcStat:l,destStat:h}},checkParentPaths:s((async function s(i,o,a,c){const l=e.resolve(e.dirname(i)),h=e.resolve(e.dirname(a));if(h===l||h===e.parse(h).root)return;let u;try{u=await t.stat(h,{bigint:!0})}catch(t){if("ENOENT"===t.code)return;throw t}if(n(o,u))throw new Error(r(i,a,c));return s(i,o,h,c)})),checkParentPathsSync:function s(i,o,a,c){const l=e.resolve(e.dirname(i)),h=e.resolve(e.dirname(a));if(h===l||h===e.parse(h).root)return;let u;try{u=t.statSync(h,{bigint:!0})}catch(t){if("ENOENT"===t.code)return;throw t}if(n(o,u))throw new Error(r(i,a,c));return s(i,o,h,c)},isSrcSubdir:i,areIdentical:n},qe}function qs(){if(Ve)return Ye;Ve=1;const t=Fe(),e=P,{mkdirs:s}=zs(),{pathExists:n}=Ws(),{utimesMillis:i}=Us(),r=Ks();async function o(t,e,s){return!s.filter||s.filter(t,e)}async function a(s,n,i,l){const h=l.dereference?t.stat:t.lstat,u=await h(n);if(u.isDirectory())return async function(s,n,i,c,l){n||await t.mkdir(c);const h=[];for await(const s of await t.opendir(i)){const t=e.join(i,s.name),n=e.join(c,s.name);h.push(o(t,n,l).then((e=>{if(e)return r.checkPaths(t,n,"copy",l).then((({destStat:e})=>a(e,t,n,l)))})))}await Promise.all(h),n||await t.chmod(c,s.mode)}(u,s,n,i,l);if(u.isFile()||u.isCharacterDevice()||u.isBlockDevice())return async function(e,s,n,i,r){if(!s)return c(e,n,i,r);if(r.overwrite)return await t.unlink(i),c(e,n,i,r);if(r.errorOnExist)throw new Error(`'${i}' already exists`)}(u,s,n,i,l);if(u.isSymbolicLink())return async function(s,n,i,o){let a=await t.readlink(n);o.dereference&&(a=e.resolve(process.cwd(),a));if(!s)return t.symlink(a,i);let c=null;try{c=await t.readlink(i)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return t.symlink(a,i);throw e}o.dereference&&(c=e.resolve(process.cwd(),c));if(r.isSrcSubdir(a,c))throw new Error(`Cannot copy '${a}' to a subdirectory of itself, '${c}'.`);if(r.isSrcSubdir(c,a))throw new Error(`Cannot overwrite '${c}' with '${a}'.`);return await t.unlink(i),t.symlink(a,i)}(s,n,i,l);if(u.isSocket())throw new Error(`Cannot copy a socket file: ${n}`);if(u.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${n}`);throw new Error(`Unknown file: ${n}`)}async function c(e,s,n,r){if(await t.copyFile(s,n),r.preserveTimestamps){128&e.mode||await function(e,s){return t.chmod(e,128|s)}(n,e.mode);const r=await t.stat(s);await i(n,r.atime,r.mtime)}return t.chmod(n,e.mode)}return Ye=async function(t,i,c={}){"function"==typeof c&&(c={filter:c}),c.clobber=!("clobber"in c)||!!c.clobber,c.overwrite="overwrite"in c?!!c.overwrite:c.clobber,c.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0001");const{srcStat:l,destStat:h}=await r.checkPaths(t,i,"copy",c);if(await r.checkParentPaths(t,l,i,"copy"),!await o(t,i,c))return;const u=e.dirname(i);await n(u)||await s(u),await a(h,t,i,c)}}function Gs(){if(He)return Je;He=1;const t=De(),e=P,s=zs().mkdirsSync,n=Us().utimesMillisSync,i=Ks();function r(s,n,r,l){const h=(l.dereference?t.statSync:t.lstatSync)(n);if(h.isDirectory())return function(e,s,n,i,r){return s?c(n,i,r):function(e,s,n,i){return t.mkdirSync(n),c(s,n,i),a(n,e)}(e.mode,n,i,r)}(h,s,n,r,l);if(h.isFile()||h.isCharacterDevice()||h.isBlockDevice())return function(e,s,n,i,r){return s?function(e,s,n,i){if(i.overwrite)return t.unlinkSync(n),o(e,s,n,i);if(i.errorOnExist)throw new Error(`'${n}' already exists`)}(e,n,i,r):o(e,n,i,r)}(h,s,n,r,l);if(h.isSymbolicLink())return function(s,n,r,o){let a=t.readlinkSync(n);o.dereference&&(a=e.resolve(process.cwd(),a));if(s){let s;try{s=t.readlinkSync(r)}catch(e){if("EINVAL"===e.code||"UNKNOWN"===e.code)return t.symlinkSync(a,r);throw e}if(o.dereference&&(s=e.resolve(process.cwd(),s)),i.isSrcSubdir(a,s))throw new Error(`Cannot copy '${a}' to a subdirectory of itself, '${s}'.`);if(i.isSrcSubdir(s,a))throw new Error(`Cannot overwrite '${s}' with '${a}'.`);return function(e,s){return t.unlinkSync(s),t.symlinkSync(e,s)}(a,r)}return t.symlinkSync(a,r)}(s,n,r,l);if(h.isSocket())throw new Error(`Cannot copy a socket file: ${n}`);if(h.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${n}`);throw new Error(`Unknown file: ${n}`)}function o(e,s,i,r){return t.copyFileSync(s,i),r.preserveTimestamps&&function(e,s,i){(function(t){return!(128&t)})(e)&&function(t,e){a(t,128|e)}(i,e);(function(e,s){const i=t.statSync(e);n(s,i.atime,i.mtime)})(s,i)}(e.mode,s,i),a(i,e.mode)}function a(e,s){return t.chmodSync(e,s)}function c(e,s,n){const i=t.opendirSync(e);try{let t;for(;null!==(t=i.readSync());)l(t.name,e,s,n)}finally{i.closeSync()}}function l(t,s,n,o){const a=e.join(s,t),c=e.join(n,t);if(o.filter&&!o.filter(a,c))return;const{destStat:l}=i.checkPathsSync(a,c,"copy",o);return r(l,a,c,o)}return Je=function(n,o,a){"function"==typeof a&&(a={filter:a}),(a=a||{}).clobber=!("clobber"in a)||!!a.clobber,a.overwrite="overwrite"in a?!!a.overwrite:a.clobber,a.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0002");const{srcStat:c,destStat:l}=i.checkPathsSync(n,o,"copy",a);if(i.checkParentPathsSync(n,c,o,"copy"),a.filter&&!a.filter(n,o))return;const h=e.dirname(o);return t.existsSync(h)||s(h),r(l,n,o,a)}}function Ys(){if(Xe)return Qe;Xe=1;const t=Ie().fromPromise;return Qe={copy:t(qs()),copySync:Gs()}}function Vs(){if(ts)return Ze;ts=1;const t=De(),e=Ie().fromCallback;return Ze={remove:e((function(e,s){t.rm(e,{recursive:!0,force:!0},s)})),removeSync:function(e){t.rmSync(e,{recursive:!0,force:!0})}},Ze}function Js(){if(ss)return es;ss=1;const t=Ie().fromPromise,e=Fe(),s=P,n=zs(),i=Vs(),r=t((async function(t){let r;try{r=await e.readdir(t)}catch{return n.mkdirs(t)}return Promise.all(r.map((e=>i.remove(s.join(t,e)))))}));function o(t){let r;try{r=e.readdirSync(t)}catch{return n.mkdirsSync(t)}r.forEach((e=>{e=s.join(t,e),i.removeSync(e)}))}return es={emptyDirSync:o,emptydirSync:o,emptyDir:r,emptydir:r}}function Hs(){if(is)return ns;is=1;const t=Ie().fromPromise,e=P,s=Fe(),n=zs();return ns={createFile:t((async function(t){let i;try{i=await s.stat(t)}catch{}if(i&&i.isFile())return;const r=e.dirname(t);let o=null;try{o=await s.stat(r)}catch(e){if("ENOENT"===e.code)return await n.mkdirs(r),void await s.writeFile(t,"");throw e}o.isDirectory()?await s.writeFile(t,""):await s.readdir(r)})),createFileSync:function(t){let i;try{i=s.statSync(t)}catch{}if(i&&i.isFile())return;const r=e.dirname(t);try{s.statSync(r).isDirectory()||s.readdirSync(r)}catch(t){if(!t||"ENOENT"!==t.code)throw t;n.mkdirsSync(r)}s.writeFileSync(t,"")}}}function Qs(){if(os)return rs;os=1;const t=Ie().fromPromise,e=P,s=Fe(),n=zs(),{pathExists:i}=Ws(),{areIdentical:r}=Ks();return rs={createLink:t((async function(t,o){let a,c;try{a=await s.lstat(o)}catch{}try{c=await s.lstat(t)}catch(t){throw t.message=t.message.replace("lstat","ensureLink"),t}if(a&&r(c,a))return;const l=e.dirname(o);await i(l)||await n.mkdirs(l),await s.link(t,o)})),createLinkSync:function(t,i){let o;try{o=s.lstatSync(i)}catch{}try{const e=s.lstatSync(t);if(o&&r(e,o))return}catch(t){throw t.message=t.message.replace("lstat","ensureLink"),t}const a=e.dirname(i);return s.existsSync(a)||n.mkdirsSync(a),s.linkSync(t,i)}}}function Xs(){if(cs)return as;cs=1;const t=P,e=Fe(),{pathExists:s}=Ws(),n=Ie().fromPromise;return as={symlinkPaths:n((async function(n,i){if(t.isAbsolute(n)){try{await e.lstat(n)}catch(t){throw t.message=t.message.replace("lstat","ensureSymlink"),t}return{toCwd:n,toDst:n}}const r=t.dirname(i),o=t.join(r,n);if(await s(o))return{toCwd:o,toDst:n};try{await e.lstat(n)}catch(t){throw t.message=t.message.replace("lstat","ensureSymlink"),t}return{toCwd:n,toDst:t.relative(r,n)}})),symlinkPathsSync:function(s,n){if(t.isAbsolute(s)){if(!e.existsSync(s))throw new Error("absolute srcpath does not exist");return{toCwd:s,toDst:s}}const i=t.dirname(n),r=t.join(i,s);if(e.existsSync(r))return{toCwd:r,toDst:s};if(!e.existsSync(s))throw new Error("relative srcpath does not exist");return{toCwd:s,toDst:t.relative(i,s)}}}}function Zs(){if(hs)return ls;hs=1;const t=Fe(),e=Ie().fromPromise;return ls={symlinkType:e((async function(e,s){if(s)return s;let n;try{n=await t.lstat(e)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"})),symlinkTypeSync:function(e,s){if(s)return s;let n;try{n=t.lstatSync(e)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}}}function tn(){if(fs)return us;fs=1;const t=Ie().fromPromise,e=P,s=Fe(),{mkdirs:n,mkdirsSync:i}=zs(),{symlinkPaths:r,symlinkPathsSync:o}=Xs(),{symlinkType:a,symlinkTypeSync:c}=Zs(),{pathExists:l}=Ws(),{areIdentical:h}=Ks();return us={createSymlink:t((async function(t,i,o){let c;try{c=await s.lstat(i)}catch{}if(c&&c.isSymbolicLink()){const[e,n]=await Promise.all([s.stat(t),s.stat(i)]);if(h(e,n))return}const u=await r(t,i);t=u.toDst;const f=await a(u.toCwd,o),d=e.dirname(i);return await l(d)||await n(d),s.symlink(t,i,f)})),createSymlinkSync:function(t,n,r){let a;try{a=s.lstatSync(n)}catch{}if(a&&a.isSymbolicLink()){const e=s.statSync(t),i=s.statSync(n);if(h(e,i))return}const l=o(t,n);t=l.toDst,r=c(l.toCwd,r);const u=e.dirname(n);return s.existsSync(u)||i(u),s.symlinkSync(t,n,r)}}}function en(){if(ps)return ds;ps=1;const{createFile:t,createFileSync:e}=Hs(),{createLink:s,createLinkSync:n}=Qs(),{createSymlink:i,createSymlinkSync:r}=tn();return ds={createFile:t,createFileSync:e,ensureFile:t,ensureFileSync:e,createLink:s,createLinkSync:n,ensureLink:s,ensureLinkSync:n,createSymlink:i,createSymlinkSync:r,ensureSymlink:i,ensureSymlinkSync:r}}function sn(){if(ys)return ms;return ys=1,ms={stringify:function(t,{EOL:e="\n",finalEOL:s=!0,replacer:n=null,spaces:i}={}){const r=s?e:"";return JSON.stringify(t,n,i).replace(/\n/g,e)+r},stripBom:function(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t.replace(/^\uFEFF/,"")}},ms}function nn(){if(vs)return bs;vs=1;const t=function(){if(ws)return gs;let t;ws=1;try{t=De()}catch(e){t=v}const e=Ie(),{stringify:s,stripBom:n}=sn(),i=e.fromPromise((async function(s,i={}){"string"==typeof i&&(i={encoding:i});const r=i.fs||t,o=!("throws"in i)||i.throws;let a,c=await e.fromCallback(r.readFile)(s,i);c=n(c);try{a=JSON.parse(c,i?i.reviver:null)}catch(t){if(o)throw t.message=`${s}: ${t.message}`,t;return null}return a})),r=e.fromPromise((async function(n,i,r={}){const o=r.fs||t,a=s(i,r);await e.fromCallback(o.writeFile)(n,a,r)})),o={readFile:i,readFileSync:function(e,s={}){"string"==typeof s&&(s={encoding:s});const i=s.fs||t,r=!("throws"in s)||s.throws;try{let t=i.readFileSync(e,s);return t=n(t),JSON.parse(t,s.reviver)}catch(t){if(r)throw t.message=`${e}: ${t.message}`,t;return null}},writeFile:r,writeFileSync:function(e,n,i={}){const r=i.fs||t,o=s(n,i);return r.writeFileSync(e,o,i)}};return gs=o}();return bs={readJson:t.readFile,readJsonSync:t.readFileSync,writeJson:t.writeFile,writeJsonSync:t.writeFileSync}}function rn(){if(ks)return Ss;ks=1;const t=Ie().fromPromise,e=Fe(),s=P,n=zs(),i=Ws().pathExists;return Ss={outputFile:t((async function(t,r,o="utf-8"){const a=s.dirname(t);return await i(a)||await n.mkdirs(a),e.writeFile(t,r,o)})),outputFileSync:function(t,...i){const r=s.dirname(t);e.existsSync(r)||n.mkdirsSync(r),e.writeFileSync(t,...i)}},Ss}function on(){if(Os)return Es;Os=1;const{stringify:t}=sn(),{outputFile:e}=rn();return Es=async function(s,n,i={}){const r=t(n,i);await e(s,r,i)},Es}function an(){if(Ns)return xs;Ns=1;const{stringify:t}=sn(),{outputFileSync:e}=rn();return xs=function(s,n,i){const r=t(n,i);e(s,r,i)},xs}function cn(){if(As)return Ts;As=1;const t=Ie().fromPromise,e=nn();return e.outputJson=t(on()),e.outputJsonSync=an(),e.outputJSON=e.outputJson,e.outputJSONSync=e.outputJsonSync,e.writeJSON=e.writeJson,e.writeJSONSync=e.writeJsonSync,e.readJSON=e.readJson,e.readJSONSync=e.readJsonSync,Ts=e}function ln(){if(Cs)return Ls;Cs=1;const t=Fe(),e=P,{copy:s}=Ys(),{remove:n}=Vs(),{mkdirp:i}=zs(),{pathExists:r}=Ws(),o=Ks();return Ls=async function(a,c,l={}){const h=l.overwrite||l.clobber||!1,{srcStat:u,isChangingCase:f=!1}=await o.checkPaths(a,c,"move",l);await o.checkParentPaths(a,u,c,"move");const d=e.dirname(c);return e.parse(d).root!==d&&await i(d),async function(e,i,o,a){if(!a)if(o)await n(i);else if(await r(i))throw new Error("dest already exists.");try{await t.rename(e,i)}catch(t){if("EXDEV"!==t.code)throw t;await async function(t,e,i){const r={overwrite:i,errorOnExist:!0,preserveTimestamps:!0};return await s(t,e,r),n(t)}(e,i,o)}}(a,c,h,f)}}function hn(){if($s)return Ms;$s=1;const t=De(),e=P,s=Ys().copySync,n=Vs().removeSync,i=zs().mkdirpSync,r=Ks();function o(e,i,r){try{t.renameSync(e,i)}catch(t){if("EXDEV"!==t.code)throw t;return function(t,e,i){const r={overwrite:i,errorOnExist:!0,preserveTimestamps:!0};return s(t,e,r),n(t)}(e,i,r)}}return Ms=function(s,a,c){const l=(c=c||{}).overwrite||c.clobber||!1,{srcStat:h,isChangingCase:u=!1}=r.checkPathsSync(s,a,"move",c);return r.checkParentPathsSync(s,h,a,"move"),function(t){const s=e.dirname(t);return e.parse(s).root===s}(a)||i(e.dirname(a)),function(e,s,i,r){if(r)return o(e,s,i);if(i)return n(s),o(e,s,i);if(t.existsSync(s))throw new Error("dest already exists.");return o(e,s,i)}(s,a,l,u)}}function un(){if(_s)return Is;_s=1;const t=Ie().fromPromise;return Is={move:t(ln()),moveSync:hn()}}function fn(){return Fs?Ds:(Fs=1,Ds={...Fe(),...Ys(),...Js(),...en(),...cn(),...zs(),...un(),...rn(),...Ws(),...Vs()})}var dn,pn,mn,yn,gn=fn();var wn=function(){if(yn)return mn;yn=1;var t=function(){if(pn)return dn;function t(t,n,i){t instanceof RegExp&&(t=e(t,i)),n instanceof RegExp&&(n=e(n,i));var r=s(t,n,i);return r&&{start:r[0],end:r[1],pre:i.slice(0,r[0]),body:i.slice(r[0]+t.length,r[1]),post:i.slice(r[1]+n.length)}}function e(t,e){var s=e.match(t);return s?s[0]:null}function s(t,e,s){var n,i,r,o,a,c=s.indexOf(t),l=s.indexOf(e,c+1),h=c;if(c>=0&&l>0){if(t===e)return[c,l];for(n=[],r=s.length;h>=0&&!a;)h==c?(n.push(h),c=s.indexOf(t,h+1)):1==n.length?a=[n.pop(),l]:((i=n.pop())<r&&(r=i,o=l),l=s.indexOf(e,h+1)),h=c<l&&c>=0?c:l;n.length&&(a=[r,o])}return a}return pn=1,dn=t,t.range=s,dn}();mn=function(t){if(!t)return[];"{}"===t.substr(0,2)&&(t="\\{\\}"+t.substr(2));return d(function(t){return t.split("\\\\").join(e).split("\\{").join(s).split("\\}").join(n).split("\\,").join(i).split("\\.").join(r)}(t),!0).map(a)};var e="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",n="\0CLOSE"+Math.random()+"\0",i="\0COMMA"+Math.random()+"\0",r="\0PERIOD"+Math.random()+"\0";function o(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}function a(t){return t.split(e).join("\\").split(s).join("{").split(n).join("}").split(i).join(",").split(r).join(".")}function c(e){if(!e)return[""];var s=[],n=t("{","}",e);if(!n)return e.split(",");var i=n.pre,r=n.body,o=n.post,a=i.split(",");a[a.length-1]+="{"+r+"}";var l=c(o);return o.length&&(a[a.length-1]+=l.shift(),a.push.apply(a,l)),s.push.apply(s,a),s}function l(t){return"{"+t+"}"}function h(t){return/^-?0\d/.test(t)}function u(t,e){return t<=e}function f(t,e){return t>=e}function d(e,s){var i=[],r=t("{","}",e);if(!r)return[e];var a=r.pre,p=r.post.length?d(r.post,!1):[""];if(/\$$/.test(r.pre))for(var m=0;m<p.length;m++){var y=a+"{"+r.body+"}"+p[m];i.push(y)}else{var g,w,b=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),v=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),S=b||v,k=r.body.indexOf(",")>=0;if(!S&&!k)return r.post.match(/,.*\}/)?d(e=r.pre+"{"+r.body+n+r.post):[e];if(S)g=r.body.split(/\.\./);else if(1===(g=c(r.body)).length&&1===(g=d(g[0],!1).map(l)).length)return p.map((function(t){return r.pre+g[0]+t}));if(S){var E=o(g[0]),O=o(g[1]),x=Math.max(g[0].length,g[1].length),N=3==g.length?Math.abs(o(g[2])):1,T=u;O<E&&(N*=-1,T=f);var A=g.some(h);w=[];for(var L=E;T(L,O);L+=N){var C;if(v)"\\"===(C=String.fromCharCode(L))&&(C="");else if(C=String(L),A){var M=x-C.length;if(M>0){var $=new Array(M+1).join("0");C=L<0?"-"+$+C.slice(1):$+C}}w.push(C)}}else{w=[];for(var I=0;I<g.length;I++)w.push.apply(w,d(g[I],!1))}for(I=0;I<w.length;I++)for(m=0;m<p.length;m++){y=a+w[I]+p[m];(!s||S||y)&&i.push(y)}}return i}return mn}(),bn=It(wn);const vn=t=>{if("string"!=typeof t)throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")},Sn={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},kn=t=>t.replace(/[[\]\\-]/g,"\\$&"),En=t=>t.join(""),On=(t,e)=>{const s=e;if("["!==t.charAt(s))throw new Error("not in a brace expression");const n=[],i=[];let r=s+1,o=!1,a=!1,c=!1,l=!1,h=s,u="";t:for(;r<t.length;){const e=t.charAt(r);if("!"!==e&&"^"!==e||r!==s+1){if("]"===e&&o&&!c){h=r+1;break}if(o=!0,"\\"!==e||c){if("["===e&&!c)for(const[e,[o,c,l]]of Object.entries(Sn))if(t.startsWith(e,r)){if(u)return["$.",!1,t.length-s,!0];r+=e.length,l?i.push(o):n.push(o),a=a||c;continue t}c=!1,u?(e>u?n.push(kn(u)+"-"+kn(e)):e===u&&n.push(kn(e)),u="",r++):t.startsWith("-]",r+1)?(n.push(kn(e+"-")),r+=2):t.startsWith("-",r+1)?(u=e,r+=2):(n.push(kn(e)),r++)}else c=!0,r++}else l=!0,r++}if(h<r)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,t.length-s,!0];if(0===i.length&&1===n.length&&/^\\?.$/.test(n[0])&&!l){const t=2===n[0].length?n[0].slice(-1):n[0];return[(f=t,f.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")),!1,h-s,!1]}var f;const d="["+(l?"^":"")+En(n)+"]",p="["+(l?"":"^")+En(i)+"]";return[n.length&&i.length?"("+d+"|"+p+")":n.length?d:p,a,h-s,!0]},xn=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),Nn=new Set(["!","?","+","*","@"]),Tn=t=>Nn.has(t),An="(?!\\.)",Ln=new Set(["[","."]),Cn=new Set(["..","."]),Mn=new Set("().*{}+?[]^$\\!"),$n="[^/]",In=$n+"*?",_n=$n+"+?";class Dn{type;#t;#e;#s=!1;#n=[];#i;#r;#o;#a=!1;#c;#l;#h=!1;constructor(t,e,s={}){this.type=t,t&&(this.#e=!0),this.#i=e,this.#t=this.#i?this.#i.#t:this,this.#c=this.#t===this?s:this.#t.#c,this.#o=this.#t===this?[]:this.#t.#o,"!"!==t||this.#t.#a||this.#o.push(this),this.#r=this.#i?this.#i.#n.length:0}get hasMagic(){if(void 0!==this.#e)return this.#e;for(const t of this.#n)if("string"!=typeof t&&(t.type||t.hasMagic))return this.#e=!0;return this.#e}toString(){return void 0!==this.#l?this.#l:this.type?this.#l=this.type+"("+this.#n.map((t=>String(t))).join("|")+")":this.#l=this.#n.map((t=>String(t))).join("")}#u(){if(this!==this.#t)throw new Error("should only call on root");if(this.#a)return this;let t;for(this.toString(),this.#a=!0;t=this.#o.pop();){if("!"!==t.type)continue;let e=t,s=e.#i;for(;s;){for(let n=e.#r+1;!s.type&&n<s.#n.length;n++)for(const e of t.#n){if("string"==typeof e)throw new Error("string part in extglob AST??");e.copyIn(s.#n[n])}e=s,s=e.#i}}return this}push(...t){for(const e of t)if(""!==e){if("string"!=typeof e&&!(e instanceof Dn&&e.#i===this))throw new Error("invalid part: "+e);this.#n.push(e)}}toJSON(){const t=null===this.type?this.#n.slice().map((t=>"string"==typeof t?t:t.toJSON())):[this.type,...this.#n.map((t=>t.toJSON()))];return this.isStart()&&!this.type&&t.unshift([]),this.isEnd()&&(this===this.#t||this.#t.#a&&"!"===this.#i?.type)&&t.push({}),t}isStart(){if(this.#t===this)return!0;if(!this.#i?.isStart())return!1;if(0===this.#r)return!0;const t=this.#i;for(let e=0;e<this.#r;e++){const s=t.#n[e];if(!(s instanceof Dn&&"!"===s.type))return!1}return!0}isEnd(){if(this.#t===this)return!0;if("!"===this.#i?.type)return!0;if(!this.#i?.isEnd())return!1;if(!this.type)return this.#i?.isEnd();const t=this.#i?this.#i.#n.length:0;return this.#r===t-1}copyIn(t){"string"==typeof t?this.push(t):this.push(t.clone(this))}clone(t){const e=new Dn(this.type,t);for(const t of this.#n)e.copyIn(t);return e}static#f(t,e,s,n){let i=!1,r=!1,o=-1,a=!1;if(null===e.type){let c=s,l="";for(;c<t.length;){const s=t.charAt(c++);if(i||"\\"===s)i=!i,l+=s;else if(r)c===o+1?"^"!==s&&"!"!==s||(a=!0):"]"!==s||c===o+2&&a||(r=!1),l+=s;else if("["!==s)if(n.noext||!Tn(s)||"("!==t.charAt(c))l+=s;else{e.push(l),l="";const i=new Dn(s,e);c=Dn.#f(t,i,c,n),e.push(i)}else r=!0,o=c,a=!1,l+=s}return e.push(l),c}let c=s+1,l=new Dn(null,e);const h=[];let u="";for(;c<t.length;){const s=t.charAt(c++);if(i||"\\"===s)i=!i,u+=s;else if(r)c===o+1?"^"!==s&&"!"!==s||(a=!0):"]"!==s||c===o+2&&a||(r=!1),u+=s;else if("["!==s)if(Tn(s)&&"("===t.charAt(c)){l.push(u),u="";const e=new Dn(s,l);l.push(e),c=Dn.#f(t,e,c,n)}else if("|"!==s){if(")"===s)return""===u&&0===e.#n.length&&(e.#h=!0),l.push(u),u="",e.push(...h,l),c;u+=s}else l.push(u),u="",h.push(l),l=new Dn(null,e);else r=!0,o=c,a=!1,u+=s}return e.type=null,e.#e=void 0,e.#n=[t.substring(s-1)],c}static fromGlob(t,e={}){const s=new Dn(null,void 0,e);return Dn.#f(t,s,0,e),s}toMMPattern(){if(this!==this.#t)return this.#t.toMMPattern();const t=this.toString(),[e,s,n,i]=this.toRegExpSource();if(!(n||this.#e||this.#c.nocase&&!this.#c.nocaseMagicOnly&&t.toUpperCase()!==t.toLowerCase()))return s;const r=(this.#c.nocase?"i":"")+(i?"u":"");return Object.assign(new RegExp(`^${e}$`,r),{_src:e,_glob:t})}get options(){return this.#c}toRegExpSource(t){const e=t??!!this.#c.dot;if(this.#t===this&&this.#u(),!this.type){const s=this.isStart()&&this.isEnd(),n=this.#n.map((e=>{const[n,i,r,o]="string"==typeof e?Dn.#d(e,this.#e,s):e.toRegExpSource(t);return this.#e=this.#e||r,this.#s=this.#s||o,n})).join("");let i="";if(this.isStart()&&"string"==typeof this.#n[0]){if(!(1===this.#n.length&&Cn.has(this.#n[0]))){const s=Ln,r=e&&s.has(n.charAt(0))||n.startsWith("\\.")&&s.has(n.charAt(2))||n.startsWith("\\.\\.")&&s.has(n.charAt(4)),o=!e&&!t&&s.has(n.charAt(0));i=r?"(?!(?:^|/)\\.\\.?(?:$|/))":o?An:""}}let r="";this.isEnd()&&this.#t.#a&&"!"===this.#i?.type&&(r="(?:$|\\/)");return[i+n+r,xn(n),this.#e=!!this.#e,this.#s]}const s="*"===this.type||"+"===this.type,n="!"===this.type?"(?:(?!(?:":"(?:";let i=this.#p(e);if(this.isStart()&&this.isEnd()&&!i&&"!"!==this.type){const t=this.toString();return this.#n=[t],this.type=null,this.#e=void 0,[t,xn(this.toString()),!1,!1]}let r=!s||t||e?"":this.#p(!0);r===i&&(r=""),r&&(i=`(?:${i})(?:${r})*?`);let o="";if("!"===this.type&&this.#h)o=(this.isStart()&&!e?An:"")+_n;else{o=n+i+("!"===this.type?"))"+(!this.isStart()||e||t?"":An)+In+")":"@"===this.type?")":"?"===this.type?")?":"+"===this.type&&r?")":"*"===this.type&&r?")?":`)${this.type}`)}return[o,xn(i),this.#e=!!this.#e,this.#s]}#p(t){return this.#n.map((e=>{if("string"==typeof e)throw new Error("string type in extglob ast??");const[s,n,i,r]=e.toRegExpSource(t);return this.#s=this.#s||r,s})).filter((t=>!(this.isStart()&&this.isEnd()&&!t))).join("|")}static#d(t,e,s=!1){let n=!1,i="",r=!1;for(let o=0;o<t.length;o++){const a=t.charAt(o);if(n)n=!1,i+=(Mn.has(a)?"\\":"")+a;else if("\\"!==a){if("["===a){const[s,n,a,c]=On(t,o);if(a){i+=s,r=r||n,o+=a-1,e=e||c;continue}}"*"!==a?"?"!==a?i+=a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):(i+=$n,e=!0):(i+=s&&"*"===t?_n:In,e=!0)}else o===t.length-1?i+="\\\\":n=!0}return[i,xn(t),!!e,r]}}const Fn=(t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&"),Pn=(t,e,s={})=>(vn(e),!(!s.nocomment&&"#"===e.charAt(0))&&new li(e,s).match(t)),jn=/^\*+([^+@!?\*\[\(]*)$/,Rn=t=>e=>!e.startsWith(".")&&e.endsWith(t),Bn=t=>e=>e.endsWith(t),zn=t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),Wn=t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),Un=/^\*+\.\*+$/,Kn=t=>!t.startsWith(".")&&t.includes("."),qn=t=>"."!==t&&".."!==t&&t.includes("."),Gn=/^\.\*+$/,Yn=t=>"."!==t&&".."!==t&&t.startsWith("."),Vn=/^\*+$/,Jn=t=>0!==t.length&&!t.startsWith("."),Hn=t=>0!==t.length&&"."!==t&&".."!==t,Qn=/^\?+([^+@!?\*\[\(]*)?$/,Xn=([t,e=""])=>{const s=si([t]);return e?(e=e.toLowerCase(),t=>s(t)&&t.toLowerCase().endsWith(e)):s},Zn=([t,e=""])=>{const s=ni([t]);return e?(e=e.toLowerCase(),t=>s(t)&&t.toLowerCase().endsWith(e)):s},ti=([t,e=""])=>{const s=ni([t]);return e?t=>s(t)&&t.endsWith(e):s},ei=([t,e=""])=>{const s=si([t]);return e?t=>s(t)&&t.endsWith(e):s},si=([t])=>{const e=t.length;return t=>t.length===e&&!t.startsWith(".")},ni=([t])=>{const e=t.length;return t=>t.length===e&&"."!==t&&".."!==t},ii="object"==typeof process&&process?"object"==typeof process.env&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix";Pn.sep="win32"===ii?{sep:"\\"}.sep:{sep:"/"}.sep;const ri=Symbol("globstar **");Pn.GLOBSTAR=ri;Pn.filter=(t,e={})=>s=>Pn(s,t,e);const oi=(t,e={})=>Object.assign({},t,e);Pn.defaults=t=>{if(!t||"object"!=typeof t||!Object.keys(t).length)return Pn;const e=Pn;return Object.assign(((s,n,i={})=>e(s,n,oi(t,i))),{Minimatch:class extends e.Minimatch{constructor(e,s={}){super(e,oi(t,s))}static defaults(s){return e.defaults(oi(t,s)).Minimatch}},AST:class extends e.AST{constructor(e,s,n={}){super(e,s,oi(t,n))}static fromGlob(s,n={}){return e.AST.fromGlob(s,oi(t,n))}},unescape:(s,n={})=>e.unescape(s,oi(t,n)),escape:(s,n={})=>e.escape(s,oi(t,n)),filter:(s,n={})=>e.filter(s,oi(t,n)),defaults:s=>e.defaults(oi(t,s)),makeRe:(s,n={})=>e.makeRe(s,oi(t,n)),braceExpand:(s,n={})=>e.braceExpand(s,oi(t,n)),match:(s,n,i={})=>e.match(s,n,oi(t,i)),sep:e.sep,GLOBSTAR:ri})};const ai=(t,e={})=>(vn(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:bn(t));Pn.braceExpand=ai;Pn.makeRe=(t,e={})=>new li(t,e).makeRe();Pn.match=(t,e,s={})=>{const n=new li(e,s);return t=t.filter((t=>n.match(t))),n.options.nonull&&!t.length&&t.push(e),t};const ci=/[?*]|[+@!]\(.*?\)|\[|\]/;class li{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(t,e={}){vn(t),e=e||{},this.options=e,this.pattern=t,this.platform=e.platform||ii,this.isWindows="win32"===this.platform,this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||!1===e.allowWindowsEscape,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!e.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!e.nonegate,this.comment=!1,this.empty=!1,this.partial=!!e.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=void 0!==e.windowsNoMagicRoot?e.windowsNoMagicRoot:!(!this.isWindows||!this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const t of this.set)for(const e of t)if("string"!=typeof e)return!0;return!1}debug(...t){}make(){const t=this.pattern,e=this.options;if(!e.nocomment&&"#"===t.charAt(0))return void(this.comment=!0);if(!t)return void(this.empty=!0);this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],e.debug&&(this.debug=(...t)=>console.error(...t)),this.debug(this.pattern,this.globSet);const s=this.globSet.map((t=>this.slashSplit(t)));this.globParts=this.preprocess(s),this.debug(this.pattern,this.globParts);let n=this.globParts.map(((t,e,s)=>{if(this.isWindows&&this.windowsNoMagicRoot){const e=!(""!==t[0]||""!==t[1]||"?"!==t[2]&&ci.test(t[2])||ci.test(t[3])),s=/^[a-z]:/i.test(t[0]);if(e)return[...t.slice(0,4),...t.slice(4).map((t=>this.parse(t)))];if(s)return[t[0],...t.slice(1).map((t=>this.parse(t)))]}return t.map((t=>this.parse(t)))}));if(this.debug(this.pattern,n),this.set=n.filter((t=>-1===t.indexOf(!1))),this.isWindows)for(let t=0;t<this.set.length;t++){const e=this.set[t];""===e[0]&&""===e[1]&&"?"===this.globParts[t][2]&&"string"==typeof e[3]&&/^[a-z]:$/i.test(e[3])&&(e[2]="?")}this.debug(this.pattern,this.set)}preprocess(t){if(this.options.noglobstar)for(let e=0;e<t.length;e++)for(let s=0;s<t[e].length;s++)"**"===t[e][s]&&(t[e][s]="*");const{optimizationLevel:e=1}=this.options;return e>=2?(t=this.firstPhasePreProcess(t),t=this.secondPhasePreProcess(t)):t=e>=1?this.levelOneOptimize(t):this.adjascentGlobstarOptimize(t),t}adjascentGlobstarOptimize(t){return t.map((t=>{let e=-1;for(;-1!==(e=t.indexOf("**",e+1));){let s=e;for(;"**"===t[s+1];)s++;s!==e&&t.splice(e,s-e)}return t}))}levelOneOptimize(t){return t.map((t=>(t=t.reduce(((t,e)=>{const s=t[t.length-1];return"**"===e&&"**"===s?t:".."===e&&s&&".."!==s&&"."!==s&&"**"!==s?(t.pop(),t):(t.push(e),t)}),[]),0===t.length?[""]:t)))}levelTwoFileOptimize(t){Array.isArray(t)||(t=this.slashSplit(t));let e=!1;do{if(e=!1,!this.preserveMultipleSlashes){for(let s=1;s<t.length-1;s++){const n=t[s];1===s&&""===n&&""===t[0]||("."!==n&&""!==n||(e=!0,t.splice(s,1),s--))}"."!==t[0]||2!==t.length||"."!==t[1]&&""!==t[1]||(e=!0,t.pop())}let s=0;for(;-1!==(s=t.indexOf("..",s+1));){const n=t[s-1];n&&"."!==n&&".."!==n&&"**"!==n&&(e=!0,t.splice(s-1,2),s-=2)}}while(e);return 0===t.length?[""]:t}firstPhasePreProcess(t){let e=!1;do{e=!1;for(let s of t){let n=-1;for(;-1!==(n=s.indexOf("**",n+1));){let i=n;for(;"**"===s[i+1];)i++;i>n&&s.splice(n+1,i-n);let r=s[n+1];const o=s[n+2],a=s[n+3];if(".."!==r)continue;if(!o||"."===o||".."===o||!a||"."===a||".."===a)continue;e=!0,s.splice(n,1);const c=s.slice(0);c[n]="**",t.push(c),n--}if(!this.preserveMultipleSlashes){for(let t=1;t<s.length-1;t++){const n=s[t];1===t&&""===n&&""===s[0]||("."!==n&&""!==n||(e=!0,s.splice(t,1),t--))}"."!==s[0]||2!==s.length||"."!==s[1]&&""!==s[1]||(e=!0,s.pop())}let i=0;for(;-1!==(i=s.indexOf("..",i+1));){const t=s[i-1];if(t&&"."!==t&&".."!==t&&"**"!==t){e=!0;const t=1===i&&"**"===s[i+1]?["."]:[];s.splice(i-1,2,...t),0===s.length&&s.push(""),i-=2}}}}while(e);return t}secondPhasePreProcess(t){for(let e=0;e<t.length-1;e++)for(let s=e+1;s<t.length;s++){const n=this.partsMatch(t[e],t[s],!this.preserveMultipleSlashes);if(n){t[e]=[],t[s]=n;break}}return t.filter((t=>t.length))}partsMatch(t,e,s=!1){let n=0,i=0,r=[],o="";for(;n<t.length&&i<e.length;)if(t[n]===e[i])r.push("b"===o?e[i]:t[n]),n++,i++;else if(s&&"**"===t[n]&&e[i]===t[n+1])r.push(t[n]),n++;else if(s&&"**"===e[i]&&t[n]===e[i+1])r.push(e[i]),i++;else if("*"!==t[n]||!e[i]||!this.options.dot&&e[i].startsWith(".")||"**"===e[i]){if("*"!==e[i]||!t[n]||!this.options.dot&&t[n].startsWith(".")||"**"===t[n])return!1;if("a"===o)return!1;o="b",r.push(e[i]),n++,i++}else{if("b"===o)return!1;o="a",r.push(t[n]),n++,i++}return t.length===e.length&&r}parseNegate(){if(this.nonegate)return;const t=this.pattern;let e=!1,s=0;for(let n=0;n<t.length&&"!"===t.charAt(n);n++)e=!e,s++;s&&(this.pattern=t.slice(s)),this.negate=e}matchOne(t,e,s=!1){const n=this.options;if(this.isWindows){const s="string"==typeof t[0]&&/^[a-z]:$/i.test(t[0]),n=!s&&""===t[0]&&""===t[1]&&"?"===t[2]&&/^[a-z]:$/i.test(t[3]),i="string"==typeof e[0]&&/^[a-z]:$/i.test(e[0]),r=n?3:s?0:void 0,o=!i&&""===e[0]&&""===e[1]&&"?"===e[2]&&"string"==typeof e[3]&&/^[a-z]:$/i.test(e[3])?3:i?0:void 0;if("number"==typeof r&&"number"==typeof o){const[s,n]=[t[r],e[o]];s.toLowerCase()===n.toLowerCase()&&(e[o]=s,o>r?e=e.slice(o):r>o&&(t=t.slice(r)))}}const{optimizationLevel:i=1}=this.options;i>=2&&(t=this.levelTwoFileOptimize(t)),this.debug("matchOne",this,{file:t,pattern:e}),this.debug("matchOne",t.length,e.length);for(var r=0,o=0,a=t.length,c=e.length;r<a&&o<c;r++,o++){this.debug("matchOne loop");var l=e[o],h=t[r];if(this.debug(e,l,h),!1===l)return!1;if(l===ri){this.debug("GLOBSTAR",[e,l,h]);var u=r,f=o+1;if(f===c){for(this.debug("** at the end");r<a;r++)if("."===t[r]||".."===t[r]||!n.dot&&"."===t[r].charAt(0))return!1;return!0}for(;u<a;){var d=t[u];if(this.debug("\nglobstar while",t,u,e,f,d),this.matchOne(t.slice(u),e.slice(f),s))return this.debug("globstar found match!",u,a,d),!0;if("."===d||".."===d||!n.dot&&"."===d.charAt(0)){this.debug("dot detected!",t,u,e,f);break}this.debug("globstar swallow a segment, and continue"),u++}return!(!s||(this.debug("\n>>> no match, partial?",t,u,e,f),u!==a))}let i;if("string"==typeof l?(i=h===l,this.debug("string match",l,h,i)):(i=l.test(h),this.debug("pattern match",l,h,i)),!i)return!1}if(r===a&&o===c)return!0;if(r===a)return s;if(o===c)return r===a-1&&""===t[r];throw new Error("wtf?")}braceExpand(){return ai(this.pattern,this.options)}parse(t){vn(t);const e=this.options;if("**"===t)return ri;if(""===t)return"";let s,n=null;(s=t.match(Vn))?n=e.dot?Hn:Jn:(s=t.match(jn))?n=(e.nocase?e.dot?Wn:zn:e.dot?Bn:Rn)(s[1]):(s=t.match(Qn))?n=(e.nocase?e.dot?Zn:Xn:e.dot?ti:ei)(s):(s=t.match(Un))?n=e.dot?qn:Kn:(s=t.match(Gn))&&(n=Yn);const i=Dn.fromGlob(t,this.options).toMMPattern();return n&&"object"==typeof i&&Reflect.defineProperty(i,"test",{value:n}),i}makeRe(){if(this.regexp||!1===this.regexp)return this.regexp;const t=this.set;if(!t.length)return this.regexp=!1,this.regexp;const e=this.options,s=e.noglobstar?"[^/]*?":e.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",n=new Set(e.nocase?["i"]:[]);let i=t.map((t=>{const e=t.map((t=>{if(t instanceof RegExp)for(const e of t.flags.split(""))n.add(e);return"string"==typeof t?t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):t===ri?ri:t._src}));return e.forEach(((t,n)=>{const i=e[n+1],r=e[n-1];t===ri&&r!==ri&&(void 0===r?void 0!==i&&i!==ri?e[n+1]="(?:\\/|"+s+"\\/)?"+i:e[n]=s:void 0===i?e[n-1]=r+"(?:\\/|"+s+")?":i!==ri&&(e[n-1]=r+"(?:\\/|\\/"+s+"\\/)"+i,e[n+1]=ri))})),e.filter((t=>t!==ri)).join("/")})).join("|");const[r,o]=t.length>1?["(?:",")"]:["",""];i="^"+r+i+o+"$",this.negate&&(i="^(?!"+i+").+$");try{this.regexp=new RegExp(i,[...n].join(""))}catch(t){this.regexp=!1}return this.regexp}slashSplit(t){return this.preserveMultipleSlashes?t.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(t)?["",...t.split(/\/+/)]:t.split(/\/+/)}match(t,e=this.partial){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return""===t;if("/"===t&&e)return!0;const s=this.options;this.isWindows&&(t=t.split("\\").join("/"));const n=this.slashSplit(t);this.debug(this.pattern,"split",n);const i=this.set;this.debug(this.pattern,"set",i);let r=n[n.length-1];if(!r)for(let t=n.length-2;!r&&t>=0;t--)r=n[t];for(let t=0;t<i.length;t++){const o=i[t];let a=n;s.matchBase&&1===o.length&&(a=[r]);if(this.matchOne(a,o,e))return!!s.flipNegate||!this.negate}return!s.flipNegate&&this.negate}static defaults(t){return Pn.defaults(t).Minimatch}}Pn.AST=Dn,Pn.Minimatch=li,Pn.escape=Fn,Pn.unescape=xn;const hi="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,ui=new Set,fi="object"==typeof process&&process?process:{},di=(t,e,s,n)=>{"function"==typeof fi.emitWarning?fi.emitWarning(t,e,s,n):console.error(`[${s}] ${e}: ${t}`)};let pi=globalThis.AbortController,mi=globalThis.AbortSignal;if(void 0===pi){mi=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(t,e){this._onabort.push(e)}},pi=class{constructor(){e()}signal=new mi;abort(t){if(!this.signal.aborted){this.signal.reason=t,this.signal.aborted=!0;for(const e of this.signal._onabort)e(t);this.signal.onabort?.(t)}}};let t="1"!==fi.env?.LRU_CACHE_IGNORE_AC_WARNING;const e=()=>{t&&(t=!1,di("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const yi=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),gi=t=>yi(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?wi:null:null;class wi extends Array{constructor(t){super(t),this.fill(0)}}class bi{heap;length;static#m=!1;static create(t){const e=gi(t);if(!e)return[];bi.#m=!0;const s=new bi(t,e);return bi.#m=!1,s}constructor(t,e){if(!bi.#m)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}}class vi{#y;#g;#w;#b;#v;#S;#k;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#E;#O;#x;#N;#T;#A;#L;#C;#M;#$;#I;#_;#D;#F;#P;#j;#R;#B;static unsafeExposeInternals(t){return{starts:t.#D,ttls:t.#F,sizes:t.#_,keyMap:t.#x,keyList:t.#N,valList:t.#T,next:t.#A,prev:t.#L,get head(){return t.#C},get tail(){return t.#M},free:t.#$,isBackgroundFetch:e=>t.#z(e),backgroundFetch:(e,s,n,i)=>t.#W(e,s,n,i),moveToTail:e=>t.#U(e),indexes:e=>t.#K(e),rindexes:e=>t.#q(e),isStale:e=>t.#G(e)}}get max(){return this.#y}get maxSize(){return this.#g}get calculatedSize(){return this.#O}get size(){return this.#E}get fetchMethod(){return this.#S}get memoMethod(){return this.#k}get dispose(){return this.#w}get onInsert(){return this.#b}get disposeAfter(){return this.#v}constructor(t){const{max:e=0,ttl:s,ttlResolution:n=1,ttlAutopurge:i,updateAgeOnGet:r,updateAgeOnHas:o,allowStale:a,dispose:c,onInsert:l,disposeAfter:h,noDisposeOnSet:u,noUpdateTTL:f,maxSize:d=0,maxEntrySize:p=0,sizeCalculation:m,fetchMethod:y,memoMethod:g,noDeleteOnFetchRejection:w,noDeleteOnStaleGet:b,allowStaleOnFetchRejection:v,allowStaleOnFetchAbort:S,ignoreFetchAbort:k}=t;if(0!==e&&!yi(e))throw new TypeError("max option must be a nonnegative integer");const E=e?gi(e):Array;if(!E)throw new Error("invalid max value: "+e);if(this.#y=e,this.#g=d,this.maxEntrySize=p||this.#g,this.sizeCalculation=m,this.sizeCalculation){if(!this.#g&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if("function"!=typeof this.sizeCalculation)throw new TypeError("sizeCalculation set to non-function")}if(void 0!==g&&"function"!=typeof g)throw new TypeError("memoMethod must be a function if defined");if(this.#k=g,void 0!==y&&"function"!=typeof y)throw new TypeError("fetchMethod must be a function if specified");if(this.#S=y,this.#j=!!y,this.#x=new Map,this.#N=new Array(e).fill(void 0),this.#T=new Array(e).fill(void 0),this.#A=new E(e),this.#L=new E(e),this.#C=0,this.#M=0,this.#$=bi.create(e),this.#E=0,this.#O=0,"function"==typeof c&&(this.#w=c),"function"==typeof l&&(this.#b=l),"function"==typeof h?(this.#v=h,this.#I=[]):(this.#v=void 0,this.#I=void 0),this.#P=!!this.#w,this.#B=!!this.#b,this.#R=!!this.#v,this.noDisposeOnSet=!!u,this.noUpdateTTL=!!f,this.noDeleteOnFetchRejection=!!w,this.allowStaleOnFetchRejection=!!v,this.allowStaleOnFetchAbort=!!S,this.ignoreFetchAbort=!!k,0!==this.maxEntrySize){if(0!==this.#g&&!yi(this.#g))throw new TypeError("maxSize must be a positive integer if specified");if(!yi(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#Y()}if(this.allowStale=!!a,this.noDeleteOnStaleGet=!!b,this.updateAgeOnGet=!!r,this.updateAgeOnHas=!!o,this.ttlResolution=yi(n)||0===n?n:1,this.ttlAutopurge=!!i,this.ttl=s||0,this.ttl){if(!yi(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#V()}if(0===this.#y&&0===this.ttl&&0===this.#g)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#y&&!this.#g){const t="LRU_CACHE_UNBOUNDED";if((t=>!ui.has(t))(t)){ui.add(t);di("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",t,vi)}}}getRemainingTTL(t){return this.#x.has(t)?1/0:0}#V(){const t=new wi(this.#y),e=new wi(this.#y);this.#F=t,this.#D=e,this.#J=(s,n,i=hi.now())=>{if(e[s]=0!==n?i:0,t[s]=n,0!==n&&this.ttlAutopurge){const t=setTimeout((()=>{this.#G(s)&&this.#H(this.#N[s],"expire")}),n+1);t.unref&&t.unref()}},this.#Q=s=>{e[s]=0!==t[s]?hi.now():0},this.#X=(i,r)=>{if(t[r]){const o=t[r],a=e[r];if(!o||!a)return;i.ttl=o,i.start=a,i.now=s||n();const c=i.now-a;i.remainingTTL=o-c}};let s=0;const n=()=>{const t=hi.now();if(this.ttlResolution>0){s=t;const e=setTimeout((()=>s=0),this.ttlResolution);e.unref&&e.unref()}return t};this.getRemainingTTL=i=>{const r=this.#x.get(i);if(void 0===r)return 0;const o=t[r],a=e[r];if(!o||!a)return 1/0;return o-((s||n())-a)},this.#G=i=>{const r=e[i],o=t[i];return!!o&&!!r&&(s||n())-r>o}}#Q=()=>{};#X=()=>{};#J=()=>{};#G=()=>!1;#Y(){const t=new wi(this.#y);this.#O=0,this.#_=t,this.#Z=e=>{this.#O-=t[e],t[e]=0},this.#tt=(t,e,s,n)=>{if(this.#z(e))return 0;if(!yi(s)){if(!n)throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");if("function"!=typeof n)throw new TypeError("sizeCalculation must be a function");if(s=n(e,t),!yi(s))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}return s},this.#et=(e,s,n)=>{if(t[e]=s,this.#g){const s=this.#g-t[e];for(;this.#O>s;)this.#st(!0)}this.#O+=t[e],n&&(n.entrySize=s,n.totalCalculatedSize=this.#O)}}#Z=t=>{};#et=(t,e,s)=>{};#tt=(t,e,s,n)=>{if(s||n)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#K({allowStale:t=this.allowStale}={}){if(this.#E)for(let e=this.#M;this.#nt(e)&&(!t&&this.#G(e)||(yield e),e!==this.#C);)e=this.#L[e]}*#q({allowStale:t=this.allowStale}={}){if(this.#E)for(let e=this.#C;this.#nt(e)&&(!t&&this.#G(e)||(yield e),e!==this.#M);)e=this.#A[e]}#nt(t){return void 0!==t&&this.#x.get(this.#N[t])===t}*entries(){for(const t of this.#K())void 0===this.#T[t]||void 0===this.#N[t]||this.#z(this.#T[t])||(yield[this.#N[t],this.#T[t]])}*rentries(){for(const t of this.#q())void 0===this.#T[t]||void 0===this.#N[t]||this.#z(this.#T[t])||(yield[this.#N[t],this.#T[t]])}*keys(){for(const t of this.#K()){const e=this.#N[t];void 0===e||this.#z(this.#T[t])||(yield e)}}*rkeys(){for(const t of this.#q()){const e=this.#N[t];void 0===e||this.#z(this.#T[t])||(yield e)}}*values(){for(const t of this.#K()){void 0===this.#T[t]||this.#z(this.#T[t])||(yield this.#T[t])}}*rvalues(){for(const t of this.#q()){void 0===this.#T[t]||this.#z(this.#T[t])||(yield this.#T[t])}}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,e={}){for(const s of this.#K()){const n=this.#T[s],i=this.#z(n)?n.__staleWhileFetching:n;if(void 0!==i&&t(i,this.#N[s],this))return this.get(this.#N[s],e)}}forEach(t,e=this){for(const s of this.#K()){const n=this.#T[s],i=this.#z(n)?n.__staleWhileFetching:n;void 0!==i&&t.call(e,i,this.#N[s],this)}}rforEach(t,e=this){for(const s of this.#q()){const n=this.#T[s],i=this.#z(n)?n.__staleWhileFetching:n;void 0!==i&&t.call(e,i,this.#N[s],this)}}purgeStale(){let t=!1;for(const e of this.#q({allowStale:!0}))this.#G(e)&&(this.#H(this.#N[e],"expire"),t=!0);return t}info(t){const e=this.#x.get(t);if(void 0===e)return;const s=this.#T[e],n=this.#z(s)?s.__staleWhileFetching:s;if(void 0===n)return;const i={value:n};if(this.#F&&this.#D){const t=this.#F[e],s=this.#D[e];if(t&&s){const e=t-(hi.now()-s);i.ttl=e,i.start=Date.now()}}return this.#_&&(i.size=this.#_[e]),i}dump(){const t=[];for(const e of this.#K({allowStale:!0})){const s=this.#N[e],n=this.#T[e],i=this.#z(n)?n.__staleWhileFetching:n;if(void 0===i||void 0===s)continue;const r={value:i};if(this.#F&&this.#D){r.ttl=this.#F[e];const t=hi.now()-this.#D[e];r.start=Math.floor(Date.now()-t)}this.#_&&(r.size=this.#_[e]),t.unshift([s,r])}return t}load(t){this.clear();for(const[e,s]of t){if(s.start){const t=Date.now()-s.start;s.start=hi.now()-t}this.set(e,s.value,s)}}set(t,e,s={}){if(void 0===e)return this.delete(t),this;const{ttl:n=this.ttl,start:i,noDisposeOnSet:r=this.noDisposeOnSet,sizeCalculation:o=this.sizeCalculation,status:a}=s;let{noUpdateTTL:c=this.noUpdateTTL}=s;const l=this.#tt(t,e,s.size||0,o);if(this.maxEntrySize&&l>this.maxEntrySize)return a&&(a.set="miss",a.maxEntrySizeExceeded=!0),this.#H(t,"set"),this;let h=0===this.#E?void 0:this.#x.get(t);if(void 0===h)h=0===this.#E?this.#M:0!==this.#$.length?this.#$.pop():this.#E===this.#y?this.#st(!1):this.#E,this.#N[h]=t,this.#T[h]=e,this.#x.set(t,h),this.#A[this.#M]=h,this.#L[h]=this.#M,this.#M=h,this.#E++,this.#et(h,l,a),a&&(a.set="add"),c=!1,this.#B&&this.#b?.(e,t,"add");else{this.#U(h);const s=this.#T[h];if(e!==s){if(this.#j&&this.#z(s)){s.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:e}=s;void 0===e||r||(this.#P&&this.#w?.(e,t,"set"),this.#R&&this.#I?.push([e,t,"set"]))}else r||(this.#P&&this.#w?.(s,t,"set"),this.#R&&this.#I?.push([s,t,"set"]));if(this.#Z(h),this.#et(h,l,a),this.#T[h]=e,a){a.set="replace";const t=s&&this.#z(s)?s.__staleWhileFetching:s;void 0!==t&&(a.oldValue=t)}}else a&&(a.set="update");this.#B&&this.onInsert?.(e,t,e===s?"update":"replace")}if(0===n||this.#F||this.#V(),this.#F&&(c||this.#J(h,n,i),a&&this.#X(a,h)),!r&&this.#R&&this.#I){const t=this.#I;let e;for(;e=t?.shift();)this.#v?.(...e)}return this}pop(){try{for(;this.#E;){const t=this.#T[this.#C];if(this.#st(!0),this.#z(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(void 0!==t)return t}}finally{if(this.#R&&this.#I){const t=this.#I;let e;for(;e=t?.shift();)this.#v?.(...e)}}}#st(t){const e=this.#C,s=this.#N[e],n=this.#T[e];return this.#j&&this.#z(n)?n.__abortController.abort(new Error("evicted")):(this.#P||this.#R)&&(this.#P&&this.#w?.(n,s,"evict"),this.#R&&this.#I?.push([n,s,"evict"])),this.#Z(e),t&&(this.#N[e]=void 0,this.#T[e]=void 0,this.#$.push(e)),1===this.#E?(this.#C=this.#M=0,this.#$.length=0):this.#C=this.#A[e],this.#x.delete(s),this.#E--,e}has(t,e={}){const{updateAgeOnHas:s=this.updateAgeOnHas,status:n}=e,i=this.#x.get(t);if(void 0!==i){const t=this.#T[i];if(this.#z(t)&&void 0===t.__staleWhileFetching)return!1;if(!this.#G(i))return s&&this.#Q(i),n&&(n.has="hit",this.#X(n,i)),!0;n&&(n.has="stale",this.#X(n,i))}else n&&(n.has="miss");return!1}peek(t,e={}){const{allowStale:s=this.allowStale}=e,n=this.#x.get(t);if(void 0===n||!s&&this.#G(n))return;const i=this.#T[n];return this.#z(i)?i.__staleWhileFetching:i}#W(t,e,s,n){const i=void 0===e?void 0:this.#T[e];if(this.#z(i))return i;const r=new pi,{signal:o}=s;o?.addEventListener("abort",(()=>r.abort(o.reason)),{signal:r.signal});const a={signal:r.signal,options:s,context:n},c=(n,i=!1)=>{const{aborted:o}=r.signal,c=s.ignoreFetchAbort&&void 0!==n;if(s.status&&(o&&!i?(s.status.fetchAborted=!0,s.status.fetchError=r.signal.reason,c&&(s.status.fetchAbortIgnored=!0)):s.status.fetchResolved=!0),o&&!c&&!i)return l(r.signal.reason);const u=h;return this.#T[e]===h&&(void 0===n?u.__staleWhileFetching?this.#T[e]=u.__staleWhileFetching:this.#H(t,"fetch"):(s.status&&(s.status.fetchUpdated=!0),this.set(t,n,a.options))),n},l=n=>{const{aborted:i}=r.signal,o=i&&s.allowStaleOnFetchAbort,a=o||s.allowStaleOnFetchRejection,c=a||s.noDeleteOnFetchRejection,l=h;if(this.#T[e]===h){!c||void 0===l.__staleWhileFetching?this.#H(t,"fetch"):o||(this.#T[e]=l.__staleWhileFetching)}if(a)return s.status&&void 0!==l.__staleWhileFetching&&(s.status.returnedStale=!0),l.__staleWhileFetching;if(l.__returned===l)throw n};s.status&&(s.status.fetchDispatched=!0);const h=new Promise(((e,n)=>{const o=this.#S?.(t,i,a);o&&o instanceof Promise&&o.then((t=>e(void 0===t?void 0:t)),n),r.signal.addEventListener("abort",(()=>{s.ignoreFetchAbort&&!s.allowStaleOnFetchAbort||(e(void 0),s.allowStaleOnFetchAbort&&(e=t=>c(t,!0)))}))})).then(c,(t=>(s.status&&(s.status.fetchRejected=!0,s.status.fetchError=t),l(t)))),u=Object.assign(h,{__abortController:r,__staleWhileFetching:i,__returned:void 0});return void 0===e?(this.set(t,u,{...a.options,status:void 0}),e=this.#x.get(t)):this.#T[e]=u,u}#z(t){if(!this.#j)return!1;const e=t;return!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof pi}async fetch(t,e={}){const{allowStale:s=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:r=this.ttl,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL,noDeleteOnFetchRejection:h=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:u=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:d=this.allowStaleOnFetchAbort,context:p,forceRefresh:m=!1,status:y,signal:g}=e;if(!this.#j)return y&&(y.fetch="get"),this.get(t,{allowStale:s,updateAgeOnGet:n,noDeleteOnStaleGet:i,status:y});const w={allowStale:s,updateAgeOnGet:n,noDeleteOnStaleGet:i,ttl:r,noDisposeOnSet:o,size:a,sizeCalculation:c,noUpdateTTL:l,noDeleteOnFetchRejection:h,allowStaleOnFetchRejection:u,allowStaleOnFetchAbort:d,ignoreFetchAbort:f,status:y,signal:g};let b=this.#x.get(t);if(void 0===b){y&&(y.fetch="miss");const e=this.#W(t,b,w,p);return e.__returned=e}{const e=this.#T[b];if(this.#z(e)){const t=s&&void 0!==e.__staleWhileFetching;return y&&(y.fetch="inflight",t&&(y.returnedStale=!0)),t?e.__staleWhileFetching:e.__returned=e}const i=this.#G(b);if(!m&&!i)return y&&(y.fetch="hit"),this.#U(b),n&&this.#Q(b),y&&this.#X(y,b),e;const r=this.#W(t,b,w,p),o=void 0!==r.__staleWhileFetching&&s;return y&&(y.fetch=i?"stale":"refresh",o&&i&&(y.returnedStale=!0)),o?r.__staleWhileFetching:r.__returned=r}}async forceFetch(t,e={}){const s=await this.fetch(t,e);if(void 0===s)throw new Error("fetch() returned undefined");return s}memo(t,e={}){const s=this.#k;if(!s)throw new Error("no memoMethod provided to constructor");const{context:n,forceRefresh:i,...r}=e,o=this.get(t,r);if(!i&&void 0!==o)return o;const a=s(t,o,{options:r,context:n});return this.set(t,a,r),a}get(t,e={}){const{allowStale:s=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,status:r}=e,o=this.#x.get(t);if(void 0!==o){const e=this.#T[o],a=this.#z(e);return r&&this.#X(r,o),this.#G(o)?(r&&(r.get="stale"),a?(r&&s&&void 0!==e.__staleWhileFetching&&(r.returnedStale=!0),s?e.__staleWhileFetching:void 0):(i||this.#H(t,"expire"),r&&s&&(r.returnedStale=!0),s?e:void 0)):(r&&(r.get="hit"),a?e.__staleWhileFetching:(this.#U(o),n&&this.#Q(o),e))}r&&(r.get="miss")}#it(t,e){this.#L[e]=t,this.#A[t]=e}#U(t){t!==this.#M&&(t===this.#C?this.#C=this.#A[t]:this.#it(this.#L[t],this.#A[t]),this.#it(this.#M,t),this.#M=t)}delete(t){return this.#H(t,"delete")}#H(t,e){let s=!1;if(0!==this.#E){const n=this.#x.get(t);if(void 0!==n)if(s=!0,1===this.#E)this.#rt(e);else{this.#Z(n);const s=this.#T[n];if(this.#z(s)?s.__abortController.abort(new Error("deleted")):(this.#P||this.#R)&&(this.#P&&this.#w?.(s,t,e),this.#R&&this.#I?.push([s,t,e])),this.#x.delete(t),this.#N[n]=void 0,this.#T[n]=void 0,n===this.#M)this.#M=this.#L[n];else if(n===this.#C)this.#C=this.#A[n];else{const t=this.#L[n];this.#A[t]=this.#A[n];const e=this.#A[n];this.#L[e]=this.#L[n]}this.#E--,this.#$.push(n)}}if(this.#R&&this.#I?.length){const t=this.#I;let e;for(;e=t?.shift();)this.#v?.(...e)}return s}clear(){return this.#rt("delete")}#rt(t){for(const e of this.#q({allowStale:!0})){const s=this.#T[e];if(this.#z(s))s.__abortController.abort(new Error("deleted"));else{const n=this.#N[e];this.#P&&this.#w?.(s,n,t),this.#R&&this.#I?.push([s,n,t])}}if(this.#x.clear(),this.#T.fill(void 0),this.#N.fill(void 0),this.#F&&this.#D&&(this.#F.fill(0),this.#D.fill(0)),this.#_&&this.#_.fill(0),this.#C=0,this.#M=0,this.#$.length=0,this.#O=0,this.#E=0,this.#R&&this.#I){const t=this.#I;let e;for(;e=t?.shift();)this.#v?.(...e)}}}const Si="object"==typeof process&&process?process:{stdout:null,stderr:null},ki=t=>!!t&&"object"==typeof t&&(t instanceof or||t instanceof Y||Ei(t)||Oi(t)),Ei=t=>!!t&&"object"==typeof t&&t instanceof G&&"function"==typeof t.pipe&&t.pipe!==Y.Writable.prototype.pipe,Oi=t=>!!t&&"object"==typeof t&&t instanceof G&&"function"==typeof t.write&&"function"==typeof t.end,xi=Symbol("EOF"),Ni=Symbol("maybeEmitEnd"),Ti=Symbol("emittedEnd"),Ai=Symbol("emittingEnd"),Li=Symbol("emittedError"),Ci=Symbol("closed"),Mi=Symbol("read"),$i=Symbol("flush"),Ii=Symbol("flushChunk"),_i=Symbol("encoding"),Di=Symbol("decoder"),Fi=Symbol("flowing"),Pi=Symbol("paused"),ji=Symbol("resume"),Ri=Symbol("buffer"),Bi=Symbol("pipes"),zi=Symbol("bufferLength"),Wi=Symbol("bufferPush"),Ui=Symbol("bufferShift"),Ki=Symbol("objectMode"),qi=Symbol("destroyed"),Gi=Symbol("error"),Yi=Symbol("emitData"),Vi=Symbol("emitEnd"),Ji=Symbol("emitEnd2"),Hi=Symbol("async"),Qi=Symbol("abort"),Xi=Symbol("aborted"),Zi=Symbol("signal"),tr=Symbol("dataListeners"),er=Symbol("discarded"),sr=t=>Promise.resolve().then(t),nr=t=>t();class ir{src;dest;opts;ondrain;constructor(t,e,s){this.src=t,this.dest=e,this.opts=s,this.ondrain=()=>t[ji](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(t){}end(){this.unpipe(),this.opts.end&&this.dest.end()}}class rr extends ir{unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(t,e,s){super(t,e,s),this.proxyErrors=t=>e.emit("error",t),t.on("error",this.proxyErrors)}}class or extends G{[Fi]=!1;[Pi]=!1;[Bi]=[];[Ri]=[];[Ki];[_i];[Hi];[Di];[xi]=!1;[Ti]=!1;[Ai]=!1;[Ci]=!1;[Li]=null;[zi]=0;[qi]=!1;[Zi];[Xi]=!1;[tr]=0;[er]=!1;writable=!0;readable=!0;constructor(...t){const e=t[0]||{};if(super(),e.objectMode&&"string"==typeof e.encoding)throw new TypeError("Encoding and objectMode may not be used together");e.objectMode?(this[Ki]=!0,this[_i]=null):(t=>!t.objectMode&&!!t.encoding&&"buffer"!==t.encoding)(e)?(this[_i]=e.encoding,this[Ki]=!1):(this[Ki]=!1,this[_i]=null),this[Hi]=!!e.async,this[Di]=this[_i]?new V(this[_i]):null,e&&!0===e.debugExposeBuffer&&Object.defineProperty(this,"buffer",{get:()=>this[Ri]}),e&&!0===e.debugExposePipes&&Object.defineProperty(this,"pipes",{get:()=>this[Bi]});const{signal:s}=e;s&&(this[Zi]=s,s.aborted?this[Qi]():s.addEventListener("abort",(()=>this[Qi]())))}get bufferLength(){return this[zi]}get encoding(){return this[_i]}set encoding(t){throw new Error("Encoding must be set at instantiation time")}setEncoding(t){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[Ki]}set objectMode(t){throw new Error("objectMode must be set at instantiation time")}get async(){return this[Hi]}set async(t){this[Hi]=this[Hi]||!!t}[Qi](){this[Xi]=!0,this.emit("abort",this[Zi]?.reason),this.destroy(this[Zi]?.reason)}get aborted(){return this[Xi]}set aborted(t){}write(t,e,s){if(this[Xi])return!1;if(this[xi])throw new Error("write after end");if(this[qi])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;"function"==typeof e&&(s=e,e="utf8"),e||(e="utf8");const n=this[Hi]?sr:nr;if(!this[Ki]&&!Buffer.isBuffer(t))if(i=t,!Buffer.isBuffer(i)&&ArrayBuffer.isView(i))t=Buffer.from(t.buffer,t.byteOffset,t.byteLength);else if((t=>t instanceof ArrayBuffer||!!t&&"object"==typeof t&&t.constructor&&"ArrayBuffer"===t.constructor.name&&t.byteLength>=0)(t))t=Buffer.from(t);else if("string"!=typeof t)throw new Error("Non-contiguous data written to non-objectMode stream");var i;return this[Ki]?(this[Fi]&&0!==this[zi]&&this[$i](!0),this[Fi]?this.emit("data",t):this[Wi](t),0!==this[zi]&&this.emit("readable"),s&&n(s),this[Fi]):t.length?("string"!=typeof t||e===this[_i]&&!this[Di]?.lastNeed||(t=Buffer.from(t,e)),Buffer.isBuffer(t)&&this[_i]&&(t=this[Di].write(t)),this[Fi]&&0!==this[zi]&&this[$i](!0),this[Fi]?this.emit("data",t):this[Wi](t),0!==this[zi]&&this.emit("readable"),s&&n(s),this[Fi]):(0!==this[zi]&&this.emit("readable"),s&&n(s),this[Fi])}read(t){if(this[qi])return null;if(this[er]=!1,0===this[zi]||0===t||t&&t>this[zi])return this[Ni](),null;this[Ki]&&(t=null),this[Ri].length>1&&!this[Ki]&&(this[Ri]=[this[_i]?this[Ri].join(""):Buffer.concat(this[Ri],this[zi])]);const e=this[Mi](t||null,this[Ri][0]);return this[Ni](),e}[Mi](t,e){if(this[Ki])this[Ui]();else{const s=e;t===s.length||null===t?this[Ui]():"string"==typeof s?(this[Ri][0]=s.slice(t),e=s.slice(0,t),this[zi]-=t):(this[Ri][0]=s.subarray(t),e=s.subarray(0,t),this[zi]-=t)}return this.emit("data",e),this[Ri].length||this[xi]||this.emit("drain"),e}end(t,e,s){return"function"==typeof t&&(s=t,t=void 0),"function"==typeof e&&(s=e,e="utf8"),void 0!==t&&this.write(t,e),s&&this.once("end",s),this[xi]=!0,this.writable=!1,!this[Fi]&&this[Pi]||this[Ni](),this}[ji](){this[qi]||(this[tr]||this[Bi].length||(this[er]=!0),this[Pi]=!1,this[Fi]=!0,this.emit("resume"),this[Ri].length?this[$i]():this[xi]?this[Ni]():this.emit("drain"))}resume(){return this[ji]()}pause(){this[Fi]=!1,this[Pi]=!0,this[er]=!1}get destroyed(){return this[qi]}get flowing(){return this[Fi]}get paused(){return this[Pi]}[Wi](t){this[Ki]?this[zi]+=1:this[zi]+=t.length,this[Ri].push(t)}[Ui](){return this[Ki]?this[zi]-=1:this[zi]-=this[Ri][0].length,this[Ri].shift()}[$i](t=!1){do{}while(this[Ii](this[Ui]())&&this[Ri].length);t||this[Ri].length||this[xi]||this.emit("drain")}[Ii](t){return this.emit("data",t),this[Fi]}pipe(t,e){if(this[qi])return t;this[er]=!1;const s=this[Ti];return e=e||{},t===Si.stdout||t===Si.stderr?e.end=!1:e.end=!1!==e.end,e.proxyErrors=!!e.proxyErrors,s?e.end&&t.end():(this[Bi].push(e.proxyErrors?new rr(this,t,e):new ir(this,t,e)),this[Hi]?sr((()=>this[ji]())):this[ji]()),t}unpipe(t){const e=this[Bi].find((e=>e.dest===t));e&&(1===this[Bi].length?(this[Fi]&&0===this[tr]&&(this[Fi]=!1),this[Bi]=[]):this[Bi].splice(this[Bi].indexOf(e),1),e.unpipe())}addListener(t,e){return this.on(t,e)}on(t,e){const s=super.on(t,e);if("data"===t)this[er]=!1,this[tr]++,this[Bi].length||this[Fi]||this[ji]();else if("readable"===t&&0!==this[zi])super.emit("readable");else if((t=>"end"===t||"finish"===t||"prefinish"===t)(t)&&this[Ti])super.emit(t),this.removeAllListeners(t);else if("error"===t&&this[Li]){const t=e;this[Hi]?sr((()=>t.call(this,this[Li]))):t.call(this,this[Li])}return s}removeListener(t,e){return this.off(t,e)}off(t,e){const s=super.off(t,e);return"data"===t&&(this[tr]=this.listeners("data").length,0!==this[tr]||this[er]||this[Bi].length||(this[Fi]=!1)),s}removeAllListeners(t){const e=super.removeAllListeners(t);return"data"!==t&&void 0!==t||(this[tr]=0,this[er]||this[Bi].length||(this[Fi]=!1)),e}get emittedEnd(){return this[Ti]}[Ni](){this[Ai]||this[Ti]||this[qi]||0!==this[Ri].length||!this[xi]||(this[Ai]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Ci]&&this.emit("close"),this[Ai]=!1)}emit(t,...e){const s=e[0];if("error"!==t&&"close"!==t&&t!==qi&&this[qi])return!1;if("data"===t)return!(!this[Ki]&&!s)&&(this[Hi]?(sr((()=>this[Yi](s))),!0):this[Yi](s));if("end"===t)return this[Vi]();if("close"===t){if(this[Ci]=!0,!this[Ti]&&!this[qi])return!1;const t=super.emit("close");return this.removeAllListeners("close"),t}if("error"===t){this[Li]=s,super.emit(Gi,s);const t=!(this[Zi]&&!this.listeners("error").length)&&super.emit("error",s);return this[Ni](),t}if("resume"===t){const t=super.emit("resume");return this[Ni](),t}if("finish"===t||"prefinish"===t){const e=super.emit(t);return this.removeAllListeners(t),e}const n=super.emit(t,...e);return this[Ni](),n}[Yi](t){for(const e of this[Bi])!1===e.dest.write(t)&&this.pause();const e=!this[er]&&super.emit("data",t);return this[Ni](),e}[Vi](){return!this[Ti]&&(this[Ti]=!0,this.readable=!1,this[Hi]?(sr((()=>this[Ji]())),!0):this[Ji]())}[Ji](){if(this[Di]){const t=this[Di].end();if(t){for(const e of this[Bi])e.dest.write(t);this[er]||super.emit("data",t)}}for(const t of this[Bi])t.end();const t=super.emit("end");return this.removeAllListeners("end"),t}async collect(){const t=Object.assign([],{dataLength:0});this[Ki]||(t.dataLength=0);const e=this.promise();return this.on("data",(e=>{t.push(e),this[Ki]||(t.dataLength+=e.length)})),await e,t}async concat(){if(this[Ki])throw new Error("cannot concat in objectMode");const t=await this.collect();return this[_i]?t.join(""):Buffer.concat(t,t.dataLength)}async promise(){return new Promise(((t,e)=>{this.on(qi,(()=>e(new Error("stream destroyed")))),this.on("error",(t=>e(t))),this.on("end",(()=>t()))}))}[Symbol.asyncIterator](){this[er]=!1;let t=!1;const e=async()=>(this.pause(),t=!0,{value:void 0,done:!0});return{next:()=>{if(t)return e();const s=this.read();if(null!==s)return Promise.resolve({done:!1,value:s});if(this[xi])return e();let n,i;const r=t=>{this.off("data",o),this.off("end",a),this.off(qi,c),e(),i(t)},o=t=>{this.off("error",r),this.off("end",a),this.off(qi,c),this.pause(),n({value:t,done:!!this[xi]})},a=()=>{this.off("error",r),this.off("data",o),this.off(qi,c),e(),n({done:!0,value:void 0})},c=()=>r(new Error("stream destroyed"));return new Promise(((t,e)=>{i=e,n=t,this.once(qi,c),this.once("error",r),this.once("end",a),this.once("data",o)}))},throw:e,return:e,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[er]=!1;let t=!1;const e=()=>(this.pause(),this.off(Gi,e),this.off(qi,e),this.off("end",e),t=!0,{done:!0,value:void 0});return this.once("end",e),this.once(Gi,e),this.once(qi,e),{next:()=>{if(t)return e();const s=this.read();return null===s?e():{done:!1,value:s}},throw:e,return:e,[Symbol.iterator](){return this}}}destroy(t){if(this[qi])return t?this.emit("error",t):this.emit(qi),this;this[qi]=!0,this[er]=!0,this[Ri].length=0,this[zi]=0;return"function"!=typeof this.close||this[Ci]||this.close(),t?this.emit("error",t):this.emit(qi),this}static get isStream(){return ki}}const ar=S.native,cr={lstatSync:x,readdir:O,readdirSync:E,readlinkSync:k,realpathSync:ar,promises:{lstat:q,readdir:K,readlink:U,realpath:W}},lr=e=>e&&e!==cr&&e!==t?{...cr,...e,promises:{...cr.promises,...e.promises||{}}}:cr,hr=/^\\\\\?\\([a-z]:)\\?$/i,ur=/[\\\/]/,fr=10,dr=15,pr=-16,mr=128,yr=256,gr=512,wr=t=>t.isFile()?8:t.isDirectory()?4:t.isSymbolicLink()?fr:t.isCharacterDevice()?2:t.isBlockDevice()?6:t.isSocket()?12:t.isFIFO()?1:0,br=new Map,vr=t=>{const e=br.get(t);if(e)return e;const s=t.normalize("NFKD");return br.set(t,s),s},Sr=new Map,kr=t=>{const e=Sr.get(t);if(e)return e;const s=vr(t.toLowerCase());return Sr.set(t,s),s};class Er extends vi{constructor(){super({max:256})}}class Or extends vi{constructor(t=16384){super({maxSize:t,sizeCalculation:t=>t.length+1})}}const xr=Symbol("PathScurry setAsCwd");class Nr{name;root;roots;parent;nocase;isCWD=!1;#ot;#at;get dev(){return this.#at}#ct;get mode(){return this.#ct}#lt;get nlink(){return this.#lt}#ht;get uid(){return this.#ht}#ut;get gid(){return this.#ut}#ft;get rdev(){return this.#ft}#dt;get blksize(){return this.#dt}#pt;get ino(){return this.#pt}#E;get size(){return this.#E}#mt;get blocks(){return this.#mt}#yt;get atimeMs(){return this.#yt}#gt;get mtimeMs(){return this.#gt}#wt;get ctimeMs(){return this.#wt}#bt;get birthtimeMs(){return this.#bt}#vt;get atime(){return this.#vt}#St;get mtime(){return this.#St}#kt;get ctime(){return this.#kt}#Et;get birthtime(){return this.#Et}#Ot;#xt;#Nt;#Tt;#At;#Lt;#Ct;#Mt;#$t;#It;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(t,e=0,s,n,i,r,o){this.name=t,this.#Ot=i?kr(t):vr(t),this.#Ct=1023&e,this.nocase=i,this.roots=n,this.root=s||this,this.#Mt=r,this.#Nt=o.fullpath,this.#At=o.relative,this.#Lt=o.relativePosix,this.parent=o.parent,this.parent?this.#ot=this.parent.#ot:this.#ot=lr(o.fs)}depth(){return void 0!==this.#xt?this.#xt:this.parent?this.#xt=this.parent.depth()+1:this.#xt=0}childrenCache(){return this.#Mt}resolve(t){if(!t)return this;const e=this.getRootString(t),s=t.substring(e.length).split(this.splitSep);return e?this.getRoot(e).#_t(s):this.#_t(s)}#_t(t){let e=this;for(const s of t)e=e.child(s);return e}children(){const t=this.#Mt.get(this);if(t)return t;const e=Object.assign([],{provisional:0});return this.#Mt.set(this,e),this.#Ct&=-17,e}child(t,e){if(""===t||"."===t)return this;if(".."===t)return this.parent||this;const s=this.children(),n=this.nocase?kr(t):vr(t);for(const t of s)if(t.#Ot===n)return t;const i=this.parent?this.sep:"",r=this.#Nt?this.#Nt+i+t:void 0,o=this.newChild(t,0,{...e,parent:this,fullpath:r});return this.canReaddir()||(o.#Ct|=mr),s.push(o),o}relative(){if(this.isCWD)return"";if(void 0!==this.#At)return this.#At;const t=this.name,e=this.parent;if(!e)return this.#At=this.name;const s=e.relative();return s+(s&&e.parent?this.sep:"")+t}relativePosix(){if("/"===this.sep)return this.relative();if(this.isCWD)return"";if(void 0!==this.#Lt)return this.#Lt;const t=this.name,e=this.parent;if(!e)return this.#Lt=this.fullpathPosix();const s=e.relativePosix();return s+(s&&e.parent?"/":"")+t}fullpath(){if(void 0!==this.#Nt)return this.#Nt;const t=this.name,e=this.parent;if(!e)return this.#Nt=this.name;const s=e.fullpath()+(e.parent?this.sep:"")+t;return this.#Nt=s}fullpathPosix(){if(void 0!==this.#Tt)return this.#Tt;if("/"===this.sep)return this.#Tt=this.fullpath();if(!this.parent){const t=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(t)?this.#Tt=`//?/${t}`:this.#Tt=t}const t=this.parent,e=t.fullpathPosix(),s=e+(e&&t.parent?"/":"")+this.name;return this.#Tt=s}isUnknown(){return 0===(this.#Ct&dr)}isType(t){return this[`is${t}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return 8===(this.#Ct&dr)}isDirectory(){return 4===(this.#Ct&dr)}isCharacterDevice(){return 2===(this.#Ct&dr)}isBlockDevice(){return 6===(this.#Ct&dr)}isFIFO(){return 1===(this.#Ct&dr)}isSocket(){return 12===(this.#Ct&dr)}isSymbolicLink(){return(this.#Ct&fr)===fr}lstatCached(){return 32&this.#Ct?this:void 0}readlinkCached(){return this.#$t}realpathCached(){return this.#It}readdirCached(){const t=this.children();return t.slice(0,t.provisional)}canReadlink(){if(this.#$t)return!0;if(!this.parent)return!1;const t=this.#Ct&dr;return!(0!==t&&t!==fr||this.#Ct&yr||this.#Ct&mr)}calledReaddir(){return!!(16&this.#Ct)}isENOENT(){return!!(this.#Ct&mr)}isNamed(t){return this.nocase?this.#Ot===kr(t):this.#Ot===vr(t)}async readlink(){const t=this.#$t;if(t)return t;if(this.canReadlink()&&this.parent)try{const t=await this.#ot.promises.readlink(this.fullpath()),e=(await this.parent.realpath())?.resolve(t);if(e)return this.#$t=e}catch(t){return void this.#Dt(t.code)}}readlinkSync(){const t=this.#$t;if(t)return t;if(this.canReadlink()&&this.parent)try{const t=this.#ot.readlinkSync(this.fullpath()),e=this.parent.realpathSync()?.resolve(t);if(e)return this.#$t=e}catch(t){return void this.#Dt(t.code)}}#Ft(t){this.#Ct|=16;for(let e=t.provisional;e<t.length;e++){const s=t[e];s&&s.#Pt()}}#Pt(){this.#Ct&mr||(this.#Ct=(this.#Ct|mr)&pr,this.#jt())}#jt(){const t=this.children();t.provisional=0;for(const e of t)e.#Pt()}#Rt(){this.#Ct|=gr,this.#Bt()}#Bt(){if(64&this.#Ct)return;let t=this.#Ct;4===(t&dr)&&(t&=pr),this.#Ct=64|t,this.#jt()}#zt(t=""){"ENOTDIR"===t||"EPERM"===t?this.#Bt():"ENOENT"===t?this.#Pt():this.children().provisional=0}#Wt(t=""){if("ENOTDIR"===t){this.parent.#Bt()}else"ENOENT"===t&&this.#Pt()}#Dt(t=""){let e=this.#Ct;e|=yr,"ENOENT"===t&&(e|=mr),"EINVAL"!==t&&"UNKNOWN"!==t||(e&=pr),this.#Ct=e,"ENOTDIR"===t&&this.parent&&this.parent.#Bt()}#Ut(t,e){return this.#Kt(t,e)||this.#qt(t,e)}#qt(t,e){const s=wr(t),n=this.newChild(t.name,s,{parent:this}),i=n.#Ct&dr;return 4!==i&&i!==fr&&0!==i&&(n.#Ct|=64),e.unshift(n),e.provisional++,n}#Kt(t,e){for(let s=e.provisional;s<e.length;s++){const n=e[s];if((this.nocase?kr(t.name):vr(t.name))===n.#Ot)return this.#Gt(t,n,s,e)}}#Gt(t,e,s,n){const i=e.name;return e.#Ct=e.#Ct&pr|wr(t),i!==t.name&&(e.name=t.name),s!==n.provisional&&(s===n.length-1?n.pop():n.splice(s,1),n.unshift(e)),n.provisional++,e}async lstat(){if(0===(this.#Ct&mr))try{return this.#Yt(await this.#ot.promises.lstat(this.fullpath())),this}catch(t){this.#Wt(t.code)}}lstatSync(){if(0===(this.#Ct&mr))try{return this.#Yt(this.#ot.lstatSync(this.fullpath())),this}catch(t){this.#Wt(t.code)}}#Yt(t){const{atime:e,atimeMs:s,birthtime:n,birthtimeMs:i,blksize:r,blocks:o,ctime:a,ctimeMs:c,dev:l,gid:h,ino:u,mode:f,mtime:d,mtimeMs:p,nlink:m,rdev:y,size:g,uid:w}=t;this.#vt=e,this.#yt=s,this.#Et=n,this.#bt=i,this.#dt=r,this.#mt=o,this.#kt=a,this.#wt=c,this.#at=l,this.#ut=h,this.#pt=u,this.#ct=f,this.#St=d,this.#gt=p,this.#lt=m,this.#ft=y,this.#E=g,this.#ht=w;const b=wr(t);this.#Ct=this.#Ct&pr|b|32,0!==b&&4!==b&&b!==fr&&(this.#Ct|=64)}#Vt=[];#Jt=!1;#Ht(t){this.#Jt=!1;const e=this.#Vt.slice();this.#Vt.length=0,e.forEach((e=>e(null,t)))}readdirCB(t,e=!1){if(!this.canReaddir())return void(e?t(null,[]):queueMicrotask((()=>t(null,[]))));const s=this.children();if(this.calledReaddir()){const n=s.slice(0,s.provisional);return void(e?t(null,n):queueMicrotask((()=>t(null,n))))}if(this.#Vt.push(t),this.#Jt)return;this.#Jt=!0;const n=this.fullpath();this.#ot.readdir(n,{withFileTypes:!0},((t,e)=>{if(t)this.#zt(t.code),s.provisional=0;else{for(const t of e)this.#Ut(t,s);this.#Ft(s)}this.#Ht(s.slice(0,s.provisional))}))}#Qt;async readdir(){if(!this.canReaddir())return[];const t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);const e=this.fullpath();if(this.#Qt)await this.#Qt;else{let s=()=>{};this.#Qt=new Promise((t=>s=t));try{for(const s of await this.#ot.promises.readdir(e,{withFileTypes:!0}))this.#Ut(s,t);this.#Ft(t)}catch(e){this.#zt(e.code),t.provisional=0}this.#Qt=void 0,s()}return t.slice(0,t.provisional)}readdirSync(){if(!this.canReaddir())return[];const t=this.children();if(this.calledReaddir())return t.slice(0,t.provisional);const e=this.fullpath();try{for(const s of this.#ot.readdirSync(e,{withFileTypes:!0}))this.#Ut(s,t);this.#Ft(t)}catch(e){this.#zt(e.code),t.provisional=0}return t.slice(0,t.provisional)}canReaddir(){if(704&this.#Ct)return!1;const t=dr&this.#Ct;return 0===t||4===t||t===fr}shouldWalk(t,e){return!(4&~this.#Ct)&&!(704&this.#Ct)&&!t.has(this)&&(!e||e(this))}async realpath(){if(this.#It)return this.#It;if(!(896&this.#Ct))try{const t=await this.#ot.promises.realpath(this.fullpath());return this.#It=this.resolve(t)}catch(t){this.#Rt()}}realpathSync(){if(this.#It)return this.#It;if(!(896&this.#Ct))try{const t=this.#ot.realpathSync(this.fullpath());return this.#It=this.resolve(t)}catch(t){this.#Rt()}}[xr](t){if(t===this)return;t.isCWD=!1,this.isCWD=!0;const e=new Set([]);let s=[],n=this;for(;n&&n.parent;)e.add(n),n.#At=s.join(this.sep),n.#Lt=s.join("/"),n=n.parent,s.push("..");for(n=t;n&&n.parent&&!e.has(n);)n.#At=void 0,n.#Lt=void 0,n=n.parent}}class Tr extends Nr{sep="\\";splitSep=ur;constructor(t,e=0,s,n,i,r,o){super(t,e,s,n,i,r,o)}newChild(t,e=0,s={}){return new Tr(t,e,this.root,this.roots,this.nocase,this.childrenCache(),s)}getRootString(t){return f.parse(t).root}getRoot(t){if((t=(t=>t.replace(/\//g,"\\").replace(hr,"$1\\"))(t.toUpperCase()))===this.root.name)return this.root;for(const[e,s]of Object.entries(this.roots))if(this.sameRoot(t,e))return this.roots[t]=s;return this.roots[t]=new Cr(t,this).root}sameRoot(t,e=this.root.name){return(t=t.toUpperCase().replace(/\//g,"\\").replace(hr,"$1\\"))===e}}class Ar extends Nr{splitSep="/";sep="/";constructor(t,e=0,s,n,i,r,o){super(t,e,s,n,i,r,o)}getRootString(t){return t.startsWith("/")?"/":""}getRoot(t){return this.root}newChild(t,e=0,s={}){return new Ar(t,e,this.root,this.roots,this.nocase,this.childrenCache(),s)}}class Lr{root;rootPath;roots;cwd;#Xt;#Zt;#Mt;nocase;#ot;constructor(t=process.cwd(),e,s,{nocase:n,childrenCacheSize:i=16384,fs:r=cr}={}){this.#ot=lr(r),(t instanceof URL||t.startsWith("file://"))&&(t=z(t));const o=e.resolve(t);this.roots=Object.create(null),this.rootPath=this.parseRootPath(o),this.#Xt=new Er,this.#Zt=new Er,this.#Mt=new Or(i);const a=o.substring(this.rootPath.length).split(s);if(1!==a.length||a[0]||a.pop(),void 0===n)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=n,this.root=this.newRoot(this.#ot),this.roots[this.rootPath]=this.root;let c=this.root,l=a.length-1;const h=e.sep;let u=this.rootPath,f=!1;for(const t of a){const e=l--;c=c.child(t,{relative:new Array(e).fill("..").join(h),relativePosix:new Array(e).fill("..").join("/"),fullpath:u+=(f?"":h)+t}),f=!0}this.cwd=c}depth(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.depth()}childrenCache(){return this.#Mt}resolve(...t){let e="";for(let s=t.length-1;s>=0;s--){const n=t[s];if(n&&"."!==n&&(e=e?`${n}/${e}`:n,this.isAbsolute(n)))break}const s=this.#Xt.get(e);if(void 0!==s)return s;const n=this.cwd.resolve(e).fullpath();return this.#Xt.set(e,n),n}resolvePosix(...t){let e="";for(let s=t.length-1;s>=0;s--){const n=t[s];if(n&&"."!==n&&(e=e?`${n}/${e}`:n,this.isAbsolute(n)))break}const s=this.#Zt.get(e);if(void 0!==s)return s;const n=this.cwd.resolve(e).fullpathPosix();return this.#Zt.set(e,n),n}relative(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.relative()}relativePosix(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.relativePosix()}basename(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.name}dirname(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),(t.parent||t).fullpath()}async readdir(t=this.cwd,e={withFileTypes:!0}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Nr||(e=t,t=this.cwd);const{withFileTypes:s}=e;if(t.canReaddir()){const e=await t.readdir();return s?e:e.map((t=>t.name))}return[]}readdirSync(t=this.cwd,e={withFileTypes:!0}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Nr||(e=t,t=this.cwd);const{withFileTypes:s=!0}=e;return t.canReaddir()?s?t.readdirSync():t.readdirSync().map((t=>t.name)):[]}async lstat(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.lstat()}lstatSync(t=this.cwd){return"string"==typeof t&&(t=this.cwd.resolve(t)),t.lstatSync()}async readlink(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Nr||(e=t.withFileTypes,t=this.cwd);const s=await t.readlink();return e?s:s?.fullpath()}readlinkSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Nr||(e=t.withFileTypes,t=this.cwd);const s=t.readlinkSync();return e?s:s?.fullpath()}async realpath(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Nr||(e=t.withFileTypes,t=this.cwd);const s=await t.realpath();return e?s:s?.fullpath()}realpathSync(t=this.cwd,{withFileTypes:e}={withFileTypes:!1}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Nr||(e=t.withFileTypes,t=this.cwd);const s=t.realpathSync();return e?s:s?.fullpath()}async walk(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Nr||(e=t,t=this.cwd);const{withFileTypes:s=!0,follow:n=!1,filter:i,walkFilter:r}=e,o=[];i&&!i(t)||o.push(s?t:t.fullpath());const a=new Set,c=(t,e)=>{a.add(t),t.readdirCB(((t,l)=>{if(t)return e(t);let h=l.length;if(!h)return e();const u=()=>{0===--h&&e()};for(const t of l)i&&!i(t)||o.push(s?t:t.fullpath()),n&&t.isSymbolicLink()?t.realpath().then((t=>t?.isUnknown()?t.lstat():t)).then((t=>t?.shouldWalk(a,r)?c(t,u):u())):t.shouldWalk(a,r)?c(t,u):u()}),!0)},l=t;return new Promise(((t,e)=>{c(l,(s=>{if(s)return e(s);t(o)}))}))}walkSync(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Nr||(e=t,t=this.cwd);const{withFileTypes:s=!0,follow:n=!1,filter:i,walkFilter:r}=e,o=[];i&&!i(t)||o.push(s?t:t.fullpath());const a=new Set([t]);for(const t of a){const e=t.readdirSync();for(const t of e){i&&!i(t)||o.push(s?t:t.fullpath());let e=t;if(t.isSymbolicLink()){if(!n||!(e=t.realpathSync()))continue;e.isUnknown()&&e.lstatSync()}e.shouldWalk(a,r)&&a.add(e)}}return o}[Symbol.asyncIterator](){return this.iterate()}iterate(t=this.cwd,e={}){return"string"==typeof t?t=this.cwd.resolve(t):t instanceof Nr||(e=t,t=this.cwd),this.stream(t,e)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Nr||(e=t,t=this.cwd);const{withFileTypes:s=!0,follow:n=!1,filter:i,walkFilter:r}=e;i&&!i(t)||(yield s?t:t.fullpath());const o=new Set([t]);for(const t of o){const e=t.readdirSync();for(const t of e){i&&!i(t)||(yield s?t:t.fullpath());let e=t;if(t.isSymbolicLink()){if(!n||!(e=t.realpathSync()))continue;e.isUnknown()&&e.lstatSync()}e.shouldWalk(o,r)&&o.add(e)}}}stream(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Nr||(e=t,t=this.cwd);const{withFileTypes:s=!0,follow:n=!1,filter:i,walkFilter:r}=e,o=new or({objectMode:!0});i&&!i(t)||o.write(s?t:t.fullpath());const a=new Set,c=[t];let l=0;const h=()=>{let t=!1;for(;!t;){const e=c.shift();if(!e)return void(0===l&&o.end());l++,a.add(e);const u=(e,d,p=!1)=>{if(e)return o.emit("error",e);if(n&&!p){const t=[];for(const e of d)e.isSymbolicLink()&&t.push(e.realpath().then((t=>t?.isUnknown()?t.lstat():t)));if(t.length)return void Promise.all(t).then((()=>u(null,d,!0)))}for(const e of d)!e||i&&!i(e)||o.write(s?e:e.fullpath())||(t=!0);l--;for(const t of d){const e=t.realpathCached()||t;e.shouldWalk(a,r)&&c.push(e)}t&&!o.flowing?o.once("drain",h):f||h()};let f=!0;e.readdirCB(u,!0),f=!1}};return h(),o}streamSync(t=this.cwd,e={}){"string"==typeof t?t=this.cwd.resolve(t):t instanceof Nr||(e=t,t=this.cwd);const{withFileTypes:s=!0,follow:n=!1,filter:i,walkFilter:r}=e,o=new or({objectMode:!0}),a=new Set;i&&!i(t)||o.write(s?t:t.fullpath());const c=[t];let l=0;const h=()=>{let t=!1;for(;!t;){const e=c.shift();if(!e)return void(0===l&&o.end());l++,a.add(e);const h=e.readdirSync();for(const e of h)i&&!i(e)||o.write(s?e:e.fullpath())||(t=!0);l--;for(const t of h){let e=t;if(t.isSymbolicLink()){if(!n||!(e=t.realpathSync()))continue;e.isUnknown()&&e.lstatSync()}e.shouldWalk(a,r)&&c.push(e)}}t&&!o.flowing&&o.once("drain",h)};return h(),o}chdir(t=this.cwd){const e=this.cwd;this.cwd="string"==typeof t?this.cwd.resolve(t):t,this.cwd[xr](e)}}class Cr extends Lr{sep="\\";constructor(t=process.cwd(),e={}){const{nocase:s=!0}=e;super(t,f,"\\",{...e,nocase:s}),this.nocase=s;for(let t=this.cwd;t;t=t.parent)t.nocase=this.nocase}parseRootPath(t){return f.parse(t).root.toUpperCase()}newRoot(t){return new Tr(this.rootPath,4,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")||t.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(t)}}class Mr extends Lr{sep="/";constructor(t=process.cwd(),e={}){const{nocase:s=!1}=e;super(t,d,"/",{...e,nocase:s}),this.nocase=s}parseRootPath(t){return"/"}newRoot(t){return new Ar(this.rootPath,4,void 0,this.roots,this.nocase,this.childrenCache(),{fs:t})}isAbsolute(t){return t.startsWith("/")}}class $r extends Mr{constructor(t=process.cwd(),e={}){const{nocase:s=!0}=e;super(t,{...e,nocase:s})}}process.platform;const Ir="win32"===process.platform?Cr:"darwin"===process.platform?$r:Mr;class _r{#te;#ee;#se;length;#ne;#ie;#re;#oe;#ae;#ce;#le=!0;constructor(t,e,s,n){if(!(t.length>=1))throw new TypeError("empty pattern list");if(!(e.length>=1))throw new TypeError("empty glob list");if(e.length!==t.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=t.length,s<0||s>=this.length)throw new TypeError("index out of range");if(this.#te=t,this.#ee=e,this.#se=s,this.#ne=n,0===this.#se)if(this.isUNC()){const[t,e,s,n,...i]=this.#te,[r,o,a,c,...l]=this.#ee;""===i[0]&&(i.shift(),l.shift());const h=[t,e,s,n,""].join("/"),u=[r,o,a,c,""].join("/");this.#te=[h,...i],this.#ee=[u,...l],this.length=this.#te.length}else if(this.isDrive()||this.isAbsolute()){const[t,...e]=this.#te,[s,...n]=this.#ee;""===e[0]&&(e.shift(),n.shift());const i=t+"/",r=s+"/";this.#te=[i,...e],this.#ee=[r,...n],this.length=this.#te.length}}pattern(){return this.#te[this.#se]}isString(){return"string"==typeof this.#te[this.#se]}isGlobstar(){return this.#te[this.#se]===ri}isRegExp(){return this.#te[this.#se]instanceof RegExp}globString(){return this.#re=this.#re||(0===this.#se?this.isAbsolute()?this.#ee[0]+this.#ee.slice(1).join("/"):this.#ee.join("/"):this.#ee.slice(this.#se).join("/"))}hasMore(){return this.length>this.#se+1}rest(){return void 0!==this.#ie?this.#ie:this.hasMore()?(this.#ie=new _r(this.#te,this.#ee,this.#se+1,this.#ne),this.#ie.#ce=this.#ce,this.#ie.#ae=this.#ae,this.#ie.#oe=this.#oe,this.#ie):this.#ie=null}isUNC(){const t=this.#te;return void 0!==this.#ae?this.#ae:this.#ae="win32"===this.#ne&&0===this.#se&&""===t[0]&&""===t[1]&&"string"==typeof t[2]&&!!t[2]&&"string"==typeof t[3]&&!!t[3]}isDrive(){const t=this.#te;return void 0!==this.#oe?this.#oe:this.#oe="win32"===this.#ne&&0===this.#se&&this.length>1&&"string"==typeof t[0]&&/^[a-z]:$/i.test(t[0])}isAbsolute(){const t=this.#te;return void 0!==this.#ce?this.#ce:this.#ce=""===t[0]&&t.length>1||this.isDrive()||this.isUNC()}root(){const t=this.#te[0];return"string"==typeof t&&this.isAbsolute()&&0===this.#se?t:""}checkFollowGlobstar(){return!(0===this.#se||!this.isGlobstar()||!this.#le)}markFollowGlobstar(){return!(0===this.#se||!this.isGlobstar()||!this.#le)&&(this.#le=!1,!0)}}const Dr="object"==typeof process&&process&&"string"==typeof process.platform?process.platform:"linux";class Fr{relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(t,{nobrace:e,nocase:s,noext:n,noglobstar:i,platform:r=Dr}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=r,this.mmopts={dot:!0,nobrace:e,nocase:s,noext:n,noglobstar:i,optimizationLevel:2,platform:r,nocomment:!0,nonegate:!0};for(const e of t)this.add(e)}add(t){const e=new li(t,this.mmopts);for(let t=0;t<e.set.length;t++){const s=e.set[t],n=e.globParts[t];if(!s||!n)throw new Error("invalid pattern object");for(;"."===s[0]&&"."===n[0];)s.shift(),n.shift();const i=new _r(s,n,0,this.platform),r=new li(i.globString(),this.mmopts),o="**"===n[n.length-1],a=i.isAbsolute();a?this.absolute.push(r):this.relative.push(r),o&&(a?this.absoluteChildren.push(r):this.relativeChildren.push(r))}}ignored(t){const e=t.fullpath(),s=`${e}/`,n=t.relative()||".",i=`${n}/`;for(const t of this.relative)if(t.match(n)||t.match(i))return!0;for(const t of this.absolute)if(t.match(e)||t.match(s))return!0;return!1}childrenIgnored(t){const e=t.fullpath()+"/",s=(t.relative()||".")+"/";for(const t of this.relativeChildren)if(t.match(s))return!0;for(const t of this.absoluteChildren)if(t.match(e))return!0;return!1}}class Pr{store;constructor(t=new Map){this.store=t}copy(){return new Pr(new Map(this.store))}hasWalked(t,e){return this.store.get(t.fullpath())?.has(e.globString())}storeWalked(t,e){const s=t.fullpath(),n=this.store.get(s);n?n.add(e.globString()):this.store.set(s,new Set([e.globString()]))}}class jr{store=new Map;add(t,e,s){const n=(e?2:0)|(s?1:0),i=this.store.get(t);this.store.set(t,void 0===i?n:n&i)}entries(){return[...this.store.entries()].map((([t,e])=>[t,!!(2&e),!!(1&e)]))}}class Rr{store=new Map;add(t,e){if(!t.canReaddir())return;const s=this.store.get(t);s?s.find((t=>t.globString()===e.globString()))||s.push(e):this.store.set(t,[e])}get(t){const e=this.store.get(t);if(!e)throw new Error("attempting to walk unknown path");return e}entries(){return this.keys().map((t=>[t,this.store.get(t)]))}keys(){return[...this.store.keys()].filter((t=>t.canReaddir()))}}class Br{hasWalkedCache;matches=new jr;subwalks=new Rr;patterns;follow;dot;opts;constructor(t,e){this.opts=t,this.follow=!!t.follow,this.dot=!!t.dot,this.hasWalkedCache=e?e.copy():new Pr}processPatterns(t,e){this.patterns=e;const s=e.map((e=>[t,e]));for(let[t,e]of s){this.hasWalkedCache.storeWalked(t,e);const s=e.root(),n=e.isAbsolute()&&!1!==this.opts.absolute;if(s){t=t.resolve("/"===s&&void 0!==this.opts.root?this.opts.root:s);const n=e.rest();if(!n){this.matches.add(t,!0,!1);continue}e=n}if(t.isENOENT())continue;let i,r,o=!1;for(;"string"==typeof(i=e.pattern())&&(r=e.rest());){const s=t.resolve(i);t=s,e=r,o=!0}if(i=e.pattern(),r=e.rest(),o){if(this.hasWalkedCache.hasWalked(t,e))continue;this.hasWalkedCache.storeWalked(t,e)}if("string"!=typeof i)if(i===ri){(!t.isSymbolicLink()||this.follow||e.checkFollowGlobstar())&&this.subwalks.add(t,e);const s=r?.pattern(),i=r?.rest();if(r&&(""!==s&&"."!==s||i)){if(".."===s){const e=t.parent||t;i?this.hasWalkedCache.hasWalked(e,i)||this.subwalks.add(e,i):this.matches.add(e,n,!0)}}else this.matches.add(t,n,""===s||"."===s)}else i instanceof RegExp&&this.subwalks.add(t,e);else{const e=".."===i||""===i||"."===i;this.matches.add(t.resolve(i),n,e)}}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new Br(this.opts,this.hasWalkedCache)}filterEntries(t,e){const s=this.subwalks.get(t),n=this.child();for(const t of e)for(const e of s){const s=e.isAbsolute(),i=e.pattern(),r=e.rest();i===ri?n.testGlobstar(t,e,r,s):i instanceof RegExp?n.testRegExp(t,i,r,s):n.testString(t,i,r,s)}return n}testGlobstar(t,e,s,n){if(!this.dot&&t.name.startsWith(".")||(e.hasMore()||this.matches.add(t,n,!1),t.canReaddir()&&(this.follow||!t.isSymbolicLink()?this.subwalks.add(t,e):t.isSymbolicLink()&&(s&&e.checkFollowGlobstar()?this.subwalks.add(t,s):e.markFollowGlobstar()&&this.subwalks.add(t,e)))),s){const e=s.pattern();if("string"==typeof e&&".."!==e&&""!==e&&"."!==e)this.testString(t,e,s.rest(),n);else if(".."===e){const e=t.parent||t;this.subwalks.add(e,s)}else e instanceof RegExp&&this.testRegExp(t,e,s.rest(),n)}}testRegExp(t,e,s,n){e.test(t.name)&&(s?this.subwalks.add(t,s):this.matches.add(t,n,!1))}testString(t,e,s,n){t.isNamed(e)&&(s?this.subwalks.add(t,s):this.matches.add(t,n,!1))}}class zr{path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#he=[];#ue;#fe;signal;maxDepth;includeChildMatches;constructor(t,e,s){if(this.patterns=t,this.path=e,this.opts=s,this.#fe=s.posix||"win32"!==s.platform?"/":"\\",this.includeChildMatches=!1!==s.includeChildMatches,(s.ignore||!this.includeChildMatches)&&(this.#ue=((t,e)=>"string"==typeof t?new Fr([t],e):Array.isArray(t)?new Fr(t,e):t)(s.ignore??[],s),!this.includeChildMatches&&"function"!=typeof this.#ue.add)){throw new Error("cannot ignore child matches, ignore lacks add() method.")}this.maxDepth=s.maxDepth||1/0,s.signal&&(this.signal=s.signal,this.signal.addEventListener("abort",(()=>{this.#he.length=0})))}#de(t){return this.seen.has(t)||!!this.#ue?.ignored?.(t)}#pe(t){return!!this.#ue?.childrenIgnored?.(t)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;let t;for(this.paused=!1;!this.paused&&(t=this.#he.shift());)t()}onResume(t){this.signal?.aborted||(this.paused?this.#he.push(t):t())}async matchCheck(t,e){if(e&&this.opts.nodir)return;let s;if(this.opts.realpath){if(s=t.realpathCached()||await t.realpath(),!s)return;t=s}const n=t.isUnknown()||this.opts.stat?await t.lstat():t;if(this.opts.follow&&this.opts.nodir&&n?.isSymbolicLink()){const t=await n.realpath();t&&(t.isUnknown()||this.opts.stat)&&await t.lstat()}return this.matchCheckTest(n,e)}matchCheckTest(t,e){return!t||!(this.maxDepth===1/0||t.depth()<=this.maxDepth)||e&&!t.canReaddir()||this.opts.nodir&&t.isDirectory()||this.opts.nodir&&this.opts.follow&&t.isSymbolicLink()&&t.realpathCached()?.isDirectory()||this.#de(t)?void 0:t}matchCheckSync(t,e){if(e&&this.opts.nodir)return;let s;if(this.opts.realpath){if(s=t.realpathCached()||t.realpathSync(),!s)return;t=s}const n=t.isUnknown()||this.opts.stat?t.lstatSync():t;if(this.opts.follow&&this.opts.nodir&&n?.isSymbolicLink()){const t=n.realpathSync();t&&(t?.isUnknown()||this.opts.stat)&&t.lstatSync()}return this.matchCheckTest(n,e)}matchFinish(t,e){if(this.#de(t))return;if(!this.includeChildMatches&&this.#ue?.add){const e=`${t.relativePosix()}/**`;this.#ue.add(e)}const s=void 0===this.opts.absolute?e:this.opts.absolute;this.seen.add(t);const n=this.opts.mark&&t.isDirectory()?this.#fe:"";if(this.opts.withFileTypes)this.matchEmit(t);else if(s){const e=this.opts.posix?t.fullpathPosix():t.fullpath();this.matchEmit(e+n)}else{const e=this.opts.posix?t.relativePosix():t.relative(),s=this.opts.dotRelative&&!e.startsWith(".."+this.#fe)?"."+this.#fe:"";this.matchEmit(e?s+e+n:"."+n)}}async match(t,e,s){const n=await this.matchCheck(t,s);n&&this.matchFinish(n,e)}matchSync(t,e,s){const n=this.matchCheckSync(t,s);n&&this.matchFinish(n,e)}walkCB(t,e,s){this.signal?.aborted&&s(),this.walkCB2(t,e,new Br(this.opts),s)}walkCB2(t,e,s,n){if(this.#pe(t))return n();if(this.signal?.aborted&&n(),this.paused)return void this.onResume((()=>this.walkCB2(t,e,s,n)));s.processPatterns(t,e);let i=1;const r=()=>{0===--i&&n()};for(const[t,e,n]of s.matches.entries())this.#de(t)||(i++,this.match(t,e,n).then((()=>r())));for(const t of s.subwalkTargets()){if(this.maxDepth!==1/0&&t.depth()>=this.maxDepth)continue;i++;const e=t.readdirCached();t.calledReaddir()?this.walkCB3(t,e,s,r):t.readdirCB(((e,n)=>this.walkCB3(t,n,s,r)),!0)}r()}walkCB3(t,e,s,n){s=s.filterEntries(t,e);let i=1;const r=()=>{0===--i&&n()};for(const[t,e,n]of s.matches.entries())this.#de(t)||(i++,this.match(t,e,n).then((()=>r())));for(const[t,e]of s.subwalks.entries())i++,this.walkCB2(t,e,s.child(),r);r()}walkCBSync(t,e,s){this.signal?.aborted&&s(),this.walkCB2Sync(t,e,new Br(this.opts),s)}walkCB2Sync(t,e,s,n){if(this.#pe(t))return n();if(this.signal?.aborted&&n(),this.paused)return void this.onResume((()=>this.walkCB2Sync(t,e,s,n)));s.processPatterns(t,e);let i=1;const r=()=>{0===--i&&n()};for(const[t,e,n]of s.matches.entries())this.#de(t)||this.matchSync(t,e,n);for(const t of s.subwalkTargets()){if(this.maxDepth!==1/0&&t.depth()>=this.maxDepth)continue;i++;const e=t.readdirSync();this.walkCB3Sync(t,e,s,r)}r()}walkCB3Sync(t,e,s,n){s=s.filterEntries(t,e);let i=1;const r=()=>{0===--i&&n()};for(const[t,e,n]of s.matches.entries())this.#de(t)||this.matchSync(t,e,n);for(const[t,e]of s.subwalks.entries())i++,this.walkCB2Sync(t,e,s.child(),r);r()}}class Wr extends zr{matches=new Set;constructor(t,e,s){super(t,e,s)}matchEmit(t){this.matches.add(t)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise(((t,e)=>{this.walkCB(this.path,this.patterns,(()=>{this.signal?.aborted?e(this.signal.reason):t(this.matches)}))})),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,(()=>{if(this.signal?.aborted)throw this.signal.reason})),this.matches}}class Ur extends zr{results;constructor(t,e,s){super(t,e,s),this.results=new or({signal:this.signal,objectMode:!0}),this.results.on("drain",(()=>this.resume())),this.results.on("resume",(()=>this.resume()))}matchEmit(t){this.results.write(t),this.results.flowing||this.pause()}stream(){const t=this.path;return t.isUnknown()?t.lstat().then((()=>{this.walkCB(t,this.patterns,(()=>this.results.end()))})):this.walkCB(t,this.patterns,(()=>this.results.end())),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,(()=>this.results.end())),this.results}}const Kr="object"==typeof process&&process&&"string"==typeof process.platform?process.platform:"linux";class qr{absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(t,e){if(!e)throw new TypeError("glob options required");if(this.withFileTypes=!!e.withFileTypes,this.signal=e.signal,this.follow=!!e.follow,this.dot=!!e.dot,this.dotRelative=!!e.dotRelative,this.nodir=!!e.nodir,this.mark=!!e.mark,e.cwd?(e.cwd instanceof URL||e.cwd.startsWith("file://"))&&(e.cwd=z(e.cwd)):this.cwd="",this.cwd=e.cwd||"",this.root=e.root,this.magicalBraces=!!e.magicalBraces,this.nobrace=!!e.nobrace,this.noext=!!e.noext,this.realpath=!!e.realpath,this.absolute=e.absolute,this.includeChildMatches=!1!==e.includeChildMatches,this.noglobstar=!!e.noglobstar,this.matchBase=!!e.matchBase,this.maxDepth="number"==typeof e.maxDepth?e.maxDepth:1/0,this.stat=!!e.stat,this.ignore=e.ignore,this.withFileTypes&&void 0!==this.absolute)throw new Error("cannot set absolute and withFileTypes:true");if("string"==typeof t&&(t=[t]),this.windowsPathsNoEscape=!!e.windowsPathsNoEscape||!1===e.allowWindowsEscape,this.windowsPathsNoEscape&&(t=t.map((t=>t.replace(/\\/g,"/")))),this.matchBase){if(e.noglobstar)throw new TypeError("base matching requires globstar");t=t.map((t=>t.includes("/")?t:`./**/${t}`))}if(this.pattern=t,this.platform=e.platform||Kr,this.opts={...e,platform:this.platform},e.scurry){if(this.scurry=e.scurry,void 0!==e.nocase&&e.nocase!==e.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{const t="win32"===e.platform?Cr:"darwin"===e.platform?$r:e.platform?Mr:Ir;this.scurry=new t(this.cwd,{nocase:e.nocase,fs:e.fs})}this.nocase=this.scurry.nocase;const s="darwin"===this.platform||"win32"===this.platform,n={...e,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:s,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},i=this.pattern.map((t=>new li(t,n))),[r,o]=i.reduce(((t,e)=>(t[0].push(...e.set),t[1].push(...e.globParts),t)),[[],[]]);this.patterns=r.map(((t,e)=>{const s=o[e];if(!s)throw new Error("invalid pattern object");return new _r(t,s,0,this.platform)}))}async walk(){return[...await new Wr(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new Wr(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new Ur(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new Ur(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}}function Gr(t,e={}){return new qr(t,e).streamSync()}function Yr(t,e={}){return new qr(t,e).stream()}function Vr(t,e={}){return new qr(t,e).walkSync()}async function Jr(t,e={}){return new qr(t,e).walk()}function Hr(t,e={}){return new qr(t,e).iterateSync()}function Qr(t,e={}){return new qr(t,e).iterate()}const Xr=Gr,Zr=Object.assign(Yr,{sync:Gr}),to=Hr,eo=Object.assign(Qr,{sync:Hr}),so=Object.assign(Vr,{stream:Gr,iterate:Hr}),no=Object.assign(Jr,{glob:Jr,globSync:Vr,sync:so,globStream:Yr,stream:Zr,globStreamSync:Gr,streamSync:Xr,globIterate:Qr,iterate:eo,globIterateSync:Hr,iterateSync:to,Glob:qr,hasMagic:(t,e={})=>{Array.isArray(t)||(t=[t]);for(const s of t)if(new li(s,e).hasMagic())return!0;return!1},escape:Fn,unescape:xn});no.glob=no;const io=(t,e)=>void 0===t||typeof t===e,ro=t=>{if(!(t=>!!t&&"object"==typeof t&&io(t.preserveRoot,"boolean")&&io(t.tmp,"string")&&io(t.maxRetries,"number")&&io(t.retryDelay,"number")&&io(t.backoff,"number")&&io(t.maxBackoff,"number")&&(io(t.glob,"boolean")||t.glob&&"object"==typeof t.glob)&&io(t.filter,"function"))(t))throw new Error("invalid rimraf options")},oo=t=>{ro(t);const{glob:e,...s}=t;if(!e)return s;const n=!0===e?t.signal?{signal:t.signal}:{}:t.signal?{signal:t.signal,...e}:e;return{...s,glob:{...n,absolute:!0,withFileTypes:!1}}};var ao=process.env.__TESTING_RIMRAF_PLATFORM__||process.platform;const co=(t,e={})=>{const s=typeof t;if("string"!==s){const e=t&&"object"===s&&t.constructor,n=`The "path" argument must be of type string. Received ${e&&e.name?`an instance of ${e.name}`:"object"===s?D(t):`type ${s} ${t}`}`;throw Object.assign(new TypeError(n),{path:t,code:"ERR_INVALID_ARG_TYPE"})}if(/\0/.test(t)){const e="path must be a string without null bytes";throw Object.assign(new TypeError(e),{path:t,code:"ERR_INVALID_ARG_VALUE"})}t=j(t);const{root:n}=R(t);if(t===n&&!1!==e.preserveRoot){const e="refusing to remove root directory without preserveRoot:false";throw Object.assign(new Error(e),{path:t,code:"ERR_PRESERVE_ROOT"})}if("win32"===ao){const e=/[*|"<>?:]/,{root:s}=R(t);if(e.test(t.substring(s.length)))throw Object.assign(new Error("Illegal characters in path."),{path:t,code:"EINVAL"})}return t},lo={chmod:(t,e)=>new Promise(((s,n)=>v.chmod(t,e,((t,...e)=>t?n(t):s(...e))))),readdir:t=>new Promise(((e,s)=>v.readdir(t,{withFileTypes:!0},((t,n)=>t?s(t):e(n))))),rename:(t,e)=>new Promise(((s,n)=>v.rename(t,e,((t,...e)=>t?n(t):s(...e))))),rm:(t,e)=>new Promise(((s,n)=>v.rm(t,e,((t,...e)=>t?n(t):s(...e))))),rmdir:t=>new Promise(((e,s)=>v.rmdir(t,((t,...n)=>t?s(t):e(...n))))),stat:t=>new Promise(((e,s)=>v.stat(t,((t,n)=>t?s(t):e(n))))),lstat:t=>new Promise(((e,s)=>v.lstat(t,((t,n)=>t?s(t):e(n))))),unlink:t=>new Promise(((e,s)=>v.unlink(t,((t,...n)=>t?s(t):e(...n)))))},{readdir:ho}=lo,uo=t=>ho(t).catch((t=>t)),fo=t=>{try{return(t=>E(t,{withFileTypes:!0}))(t)}catch(t){return t}},po=async t=>t.catch((t=>{if("ENOENT"!==t.code)throw t})),mo=t=>{try{return t()}catch(t){if("ENOENT"!==t?.code)throw t}},{lstat:yo,rmdir:go,unlink:wo}=lo,bo=async(t,e)=>{if(e?.signal?.aborted)throw e.signal.reason;try{return await So(t,e,await yo(t))}catch(t){if("ENOENT"===t?.code)return!0;throw t}},vo=(t,e)=>{if(e?.signal?.aborted)throw e.signal.reason;try{return ko(t,e,x(t))}catch(t){if("ENOENT"===t?.code)return!0;throw t}},So=async(t,e,s)=>{if(e?.signal?.aborted)throw e.signal.reason;const n=s.isDirectory()?await uo(t):null;if(!Array.isArray(n)){if(n){if("ENOENT"===n.code)return!0;if("ENOTDIR"!==n.code)throw n}return!(e.filter&&!await e.filter(t,s))&&(await po(wo(t)),!0)}const i=(await Promise.all(n.map((s=>So(j(t,s.name),e,s))))).reduce(((t,e)=>t&&e),!0);return!!i&&((!1!==e.preserveRoot||t!==R(t).root)&&(!(e.filter&&!await e.filter(t,s))&&(await po(go(t)),!0)))},ko=(t,e,s)=>{if(e?.signal?.aborted)throw e.signal.reason;const n=s.isDirectory()?fo(t):null;if(!Array.isArray(n)){if(n){if("ENOENT"===n.code)return!0;if("ENOTDIR"!==n.code)throw n}return!(e.filter&&!e.filter(t,s))&&(mo((()=>N(t))),!0)}let i=!0;for(const s of n){const n=j(t,s.name);i=ko(n,e,s)&&i}return(!1!==e.preserveRoot||t!==R(t).root)&&(!!i&&(!(e.filter&&!e.filter(t,s))&&(mo((()=>T(t))),!0)))},{chmod:Eo}=lo,Oo=t=>async e=>{try{return await t(e)}catch(s){const n=s;if("ENOENT"===n?.code)return;if("EPERM"===n?.code){try{await Eo(e,438)}catch(t){const e=t;if("ENOENT"===e?.code)return;throw s}return await t(e)}throw s}},xo=t=>e=>{try{return t(e)}catch(s){const n=s;if("ENOENT"===n?.code)return;if("EPERM"===n?.code){try{A(e,438)}catch(t){const e=t;if("ENOENT"===e?.code)return;throw s}return t(e)}throw s}},No=new Set(["EMFILE","ENFILE","EBUSY"]),To=t=>{const e=async(s,n,i=1,r=0)=>{const o=n.maxBackoff||200,a=n.backoff||1.2,c=n.maxRetries||10;let l=0;for(;;)try{return await t(s)}catch(t){const h=t;if(h?.path===s&&h?.code&&No.has(h.code)){if(i=Math.ceil(i*a),(r=i+r)<o)return new Promise(((t,o)=>{setTimeout((()=>{e(s,n,i,r).then(t,o)}),i)}));if(l<c){l++;continue}}throw t}};return e},Ao=t=>(e,s)=>{const n=s.maxRetries||10;let i=0;for(;;)try{return t(e)}catch(t){const s=t;if(s?.path===e&&s?.code&&No.has(s.code)&&i<n){i++;continue}throw t}},{stat:Lo}=lo,Co="win32"===ao?async t=>{const{root:e}=R(t),s=J(),{root:n}=R(s);if(e.toLowerCase()===n.toLowerCase())return s;const i=j(e,"/temp");return await(t=>Lo(t).then((t=>t.isDirectory()),(()=>!1)))(i)?i:e}:async()=>J(),Mo="win32"===ao?t=>{const{root:e}=R(t),s=J(),{root:n}=R(s);if(e.toLowerCase()===n.toLowerCase())return s;const i=j(e,"/temp");return(t=>{try{return L(t).isDirectory()}catch(t){return!1}})(i)?i:e}:()=>J(),{lstat:$o,rename:Io,unlink:_o,rmdir:Do,chmod:Fo}=lo,Po=t=>`.${B(t)}.${Math.random()}`,jo=async t=>_o(t).catch((e=>{if("EPERM"===e.code)return Fo(t,438).then((()=>_o(t)),(t=>{if("ENOENT"!==t.code)throw e}));if("ENOENT"!==e.code)throw e})),Ro=t=>{try{N(t)}catch(e){if("EPERM"===e?.code)try{return A(t,438)}catch(t){if("ENOENT"===t?.code)return;throw e}else if("ENOENT"===e?.code)return;throw e}},Bo=async(t,e)=>{if(e?.signal?.aborted)throw e.signal.reason;try{return await zo(t,e,await $o(t))}catch(t){if("ENOENT"===t?.code)return!0;throw t}},zo=async(t,e,s)=>{if(e?.signal?.aborted)throw e.signal.reason;if(!e.tmp)return zo(t,{...e,tmp:await Co(t)},s);if(t===e.tmp&&R(t).root!==t)throw new Error("cannot delete temp directory used for deletion");const n=s.isDirectory()?await uo(t):null;if(!Array.isArray(n)){if(n){if("ENOENT"===n.code)return!0;if("ENOTDIR"!==n.code)throw n}return!(e.filter&&!await e.filter(t,s))&&(await po(Wo(t,e.tmp,jo)),!0)}const i=(await Promise.all(n.map((s=>zo(j(t,s.name),e,s))))).reduce(((t,e)=>t&&e),!0);return!!i&&((!1!==e.preserveRoot||t!==R(t).root)&&(!(e.filter&&!await e.filter(t,s))&&(await po(Wo(t,e.tmp,Do)),!0)))},Wo=async(t,e,s)=>{const n=j(e,Po(t));return await Io(t,n),await s(n)},Uo=(t,e)=>{if(e?.signal?.aborted)throw e.signal.reason;try{return Ko(t,e,x(t))}catch(t){if("ENOENT"===t?.code)return!0;throw t}},Ko=(t,e,s)=>{if(e?.signal?.aborted)throw e.signal.reason;if(!e.tmp)return Ko(t,{...e,tmp:Mo(t)},s);const n=e.tmp;if(t===e.tmp&&R(t).root!==t)throw new Error("cannot delete temp directory used for deletion");const i=s.isDirectory()?fo(t):null;if(!Array.isArray(i)){if(i){if("ENOENT"===i.code)return!0;if("ENOTDIR"!==i.code)throw i}return!(e.filter&&!e.filter(t,s))&&(mo((()=>qo(t,n,Ro))),!0)}let r=!0;for(const s of i){const n=j(t,s.name);r=Ko(n,e,s)&&r}return!!r&&((!1!==e.preserveRoot||t!==R(t).root)&&(!(e.filter&&!e.filter(t,s))&&(mo((()=>qo(t,n,T))),!0)))},qo=(t,e,s)=>{const n=j(e,Po(t));return C(t,n),s(n)},{unlink:Go,rmdir:Yo,lstat:Vo}=lo,Jo=To(Oo(Go)),Ho=Ao(xo(N)),Qo=To(Oo(Yo)),Xo=Ao(xo(T)),Zo=Symbol("start"),ta=Symbol("child"),ea=Symbol("finish"),sa=async(t,e)=>{if(e?.signal?.aborted)throw e.signal.reason;try{return await ia(t,e,await Vo(t),Zo)}catch(t){if("ENOENT"===t?.code)return!0;throw t}},na=(t,e)=>{if(e?.signal?.aborted)throw e.signal.reason;try{return ra(t,e,x(t),Zo)}catch(t){if("ENOENT"===t?.code)return!0;throw t}},ia=async(t,e,s,n=Zo)=>{if(e?.signal?.aborted)throw e.signal.reason;const i=s.isDirectory()?await uo(t):null;if(!Array.isArray(i)){if(i){if("ENOENT"===i.code)return!0;if("ENOTDIR"!==i.code)throw i}return!(e.filter&&!await e.filter(t,s))&&(await po(Jo(t,e)),!0)}const r=n===Zo?ta:n,o=(await Promise.all(i.map((s=>ia(j(t,s.name),e,s,r))))).reduce(((t,e)=>t&&e),!0);if(n===Zo)return ia(t,e,s,ea);if(n===ea){if(!1===e.preserveRoot&&t===R(t).root)return!1;if(!o)return!1;if(e.filter&&!await e.filter(t,s))return!1;await po((async(t,e)=>{if(e?.signal?.aborted)throw e.signal.reason;const{filter:s,...n}=e;try{return await Qo(t,n)}catch(e){if("ENOTEMPTY"===e?.code)return await Bo(t,n);throw e}})(t,e))}return!0},ra=(t,e,s,n=Zo)=>{const i=s.isDirectory()?fo(t):null;if(!Array.isArray(i)){if(i){if("ENOENT"===i.code)return!0;if("ENOTDIR"!==i.code)throw i}return!(e.filter&&!e.filter(t,s))&&(mo((()=>Ho(t,e))),!0)}let r=!0;for(const s of i){const i=n===Zo?ta:n,o=j(t,s.name);r=ra(o,e,s,i)&&r}if(n===Zo)return ra(t,e,s,ea);if(n===ea){if(!1===e.preserveRoot&&t===R(t).root)return!1;if(!r)return!1;if(e.filter&&!e.filter(t,s))return!1;mo((()=>{((t,e)=>{if(e?.signal?.aborted)throw e.signal.reason;const{filter:s,...n}=e;try{return Xo(t,n)}catch(e){const s=e;if("ENOTEMPTY"===s?.code)return Uo(t,n);throw e}})(t,e)}))}return!0},oa="win32"===ao?sa:bo,aa="win32"===ao?na:vo,{rm:ca}=lo,la=async(t,e)=>(await ca(t,{...e,force:!0,recursive:!0}),!0),ha=(t,e)=>(M(t,{...e,force:!0,recursive:!0}),!0),ua=(process.env.__TESTING_RIMRAF_NODE_VERSION__||process.version).replace(/^v/,"").split("."),[fa=0,da=0]=ua.map((t=>parseInt(t,10))),pa=fa>14||14===fa&&da>=14,ma=pa&&"win32"!==ao?t=>!t?.signal&&!t?.filter:()=>!1,ya=pa&&"win32"!==ao?t=>!t?.signal&&!t?.filter:()=>!1,ga=t=>async(e,s)=>{const n=((t={})=>oo(t))(s);return n.glob&&(e=await no(e,n.glob)),Array.isArray(e)?!!(await Promise.all(e.map((e=>t(co(e,n),n))))).reduce(((t,e)=>t&&e),!0):!!await t(co(e,n),n)},wa=t=>(e,s)=>{const n=((t={})=>oo(t))(s);return n.glob&&(e=Vr(e,n.glob)),Array.isArray(e)?!!e.map((e=>t(co(e,n),n))).reduce(((t,e)=>t&&e),!0):!!t(co(e,n),n)},ba=wa(ha),va=Object.assign(ga(la),{sync:ba}),Sa=wa(aa),ka=Object.assign(ga(oa),{sync:Sa}),Ea=wa(na),Oa=Object.assign(ga(sa),{sync:Ea}),xa=wa(vo),Na=Object.assign(ga(bo),{sync:xa}),Ta=wa(Uo),Aa=Object.assign(ga(Bo),{sync:Ta}),La=wa(((t,e)=>ya(e)?ha(t,e):aa(t,e))),Ca=ga(((t,e)=>ma(e)?la(t,e):oa(t,e))),Ma=Object.assign(Ca,{rimraf:Ca,sync:La,rimrafSync:La,manual:ka,manualSync:Sa,native:va,nativeSync:ba,posix:Na,posixSync:xa,windows:Oa,windowsSync:Ea,moveRemove:Aa,moveRemoveSync:Ta});Ma.rimraf=Ma;const $a=Symbol.for("yaml.alias"),Ia=Symbol.for("yaml.document"),_a=Symbol.for("yaml.map"),Da=Symbol.for("yaml.pair"),Fa=Symbol.for("yaml.scalar"),Pa=Symbol.for("yaml.seq"),ja=Symbol.for("yaml.node.type"),Ra=t=>!!t&&"object"==typeof t&&t[ja]===$a,Ba=t=>!!t&&"object"==typeof t&&t[ja]===Ia,za=t=>!!t&&"object"==typeof t&&t[ja]===_a,Wa=t=>!!t&&"object"==typeof t&&t[ja]===Da,Ua=t=>!!t&&"object"==typeof t&&t[ja]===Fa,Ka=t=>!!t&&"object"==typeof t&&t[ja]===Pa;function qa(t){if(t&&"object"==typeof t)switch(t[ja]){case _a:case Pa:return!0}return!1}function Ga(t){if(t&&"object"==typeof t)switch(t[ja]){case $a:case _a:case Fa:case Pa:return!0}return!1}const Ya=t=>(Ua(t)||qa(t))&&!!t.anchor,Va=Symbol("break visit"),Ja=Symbol("skip children"),Ha=Symbol("remove node");function Qa(t,e){const s=ec(e);if(Ba(t)){Xa(null,t.contents,s,Object.freeze([t]))===Ha&&(t.contents=null)}else Xa(null,t,s,Object.freeze([]))}function Xa(t,e,s,n){const i=sc(t,e,s,n);if(Ga(i)||Wa(i))return nc(t,n,i),Xa(t,i,s,n);if("symbol"!=typeof i)if(qa(e)){n=Object.freeze(n.concat(e));for(let t=0;t<e.items.length;++t){const i=Xa(t,e.items[t],s,n);if("number"==typeof i)t=i-1;else{if(i===Va)return Va;i===Ha&&(e.items.splice(t,1),t-=1)}}}else if(Wa(e)){n=Object.freeze(n.concat(e));const t=Xa("key",e.key,s,n);if(t===Va)return Va;t===Ha&&(e.key=null);const i=Xa("value",e.value,s,n);if(i===Va)return Va;i===Ha&&(e.value=null)}return i}async function Za(t,e){const s=ec(e);if(Ba(t)){await tc(null,t.contents,s,Object.freeze([t]))===Ha&&(t.contents=null)}else await tc(null,t,s,Object.freeze([]))}async function tc(t,e,s,n){const i=await sc(t,e,s,n);if(Ga(i)||Wa(i))return nc(t,n,i),tc(t,i,s,n);if("symbol"!=typeof i)if(qa(e)){n=Object.freeze(n.concat(e));for(let t=0;t<e.items.length;++t){const i=await tc(t,e.items[t],s,n);if("number"==typeof i)t=i-1;else{if(i===Va)return Va;i===Ha&&(e.items.splice(t,1),t-=1)}}}else if(Wa(e)){n=Object.freeze(n.concat(e));const t=await tc("key",e.key,s,n);if(t===Va)return Va;t===Ha&&(e.key=null);const i=await tc("value",e.value,s,n);if(i===Va)return Va;i===Ha&&(e.value=null)}return i}function ec(t){return"object"==typeof t&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function sc(t,e,s,n){return"function"==typeof s?s(t,e,n):za(e)?s.Map?.(t,e,n):Ka(e)?s.Seq?.(t,e,n):Wa(e)?s.Pair?.(t,e,n):Ua(e)?s.Scalar?.(t,e,n):Ra(e)?s.Alias?.(t,e,n):void 0}function nc(t,e,s){const n=e[e.length-1];if(qa(n))n.items[t]=s;else if(Wa(n))"key"===t?n.key=s:n.value=s;else{if(!Ba(n)){const t=Ra(n)?"alias":"scalar";throw new Error(`Cannot replace node with ${t} parent`)}n.contents=s}}Qa.BREAK=Va,Qa.SKIP=Ja,Qa.REMOVE=Ha,Za.BREAK=Va,Za.SKIP=Ja,Za.REMOVE=Ha;const ic={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"};class rc{constructor(t,e){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},rc.defaultYaml,t),this.tags=Object.assign({},rc.defaultTags,e)}clone(){const t=new rc(this.yaml,this.tags);return t.docStart=this.docStart,t}atDocument(){const t=new rc(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:rc.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},rc.defaultTags)}return t}add(t,e){this.atNextDocument&&(this.yaml={explicit:rc.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},rc.defaultTags),this.atNextDocument=!1);const s=t.trim().split(/[ \t]+/),n=s.shift();switch(n){case"%TAG":{if(2!==s.length&&(e(0,"%TAG directive should contain exactly two parts"),s.length<2))return!1;const[t,n]=s;return this.tags[t]=n,!0}case"%YAML":{if(this.yaml.explicit=!0,1!==s.length)return e(0,"%YAML directive should contain exactly one part"),!1;const[t]=s;if("1.1"===t||"1.2"===t)return this.yaml.version=t,!0;return e(6,`Unsupported YAML version ${t}`,/^\d+\.\d+$/.test(t)),!1}default:return e(0,`Unknown directive ${n}`,!0),!1}}tagName(t,e){if("!"===t)return"!";if("!"!==t[0])return e(`Not a valid tag: ${t}`),null;if("<"===t[1]){const s=t.slice(2,-1);return"!"===s||"!!"===s?(e(`Verbatim tags aren't resolved, so ${t} is invalid.`),null):(">"!==t[t.length-1]&&e("Verbatim tags must end with a >"),s)}const[,s,n]=t.match(/^(.*!)([^!]*)$/s);n||e(`The ${t} tag has no suffix`);const i=this.tags[s];if(i)try{return i+decodeURIComponent(n)}catch(t){return e(String(t)),null}return"!"===s?t:(e(`Could not resolve tag: ${t}`),null)}tagString(t){for(const[e,s]of Object.entries(this.tags))if(t.startsWith(s))return e+t.substring(s.length).replace(/[!,[\]{}]/g,(t=>ic[t]));return"!"===t[0]?t:`!<${t}>`}toString(t){const e=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],s=Object.entries(this.tags);let n;if(t&&s.length>0&&Ga(t.contents)){const e={};Qa(t.contents,((t,s)=>{Ga(s)&&s.tag&&(e[s.tag]=!0)})),n=Object.keys(e)}else n=[];for(const[i,r]of s)"!!"===i&&"tag:yaml.org,2002:"===r||t&&!n.some((t=>t.startsWith(r)))||e.push(`%TAG ${i} ${r}`);return e.join("\n")}}function oc(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){const e=JSON.stringify(t);throw new Error(`Anchor must not contain whitespace or control characters: ${e}`)}return!0}function ac(t){const e=new Set;return Qa(t,{Value(t,s){s.anchor&&e.add(s.anchor)}}),e}function cc(t,e){for(let s=1;;++s){const n=`${t}${s}`;if(!e.has(n))return n}}function lc(t,e,s,n){if(n&&"object"==typeof n)if(Array.isArray(n))for(let e=0,s=n.length;e<s;++e){const s=n[e],i=lc(t,n,String(e),s);void 0===i?delete n[e]:i!==s&&(n[e]=i)}else if(n instanceof Map)for(const e of Array.from(n.keys())){const s=n.get(e),i=lc(t,n,e,s);void 0===i?n.delete(e):i!==s&&n.set(e,i)}else if(n instanceof Set)for(const e of Array.from(n)){const s=lc(t,n,e,e);void 0===s?n.delete(e):s!==e&&(n.delete(e),n.add(s))}else for(const[e,s]of Object.entries(n)){const i=lc(t,n,e,s);void 0===i?delete n[e]:i!==s&&(n[e]=i)}return t.call(e,s,n)}function hc(t,e,s){if(Array.isArray(t))return t.map(((t,e)=>hc(t,String(e),s)));if(t&&"function"==typeof t.toJSON){if(!s||!Ya(t))return t.toJSON(e,s);const n={aliasCount:0,count:1,res:void 0};s.anchors.set(t,n),s.onCreate=t=>{n.res=t,delete s.onCreate};const i=t.toJSON(e,s);return s.onCreate&&s.onCreate(i),i}return"bigint"!=typeof t||s?.keep?t:Number(t)}rc.defaultYaml={explicit:!1,version:"1.2"},rc.defaultTags={"!!":"tag:yaml.org,2002:"};class uc{constructor(t){Object.defineProperty(this,ja,{value:t})}clone(){const t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(t.range=this.range.slice()),t}toJS(t,{mapAsMap:e,maxAliasCount:s,onAnchor:n,reviver:i}={}){if(!Ba(t))throw new TypeError("A document argument is required");const r={anchors:new Map,doc:t,keep:!0,mapAsMap:!0===e,mapKeyWarned:!1,maxAliasCount:"number"==typeof s?s:100},o=hc(this,"",r);if("function"==typeof n)for(const{count:t,res:e}of r.anchors.values())n(e,t);return"function"==typeof i?lc(i,{"":o},"",o):o}}class fc extends uc{constructor(t){super($a),this.source=t,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(t,e){let s,n;e?.aliasResolveCache?s=e.aliasResolveCache:(s=[],Qa(t,{Node:(t,e)=>{(Ra(e)||Ya(e))&&s.push(e)}}),e&&(e.aliasResolveCache=s));for(const t of s){if(t===this)break;t.anchor===this.source&&(n=t)}return n}toJSON(t,e){if(!e)return{source:this.source};const{anchors:s,doc:n,maxAliasCount:i}=e,r=this.resolve(n,e);if(!r){const t=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(t)}let o=s.get(r);if(o||(hc(r,null,e),o=s.get(r)),!o||void 0===o.res){throw new ReferenceError("This should not happen: Alias anchor was not resolved?")}if(i>=0&&(o.count+=1,0===o.aliasCount&&(o.aliasCount=dc(n,r,s)),o.count*o.aliasCount>i)){throw new ReferenceError("Excessive alias count indicates a resource exhaustion attack")}return o.res}toString(t,e,s){const n=`*${this.source}`;if(t){if(oc(this.source),t.options.verifyAliasOrder&&!t.anchors.has(this.source)){const t=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(t)}if(t.implicitKey)return`${n} `}return n}}function dc(t,e,s){if(Ra(e)){const n=e.resolve(t),i=s&&n&&s.get(n);return i?i.count*i.aliasCount:0}if(qa(e)){let n=0;for(const i of e.items){const e=dc(t,i,s);e>n&&(n=e)}return n}if(Wa(e)){const n=dc(t,e.key,s),i=dc(t,e.value,s);return Math.max(n,i)}return 1}const pc=t=>!t||"function"!=typeof t&&"object"!=typeof t;class mc extends uc{constructor(t){super(Fa),this.value=t}toJSON(t,e){return e?.keep?this.value:hc(this.value,t,e)}toString(){return String(this.value)}}mc.BLOCK_FOLDED="BLOCK_FOLDED",mc.BLOCK_LITERAL="BLOCK_LITERAL",mc.PLAIN="PLAIN",mc.QUOTE_DOUBLE="QUOTE_DOUBLE",mc.QUOTE_SINGLE="QUOTE_SINGLE";function yc(t,e,s){if(Ba(t)&&(t=t.contents),Ga(t))return t;if(Wa(t)){const e=s.schema[_a].createNode?.(s.schema,null,s);return e.items.push(t),e}(t instanceof String||t instanceof Number||t instanceof Boolean||"undefined"!=typeof BigInt&&t instanceof BigInt)&&(t=t.valueOf());const{aliasDuplicateObjects:n,onAnchor:i,onTagObj:r,schema:o,sourceObjects:a}=s;let c;if(n&&t&&"object"==typeof t){if(c=a.get(t),c)return c.anchor??(c.anchor=i(t)),new fc(c.anchor);c={anchor:null,node:null},a.set(t,c)}e?.startsWith("!!")&&(e="tag:yaml.org,2002:"+e.slice(2));let l=function(t,e,s){if(e){const t=s.filter((t=>t.tag===e)),n=t.find((t=>!t.format))??t[0];if(!n)throw new Error(`Tag ${e} not found`);return n}return s.find((e=>e.identify?.(t)&&!e.format))}(t,e,o.tags);if(!l){if(t&&"function"==typeof t.toJSON&&(t=t.toJSON()),!t||"object"!=typeof t){const e=new mc(t);return c&&(c.node=e),e}l=t instanceof Map?o[_a]:Symbol.iterator in Object(t)?o[Pa]:o[_a]}r&&(r(l),delete s.onTagObj);const h=l?.createNode?l.createNode(s.schema,t,s):"function"==typeof l?.nodeClass?.from?l.nodeClass.from(s.schema,t,s):new mc(t);return e?h.tag=e:l.default||(h.tag=l.tag),c&&(c.node=h),h}function gc(t,e,s){let n=s;for(let t=e.length-1;t>=0;--t){const s=e[t];if("number"==typeof s&&Number.isInteger(s)&&s>=0){const t=[];t[s]=n,n=t}else n=new Map([[s,n]])}return yc(n,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}const wc=t=>null==t||"object"==typeof t&&!!t[Symbol.iterator]().next().done;class bc extends uc{constructor(t,e){super(t),Object.defineProperty(this,"schema",{value:e,configurable:!0,enumerable:!1,writable:!0})}clone(t){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return t&&(e.schema=t),e.items=e.items.map((e=>Ga(e)||Wa(e)?e.clone(t):e)),this.range&&(e.range=this.range.slice()),e}addIn(t,e){if(wc(t))this.add(e);else{const[s,...n]=t,i=this.get(s,!0);if(qa(i))i.addIn(n,e);else{if(void 0!==i||!this.schema)throw new Error(`Expected YAML collection at ${s}. Remaining path: ${n}`);this.set(s,gc(this.schema,n,e))}}}deleteIn(t){const[e,...s]=t;if(0===s.length)return this.delete(e);const n=this.get(e,!0);if(qa(n))return n.deleteIn(s);throw new Error(`Expected YAML collection at ${e}. Remaining path: ${s}`)}getIn(t,e){const[s,...n]=t,i=this.get(s,!0);return 0===n.length?!e&&Ua(i)?i.value:i:qa(i)?i.getIn(n,e):void 0}hasAllNullValues(t){return this.items.every((e=>{if(!Wa(e))return!1;const s=e.value;return null==s||t&&Ua(s)&&null==s.value&&!s.commentBefore&&!s.comment&&!s.tag}))}hasIn(t){const[e,...s]=t;if(0===s.length)return this.has(e);const n=this.get(e,!0);return!!qa(n)&&n.hasIn(s)}setIn(t,e){const[s,...n]=t;if(0===n.length)this.set(s,e);else{const t=this.get(s,!0);if(qa(t))t.setIn(n,e);else{if(void 0!==t||!this.schema)throw new Error(`Expected YAML collection at ${s}. Remaining path: ${n}`);this.set(s,gc(this.schema,n,e))}}}}const vc=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function Sc(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}const kc=(t,e,s)=>t.endsWith("\n")?Sc(s,e):s.includes("\n")?"\n"+Sc(s,e):(t.endsWith(" ")?"":" ")+s,Ec="flow",Oc="block",xc="quoted";function Nc(t,e,s="flow",{indentAtStart:n,lineWidth:i=80,minContentWidth:r=20,onFold:o,onOverflow:a}={}){if(!i||i<0)return t;i<r&&(r=0);const c=Math.max(1+r,1+i-e.length);if(t.length<=c)return t;const l=[],h={};let u,f,d=i-e.length;"number"==typeof n&&(n>i-Math.max(2,r)?l.push(0):d=i-n);let p=!1,m=-1,y=-1,g=-1;s===Oc&&(m=Tc(t,m,e.length),-1!==m&&(d=m+c));for(let n;n=t[m+=1];){if(s===xc&&"\\"===n){switch(y=m,t[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}g=m}if("\n"===n)s===Oc&&(m=Tc(t,m,e.length)),d=m+e.length+c,u=void 0;else{if(" "===n&&f&&" "!==f&&"\n"!==f&&"\t"!==f){const e=t[m+1];e&&" "!==e&&"\n"!==e&&"\t"!==e&&(u=m)}if(m>=d)if(u)l.push(u),d=u+c,u=void 0;else if(s===xc){for(;" "===f||"\t"===f;)f=n,n=t[m+=1],p=!0;const e=m>g+1?m-2:y-1;if(h[e])return t;l.push(e),h[e]=!0,d=e+c,u=void 0}else p=!0}f=n}if(p&&a&&a(),0===l.length)return t;o&&o();let w=t.slice(0,l[0]);for(let n=0;n<l.length;++n){const i=l[n],r=l[n+1]||t.length;0===i?w=`\n${e}${t.slice(0,r)}`:(s===xc&&h[i]&&(w+=`${t[i]}\\`),w+=`\n${e}${t.slice(i+1,r)}`)}return w}function Tc(t,e,s){let n=e,i=e+1,r=t[i];for(;" "===r||"\t"===r;)if(e<i+s)r=t[++e];else{do{r=t[++e]}while(r&&"\n"!==r);n=e,i=e+1,r=t[i]}return n}const Ac=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),Lc=t=>/^(%|---|\.\.\.)/m.test(t);function Cc(t,e){const s=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return s;const{implicitKey:n}=e,i=e.options.doubleQuotedMinMultiLineLength,r=e.indent||(Lc(t)?"  ":"");let o="",a=0;for(let t=0,e=s[t];e;e=s[++t])if(" "===e&&"\\"===s[t+1]&&"n"===s[t+2]&&(o+=s.slice(a,t)+"\\ ",t+=1,a=t,e="\\"),"\\"===e)switch(s[t+1]){case"u":{o+=s.slice(a,t);const e=s.substr(t+2,4);switch(e){case"0000":o+="\\0";break;case"0007":o+="\\a";break;case"000b":o+="\\v";break;case"001b":o+="\\e";break;case"0085":o+="\\N";break;case"00a0":o+="\\_";break;case"2028":o+="\\L";break;case"2029":o+="\\P";break;default:"00"===e.substr(0,2)?o+="\\x"+e.substr(2):o+=s.substr(t,6)}t+=5,a=t+1}break;case"n":if(n||'"'===s[t+2]||s.length<i)t+=1;else{for(o+=s.slice(a,t)+"\n\n";"\\"===s[t+2]&&"n"===s[t+3]&&'"'!==s[t+4];)o+="\n",t+=2;o+=r," "===s[t+2]&&(o+="\\"),t+=1,a=t+1}break;default:t+=1}return o=a?o+s.slice(a):s,n?o:Nc(o,r,xc,Ac(e,!1))}function Mc(t,e){if(!1===e.options.singleQuote||e.implicitKey&&t.includes("\n")||/[ \t]\n|\n[ \t]/.test(t))return Cc(t,e);const s=e.indent||(Lc(t)?"  ":""),n="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&\n${s}`)+"'";return e.implicitKey?n:Nc(n,s,Ec,Ac(e,!1))}function $c(t,e){const{singleQuote:s}=e.options;let n;if(!1===s)n=Cc;else{const e=t.includes('"'),i=t.includes("'");n=e&&!i?Mc:i&&!e?Cc:s?Mc:Cc}return n(t,e)}let Ic;try{Ic=new RegExp("(^|(?<!\n))\n+(?!\n|$)","g")}catch{Ic=/\n+(?!\n|$)/g}function _c({comment:t,type:e,value:s},n,i,r){const{blockQuote:o,commentString:a,lineWidth:c}=n.options;if(!o||/\n[\t ]+$/.test(s)||/^\s*$/.test(s))return $c(s,n);const l=n.indent||(n.forceBlockIndent||Lc(s)?"  ":""),h="literal"===o||"folded"!==o&&e!==mc.BLOCK_FOLDED&&(e===mc.BLOCK_LITERAL||!function(t,e,s){if(!e||e<0)return!1;const n=e-s,i=t.length;if(i<=n)return!1;for(let e=0,s=0;e<i;++e)if("\n"===t[e]){if(e-s>n)return!0;if(s=e+1,i-s<=n)return!1}return!0}(s,c,l.length));if(!s)return h?"|\n":">\n";let u,f;for(f=s.length;f>0;--f){const t=s[f-1];if("\n"!==t&&"\t"!==t&&" "!==t)break}let d=s.substring(f);const p=d.indexOf("\n");-1===p?u="-":s===d||p!==d.length-1?(u="+",r&&r()):u="",d&&(s=s.slice(0,-d.length),"\n"===d[d.length-1]&&(d=d.slice(0,-1)),d=d.replace(Ic,`$&${l}`));let m,y=!1,g=-1;for(m=0;m<s.length;++m){const t=s[m];if(" "===t)y=!0;else{if("\n"!==t)break;g=m}}let w=s.substring(0,g<m?g+1:m);w&&(s=s.substring(w.length),w=w.replace(/\n+/g,`$&${l}`));let b=(y?l?"2":"1":"")+u;if(t&&(b+=" "+a(t.replace(/ ?[\r\n]+/g," ")),i&&i()),!h){const t=s.replace(/\n+/g,"\n$&").replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${l}`);let i=!1;const r=Ac(n,!0);"folded"!==o&&e!==mc.BLOCK_FOLDED&&(r.onOverflow=()=>{i=!0});const a=Nc(`${w}${t}${d}`,l,Oc,r);if(!i)return`>${b}\n${l}${a}`}return`|${b}\n${l}${w}${s=s.replace(/\n+/g,`$&${l}`)}${d}`}function Dc(t,e,s,n){const{implicitKey:i,inFlow:r}=e,o="string"==typeof t.value?t:Object.assign({},t,{value:String(t.value)});let{type:a}=t;a!==mc.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(o.value)&&(a=mc.QUOTE_DOUBLE);const c=t=>{switch(t){case mc.BLOCK_FOLDED:case mc.BLOCK_LITERAL:return i||r?$c(o.value,e):_c(o,e,s,n);case mc.QUOTE_DOUBLE:return Cc(o.value,e);case mc.QUOTE_SINGLE:return Mc(o.value,e);case mc.PLAIN:return function(t,e,s,n){const{type:i,value:r}=t,{actualString:o,implicitKey:a,indent:c,indentStep:l,inFlow:h}=e;if(a&&r.includes("\n")||h&&/[[\]{},]/.test(r))return $c(r,e);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(r))return a||h||!r.includes("\n")?$c(r,e):_c(t,e,s,n);if(!a&&!h&&i!==mc.PLAIN&&r.includes("\n"))return _c(t,e,s,n);if(Lc(r)){if(""===c)return e.forceBlockIndent=!0,_c(t,e,s,n);if(a&&c===l)return $c(r,e)}const u=r.replace(/\n+/g,`$&\n${c}`);if(o){const t=t=>t.default&&"tag:yaml.org,2002:str"!==t.tag&&t.test?.test(u),{compat:s,tags:n}=e.doc.schema;if(n.some(t)||s?.some(t))return $c(r,e)}return a?u:Nc(u,c,Ec,Ac(e,!1))}(o,e,s,n);default:return null}};let l=c(a);if(null===l){const{defaultKeyType:t,defaultStringType:s}=e.options,n=i&&t||s;if(l=c(n),null===l)throw new Error(`Unsupported default string type ${n}`)}return l}function Fc(t,e){const s=Object.assign({blockQuote:!0,commentString:vc,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e);let n;switch(s.collectionStyle){case"block":n=!1;break;case"flow":n=!0;break;default:n=null}return{anchors:new Set,doc:t,flowCollectionPadding:s.flowCollectionPadding?" ":"",indent:"",indentStep:"number"==typeof s.indent?" ".repeat(s.indent):"  ",inFlow:n,options:s}}function Pc(t,e,s,n){if(Wa(t))return t.toString(e,s,n);if(Ra(t)){if(e.doc.directives)return t.toString(e);if(e.resolvedAliases?.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let i;const r=Ga(t)?t:e.doc.createNode(t,{onTagObj:t=>i=t});i??(i=function(t,e){if(e.tag){const s=t.filter((t=>t.tag===e.tag));if(s.length>0)return s.find((t=>t.format===e.format))??s[0]}let s,n;if(Ua(e)){n=e.value;let i=t.filter((t=>t.identify?.(n)));if(i.length>1){const t=i.filter((t=>t.test));t.length>0&&(i=t)}s=i.find((t=>t.format===e.format))??i.find((t=>!t.format))}else n=e,s=t.find((t=>t.nodeClass&&n instanceof t.nodeClass));if(!s)throw new Error(`Tag not resolved for ${n?.constructor?.name??(null===n?"null":typeof n)} value`);return s}(e.doc.schema.tags,r));const o=function(t,e,{anchors:s,doc:n}){if(!n.directives)return"";const i=[],r=(Ua(t)||qa(t))&&t.anchor;r&&oc(r)&&(s.add(r),i.push(`&${r}`));const o=t.tag??(e.default?null:e.tag);return o&&i.push(n.directives.tagString(o)),i.join(" ")}(r,i,e);o.length>0&&(e.indentAtStart=(e.indentAtStart??0)+o.length+1);const a="function"==typeof i.stringify?i.stringify(r,e,s,n):Ua(r)?Dc(r,e,s,n):r.toString(e,s,n);return o?Ua(r)||"{"===a[0]||"["===a[0]?`${o} ${a}`:`${o}\n${e.indent}${a}`:a}function jc(t,e){"debug"!==t&&"warn"!==t||console.warn(e)}const Rc="<<",Bc={identify:t=>t===Rc||"symbol"==typeof t&&t.description===Rc,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new mc(Symbol(Rc)),{addToJSMap:zc}),stringify:()=>Rc};function zc(t,e,s){if(s=t&&Ra(s)?s.resolve(t.doc):s,Ka(s))for(const n of s.items)Wc(t,e,n);else if(Array.isArray(s))for(const n of s)Wc(t,e,n);else Wc(t,e,s)}function Wc(t,e,s){const n=t&&Ra(s)?s.resolve(t.doc):s;if(!za(n))throw new Error("Merge sources must be maps or map aliases");const i=n.toJSON(null,t,Map);for(const[t,s]of i)e instanceof Map?e.has(t)||e.set(t,s):e instanceof Set?e.add(t):Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(e,t,{value:s,writable:!0,enumerable:!0,configurable:!0});return e}function Uc(t,e,{key:s,value:n}){if(Ga(s)&&s.addToJSMap)s.addToJSMap(t,e,n);else if(((t,e)=>(Bc.identify(e)||Ua(e)&&(!e.type||e.type===mc.PLAIN)&&Bc.identify(e.value))&&t?.doc.schema.tags.some((t=>t.tag===Bc.tag&&t.default)))(t,s))zc(t,e,n);else{const i=hc(s,"",t);if(e instanceof Map)e.set(i,hc(n,i,t));else if(e instanceof Set)e.add(i);else{const r=function(t,e,s){if(null===e)return"";if("object"!=typeof e)return String(e);if(Ga(t)&&s?.doc){const e=Fc(s.doc,{});e.anchors=new Set;for(const t of s.anchors.keys())e.anchors.add(t.anchor);e.inFlow=!0,e.inStringifyKey=!0;const n=t.toString(e);if(!s.mapKeyWarned){let t=JSON.stringify(n);t.length>40&&(t=t.substring(0,36)+'..."'),jc(s.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${t}. Set mapAsMap: true to use object keys.`),s.mapKeyWarned=!0}return n}return JSON.stringify(e)}(s,i,t),o=hc(n,r,t);r in e?Object.defineProperty(e,r,{value:o,writable:!0,enumerable:!0,configurable:!0}):e[r]=o}}return e}function Kc(t,e,s){const n=yc(t,void 0,s),i=yc(e,void 0,s);return new qc(n,i)}class qc{constructor(t,e=null){Object.defineProperty(this,ja,{value:Da}),this.key=t,this.value=e}clone(t){let{key:e,value:s}=this;return Ga(e)&&(e=e.clone(t)),Ga(s)&&(s=s.clone(t)),new qc(e,s)}toJSON(t,e){return Uc(e,e?.mapAsMap?new Map:{},this)}toString(t,e,s){return t?.doc?function({key:t,value:e},s,n,i){const{allNullValues:r,doc:o,indent:a,indentStep:c,options:{commentString:l,indentSeq:h,simpleKeys:u}}=s;let f=Ga(t)&&t.comment||null;if(u){if(f)throw new Error("With simple keys, key nodes cannot have comments");if(qa(t)||!Ga(t)&&"object"==typeof t)throw new Error("With simple keys, collection cannot be used as a key value")}let d=!u&&(!t||f&&null==e&&!s.inFlow||qa(t)||(Ua(t)?t.type===mc.BLOCK_FOLDED||t.type===mc.BLOCK_LITERAL:"object"==typeof t));s=Object.assign({},s,{allNullValues:!1,implicitKey:!d&&(u||!r),indent:a+c});let p,m,y,g=!1,w=!1,b=Pc(t,s,(()=>g=!0),(()=>w=!0));if(!d&&!s.inFlow&&b.length>1024){if(u)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");d=!0}if(s.inFlow){if(r||null==e)return g&&n&&n(),""===b?"?":d?`? ${b}`:b}else if(r&&!u||null==e&&d)return b=`? ${b}`,f&&!g?b+=kc(b,s.indent,l(f)):w&&i&&i(),b;g&&(f=null),d?(f&&(b+=kc(b,s.indent,l(f))),b=`? ${b}\n${a}:`):(b=`${b}:`,f&&(b+=kc(b,s.indent,l(f)))),Ga(e)?(p=!!e.spaceBefore,m=e.commentBefore,y=e.comment):(p=!1,m=null,y=null,e&&"object"==typeof e&&(e=o.createNode(e))),s.implicitKey=!1,d||f||!Ua(e)||(s.indentAtStart=b.length+1),w=!1,h||!(c.length>=2)||s.inFlow||d||!Ka(e)||e.flow||e.tag||e.anchor||(s.indent=s.indent.substring(2));let v=!1;const S=Pc(e,s,(()=>v=!0),(()=>w=!0));let k=" ";if(f||p||m)k=p?"\n":"",m&&(k+=`\n${Sc(l(m),s.indent)}`),""!==S||s.inFlow?k+=`\n${s.indent}`:"\n"===k&&(k="\n\n");else if(!d&&qa(e)){const t=S[0],n=S.indexOf("\n"),i=-1!==n,r=s.inFlow??e.flow??0===e.items.length;if(i||!r){let e=!1;if(i&&("&"===t||"!"===t)){let s=S.indexOf(" ");"&"===t&&-1!==s&&s<n&&"!"===S[s+1]&&(s=S.indexOf(" ",s+1)),(-1===s||n<s)&&(e=!0)}e||(k=`\n${s.indent}`)}}else""!==S&&"\n"!==S[0]||(k="");return b+=k+S,s.inFlow?v&&n&&n():y&&!v?b+=kc(b,s.indent,l(y)):w&&i&&i(),b}(this,t,e,s):JSON.stringify(this)}}function Gc(t,e,s){return(e.inFlow??t.flow?Vc:Yc)(t,e,s)}function Yc({comment:t,items:e},s,{blockItemPrefix:n,flowChars:i,itemIndent:r,onChompKeep:o,onComment:a}){const{indent:c,options:{commentString:l}}=s,h=Object.assign({},s,{indent:r,type:null});let u=!1;const f=[];for(let t=0;t<e.length;++t){const i=e[t];let o=null;if(Ga(i))!u&&i.spaceBefore&&f.push(""),Jc(s,f,i.commentBefore,u),i.comment&&(o=i.comment);else if(Wa(i)){const t=Ga(i.key)?i.key:null;t&&(!u&&t.spaceBefore&&f.push(""),Jc(s,f,t.commentBefore,u))}u=!1;let a=Pc(i,h,(()=>o=null),(()=>u=!0));o&&(a+=kc(a,r,l(o))),u&&o&&(u=!1),f.push(n+a)}let d;if(0===f.length)d=i.start+i.end;else{d=f[0];for(let t=1;t<f.length;++t){const e=f[t];d+=e?`\n${c}${e}`:"\n"}}return t?(d+="\n"+Sc(l(t),c),a&&a()):u&&o&&o(),d}function Vc({items:t},e,{flowChars:s,itemIndent:n}){const{indent:i,indentStep:r,flowCollectionPadding:o,options:{commentString:a}}=e;n+=r;const c=Object.assign({},e,{indent:n,inFlow:!0,type:null});let l=!1,h=0;const u=[];for(let s=0;s<t.length;++s){const i=t[s];let r=null;if(Ga(i))i.spaceBefore&&u.push(""),Jc(e,u,i.commentBefore,!1),i.comment&&(r=i.comment);else if(Wa(i)){const t=Ga(i.key)?i.key:null;t&&(t.spaceBefore&&u.push(""),Jc(e,u,t.commentBefore,!1),t.comment&&(l=!0));const s=Ga(i.value)?i.value:null;s?(s.comment&&(r=s.comment),s.commentBefore&&(l=!0)):null==i.value&&t?.comment&&(r=t.comment)}r&&(l=!0);let o=Pc(i,c,(()=>r=null));s<t.length-1&&(o+=","),r&&(o+=kc(o,n,a(r))),!l&&(u.length>h||o.includes("\n"))&&(l=!0),u.push(o),h=u.length}const{start:f,end:d}=s;if(0===u.length)return f+d;if(!l){const t=u.reduce(((t,e)=>t+e.length+2),2);l=e.options.lineWidth>0&&t>e.options.lineWidth}if(l){let t=f;for(const e of u)t+=e?`\n${r}${i}${e}`:"\n";return`${t}\n${i}${d}`}return`${f}${o}${u.join(" ")}${o}${d}`}function Jc({indent:t,options:{commentString:e}},s,n,i){if(n&&i&&(n=n.replace(/^\n+/,"")),n){const i=Sc(e(n),t);s.push(i.trimStart())}}function Hc(t,e){const s=Ua(e)?e.value:e;for(const n of t)if(Wa(n)){if(n.key===e||n.key===s)return n;if(Ua(n.key)&&n.key.value===s)return n}}class Qc extends bc{static get tagName(){return"tag:yaml.org,2002:map"}constructor(t){super(_a,t),this.items=[]}static from(t,e,s){const{keepUndefined:n,replacer:i}=s,r=new this(t),o=(t,o)=>{if("function"==typeof i)o=i.call(e,t,o);else if(Array.isArray(i)&&!i.includes(t))return;(void 0!==o||n)&&r.items.push(Kc(t,o,s))};if(e instanceof Map)for(const[t,s]of e)o(t,s);else if(e&&"object"==typeof e)for(const t of Object.keys(e))o(t,e[t]);return"function"==typeof t.sortMapEntries&&r.items.sort(t.sortMapEntries),r}add(t,e){let s;s=Wa(t)?t:t&&"object"==typeof t&&"key"in t?new qc(t.key,t.value):new qc(t,t?.value);const n=Hc(this.items,s.key),i=this.schema?.sortMapEntries;if(n){if(!e)throw new Error(`Key ${s.key} already set`);Ua(n.value)&&pc(s.value)?n.value.value=s.value:n.value=s.value}else if(i){const t=this.items.findIndex((t=>i(s,t)<0));-1===t?this.items.push(s):this.items.splice(t,0,s)}else this.items.push(s)}delete(t){const e=Hc(this.items,t);if(!e)return!1;return this.items.splice(this.items.indexOf(e),1).length>0}get(t,e){const s=Hc(this.items,t),n=s?.value;return(!e&&Ua(n)?n.value:n)??void 0}has(t){return!!Hc(this.items,t)}set(t,e){this.add(new qc(t,e),!0)}toJSON(t,e,s){const n=s?new s:e?.mapAsMap?new Map:{};e?.onCreate&&e.onCreate(n);for(const t of this.items)Uc(e,n,t);return n}toString(t,e,s){if(!t)return JSON.stringify(this);for(const t of this.items)if(!Wa(t))throw new Error(`Map items must all be pairs; found ${JSON.stringify(t)} instead`);return!t.allNullValues&&this.hasAllNullValues(!1)&&(t=Object.assign({},t,{allNullValues:!0})),Gc(this,t,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:t.indent||"",onChompKeep:s,onComment:e})}}const Xc={collection:"map",default:!0,nodeClass:Qc,tag:"tag:yaml.org,2002:map",resolve:(t,e)=>(za(t)||e("Expected a mapping for this tag"),t),createNode:(t,e,s)=>Qc.from(t,e,s)};class Zc extends bc{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(t){super(Pa,t),this.items=[]}add(t){this.items.push(t)}delete(t){const e=tl(t);if("number"!=typeof e)return!1;return this.items.splice(e,1).length>0}get(t,e){const s=tl(t);if("number"!=typeof s)return;const n=this.items[s];return!e&&Ua(n)?n.value:n}has(t){const e=tl(t);return"number"==typeof e&&e<this.items.length}set(t,e){const s=tl(t);if("number"!=typeof s)throw new Error(`Expected a valid index, not ${t}.`);const n=this.items[s];Ua(n)&&pc(e)?n.value=e:this.items[s]=e}toJSON(t,e){const s=[];e?.onCreate&&e.onCreate(s);let n=0;for(const t of this.items)s.push(hc(t,String(n++),e));return s}toString(t,e,s){return t?Gc(this,t,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(t.indent||"")+"  ",onChompKeep:s,onComment:e}):JSON.stringify(this)}static from(t,e,s){const{replacer:n}=s,i=new this(t);if(e&&Symbol.iterator in Object(e)){let t=0;for(let r of e){if("function"==typeof n){const s=e instanceof Set?r:String(t++);r=n.call(e,s,r)}i.items.push(yc(r,void 0,s))}}return i}}function tl(t){let e=Ua(t)?t.value:t;return e&&"string"==typeof e&&(e=Number(e)),"number"==typeof e&&Number.isInteger(e)&&e>=0?e:null}const el={collection:"seq",default:!0,nodeClass:Zc,tag:"tag:yaml.org,2002:seq",resolve:(t,e)=>(Ka(t)||e("Expected a sequence for this tag"),t),createNode:(t,e,s)=>Zc.from(t,e,s)},sl={identify:t=>"string"==typeof t,default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:(t,e,s,n)=>Dc(t,e=Object.assign({actualString:!0},e),s,n)},nl={identify:t=>null==t,createNode:()=>new mc(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new mc(null),stringify:({source:t},e)=>"string"==typeof t&&nl.test.test(t)?t:e.options.nullStr},il={identify:t=>"boolean"==typeof t,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new mc("t"===t[0]||"T"===t[0]),stringify({source:t,value:e},s){if(t&&il.test.test(t)){if(e===("t"===t[0]||"T"===t[0]))return t}return e?s.options.trueStr:s.options.falseStr}};function rl({format:t,minFractionDigits:e,tag:s,value:n}){if("bigint"==typeof n)return String(n);const i="number"==typeof n?n:Number(n);if(!isFinite(i))return isNaN(i)?".nan":i<0?"-.inf":".inf";let r=JSON.stringify(n);if(!t&&e&&(!s||"tag:yaml.org,2002:float"===s)&&/^\d/.test(r)){let t=r.indexOf(".");t<0&&(t=r.length,r+=".");let s=e-(r.length-t-1);for(;s-- >0;)r+="0"}return r}const ol={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>"nan"===t.slice(-3).toLowerCase()?NaN:"-"===t[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:rl},al={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():rl(t)}},cl={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){const e=new mc(parseFloat(t)),s=t.indexOf(".");return-1!==s&&"0"===t[t.length-1]&&(e.minFractionDigits=t.length-s-1),e},stringify:rl},ll=t=>"bigint"==typeof t||Number.isInteger(t),hl=(t,e,s,{intAsBigInt:n})=>n?BigInt(t):parseInt(t.substring(e),s);function ul(t,e,s){const{value:n}=t;return ll(n)&&n>=0?s+n.toString(e):rl(t)}const fl={identify:t=>ll(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,s)=>hl(t,2,8,s),stringify:t=>ul(t,8,"0o")},dl={identify:ll,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,s)=>hl(t,0,10,s),stringify:rl},pl={identify:t=>ll(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,s)=>hl(t,2,16,s),stringify:t=>ul(t,16,"0x")},ml=[Xc,el,sl,nl,il,fl,dl,pl,ol,al,cl];function yl(t){return"bigint"==typeof t||Number.isInteger(t)}const gl=({value:t})=>JSON.stringify(t),wl=[Xc,el].concat([{identify:t=>"string"==typeof t,default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:gl},{identify:t=>null==t,createNode:()=>new mc(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:gl},{identify:t=>"boolean"==typeof t,default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:t=>"true"===t,stringify:gl},{identify:yl,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:s})=>s?BigInt(t):parseInt(t,10),stringify:({value:t})=>yl(t)?t.toString():JSON.stringify(t)},{identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:gl}],{default:!0,tag:"",test:/^/,resolve:(t,e)=>(e(`Unresolved plain scalar ${JSON.stringify(t)}`),t)}),bl={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if("function"==typeof atob){const e=atob(t.replace(/[\n\r]/g,"")),s=new Uint8Array(e.length);for(let t=0;t<e.length;++t)s[t]=e.charCodeAt(t);return s}return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:s},n,i,r){if(!s)return"";const o=s;let a;if("function"!=typeof btoa)throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");{let t="";for(let e=0;e<o.length;++e)t+=String.fromCharCode(o[e]);a=btoa(t)}if(e??(e=mc.BLOCK_LITERAL),e!==mc.QUOTE_DOUBLE){const t=Math.max(n.options.lineWidth-n.indent.length,n.options.minContentWidth),s=Math.ceil(a.length/t),i=new Array(s);for(let e=0,n=0;e<s;++e,n+=t)i[e]=a.substr(n,t);a=i.join(e===mc.BLOCK_LITERAL?"\n":" ")}return Dc({comment:t,type:e,value:a},n,i,r)}};function vl(t,e){if(Ka(t))for(let s=0;s<t.items.length;++s){let n=t.items[s];if(!Wa(n)){if(za(n)){n.items.length>1&&e("Each pair must have its own sequence indicator");const t=n.items[0]||new qc(new mc(null));if(n.commentBefore&&(t.key.commentBefore=t.key.commentBefore?`${n.commentBefore}\n${t.key.commentBefore}`:n.commentBefore),n.comment){const e=t.value??t.key;e.comment=e.comment?`${n.comment}\n${e.comment}`:n.comment}n=t}t.items[s]=Wa(n)?n:new qc(n)}}else e("Expected a sequence for this tag");return t}function Sl(t,e,s){const{replacer:n}=s,i=new Zc(t);i.tag="tag:yaml.org,2002:pairs";let r=0;if(e&&Symbol.iterator in Object(e))for(let t of e){let o,a;if("function"==typeof n&&(t=n.call(e,String(r++),t)),Array.isArray(t)){if(2!==t.length)throw new TypeError(`Expected [key, value] tuple: ${t}`);o=t[0],a=t[1]}else if(t&&t instanceof Object){const e=Object.keys(t);if(1!==e.length)throw new TypeError(`Expected tuple with one key, not ${e.length} keys`);o=e[0],a=t[o]}else o=t;i.items.push(Kc(o,a,s))}return i}const kl={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:vl,createNode:Sl};class El extends Zc{constructor(){super(),this.add=Qc.prototype.add.bind(this),this.delete=Qc.prototype.delete.bind(this),this.get=Qc.prototype.get.bind(this),this.has=Qc.prototype.has.bind(this),this.set=Qc.prototype.set.bind(this),this.tag=El.tag}toJSON(t,e){if(!e)return super.toJSON(t);const s=new Map;e?.onCreate&&e.onCreate(s);for(const t of this.items){let n,i;if(Wa(t)?(n=hc(t.key,"",e),i=hc(t.value,n,e)):n=hc(t,"",e),s.has(n))throw new Error("Ordered maps must not include duplicate keys");s.set(n,i)}return s}static from(t,e,s){const n=Sl(t,e,s),i=new this;return i.items=n.items,i}}El.tag="tag:yaml.org,2002:omap";const Ol={collection:"seq",identify:t=>t instanceof Map,nodeClass:El,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){const s=vl(t,e),n=[];for(const{key:t}of s.items)Ua(t)&&(n.includes(t.value)?e(`Ordered maps must not include duplicate keys: ${t.value}`):n.push(t.value));return Object.assign(new El,s)},createNode:(t,e,s)=>El.from(t,e,s)};function xl({value:t,source:e},s){return e&&(t?Nl:Tl).test.test(e)?e:t?s.options.trueStr:s.options.falseStr}const Nl={identify:t=>!0===t,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new mc(!0),stringify:xl},Tl={identify:t=>!1===t,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new mc(!1),stringify:xl},Al={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>"nan"===t.slice(-3).toLowerCase()?NaN:"-"===t[0]?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:rl},Ll={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():rl(t)}},Cl={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){const e=new mc(parseFloat(t.replace(/_/g,""))),s=t.indexOf(".");if(-1!==s){const n=t.substring(s+1).replace(/_/g,"");"0"===n[n.length-1]&&(e.minFractionDigits=n.length)}return e},stringify:rl},Ml=t=>"bigint"==typeof t||Number.isInteger(t);function $l(t,e,s,{intAsBigInt:n}){const i=t[0];if("-"!==i&&"+"!==i||(e+=1),t=t.substring(e).replace(/_/g,""),n){switch(s){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`}const e=BigInt(t);return"-"===i?BigInt(-1)*e:e}const r=parseInt(t,s);return"-"===i?-1*r:r}function Il(t,e,s){const{value:n}=t;if(Ml(n)){const t=n.toString(e);return n<0?"-"+s+t.substr(1):s+t}return rl(t)}const _l={identify:Ml,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,s)=>$l(t,2,2,s),stringify:t=>Il(t,2,"0b")},Dl={identify:Ml,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,s)=>$l(t,1,8,s),stringify:t=>Il(t,8,"0")},Fl={identify:Ml,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,s)=>$l(t,0,10,s),stringify:rl},Pl={identify:Ml,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,s)=>$l(t,2,16,s),stringify:t=>Il(t,16,"0x")};class jl extends Qc{constructor(t){super(t),this.tag=jl.tag}add(t){let e;e=Wa(t)?t:t&&"object"==typeof t&&"key"in t&&"value"in t&&null===t.value?new qc(t.key,null):new qc(t,null);Hc(this.items,e.key)||this.items.push(e)}get(t,e){const s=Hc(this.items,t);return!e&&Wa(s)?Ua(s.key)?s.key.value:s.key:s}set(t,e){if("boolean"!=typeof e)throw new Error("Expected boolean value for set(key, value) in a YAML set, not "+typeof e);const s=Hc(this.items,t);s&&!e?this.items.splice(this.items.indexOf(s),1):!s&&e&&this.items.push(new qc(t))}toJSON(t,e){return super.toJSON(t,e,Set)}toString(t,e,s){if(!t)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},t,{allNullValues:!0}),e,s);throw new Error("Set items must all have null values")}static from(t,e,s){const{replacer:n}=s,i=new this(t);if(e&&Symbol.iterator in Object(e))for(let t of e)"function"==typeof n&&(t=n.call(e,t,t)),i.items.push(Kc(t,null,s));return i}}jl.tag="tag:yaml.org,2002:set";const Rl={collection:"map",identify:t=>t instanceof Set,nodeClass:jl,default:!1,tag:"tag:yaml.org,2002:set",createNode:(t,e,s)=>jl.from(t,e,s),resolve(t,e){if(za(t)){if(t.hasAllNullValues(!0))return Object.assign(new jl,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t}};function Bl(t,e){const s=t[0],n="-"===s||"+"===s?t.substring(1):t,i=t=>e?BigInt(t):Number(t),r=n.replace(/_/g,"").split(":").reduce(((t,e)=>t*i(60)+i(e)),i(0));return"-"===s?i(-1)*r:r}function zl(t){let{value:e}=t,s=t=>t;if("bigint"==typeof e)s=t=>BigInt(t);else if(isNaN(e)||!isFinite(e))return rl(t);let n="";e<0&&(n="-",e*=s(-1));const i=s(60),r=[e%i];return e<60?r.unshift(0):(e=(e-r[0])/i,r.unshift(e%i),e>=60&&(e=(e-r[0])/i,r.unshift(e))),n+r.map((t=>String(t).padStart(2,"0"))).join(":").replace(/000000\d*$/,"")}const Wl={identify:t=>"bigint"==typeof t||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:s})=>Bl(t,s),stringify:zl},Ul={identify:t=>"number"==typeof t,default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>Bl(t,!1),stringify:zl},Kl={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){const e=t.match(Kl.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,s,n,i,r,o,a]=e.map(Number),c=e[7]?Number((e[7]+"00").substr(1,3)):0;let l=Date.UTC(s,n-1,i,r||0,o||0,a||0,c);const h=e[8];if(h&&"Z"!==h){let t=Bl(h,!1);Math.abs(t)<30&&(t*=60),l-=6e4*t}return new Date(l)},stringify:({value:t})=>t?.toISOString().replace(/(T00:00:00)?\.000Z$/,"")??""},ql=[Xc,el,sl,nl,Nl,Tl,_l,Dl,Fl,Pl,Al,Ll,Cl,bl,Bc,Ol,kl,Rl,Wl,Ul,Kl],Gl=new Map([["core",ml],["failsafe",[Xc,el,sl]],["json",wl],["yaml11",ql],["yaml-1.1",ql]]),Yl={binary:bl,bool:il,float:cl,floatExp:al,floatNaN:ol,floatTime:Ul,int:dl,intHex:pl,intOct:fl,intTime:Wl,map:Xc,merge:Bc,null:nl,omap:Ol,pairs:kl,seq:el,set:Rl,timestamp:Kl},Vl={"tag:yaml.org,2002:binary":bl,"tag:yaml.org,2002:merge":Bc,"tag:yaml.org,2002:omap":Ol,"tag:yaml.org,2002:pairs":kl,"tag:yaml.org,2002:set":Rl,"tag:yaml.org,2002:timestamp":Kl};function Jl(t,e,s){const n=Gl.get(e);if(n&&!t)return s&&!n.includes(Bc)?n.concat(Bc):n.slice();let i=n;if(!i){if(!Array.isArray(t)){const t=Array.from(Gl.keys()).filter((t=>"yaml11"!==t)).map((t=>JSON.stringify(t))).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${t} or define customTags array`)}i=[]}if(Array.isArray(t))for(const e of t)i=i.concat(e);else"function"==typeof t&&(i=t(i.slice()));return s&&(i=i.concat(Bc)),i.reduce(((t,e)=>{const s="string"==typeof e?Yl[e]:e;if(!s){const t=JSON.stringify(e),s=Object.keys(Yl).map((t=>JSON.stringify(t))).join(", ");throw new Error(`Unknown custom tag ${t}; use one of ${s}`)}return t.includes(s)||t.push(s),t}),[])}const Hl=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0;class Ql{constructor({compat:t,customTags:e,merge:s,resolveKnownTags:n,schema:i,sortMapEntries:r,toStringDefaults:o}){this.compat=Array.isArray(t)?Jl(t,"compat"):t?Jl(null,t):null,this.name="string"==typeof i&&i||"core",this.knownTags=n?Vl:{},this.tags=Jl(e,this.name,s),this.toStringOptions=o??null,Object.defineProperty(this,_a,{value:Xc}),Object.defineProperty(this,Fa,{value:sl}),Object.defineProperty(this,Pa,{value:el}),this.sortMapEntries="function"==typeof r?r:!0===r?Hl:null}clone(){const t=Object.create(Ql.prototype,Object.getOwnPropertyDescriptors(this));return t.tags=this.tags.slice(),t}}class Xl{constructor(t,e,s){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,ja,{value:Ia});let n=null;"function"==typeof e||Array.isArray(e)?n=e:void 0===s&&e&&(s=e,e=void 0);const i=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},s);this.options=i;let{version:r}=i;s?._directives?(this.directives=s._directives.atDocument(),this.directives.yaml.explicit&&(r=this.directives.yaml.version)):this.directives=new rc({version:r}),this.setSchema(r,s),this.contents=void 0===t?null:this.createNode(t,n,s)}clone(){const t=Object.create(Xl.prototype,{[ja]:{value:Ia}});return t.commentBefore=this.commentBefore,t.comment=this.comment,t.errors=this.errors.slice(),t.warnings=this.warnings.slice(),t.options=Object.assign({},this.options),this.directives&&(t.directives=this.directives.clone()),t.schema=this.schema.clone(),t.contents=Ga(this.contents)?this.contents.clone(t.schema):this.contents,this.range&&(t.range=this.range.slice()),t}add(t){Zl(this.contents)&&this.contents.add(t)}addIn(t,e){Zl(this.contents)&&this.contents.addIn(t,e)}createAlias(t,e){if(!t.anchor){const s=ac(this);t.anchor=!e||s.has(e)?cc(e||"a",s):e}return new fc(t.anchor)}createNode(t,e,s){let n;if("function"==typeof e)t=e.call({"":t},"",t),n=e;else if(Array.isArray(e)){const t=t=>"number"==typeof t||t instanceof String||t instanceof Number,s=e.filter(t).map(String);s.length>0&&(e=e.concat(s)),n=e}else void 0===s&&e&&(s=e,e=void 0);const{aliasDuplicateObjects:i,anchorPrefix:r,flow:o,keepUndefined:a,onTagObj:c,tag:l}=s??{},{onAnchor:h,setAnchors:u,sourceObjects:f}=function(t,e){const s=[],n=new Map;let i=null;return{onAnchor:n=>{s.push(n),i??(i=ac(t));const r=cc(e,i);return i.add(r),r},setAnchors:()=>{for(const t of s){const e=n.get(t);if("object"!=typeof e||!e.anchor||!Ua(e.node)&&!qa(e.node)){const e=new Error("Failed to resolve repeated object (this should not happen)");throw e.source=t,e}e.node.anchor=e.anchor}},sourceObjects:n}}(this,r||"a"),d=yc(t,l,{aliasDuplicateObjects:i??!0,keepUndefined:a??!1,onAnchor:h,onTagObj:c,replacer:n,schema:this.schema,sourceObjects:f});return o&&qa(d)&&(d.flow=!0),u(),d}createPair(t,e,s={}){const n=this.createNode(t,null,s),i=this.createNode(e,null,s);return new qc(n,i)}delete(t){return!!Zl(this.contents)&&this.contents.delete(t)}deleteIn(t){return wc(t)?null!=this.contents&&(this.contents=null,!0):!!Zl(this.contents)&&this.contents.deleteIn(t)}get(t,e){return qa(this.contents)?this.contents.get(t,e):void 0}getIn(t,e){return wc(t)?!e&&Ua(this.contents)?this.contents.value:this.contents:qa(this.contents)?this.contents.getIn(t,e):void 0}has(t){return!!qa(this.contents)&&this.contents.has(t)}hasIn(t){return wc(t)?void 0!==this.contents:!!qa(this.contents)&&this.contents.hasIn(t)}set(t,e){null==this.contents?this.contents=gc(this.schema,[t],e):Zl(this.contents)&&this.contents.set(t,e)}setIn(t,e){wc(t)?this.contents=e:null==this.contents?this.contents=gc(this.schema,Array.from(t),e):Zl(this.contents)&&this.contents.setIn(t,e)}setSchema(t,e={}){let s;switch("number"==typeof t&&(t=String(t)),t){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new rc({version:"1.1"}),s={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=t:this.directives=new rc({version:t}),s={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,s=null;break;default:{const e=JSON.stringify(t);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${e}`)}}if(e.schema instanceof Object)this.schema=e.schema;else{if(!s)throw new Error("With a null YAML version, the { schema: Schema } option is required");this.schema=new Ql(Object.assign(s,e))}}toJS({json:t,jsonArg:e,mapAsMap:s,maxAliasCount:n,onAnchor:i,reviver:r}={}){const o={anchors:new Map,doc:this,keep:!t,mapAsMap:!0===s,mapKeyWarned:!1,maxAliasCount:"number"==typeof n?n:100},a=hc(this.contents,e??"",o);if("function"==typeof i)for(const{count:t,res:e}of o.anchors.values())i(e,t);return"function"==typeof r?lc(r,{"":a},"",a):a}toJSON(t,e){return this.toJS({json:!0,jsonArg:t,mapAsMap:!1,onAnchor:e})}toString(t={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in t&&(!Number.isInteger(t.indent)||Number(t.indent)<=0)){const e=JSON.stringify(t.indent);throw new Error(`"indent" option must be a positive integer, not ${e}`)}return function(t,e){const s=[];let n=!0===e.directives;if(!1!==e.directives&&t.directives){const e=t.directives.toString(t);e?(s.push(e),n=!0):t.directives.docStart&&(n=!0)}n&&s.push("---");const i=Fc(t,e),{commentString:r}=i.options;if(t.commentBefore){1!==s.length&&s.unshift("");const e=r(t.commentBefore);s.unshift(Sc(e,""))}let o=!1,a=null;if(t.contents){if(Ga(t.contents)){if(t.contents.spaceBefore&&n&&s.push(""),t.contents.commentBefore){const e=r(t.contents.commentBefore);s.push(Sc(e,""))}i.forceBlockIndent=!!t.comment,a=t.contents.comment}const e=a?void 0:()=>o=!0;let c=Pc(t.contents,i,(()=>a=null),e);a&&(c+=kc(c,"",r(a))),"|"!==c[0]&&">"!==c[0]||"---"!==s[s.length-1]?s.push(c):s[s.length-1]=`--- ${c}`}else s.push(Pc(t.contents,i));if(t.directives?.docEnd)if(t.comment){const e=r(t.comment);e.includes("\n")?(s.push("..."),s.push(Sc(e,""))):s.push(`... ${e}`)}else s.push("...");else{let e=t.comment;e&&o&&(e=e.replace(/^\n+/,"")),e&&(o&&!a||""===s[s.length-1]||s.push(""),s.push(Sc(r(e),"")))}return s.join("\n")+"\n"}(this,t)}}function Zl(t){if(qa(t))return!0;throw new Error("Expected a YAML collection as document contents")}class th extends Error{constructor(t,e,s,n){super(),this.name=t,this.code=s,this.message=n,this.pos=e}}class eh extends th{constructor(t,e,s){super("YAMLParseError",t,e,s)}}class sh extends th{constructor(t,e,s){super("YAMLWarning",t,e,s)}}const nh=(t,e)=>s=>{if(-1===s.pos[0])return;s.linePos=s.pos.map((t=>e.linePos(t)));const{line:n,col:i}=s.linePos[0];s.message+=` at line ${n}, column ${i}`;let r=i-1,o=t.substring(e.lineStarts[n-1],e.lineStarts[n]).replace(/[\n\r]+$/,"");if(r>=60&&o.length>80){const t=Math.min(r-39,o.length-79);o="…"+o.substring(t),r-=t-1}if(o.length>80&&(o=o.substring(0,79)+"…"),n>1&&/^ *$/.test(o.substring(0,r))){let s=t.substring(e.lineStarts[n-2],e.lineStarts[n-1]);s.length>80&&(s=s.substring(0,79)+"…\n"),o=s+o}if(/[^ ]/.test(o)){let t=1;const e=s.linePos[1];e&&e.line===n&&e.col>i&&(t=Math.max(1,Math.min(e.col-i,80-r)));const a=" ".repeat(r)+"^".repeat(t);s.message+=`:\n\n${o}\n${a}\n`}};function ih(t,{flow:e,indicator:s,next:n,offset:i,onError:r,parentIndent:o,startOnNewline:a}){let c=!1,l=a,h=a,u="",f="",d=!1,p=!1,m=null,y=null,g=null,w=null,b=null,v=null,S=null;for(const i of t)switch(p&&("space"!==i.type&&"newline"!==i.type&&"comma"!==i.type&&r(i.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),p=!1),m&&(l&&"comment"!==i.type&&"newline"!==i.type&&r(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),m=null),i.type){case"space":e||"doc-start"===s&&"flow-collection"===n?.type||!i.source.includes("\t")||(m=i),h=!0;break;case"comment":{h||r(i,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const t=i.source.substring(1)||" ";u?u+=f+t:u=t,f="",l=!1;break}case"newline":l?u?u+=i.source:v&&"seq-item-ind"===s||(c=!0):f+=i.source,l=!0,d=!0,(y||g)&&(w=i),h=!0;break;case"anchor":y&&r(i,"MULTIPLE_ANCHORS","A node can have at most one anchor"),i.source.endsWith(":")&&r(i.offset+i.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),y=i,S??(S=i.offset),l=!1,h=!1,p=!0;break;case"tag":g&&r(i,"MULTIPLE_TAGS","A node can have at most one tag"),g=i,S??(S=i.offset),l=!1,h=!1,p=!0;break;case s:(y||g)&&r(i,"BAD_PROP_ORDER",`Anchors and tags must be after the ${i.source} indicator`),v&&r(i,"UNEXPECTED_TOKEN",`Unexpected ${i.source} in ${e??"collection"}`),v=i,l="seq-item-ind"===s||"explicit-key-ind"===s,h=!1;break;case"comma":if(e){b&&r(i,"UNEXPECTED_TOKEN",`Unexpected , in ${e}`),b=i,l=!1,h=!1;break}default:r(i,"UNEXPECTED_TOKEN",`Unexpected ${i.type} token`),l=!1,h=!1}const k=t[t.length-1],E=k?k.offset+k.source.length:i;return p&&n&&"space"!==n.type&&"newline"!==n.type&&"comma"!==n.type&&("scalar"!==n.type||""!==n.source)&&r(n.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),m&&(l&&m.indent<=o||"block-map"===n?.type||"block-seq"===n?.type)&&r(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:b,found:v,spaceBefore:c,comment:u,hasNewline:d,anchor:y,tag:g,newlineAfterProp:w,end:E,start:S??E}}function rh(t){if(!t)return null;switch(t.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(t.source.includes("\n"))return!0;if(t.end)for(const e of t.end)if("newline"===e.type)return!0;return!1;case"flow-collection":for(const e of t.items){for(const t of e.start)if("newline"===t.type)return!0;if(e.sep)for(const t of e.sep)if("newline"===t.type)return!0;if(rh(e.key)||rh(e.value))return!0}return!1;default:return!0}}function oh(t,e,s){if("flow-collection"===e?.type){const n=e.end[0];if(n.indent===t&&("]"===n.source||"}"===n.source)&&rh(e)){s(n,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}}function ah(t,e,s){const{uniqueKeys:n}=t.options;if(!1===n)return!1;const i="function"==typeof n?n:(t,e)=>t===e||Ua(t)&&Ua(e)&&t.value===e.value;return e.some((t=>i(t.key,s)))}const ch="All mapping items must start at the same column";function lh(t,e,s,n){let i="";if(t){let r=!1,o="";for(const a of t){const{source:t,type:c}=a;switch(c){case"space":r=!0;break;case"comment":{s&&!r&&n(a,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");const e=t.substring(1)||" ";i?i+=o+e:i=e,o="";break}case"newline":i&&(o+=t),r=!0;break;default:n(a,"UNEXPECTED_TOKEN",`Unexpected ${c} at node end`)}e+=t.length}}return{comment:i,offset:e}}const hh="Block collections are not allowed within flow collections",uh=t=>t&&("block-map"===t.type||"block-seq"===t.type);function fh(t,e,s,n,i,r){const o="block-map"===s.type?function({composeNode:t,composeEmptyNode:e},s,n,i,r){const o=new(r?.nodeClass??Qc)(s.schema);s.atRoot&&(s.atRoot=!1);let a=n.offset,c=null;for(const r of n.items){const{start:l,key:h,sep:u,value:f}=r,d=ih(l,{indicator:"explicit-key-ind",next:h??u?.[0],offset:a,onError:i,parentIndent:n.indent,startOnNewline:!0}),p=!d.found;if(p){if(h&&("block-seq"===h.type?i(a,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in h&&h.indent!==n.indent&&i(a,"BAD_INDENT",ch)),!d.anchor&&!d.tag&&!u){c=d.end,d.comment&&(o.comment?o.comment+="\n"+d.comment:o.comment=d.comment);continue}(d.newlineAfterProp||rh(h))&&i(h??l[l.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else d.found?.indent!==n.indent&&i(a,"BAD_INDENT",ch);s.atKey=!0;const m=d.end,y=h?t(s,h,d,i):e(s,m,l,null,d,i);s.schema.compat&&oh(n.indent,h,i),s.atKey=!1,ah(s,o.items,y)&&i(m,"DUPLICATE_KEY","Map keys must be unique");const g=ih(u??[],{indicator:"map-value-ind",next:f,offset:y.range[2],onError:i,parentIndent:n.indent,startOnNewline:!h||"block-scalar"===h.type});if(a=g.end,g.found){p&&("block-map"!==f?.type||g.hasNewline||i(a,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),s.options.strict&&d.start<g.found.offset-1024&&i(y.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));const c=f?t(s,f,g,i):e(s,a,u,null,g,i);s.schema.compat&&oh(n.indent,f,i),a=c.range[2];const l=new qc(y,c);s.options.keepSourceTokens&&(l.srcToken=r),o.items.push(l)}else{p&&i(y.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),g.comment&&(y.comment?y.comment+="\n"+g.comment:y.comment=g.comment);const t=new qc(y);s.options.keepSourceTokens&&(t.srcToken=r),o.items.push(t)}}return c&&c<a&&i(c,"IMPOSSIBLE","Map comment with trailing content"),o.range=[n.offset,a,c??a],o}(t,e,s,n,r):"block-seq"===s.type?function({composeNode:t,composeEmptyNode:e},s,n,i,r){const o=new(r?.nodeClass??Zc)(s.schema);s.atRoot&&(s.atRoot=!1),s.atKey&&(s.atKey=!1);let a=n.offset,c=null;for(const{start:r,value:l}of n.items){const h=ih(r,{indicator:"seq-item-ind",next:l,offset:a,onError:i,parentIndent:n.indent,startOnNewline:!0});if(!h.found){if(!(h.anchor||h.tag||l)){c=h.end,h.comment&&(o.comment=h.comment);continue}l&&"block-seq"===l.type?i(h.end,"BAD_INDENT","All sequence items must start at the same column"):i(a,"MISSING_CHAR","Sequence item without - indicator")}const u=l?t(s,l,h,i):e(s,h.end,r,null,h,i);s.schema.compat&&oh(n.indent,l,i),a=u.range[2],o.items.push(u)}return o.range=[n.offset,a,c??a],o}(t,e,s,n,r):function({composeNode:t,composeEmptyNode:e},s,n,i,r){const o="{"===n.start.source,a=o?"flow map":"flow sequence",c=new(r?.nodeClass??(o?Qc:Zc))(s.schema);c.flow=!0;const l=s.atRoot;l&&(s.atRoot=!1),s.atKey&&(s.atKey=!1);let h=n.offset+n.start.source.length;for(let r=0;r<n.items.length;++r){const l=n.items[r],{start:u,key:f,sep:d,value:p}=l,m=ih(u,{flow:a,indicator:"explicit-key-ind",next:f??d?.[0],offset:h,onError:i,parentIndent:n.indent,startOnNewline:!1});if(!m.found){if(!(m.anchor||m.tag||d||p)){0===r&&m.comma?i(m.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`):r<n.items.length-1&&i(m.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${a}`),m.comment&&(c.comment?c.comment+="\n"+m.comment:c.comment=m.comment),h=m.end;continue}!o&&s.options.strict&&rh(f)&&i(f,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(0===r)m.comma&&i(m.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${a}`);else if(m.comma||i(m.start,"MISSING_CHAR",`Missing , between ${a} items`),m.comment){let t="";t:for(const e of u)switch(e.type){case"comma":case"space":break;case"comment":t=e.source.substring(1);break t;default:break t}if(t){let e=c.items[c.items.length-1];Wa(e)&&(e=e.value??e.key),e.comment?e.comment+="\n"+t:e.comment=t,m.comment=m.comment.substring(t.length+1)}}if(o||d||m.found){s.atKey=!0;const r=m.end,y=f?t(s,f,m,i):e(s,r,u,null,m,i);uh(f)&&i(y.range,"BLOCK_IN_FLOW",hh),s.atKey=!1;const g=ih(d??[],{flow:a,indicator:"map-value-ind",next:p,offset:y.range[2],onError:i,parentIndent:n.indent,startOnNewline:!1});if(g.found){if(!o&&!m.found&&s.options.strict){if(d)for(const t of d){if(t===g.found)break;if("newline"===t.type){i(t,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}m.start<g.found.offset-1024&&i(g.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else p&&("source"in p&&p.source&&":"===p.source[0]?i(p,"MISSING_CHAR",`Missing space after : in ${a}`):i(g.start,"MISSING_CHAR",`Missing , or : between ${a} items`));const w=p?t(s,p,g,i):g.found?e(s,g.end,d,null,g,i):null;w?uh(p)&&i(w.range,"BLOCK_IN_FLOW",hh):g.comment&&(y.comment?y.comment+="\n"+g.comment:y.comment=g.comment);const b=new qc(y,w);if(s.options.keepSourceTokens&&(b.srcToken=l),o){const t=c;ah(s,t.items,y)&&i(r,"DUPLICATE_KEY","Map keys must be unique"),t.items.push(b)}else{const t=new Qc(s.schema);t.flow=!0,t.items.push(b);const e=(w??y).range;t.range=[y.range[0],e[1],e[2]],c.items.push(t)}h=w?w.range[2]:g.end}else{const n=p?t(s,p,m,i):e(s,m.end,d,null,m,i);c.items.push(n),h=n.range[2],uh(p)&&i(n.range,"BLOCK_IN_FLOW",hh)}}const u=o?"}":"]",[f,...d]=n.end;let p=h;if(f&&f.source===u)p=f.offset+f.source.length;else{const t=a[0].toUpperCase()+a.substring(1);i(h,l?"MISSING_CHAR":"BAD_INDENT",l?`${t} must end with a ${u}`:`${t} in block collection must be sufficiently indented and end with a ${u}`),f&&1!==f.source.length&&d.unshift(f)}if(d.length>0){const t=lh(d,p,s.options.strict,i);t.comment&&(c.comment?c.comment+="\n"+t.comment:c.comment=t.comment),c.range=[n.offset,p,t.offset]}else c.range=[n.offset,p,p];return c}(t,e,s,n,r),a=o.constructor;return"!"===i||i===a.tagName?(o.tag=a.tagName,o):(i&&(o.tag=i),o)}function dh(t,e,s){const n=e.offset,i=function({offset:t,props:e},s,n){if("block-scalar-header"!==e[0].type)return n(e[0],"IMPOSSIBLE","Block scalar header not found"),null;const{source:i}=e[0],r=i[0];let o=0,a="",c=-1;for(let e=1;e<i.length;++e){const s=i[e];if(a||"-"!==s&&"+"!==s){const n=Number(s);!o&&n?o=n:-1===c&&(c=t+e)}else a=s}-1!==c&&n(c,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${i}`);let l=!1,h="",u=i.length;for(let t=1;t<e.length;++t){const i=e[t];switch(i.type){case"space":l=!0;case"newline":u+=i.source.length;break;case"comment":if(s&&!l){n(i,"MISSING_CHAR","Comments must be separated from other tokens by white space characters")}u+=i.source.length,h=i.source.substring(1);break;case"error":n(i,"UNEXPECTED_TOKEN",i.message),u+=i.source.length;break;default:{n(i,"UNEXPECTED_TOKEN",`Unexpected token in block scalar header: ${i.type}`);const t=i.source;t&&"string"==typeof t&&(u+=t.length)}}}return{mode:r,indent:o,chomp:a,comment:h,length:u}}(e,t.options.strict,s);if(!i)return{value:"",type:null,comment:"",range:[n,n,n]};const r=">"===i.mode?mc.BLOCK_FOLDED:mc.BLOCK_LITERAL,o=e.source?function(t){const e=t.split(/\n( *)/),s=e[0],n=s.match(/^( *)/),i=[n?.[1]?[n[1],s.slice(n[1].length)]:["",s]];for(let t=1;t<e.length;t+=2)i.push([e[t],e[t+1]]);return i}(e.source):[];let a=o.length;for(let t=o.length-1;t>=0;--t){const e=o[t][1];if(""!==e&&"\r"!==e)break;a=t}if(0===a){const t="+"===i.chomp&&o.length>0?"\n".repeat(Math.max(1,o.length-1)):"";let s=n+i.length;return e.source&&(s+=e.source.length),{value:t,type:r,comment:i.comment,range:[n,s,s]}}let c=e.indent+i.indent,l=e.offset+i.length,h=0;for(let e=0;e<a;++e){const[n,r]=o[e];if(""!==r&&"\r"!==r){if(n.length<c){const t="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";s(l+n.length,"MISSING_CHAR",t)}if(0===i.indent&&(c=n.length),h=e,0===c&&!t.atRoot){s(l,"BAD_INDENT","Block scalar values in collections must be indented")}break}0===i.indent&&n.length>c&&(c=n.length),l+=n.length+r.length+1}for(let t=o.length-1;t>=a;--t)o[t][0].length>c&&(a=t+1);let u="",f="",d=!1;for(let t=0;t<h;++t)u+=o[t][0].slice(c)+"\n";for(let t=h;t<a;++t){let[e,n]=o[t];l+=e.length+n.length+1;const a="\r"===n[n.length-1];if(a&&(n=n.slice(0,-1)),n&&e.length<c){const t=`Block scalar lines must not be less indented than their ${i.indent?"explicit indentation indicator":"first line"}`;s(l-n.length-(a?2:1),"BAD_INDENT",t),e=""}r===mc.BLOCK_LITERAL?(u+=f+e.slice(c)+n,f="\n"):e.length>c||"\t"===n[0]?(" "===f?f="\n":d||"\n"!==f||(f="\n\n"),u+=f+e.slice(c)+n,f="\n",d=!0):""===n?"\n"===f?u+="\n":f="\n":(u+=f+n,f=" ",d=!1)}switch(i.chomp){case"-":break;case"+":for(let t=a;t<o.length;++t)u+="\n"+o[t][0].slice(c);"\n"!==u[u.length-1]&&(u+="\n");break;default:u+="\n"}const p=n+i.length+e.source.length;return{value:u,type:r,comment:i.comment,range:[n,p,p]}}function ph(t,e,s){const{offset:n,type:i,source:r,end:o}=t;let a,c;const l=(t,e,i)=>s(n+t,e,i);switch(i){case"scalar":a=mc.PLAIN,c=function(t,e){let s="";switch(t[0]){case"\t":s="a tab character";break;case",":s="flow indicator character ,";break;case"%":s="directive indicator character %";break;case"|":case">":s=`block scalar indicator ${t[0]}`;break;case"@":case"`":s=`reserved character ${t[0]}`}s&&e(0,"BAD_SCALAR_START",`Plain value cannot start with ${s}`);return mh(t)}(r,l);break;case"single-quoted-scalar":a=mc.QUOTE_SINGLE,c=function(t,e){"'"===t[t.length-1]&&1!==t.length||e(t.length,"MISSING_CHAR","Missing closing 'quote");return mh(t.slice(1,-1)).replace(/''/g,"'")}(r,l);break;case"double-quoted-scalar":a=mc.QUOTE_DOUBLE,c=function(t,e){let s="";for(let n=1;n<t.length-1;++n){const i=t[n];if("\r"!==i||"\n"!==t[n+1])if("\n"===i){const{fold:e,offset:i}=yh(t,n);s+=e,n=i}else if("\\"===i){let i=t[++n];const r=gh[i];if(r)s+=r;else if("\n"===i)for(i=t[n+1];" "===i||"\t"===i;)i=t[1+ ++n];else if("\r"===i&&"\n"===t[n+1])for(i=t[1+ ++n];" "===i||"\t"===i;)i=t[1+ ++n];else if("x"===i||"u"===i||"U"===i){const r={x:2,u:4,U:8}[i];s+=wh(t,n+1,r,e),n+=r}else{const i=t.substr(n-1,2);e(n-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${i}`),s+=i}}else if(" "===i||"\t"===i){const e=n;let r=t[n+1];for(;" "===r||"\t"===r;)r=t[1+ ++n];"\n"===r||"\r"===r&&"\n"===t[n+2]||(s+=n>e?t.slice(e,n+1):i)}else s+=i}'"'===t[t.length-1]&&1!==t.length||e(t.length,"MISSING_CHAR",'Missing closing "quote');return s}(r,l);break;default:return s(t,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${i}`),{value:"",type:null,comment:"",range:[n,n+r.length,n+r.length]}}const h=n+r.length,u=lh(o,h,e,s);return{value:c,type:a,comment:u.comment,range:[n,h,u.offset]}}function mh(t){let e,s;try{e=new RegExp("(.*?)(?<![ \t])[ \t]*\r?\n","sy"),s=new RegExp("[ \t]*(.*?)(?:(?<![ \t])[ \t]*)?\r?\n","sy")}catch{e=/(.*?)[ \t]*\r?\n/sy,s=/[ \t]*(.*?)[ \t]*\r?\n/sy}let n=e.exec(t);if(!n)return t;let i=n[1],r=" ",o=e.lastIndex;for(s.lastIndex=o;n=s.exec(t);)""===n[1]?"\n"===r?i+=r:r="\n":(i+=r+n[1],r=" "),o=s.lastIndex;const a=/[ \t]*(.*)/sy;return a.lastIndex=o,n=a.exec(t),i+r+(n?.[1]??"")}function yh(t,e){let s="",n=t[e+1];for(;!(" "!==n&&"\t"!==n&&"\n"!==n&&"\r"!==n||"\r"===n&&"\n"!==t[e+2]);)"\n"===n&&(s+="\n"),n=t[(e+=1)+1];return s||(s=" "),{fold:s,offset:e}}const gh={0:"\0",a:"",b:"\b",e:"",f:"\f",n:"\n",r:"\r",t:"\t",v:"\v",N:"",_:" ",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","\t":"\t"};function wh(t,e,s,n){const i=t.substr(e,s),r=i.length===s&&/^[0-9a-fA-F]+$/.test(i)?parseInt(i,16):NaN;if(isNaN(r)){const i=t.substr(e-2,s+2);return n(e-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${i}`),i}return String.fromCodePoint(r)}function bh(t,e,s,n){const{value:i,type:r,comment:o,range:a}="block-scalar"===e.type?dh(t,e,n):ph(e,t.options.strict,n),c=s?t.directives.tagName(s.source,(t=>n(s,"TAG_RESOLVE_FAILED",t))):null;let l,h;l=t.options.stringKeys&&t.atKey?t.schema[Fa]:c?function(t,e,s,n,i){if("!"===s)return t[Fa];const r=[];for(const e of t.tags)if(!e.collection&&e.tag===s){if(!e.default||!e.test)return e;r.push(e)}for(const t of r)if(t.test?.test(e))return t;const o=t.knownTags[s];if(o&&!o.collection)return t.tags.push(Object.assign({},o,{default:!1,test:void 0})),o;return i(n,"TAG_RESOLVE_FAILED",`Unresolved tag: ${s}`,"tag:yaml.org,2002:str"!==s),t[Fa]}(t.schema,i,c,s,n):"scalar"===e.type?function({atKey:t,directives:e,schema:s},n,i,r){const o=s.tags.find((e=>(!0===e.default||t&&"key"===e.default)&&e.test?.test(n)))||s[Fa];if(s.compat){const t=s.compat.find((t=>t.default&&t.test?.test(n)))??s[Fa];if(o.tag!==t.tag){r(i,"TAG_RESOLVE_FAILED",`Value may be parsed as either ${e.tagString(o.tag)} or ${e.tagString(t.tag)}`,!0)}}return o}(t,i,e,n):t.schema[Fa];try{const r=l.resolve(i,(t=>n(s??e,"TAG_RESOLVE_FAILED",t)),t.options);h=Ua(r)?r:new mc(r)}catch(t){const r=t instanceof Error?t.message:String(t);n(s??e,"TAG_RESOLVE_FAILED",r),h=new mc(i)}return h.range=a,h.source=i,r&&(h.type=r),c&&(h.tag=c),l.format&&(h.format=l.format),o&&(h.comment=o),h}function vh(t,e,s){if(e){s??(s=e.length);for(let n=s-1;n>=0;--n){let s=e[n];switch(s.type){case"space":case"comment":case"newline":t-=s.source.length;continue}for(s=e[++n];"space"===s?.type;)t+=s.source.length,s=e[++n];break}}return t}const Sh={composeNode:kh,composeEmptyNode:Eh};function kh(t,e,s,n){const i=t.atKey,{spaceBefore:r,comment:o,anchor:a,tag:c}=s;let l,h=!0;switch(e.type){case"alias":l=function({options:t},{offset:e,source:s,end:n},i){const r=new fc(s.substring(1));""===r.source&&i(e,"BAD_ALIAS","Alias cannot be an empty string");r.source.endsWith(":")&&i(e+s.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);const o=e+s.length,a=lh(n,o,t.strict,i);r.range=[e,o,a.offset],a.comment&&(r.comment=a.comment);return r}(t,e,n),(a||c)&&n(e,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":l=bh(t,e,c,n),a&&(l.anchor=a.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":l=function(t,e,s,n,i){const r=n.tag,o=r?e.directives.tagName(r.source,(t=>i(r,"TAG_RESOLVE_FAILED",t))):null;if("block-seq"===s.type){const{anchor:t,newlineAfterProp:e}=n,s=t&&r?t.offset>r.offset?t:r:t??r;s&&(!e||e.offset<s.offset)&&i(s,"MISSING_CHAR","Missing newline after block sequence props")}const a="block-map"===s.type?"map":"block-seq"===s.type?"seq":"{"===s.start.source?"map":"seq";if(!r||!o||"!"===o||o===Qc.tagName&&"map"===a||o===Zc.tagName&&"seq"===a)return fh(t,e,s,i,o);let c=e.schema.tags.find((t=>t.tag===o&&t.collection===a));if(!c){const n=e.schema.knownTags[o];if(!n||n.collection!==a)return n?i(r,"BAD_COLLECTION_TYPE",`${n.tag} used for ${a} collection, but expects ${n.collection??"scalar"}`,!0):i(r,"TAG_RESOLVE_FAILED",`Unresolved tag: ${o}`,!0),fh(t,e,s,i,o);e.schema.tags.push(Object.assign({},n,{default:!1})),c=n}const l=fh(t,e,s,i,o,c),h=c.resolve?.(l,(t=>i(r,"TAG_RESOLVE_FAILED",t)),e.options)??l,u=Ga(h)?h:new mc(h);return u.range=l.range,u.tag=o,c?.format&&(u.format=c.format),u}(Sh,t,e,s,n),a&&(l.anchor=a.source.substring(1));break;default:n(e,"UNEXPECTED_TOKEN","error"===e.type?e.message:`Unsupported token (type: ${e.type})`),l=Eh(t,e.offset,void 0,null,s,n),h=!1}if(a&&""===l.anchor&&n(a,"BAD_ALIAS","Anchor cannot be an empty string"),i&&t.options.stringKeys&&(!Ua(l)||"string"!=typeof l.value||l.tag&&"tag:yaml.org,2002:str"!==l.tag)){n(c??e,"NON_STRING_KEY","With stringKeys, all keys must be strings")}return r&&(l.spaceBefore=!0),o&&("scalar"===e.type&&""===e.source?l.comment=o:l.commentBefore=o),t.options.keepSourceTokens&&h&&(l.srcToken=e),l}function Eh(t,e,s,n,{spaceBefore:i,comment:r,anchor:o,tag:a,end:c},l){const h=bh(t,{type:"scalar",offset:vh(e,s,n),indent:-1,source:""},a,l);return o&&(h.anchor=o.source.substring(1),""===h.anchor&&l(o,"BAD_ALIAS","Anchor cannot be an empty string")),i&&(h.spaceBefore=!0),r&&(h.comment=r,h.range[2]=c),h}function Oh(t){if("number"==typeof t)return[t,t+1];if(Array.isArray(t))return 2===t.length?t:[t[0],t[1]];const{offset:e,source:s}=t;return[e,e+("string"==typeof s?s.length:1)]}function xh(t){let e="",s=!1,n=!1;for(let i=0;i<t.length;++i){const r=t[i];switch(r[0]){case"#":e+=(""===e?"":n?"\n\n":"\n")+(r.substring(1)||" "),s=!0,n=!1;break;case"%":"#"!==t[i+1]?.[0]&&(i+=1),s=!1;break;default:s||(n=!0),s=!1}}return{comment:e,afterEmptyLine:n}}class Nh{constructor(t={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(t,e,s,n)=>{const i=Oh(t);n?this.warnings.push(new sh(i,e,s)):this.errors.push(new eh(i,e,s))},this.directives=new rc({version:t.version||"1.2"}),this.options=t}decorate(t,e){const{comment:s,afterEmptyLine:n}=xh(this.prelude);if(s){const i=t.contents;if(e)t.comment=t.comment?`${t.comment}\n${s}`:s;else if(n||t.directives.docStart||!i)t.commentBefore=s;else if(qa(i)&&!i.flow&&i.items.length>0){let t=i.items[0];Wa(t)&&(t=t.key);const e=t.commentBefore;t.commentBefore=e?`${s}\n${e}`:s}else{const t=i.commentBefore;i.commentBefore=t?`${s}\n${t}`:s}}e?(Array.prototype.push.apply(t.errors,this.errors),Array.prototype.push.apply(t.warnings,this.warnings)):(t.errors=this.errors,t.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:xh(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(t,e=!1,s=-1){for(const e of t)yield*this.next(e);yield*this.end(e,s)}*next(t){switch(t.type){case"directive":this.directives.add(t.source,((e,s,n)=>{const i=Oh(t);i[0]+=e,this.onError(i,"BAD_DIRECTIVE",s,n)})),this.prelude.push(t.source),this.atDirectives=!0;break;case"document":{const e=function(t,e,{offset:s,start:n,value:i,end:r},o){const a=Object.assign({_directives:e},t),c=new Xl(void 0,a),l={atKey:!1,atRoot:!0,directives:c.directives,options:c.options,schema:c.schema},h=ih(n,{indicator:"doc-start",next:i??r?.[0],offset:s,onError:o,parentIndent:0,startOnNewline:!0});h.found&&(c.directives.docStart=!0,!i||"block-map"!==i.type&&"block-seq"!==i.type||h.hasNewline||o(h.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),c.contents=i?kh(l,i,h,o):Eh(l,h.end,n,null,h,o);const u=c.contents.range[2],f=lh(r,u,!1,o);return f.comment&&(c.comment=f.comment),c.range=[s,u,f.offset],c}(this.options,this.directives,t,this.onError);this.atDirectives&&!e.directives.docStart&&this.onError(t,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(e,!1),this.doc&&(yield this.doc),this.doc=e,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(t.source);break;case"error":{const e=t.source?`${t.message}: ${JSON.stringify(t.source)}`:t.message,s=new eh(Oh(t),"UNEXPECTED_TOKEN",e);this.atDirectives||!this.doc?this.errors.push(s):this.doc.errors.push(s);break}case"doc-end":{if(!this.doc){const e="Unexpected doc-end without preceding document";this.errors.push(new eh(Oh(t),"UNEXPECTED_TOKEN",e));break}this.doc.directives.docEnd=!0;const e=lh(t.end,t.offset+t.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),e.comment){const t=this.doc.comment;this.doc.comment=t?`${t}\n${e.comment}`:e.comment}this.doc.range[2]=e.offset;break}default:this.errors.push(new eh(Oh(t),"UNEXPECTED_TOKEN",`Unsupported token ${t.type}`))}}*end(t=!1,e=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(t){const t=Object.assign({_directives:this.directives},this.options),s=new Xl(void 0,t);this.atDirectives&&this.onError(e,"MISSING_CHAR","Missing directives-end indicator line"),s.range=[0,e,e],this.decorate(s,!1),yield s}}}function Th(t,e){if(e)for(const s of e)switch(s.type){case"space":case"comment":t.push(s);break;case"newline":return t.push(s),!0}return!1}function Ah(t,e,s){switch(t.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":t.type=s,t.source=e;break;case"block-scalar":{const n=t.props.slice(1);let i=e.length;"block-scalar-header"===t.props[0].type&&(i-=t.props[0].source.length);for(const t of n)t.offset+=i;delete t.props,Object.assign(t,{type:s,source:e,end:n});break}case"block-map":case"block-seq":{const n={type:"newline",offset:t.offset+e.length,indent:t.indent,source:"\n"};delete t.items,Object.assign(t,{type:s,source:e,end:[n]});break}default:{const n="indent"in t?t.indent:-1,i="end"in t&&Array.isArray(t.end)?t.end.filter((t=>"space"===t.type||"comment"===t.type||"newline"===t.type)):[];for(const e of Object.keys(t))"type"!==e&&"offset"!==e&&delete t[e];Object.assign(t,{type:s,indent:n,source:e,end:i})}}}function Lh(t){switch(t.type){case"block-scalar":{let e="";for(const s of t.props)e+=Lh(s);return e+t.source}case"block-map":case"block-seq":{let e="";for(const s of t.items)e+=Ch(s);return e}case"flow-collection":{let e=t.start.source;for(const s of t.items)e+=Ch(s);for(const s of t.end)e+=s.source;return e}case"document":{let e=Ch(t);if(t.end)for(const s of t.end)e+=s.source;return e}default:{let e=t.source;if("end"in t&&t.end)for(const s of t.end)e+=s.source;return e}}}function Ch({start:t,key:e,sep:s,value:n}){let i="";for(const e of t)i+=e.source;if(e&&(i+=Lh(e)),s)for(const t of s)i+=t.source;return n&&(i+=Lh(n)),i}const Mh=Symbol("break visit"),$h=Symbol("skip children"),Ih=Symbol("remove item");function _h(t,e){"type"in t&&"document"===t.type&&(t={start:t.start,value:t.value}),Dh(Object.freeze([]),t,e)}function Dh(t,e,s){let n=s(e,t);if("symbol"==typeof n)return n;for(const i of["key","value"]){const r=e[i];if(r&&"items"in r){for(let e=0;e<r.items.length;++e){const n=Dh(Object.freeze(t.concat([[i,e]])),r.items[e],s);if("number"==typeof n)e=n-1;else{if(n===Mh)return Mh;n===Ih&&(r.items.splice(e,1),e-=1)}}"function"==typeof n&&"key"===i&&(n=n(e,t))}}return"function"==typeof n?n(e,t):n}_h.BREAK=Mh,_h.SKIP=$h,_h.REMOVE=Ih,_h.itemAtPath=(t,e)=>{let s=t;for(const[t,n]of e){const e=s?.[t];if(!e||!("items"in e))return;s=e.items[n]}return s},_h.parentCollection=(t,e)=>{const s=_h.itemAtPath(t,e.slice(0,-1)),n=e[e.length-1][0],i=s?.[n];if(i&&"items"in i)return i;throw new Error("Parent collection not found")};const Fh="\ufeff",Ph="",jh="",Rh="";function Bh(t){switch(t){case Fh:return"byte-order-mark";case Ph:return"doc-mode";case jh:return"flow-error-end";case Rh:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case"\n":case"\r\n":return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(t[0]){case" ":case"\t":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}var zh=Object.freeze({__proto__:null,BOM:Fh,DOCUMENT:Ph,FLOW_END:jh,SCALAR:Rh,createScalarToken:function(t,e){const{implicitKey:s=!1,indent:n,inFlow:i=!1,offset:r=-1,type:o="PLAIN"}=e,a=Dc({type:o,value:t},{implicitKey:s,indent:n>0?" ".repeat(n):"",inFlow:i,options:{blockQuote:!0,lineWidth:-1}}),c=e.end??[{type:"newline",offset:-1,indent:n,source:"\n"}];switch(a[0]){case"|":case">":{const t=a.indexOf("\n"),e=a.substring(0,t),s=a.substring(t+1)+"\n",i=[{type:"block-scalar-header",offset:r,indent:n,source:e}];return Th(i,c)||i.push({type:"newline",offset:-1,indent:n,source:"\n"}),{type:"block-scalar",offset:r,indent:n,props:i,source:s}}case'"':return{type:"double-quoted-scalar",offset:r,indent:n,source:a,end:c};case"'":return{type:"single-quoted-scalar",offset:r,indent:n,source:a,end:c};default:return{type:"scalar",offset:r,indent:n,source:a,end:c}}},isCollection:t=>!!t&&"items"in t,isScalar:t=>!!t&&("scalar"===t.type||"single-quoted-scalar"===t.type||"double-quoted-scalar"===t.type||"block-scalar"===t.type),prettyToken:function(t){switch(t){case Fh:return"<BOM>";case Ph:return"<DOC>";case jh:return"<FLOW_END>";case Rh:return"<SCALAR>";default:return JSON.stringify(t)}},resolveAsScalar:function(t,e=!0,s){if(t){const n=(t,e,n)=>{const i="number"==typeof t?t:Array.isArray(t)?t[0]:t.offset;if(!s)throw new eh([i,i+1],e,n);s(i,e,n)};switch(t.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return ph(t,e,n);case"block-scalar":return dh({options:{strict:e}},t,n)}}return null},setScalarValue:function(t,e,s={}){let{afterKey:n=!1,implicitKey:i=!1,inFlow:r=!1,type:o}=s,a="indent"in t?t.indent:null;if(n&&"number"==typeof a&&(a+=2),!o)switch(t.type){case"single-quoted-scalar":o="QUOTE_SINGLE";break;case"double-quoted-scalar":o="QUOTE_DOUBLE";break;case"block-scalar":{const e=t.props[0];if("block-scalar-header"!==e.type)throw new Error("Invalid block scalar header");o=">"===e.source[0]?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:o="PLAIN"}const c=Dc({type:o,value:e},{implicitKey:i||null===a,indent:null!==a&&a>0?" ".repeat(a):"",inFlow:r,options:{blockQuote:!0,lineWidth:-1}});switch(c[0]){case"|":case">":!function(t,e){const s=e.indexOf("\n"),n=e.substring(0,s),i=e.substring(s+1)+"\n";if("block-scalar"===t.type){const e=t.props[0];if("block-scalar-header"!==e.type)throw new Error("Invalid block scalar header");e.source=n,t.source=i}else{const{offset:e}=t,s="indent"in t?t.indent:-1,r=[{type:"block-scalar-header",offset:e,indent:s,source:n}];Th(r,"end"in t?t.end:void 0)||r.push({type:"newline",offset:-1,indent:s,source:"\n"});for(const e of Object.keys(t))"type"!==e&&"offset"!==e&&delete t[e];Object.assign(t,{type:"block-scalar",indent:s,props:r,source:i})}}(t,c);break;case'"':Ah(t,c,"double-quoted-scalar");break;case"'":Ah(t,c,"single-quoted-scalar");break;default:Ah(t,c,"scalar")}},stringify:t=>"type"in t?Lh(t):Ch(t),tokenType:Bh,visit:_h});function Wh(t){switch(t){case void 0:case" ":case"\n":case"\r":case"\t":return!0;default:return!1}}const Uh=new Set("0123456789ABCDEFabcdef"),Kh=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),qh=new Set(",[]{}"),Gh=new Set(" ,[]{}\n\r\t"),Yh=t=>!t||Gh.has(t);class Vh{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(t,e=!1){if(t){if("string"!=typeof t)throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+t:t,this.lineEndPos=null}this.atEnd=!e;let s=this.next??"stream";for(;s&&(e||this.hasChars(1));)s=yield*this.parseNext(s)}atLineEnd(){let t=this.pos,e=this.buffer[t];for(;" "===e||"\t"===e;)e=this.buffer[++t];return!e||"#"===e||"\n"===e||"\r"===e&&"\n"===this.buffer[t+1]}charAt(t){return this.buffer[this.pos+t]}continueScalar(t){let e=this.buffer[t];if(this.indentNext>0){let s=0;for(;" "===e;)e=this.buffer[++s+t];if("\r"===e){const e=this.buffer[s+t+1];if("\n"===e||!e&&!this.atEnd)return t+s+1}return"\n"===e||s>=this.indentNext||!e&&!this.atEnd?t+s:-1}if("-"===e||"."===e){const e=this.buffer.substr(t,3);if(("---"===e||"..."===e)&&Wh(this.buffer[t+3]))return-1}return t}getLine(){let t=this.lineEndPos;return("number"!=typeof t||-1!==t&&t<this.pos)&&(t=this.buffer.indexOf("\n",this.pos),this.lineEndPos=t),-1===t?this.atEnd?this.buffer.substring(this.pos):null:("\r"===this.buffer[t-1]&&(t-=1),this.buffer.substring(this.pos,t))}hasChars(t){return this.pos+t<=this.buffer.length}setNext(t){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=t,null}peek(t){return this.buffer.substr(this.pos,t)}*parseNext(t){switch(t){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let t=this.getLine();if(null===t)return this.setNext("stream");if(t[0]===Fh&&(yield*this.pushCount(1),t=t.substring(1)),"%"===t[0]){let e=t.length,s=t.indexOf("#");for(;-1!==s;){const n=t[s-1];if(" "===n||"\t"===n){e=s-1;break}s=t.indexOf("#",s+1)}for(;;){const s=t[e-1];if(" "!==s&&"\t"!==s)break;e-=1}const n=(yield*this.pushCount(e))+(yield*this.pushSpaces(!0));return yield*this.pushCount(t.length-n),this.pushNewline(),"stream"}if(this.atLineEnd()){const e=yield*this.pushSpaces(!0);return yield*this.pushCount(t.length-e),yield*this.pushNewline(),"stream"}return yield Ph,yield*this.parseLineStart()}*parseLineStart(){const t=this.charAt(0);if(!t&&!this.atEnd)return this.setNext("line-start");if("-"===t||"."===t){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");const t=this.peek(3);if(("---"===t||"..."===t)&&Wh(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,"---"===t?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!Wh(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){const[t,e]=this.peek(2);if(!e&&!this.atEnd)return this.setNext("block-start");if(("-"===t||"?"===t||":"===t)&&Wh(e)){const t=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=t,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);const t=this.getLine();if(null===t)return this.setNext("doc");let e=yield*this.pushIndicators();switch(t[e]){case"#":yield*this.pushCount(t.length-e);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil(Yh),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return e+=(yield*this.parseBlockScalarHeader()),e+=(yield*this.pushSpaces(!0)),yield*this.pushCount(t.length-e),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let t,e,s=-1;do{t=yield*this.pushNewline(),t>0?(e=yield*this.pushSpaces(!1),this.indentValue=s=e):e=0,e+=(yield*this.pushSpaces(!0))}while(t+e>0);const n=this.getLine();if(null===n)return this.setNext("flow");if(-1!==s&&s<this.indentNext&&"#"!==n[0]||0===s&&(n.startsWith("---")||n.startsWith("..."))&&Wh(n[3])){if(!(s===this.indentNext-1&&1===this.flowLevel&&("]"===n[0]||"}"===n[0])))return this.flowLevel=0,yield jh,yield*this.parseLineStart()}let i=0;for(;","===n[i];)i+=(yield*this.pushCount(1)),i+=(yield*this.pushSpaces(!0)),this.flowKey=!1;switch(i+=(yield*this.pushIndicators()),n[i]){case void 0:return"flow";case"#":return yield*this.pushCount(n.length-i),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil(Yh),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{const t=this.charAt(1);if(this.flowKey||Wh(t)||","===t)return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){const t=this.charAt(0);let e=this.buffer.indexOf(t,this.pos+1);if("'"===t)for(;-1!==e&&"'"===this.buffer[e+1];)e=this.buffer.indexOf("'",e+2);else for(;-1!==e;){let t=0;for(;"\\"===this.buffer[e-1-t];)t+=1;if(t%2==0)break;e=this.buffer.indexOf('"',e+1)}const s=this.buffer.substring(0,e);let n=s.indexOf("\n",this.pos);if(-1!==n){for(;-1!==n;){const t=this.continueScalar(n+1);if(-1===t)break;n=s.indexOf("\n",t)}-1!==n&&(e=n-("\r"===s[n-1]?2:1))}if(-1===e){if(!this.atEnd)return this.setNext("quoted-scalar");e=this.buffer.length}return yield*this.pushToIndex(e+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let t=this.pos;for(;;){const e=this.buffer[++t];if("+"===e)this.blockScalarKeep=!0;else if(e>"0"&&e<="9")this.blockScalarIndent=Number(e)-1;else if("-"!==e)break}return yield*this.pushUntil((t=>Wh(t)||"#"===t))}*parseBlockScalar(){let t,e=this.pos-1,s=0;t:for(let n=this.pos;t=this.buffer[n];++n)switch(t){case" ":s+=1;break;case"\n":e=n,s=0;break;case"\r":{const t=this.buffer[n+1];if(!t&&!this.atEnd)return this.setNext("block-scalar");if("\n"===t)break}default:break t}if(!t&&!this.atEnd)return this.setNext("block-scalar");if(s>=this.indentNext){-1===this.blockScalarIndent?this.indentNext=s:this.indentNext=this.blockScalarIndent+(0===this.indentNext?1:this.indentNext);do{const t=this.continueScalar(e+1);if(-1===t)break;e=this.buffer.indexOf("\n",t)}while(-1!==e);if(-1===e){if(!this.atEnd)return this.setNext("block-scalar");e=this.buffer.length}}let n=e+1;for(t=this.buffer[n];" "===t;)t=this.buffer[++n];if("\t"===t){for(;"\t"===t||" "===t||"\r"===t||"\n"===t;)t=this.buffer[++n];e=n-1}else if(!this.blockScalarKeep)for(;;){let t=e-1,n=this.buffer[t];"\r"===n&&(n=this.buffer[--t]);const i=t;for(;" "===n;)n=this.buffer[--t];if(!("\n"===n&&t>=this.pos&&t+1+s>i))break;e=t}return yield Rh,yield*this.pushToIndex(e+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){const t=this.flowLevel>0;let e,s=this.pos-1,n=this.pos-1;for(;e=this.buffer[++n];)if(":"===e){const e=this.buffer[n+1];if(Wh(e)||t&&qh.has(e))break;s=n}else if(Wh(e)){let i=this.buffer[n+1];if("\r"===e&&("\n"===i?(n+=1,e="\n",i=this.buffer[n+1]):s=n),"#"===i||t&&qh.has(i))break;if("\n"===e){const t=this.continueScalar(n+1);if(-1===t)break;n=Math.max(n,t-2)}}else{if(t&&qh.has(e))break;s=n}return e||this.atEnd?(yield Rh,yield*this.pushToIndex(s+1,!0),t?"flow":"doc"):this.setNext("plain-scalar")}*pushCount(t){return t>0?(yield this.buffer.substr(this.pos,t),this.pos+=t,t):0}*pushToIndex(t,e){const s=this.buffer.slice(this.pos,t);return s?(yield s,this.pos+=s.length,s.length):(e&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil(Yh))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{const t=this.flowLevel>0,e=this.charAt(1);if(Wh(e)||t&&qh.has(e))return t?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if("<"===this.charAt(1)){let t=this.pos+2,e=this.buffer[t];for(;!Wh(e)&&">"!==e;)e=this.buffer[++t];return yield*this.pushToIndex(">"===e?t+1:t,!1)}{let t=this.pos+1,e=this.buffer[t];for(;e;)if(Kh.has(e))e=this.buffer[++t];else{if("%"!==e||!Uh.has(this.buffer[t+1])||!Uh.has(this.buffer[t+2]))break;e=this.buffer[t+=3]}return yield*this.pushToIndex(t,!1)}}*pushNewline(){const t=this.buffer[this.pos];return"\n"===t?yield*this.pushCount(1):"\r"===t&&"\n"===this.charAt(1)?yield*this.pushCount(2):0}*pushSpaces(t){let e,s=this.pos-1;do{e=this.buffer[++s]}while(" "===e||t&&"\t"===e);const n=s-this.pos;return n>0&&(yield this.buffer.substr(this.pos,n),this.pos=s),n}*pushUntil(t){let e=this.pos,s=this.buffer[e];for(;!t(s);)s=this.buffer[++e];return yield*this.pushToIndex(e,!1)}}class Jh{constructor(){this.lineStarts=[],this.addNewLine=t=>this.lineStarts.push(t),this.linePos=t=>{let e=0,s=this.lineStarts.length;for(;e<s;){const n=e+s>>1;this.lineStarts[n]<t?e=n+1:s=n}if(this.lineStarts[e]===t)return{line:e+1,col:1};if(0===e)return{line:0,col:t};return{line:e,col:t-this.lineStarts[e-1]+1}}}}function Hh(t,e){for(let s=0;s<t.length;++s)if(t[s].type===e)return!0;return!1}function Qh(t){for(let e=0;e<t.length;++e)switch(t[e].type){case"space":case"comment":case"newline":break;default:return e}return-1}function Xh(t){switch(t?.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function Zh(t){switch(t.type){case"document":return t.start;case"block-map":{const e=t.items[t.items.length-1];return e.sep??e.start}case"block-seq":return t.items[t.items.length-1].start;default:return[]}}function tu(t){if(0===t.length)return[];let e=t.length;t:for(;--e>=0;)switch(t[e].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break t}for(;"space"===t[++e]?.type;);return t.splice(e,t.length)}function eu(t){if("flow-seq-start"===t.start.type)for(const e of t.items)!e.sep||e.value||Hh(e.start,"explicit-key-ind")||Hh(e.sep,"map-value-ind")||(e.key&&(e.value=e.key),delete e.key,Xh(e.value)?e.value.end?Array.prototype.push.apply(e.value.end,e.sep):e.value.end=e.sep:Array.prototype.push.apply(e.start,e.sep),delete e.sep)}class su{constructor(t){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new Vh,this.onNewLine=t}*parse(t,e=!1){this.onNewLine&&0===this.offset&&this.onNewLine(0);for(const s of this.lexer.lex(t,e))yield*this.next(s);e||(yield*this.end())}*next(t){if(this.source=t,this.atScalar)return this.atScalar=!1,yield*this.step(),void(this.offset+=t.length);const e=Bh(t);if(e)if("scalar"===e)this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=e,yield*this.step(),e){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+t.length);break;case"space":this.atNewLine&&" "===t[0]&&(this.indent+=t.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=t.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=t.length}else{const e=`Not a YAML token: ${t}`;yield*this.pop({type:"error",offset:this.offset,message:e,source:t}),this.offset+=t.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){const t=this.peek(1);if("doc-end"!==this.type||t&&"doc-end"===t.type){if(!t)return yield*this.stream();switch(t.type){case"document":return yield*this.document(t);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(t);case"block-scalar":return yield*this.blockScalar(t);case"block-map":return yield*this.blockMap(t);case"block-seq":return yield*this.blockSequence(t);case"flow-collection":return yield*this.flowCollection(t);case"doc-end":return yield*this.documentEnd(t)}yield*this.pop()}else{for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source})}}peek(t){return this.stack[this.stack.length-t]}*pop(t){const e=t??this.stack.pop();if(e)if(0===this.stack.length)yield e;else{const t=this.peek(1);switch("block-scalar"===e.type?e.indent="indent"in t?t.indent:0:"flow-collection"===e.type&&"document"===t.type&&(e.indent=0),"flow-collection"===e.type&&eu(e),t.type){case"document":t.value=e;break;case"block-scalar":t.props.push(e);break;case"block-map":{const s=t.items[t.items.length-1];if(s.value)return t.items.push({start:[],key:e,sep:[]}),void(this.onKeyLine=!0);if(!s.sep)return Object.assign(s,{key:e,sep:[]}),void(this.onKeyLine=!s.explicitKey);s.value=e;break}case"block-seq":{const s=t.items[t.items.length-1];s.value?t.items.push({start:[],value:e}):s.value=e;break}case"flow-collection":{const s=t.items[t.items.length-1];return void(!s||s.value?t.items.push({start:[],key:e,sep:[]}):s.sep?s.value=e:Object.assign(s,{key:e,sep:[]}))}default:yield*this.pop(),yield*this.pop(e)}if(!("document"!==t.type&&"block-map"!==t.type&&"block-seq"!==t.type||"block-map"!==e.type&&"block-seq"!==e.type)){const s=e.items[e.items.length-1];s&&!s.sep&&!s.value&&s.start.length>0&&-1===Qh(s.start)&&(0===e.indent||s.start.every((t=>"comment"!==t.type||t.indent<e.indent)))&&("document"===t.type?t.end=s.start:t.items.push({start:s.start}),e.items.splice(-1,1))}}else{const t="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:t}}}*stream(){switch(this.type){case"directive-line":return void(yield{type:"directive",offset:this.offset,source:this.source});case"byte-order-mark":case"space":case"comment":case"newline":return void(yield this.sourceToken);case"doc-mode":case"doc-start":{const t={type:"document",offset:this.offset,start:[]};return"doc-start"===this.type&&t.start.push(this.sourceToken),void this.stack.push(t)}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(t){if(t.value)return yield*this.lineEnd(t);switch(this.type){case"doc-start":return void(-1!==Qh(t.start)?(yield*this.pop(),yield*this.step()):t.start.push(this.sourceToken));case"anchor":case"tag":case"space":case"comment":case"newline":return void t.start.push(this.sourceToken)}const e=this.startBlockValue(t);e?this.stack.push(e):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(t){if("map-value-ind"===this.type){const e=tu(Zh(this.peek(2)));let s;t.end?(s=t.end,s.push(this.sourceToken),delete t.end):s=[this.sourceToken];const n={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:e,key:t,sep:s}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=n}else yield*this.lineEnd(t)}*blockScalar(t){switch(this.type){case"space":case"comment":case"newline":return void t.props.push(this.sourceToken);case"scalar":if(t.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let t=this.source.indexOf("\n")+1;for(;0!==t;)this.onNewLine(this.offset+t),t=this.source.indexOf("\n",t)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(t){const e=t.items[t.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,e.value){const s="end"in e.value?e.value.end:void 0,n=Array.isArray(s)?s[s.length-1]:void 0;"comment"===n?.type?s?.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else e.sep?e.sep.push(this.sourceToken):e.start.push(this.sourceToken);return;case"space":case"comment":if(e.value)t.items.push({start:[this.sourceToken]});else if(e.sep)e.sep.push(this.sourceToken);else{if(this.atIndentedComment(e.start,t.indent)){const s=t.items[t.items.length-2],n=s?.value?.end;if(Array.isArray(n))return Array.prototype.push.apply(n,e.start),n.push(this.sourceToken),void t.items.pop()}e.start.push(this.sourceToken)}return}if(this.indent>=t.indent){const s=!this.onKeyLine&&this.indent===t.indent,n=s&&(e.sep||e.explicitKey)&&"seq-item-ind"!==this.type;let i=[];if(n&&e.sep&&!e.value){const s=[];for(let n=0;n<e.sep.length;++n){const i=e.sep[n];switch(i.type){case"newline":s.push(n);break;case"space":break;case"comment":i.indent>t.indent&&(s.length=0);break;default:s.length=0}}s.length>=2&&(i=e.sep.splice(s[1]))}switch(this.type){case"anchor":case"tag":return void(n||e.value?(i.push(this.sourceToken),t.items.push({start:i}),this.onKeyLine=!0):e.sep?e.sep.push(this.sourceToken):e.start.push(this.sourceToken));case"explicit-key-ind":return e.sep||e.explicitKey?n||e.value?(i.push(this.sourceToken),t.items.push({start:i,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}):(e.start.push(this.sourceToken),e.explicitKey=!0),void(this.onKeyLine=!0);case"map-value-ind":if(e.explicitKey)if(e.sep)if(e.value)t.items.push({start:[],key:null,sep:[this.sourceToken]});else if(Hh(e.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:i,key:null,sep:[this.sourceToken]}]});else if(Xh(e.key)&&!Hh(e.sep,"newline")){const t=tu(e.start),s=e.key,n=e.sep;n.push(this.sourceToken),delete e.key,delete e.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,key:s,sep:n}]})}else i.length>0?e.sep=e.sep.concat(i,this.sourceToken):e.sep.push(this.sourceToken);else if(Hh(e.start,"newline"))Object.assign(e,{key:null,sep:[this.sourceToken]});else{const t=tu(e.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:t,key:null,sep:[this.sourceToken]}]})}else e.sep?e.value||n?t.items.push({start:i,key:null,sep:[this.sourceToken]}):Hh(e.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):e.sep.push(this.sourceToken):Object.assign(e,{key:null,sep:[this.sourceToken]});return void(this.onKeyLine=!0);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const s=this.flowScalar(this.type);return void(n||e.value?(t.items.push({start:i,key:s,sep:[]}),this.onKeyLine=!0):e.sep?this.stack.push(s):(Object.assign(e,{key:s,sep:[]}),this.onKeyLine=!0))}default:{const n=this.startBlockValue(t);if(n){if("block-seq"===n.type){if(!e.explicitKey&&e.sep&&!Hh(e.sep,"newline"))return void(yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source}))}else s&&t.items.push({start:i});return void this.stack.push(n)}}}}yield*this.pop(),yield*this.step()}*blockSequence(t){const e=t.items[t.items.length-1];switch(this.type){case"newline":if(e.value){const s="end"in e.value?e.value.end:void 0,n=Array.isArray(s)?s[s.length-1]:void 0;"comment"===n?.type?s?.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else e.start.push(this.sourceToken);return;case"space":case"comment":if(e.value)t.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(e.start,t.indent)){const s=t.items[t.items.length-2],n=s?.value?.end;if(Array.isArray(n))return Array.prototype.push.apply(n,e.start),n.push(this.sourceToken),void t.items.pop()}e.start.push(this.sourceToken)}return;case"anchor":case"tag":if(e.value||this.indent<=t.indent)break;return void e.start.push(this.sourceToken);case"seq-item-ind":if(this.indent!==t.indent)break;return void(e.value||Hh(e.start,"seq-item-ind")?t.items.push({start:[this.sourceToken]}):e.start.push(this.sourceToken))}if(this.indent>t.indent){const e=this.startBlockValue(t);if(e)return void this.stack.push(e)}yield*this.pop(),yield*this.step()}*flowCollection(t){const e=t.items[t.items.length-1];if("flow-error-end"===this.type){let t;do{yield*this.pop(),t=this.peek(1)}while(t&&"flow-collection"===t.type)}else if(0===t.end.length){switch(this.type){case"comma":case"explicit-key-ind":return void(!e||e.sep?t.items.push({start:[this.sourceToken]}):e.start.push(this.sourceToken));case"map-value-ind":return void(!e||e.value?t.items.push({start:[],key:null,sep:[this.sourceToken]}):e.sep?e.sep.push(this.sourceToken):Object.assign(e,{key:null,sep:[this.sourceToken]}));case"space":case"comment":case"newline":case"anchor":case"tag":return void(!e||e.value?t.items.push({start:[this.sourceToken]}):e.sep?e.sep.push(this.sourceToken):e.start.push(this.sourceToken));case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{const s=this.flowScalar(this.type);return void(!e||e.value?t.items.push({start:[],key:s,sep:[]}):e.sep?this.stack.push(s):Object.assign(e,{key:s,sep:[]}))}case"flow-map-end":case"flow-seq-end":return void t.end.push(this.sourceToken)}const s=this.startBlockValue(t);s?this.stack.push(s):(yield*this.pop(),yield*this.step())}else{const e=this.peek(2);if("block-map"===e.type&&("map-value-ind"===this.type&&e.indent===t.indent||"newline"===this.type&&!e.items[e.items.length-1].sep))yield*this.pop(),yield*this.step();else if("map-value-ind"===this.type&&"flow-collection"!==e.type){const s=tu(Zh(e));eu(t);const n=t.end.splice(1,t.end.length);n.push(this.sourceToken);const i={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:s,key:t,sep:n}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=i}else yield*this.lineEnd(t)}}flowScalar(t){if(this.onNewLine){let t=this.source.indexOf("\n")+1;for(;0!==t;)this.onNewLine(this.offset+t),t=this.source.indexOf("\n",t)+1}return{type:t,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(t){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;const e=tu(Zh(t));return e.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;const e=tu(Zh(t));return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:e,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(t,e){return"comment"===this.type&&(!(this.indent<=e)&&t.every((t=>"newline"===t.type||"space"===t.type)))}*documentEnd(t){"doc-mode"!==this.type&&(t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop()))}*lineEnd(t){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;default:t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],"newline"===this.type&&(yield*this.pop())}}}function nu(t){const e=!1!==t.prettyErrors;return{lineCounter:t.lineCounter||e&&new Jh||null,prettyErrors:e}}function iu(t,e={}){const{lineCounter:s,prettyErrors:n}=nu(e),i=new su(s?.addNewLine),r=new Nh(e);let o=null;for(const e of r.compose(i.parse(t),!0,t.length))if(o){if("silent"!==o.options.logLevel){o.errors.push(new eh(e.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}}else o=e;return n&&s&&(o.errors.forEach(nh(t,s)),o.warnings.forEach(nh(t,s))),o}var ru=Object.freeze({__proto__:null,Alias:fc,CST:zh,Composer:Nh,Document:Xl,Lexer:Vh,LineCounter:Jh,Pair:qc,Parser:su,Scalar:mc,Schema:Ql,YAMLError:th,YAMLMap:Qc,YAMLParseError:eh,YAMLSeq:Zc,YAMLWarning:sh,isAlias:Ra,isCollection:qa,isDocument:Ba,isMap:za,isNode:Ga,isPair:Wa,isScalar:Ua,isSeq:Ka,parse:function(t,e,s){let n;"function"==typeof e?n=e:void 0===s&&e&&"object"==typeof e&&(s=e);const i=iu(t,s);if(!i)return null;if(i.warnings.forEach((t=>jc(i.options.logLevel,t))),i.errors.length>0){if("silent"!==i.options.logLevel)throw i.errors[0];i.errors=[]}return i.toJS(Object.assign({reviver:n},s))},parseAllDocuments:function(t,e={}){const{lineCounter:s,prettyErrors:n}=nu(e),i=new su(s?.addNewLine),r=new Nh(e),o=Array.from(r.compose(i.parse(t)));if(n&&s)for(const e of o)e.errors.forEach(nh(t,s)),e.warnings.forEach(nh(t,s));return o.length>0?o:Object.assign([],{empty:!0},r.streamInfo())},parseDocument:iu,stringify:function(t,e,s){let n=null;if("function"==typeof e||Array.isArray(e)?n=e:void 0===s&&e&&(s=e),"string"==typeof s&&(s=s.length),"number"==typeof s){const t=Math.round(s);s=t<1?void 0:t>8?{indent:8}:{indent:t}}if(void 0===t){const{keepUndefined:t}=s??e??{};if(!t)return}return Ba(t)&&!n?t.toString(s):new Xl(t,n,s).toString(s)},visit:Qa,visitAsync:Za});function ou(t,e){return void 0===t&&(t=""),void 0===e&&(e=b()),p(e,t)}function au(t,s){return void 0===t&&(t=""),void 0===s&&(s=b()),e(ou(t,s))}function cu(t){var e=t.dist,s=void 0===e?"":e,n=t.distDir,i=void 0===n?b():n,r=t.filter,o=t.src,a=void 0===o?"":o,c=t.srcDir,l=ou(a,void 0===c?b():c),h=ou(s,i);gn.copySync(l,h,{filter:r})}function lu(t,e){void 0===t&&(t=""),void 0===e&&(e=b());var s=ou(t,e);gn.ensureDirSync(s)}function hu(t){var e,i=t.dir,r=void 0===i?b():i,o=t.path,a=void 0===o?"":o,c=t.regexp,l=void 0===c?/node_modules|\.git$|\.DS_Store$/:c,h=t.type,u=void 0===h?"bfs":h,f=ou(a,r);if("bfs"===u){var d=[],m=[];!l.test(f)&&m.push(f);for(var y=function(){var t=null!==(e=m.shift())&&void 0!==e?e:"",i=s(t);if(i&&!l.test(t))if(i.isDirectory()){var r=n(t).map((function(e){return p(t,e)}));m.push.apply(m,Ut([],Wt(r),!1))}else i.isFile()&&d.push(t)};m.length;)y();return d}if("dfs"===u){var g=[],w=s(f);if(!l.test(f))if(w.isDirectory())n(f).map((function(t){return p(f,t)})).forEach((function(t){var e=hu({dir:"",path:t,regexp:l,type:"dfs"});g.push.apply(g,Ut([],Wt(e),!1))}));else w.isFile()&&g.push(f);return g}return[]}function uu(t,e){void 0===t&&(t=""),void 0===e&&(e=b());var s=ou(t,e);if(".json"!==m(s))return null;var n=i(s,"utf8");return JSON.parse(n)}function fu(t,e){void 0===t&&(t=""),void 0===e&&(e=b());var s=ou(t,e),n=m(s);if(!/^\.ya?ml$/.test(n))return null;var r=i(s,"utf8");return ru.parse(r)}function du(t,e){void 0===t&&(t=""),void 0===e&&(e=b());var s=ou(t,e);La(s)}function pu(t,e){void 0===t&&(t=""),void 0===e&&(e=b());var s=ou(t,e),n=s.split(y),i="win32"===r().toLowerCase()?(n.shift(),n):""===n[0]&&n.length>1?n.slice(1):n;return lt(s)?g(s)?i.filter(Boolean).length<i.length-1?{flag:!1,msg:"con separator path"}:i.some((function(t){return/[\\/:*?"|<>]/.test(t)}))?{flag:!1,msg:"illegal string path"}:s!==w(s)?{flag:!1,msg:"non standard path"}:{flag:!0,msg:""}:{flag:!1,msg:"non absolute path"}:{flag:!1,msg:"non string"}}function mu(t){return Bt(this,arguments,void 0,(function(t){var e=t.host,s=void 0===e?gu():e,n=t.onCall,i=t.port,r=void 0===i?80:i;return zt(this,(function(t){switch(t.label){case 0:return[4,yu({host:s,port:r})];case 1:return t.sent()?(null==n||n(r),[3,4]):[3,2];case 2:return[4,mu({host:s,onCall:n,port:r<0||r>65535?0:r+1})];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))}function yu(t){return Bt(this,arguments,void 0,(function(t){var e,s,n,i,r=t.host,o=void 0===r?gu():r,a=t.port,c=void 0===a?80:a;return zt(this,(function(t){switch(t.label){case 0:return e=new Promise((function(t){(c<0||c>65535)&&t(!1);var e=H({host:o,port:c});e.on("connect",(function(){e.end(),t(!1)})),e.on("error",(function(){t(!0)}))})),[4,Kt(e)];case 1:return s=Wt.apply(void 0,[t.sent(),2]),n=s[0],i=s[1],[2,!n&&i]}}))}))}function gu(){var t,e="127.0.0.1",s=o();for(var n in s)for(var i=null!==(t=s[n])&&void 0!==t?t:[],r=0;r<i.length;r++){var a=i[r],c=a.address,l=a.family,h=a.internal;if("IPv4"===l&&c!==e&&!h)return c}return e}function wu(t){return void 0===t&&(t="node -v"),Q(t,{encoding:"utf8"}).replace(/^\n+|\n+$/g,"").trim()}function bu(){var t,e={windows:/win32/g,macos:/darwin/g,linux:/linux/g},s=null!==(t=Object.keys(e).find((function(t){return e[t].test(r().toLowerCase())})))&&void 0!==t?t:"unknow";return{arch:u(),cpus:h().length,homedir:l(),hostname:c(),nodeVs:wu("node -v").replace(/^v/g,""),npmVs:wu("npm -v"),system:s,systemVs:a()}}export{ou as AbsPath,Kt as AsyncTo,mu as AutoPort,Vt as CalcNum,Jt as CalcNumPlus,ne as CheckObjValidKey,au as CheckPath,yu as CheckPort,ce as CheckText,le as CheckTextPlus,X as ChunkArr,cu as CopyDir,lu as CreateDir,qt as Debounce,ue as DesePhone,nt as EnvType,Ht as FillNum,ie as FilterObjKey,Qt as FixedNum,Xt as FormatByte,Pt as FormatCountdown,fe as FormatPhone,jt as FormatTimeDiff,gu as GetIP,Z as GroupArr,Tt as IsArguments,dt as IsArray,xt as IsAsyncFunction,ut as IsBoolean,wt as IsClass,mt as IsDate,Ot as IsElement,Lt as IsEmpty,Ct as IsEmptyArray,Mt as IsEmptyObject,At as IsError,Et as IsFormData,gt as IsFunction,vt as IsMap,rt as IsNode,ct as IsNull,ht as IsNumber,pt as IsObject,yt as IsRegExp,bt as IsSet,lt as IsString,ft as IsSymbol,Nt as IsSyncFunction,at as IsUndefined,kt as IsWeakMap,St as IsWeakSet,it as IsWeb,oe as MATCH,he as MatchBracketText,bu as NodeType,be as ParseUrlSearch,de as RandomColor,pe as RandomId,Zt as RandomNum,te as RandomNumPlus,hu as ReadDir,uu as ReadJson,fu as ReadYaml,Rt as RecentMonths,du as RemoveDir,re as RemoveObjEmptyKey,me as RemoveTag,ye as ReverseText,ee as RoundNum,wu as RunCmd,ge as StartScore,tt as StatArrMemCount,et as StatArrMemKeyword,st as StatArrMemPosition,ve as StringifyUrlSearch,se as ThousandNum,Gt as Throttle,ot as TypeOf,pu as VerifyPath,Yt as WaitFor,we as WebType};
