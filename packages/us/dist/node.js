"use strict";var t=require("fs"),e=require("path"),n=require("process"),r=require("constants"),o=require("stream"),i=require("util"),c=require("assert"),s=require("os"),u=require("child_process");function a(){return"undefined"==typeof window?"node":"web"}function f(t){return Object.prototype.toString.call(t).replace(/\[object (\w+)\]/,"$1").toLowerCase()}function l(t){return"object"===f(t)}function d(t){return"function"===f(t)}var p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},h={};({get exports(){return h},set exports(t){h=t}}).exports=function(){var t=1e3,e=6e4,n=36e5,r="millisecond",o="second",i="minute",c="hour",s="day",u="week",a="month",f="quarter",l="year",d="date",p="Invalid Date",h=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"}},v=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},S={s:v,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),o=n%60;return(e<=0?"+":"-")+v(r,2,"0")+":"+v(o,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),o=e.clone().add(r,a),i=n-o<0,c=e.clone().add(r+(i?-1:1),a);return+(-(r+(n-o)/(i?o-c:c-o))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:a,y:l,w:u,d:s,D:d,h:c,m:i,s:o,ms:r,Q:f}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},w="en",g={};g[w]=m;var b=function(t){return t instanceof E},x=function t(e,n,r){var o;if(!e)return w;if("string"==typeof e){var i=e.toLowerCase();g[i]&&(o=i),n&&(g[i]=n,o=i);var c=e.split("-");if(!o&&c.length>1)return t(c[0])}else{var s=e.name;g[s]=e,o=s}return!r&&o&&(w=o),o||!r&&w},k=function(t,e){if(b(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new E(n)},$=S;$.l=x,$.i=b,$.w=function(t,e){return k(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var E=function(){function m(t){this.$L=x(t.locale,null,!0),this.parse(t)}var v=m.prototype;return v.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if($.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(h);if(r){var o=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},v.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},v.$utils=function(){return $},v.isValid=function(){return!(this.$d.toString()===p)},v.isSame=function(t,e){var n=k(t);return this.startOf(e)<=n&&n<=this.endOf(e)},v.isAfter=function(t,e){return k(t)<this.startOf(e)},v.isBefore=function(t,e){return this.endOf(e)<k(t)},v.$g=function(t,e,n){return $.u(t)?this[e]:this.set(n,t)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(t,e){var n=this,r=!!$.u(e)||e,f=$.p(t),p=function(t,e){var o=$.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?o:o.endOf(s)},h=function(t,e){return $.w(n.toDate()[t].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},y=this.$W,m=this.$M,v=this.$D,S="set"+(this.$u?"UTC":"");switch(f){case l:return r?p(1,0):p(31,11);case a:return r?p(1,m):p(0,m+1);case u:var w=this.$locale().weekStart||0,g=(y<w?y+7:y)-w;return p(r?v-g:v+(6-g),m);case s:case d:return h(S+"Hours",0);case c:return h(S+"Minutes",1);case i:return h(S+"Seconds",2);case o:return h(S+"Milliseconds",3);default:return this.clone()}},v.endOf=function(t){return this.startOf(t,!1)},v.$set=function(t,e){var n,u=$.p(t),f="set"+(this.$u?"UTC":""),p=(n={},n[s]=f+"Date",n[d]=f+"Date",n[a]=f+"Month",n[l]=f+"FullYear",n[c]=f+"Hours",n[i]=f+"Minutes",n[o]=f+"Seconds",n[r]=f+"Milliseconds",n)[u],h=u===s?this.$D+(e-this.$W):e;if(u===a||u===l){var y=this.clone().set(d,1);y.$d[p](h),y.init(),this.$d=y.set(d,Math.min(this.$D,y.daysInMonth())).$d}else p&&this.$d[p](h);return this.init(),this},v.set=function(t,e){return this.clone().$set(t,e)},v.get=function(t){return this[$.p(t)]()},v.add=function(r,f){var d,p=this;r=Number(r);var h=$.p(f),y=function(t){var e=k(p);return $.w(e.date(e.date()+Math.round(t*r)),p)};if(h===a)return this.set(a,this.$M+r);if(h===l)return this.set(l,this.$y+r);if(h===s)return y(1);if(h===u)return y(7);var m=(d={},d[i]=e,d[c]=n,d[o]=t,d)[h]||1,v=this.$d.getTime()+r*m;return $.w(v,this)},v.subtract=function(t,e){return this.add(-1*t,e)},v.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var r=t||"YYYY-MM-DDTHH:mm:ssZ",o=$.z(this),i=this.$H,c=this.$m,s=this.$M,u=n.weekdays,a=n.months,f=function(t,n,o,i){return t&&(t[n]||t(e,r))||o[n].slice(0,i)},l=function(t){return $.s(i%12||12,t,"0")},d=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},h={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:$.s(s+1,2,"0"),MMM:f(n.monthsShort,s,a,3),MMMM:f(a,s),D:this.$D,DD:$.s(this.$D,2,"0"),d:String(this.$W),dd:f(n.weekdaysMin,this.$W,u,2),ddd:f(n.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(i),HH:$.s(i,2,"0"),h:l(1),hh:l(2),a:d(i,c,!0),A:d(i,c,!1),m:String(c),mm:$.s(c,2,"0"),s:String(this.$s),ss:$.s(this.$s,2,"0"),SSS:$.s(this.$ms,3,"0"),Z:o};return r.replace(y,(function(t,e){return e||h[t]||o.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(r,d,p){var h,y=$.p(d),m=k(r),v=(m.utcOffset()-this.utcOffset())*e,S=this-m,w=$.m(this,m);return w=(h={},h[l]=w/12,h[a]=w,h[f]=w/3,h[u]=(S-v)/6048e5,h[s]=(S-v)/864e5,h[c]=S/n,h[i]=S/e,h[o]=S/t,h)[y]||S,p?w:$.a(w)},v.daysInMonth=function(){return this.endOf(a).$D},v.$locale=function(){return g[this.$L]},v.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=x(t,e,!0);return r&&(n.$L=r),n},v.clone=function(){return $.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},m}(),D=E.prototype;return k.prototype=D,[["$ms",r],["$s",o],["$m",i],["$H",c],["$W",s],["$M",a],["$y",l],["$D",d]].forEach((function(t){D[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),k.extend=function(t,e){return t.$i||(t(e,E,k),t.$i=!0),k},k.locale=x,k.isDayjs=b,k.unix=function(t){return k(1e3*t)},k.en=g[w],k.Ls=g,k.p={},k}();var y=h;function m(t,e,n,r){return new(n||(n=Promise))((function(o,i){function c(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,s)}u((r=r.apply(t,e||[])).next())}))}function v(t,e){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(c=0)),c;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return c.label++,{value:s[1],done:!1};case 5:c.label++,r=s[1],s=[0];continue;case 7:s=c.ops.pop(),c.trys.pop();continue;default:if(!(o=c.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){c=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){c.label=s[1];break}if(6===s[0]&&c.label<o[1]){c.label=o[1],o=s;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(s);break}o[2]&&c.ops.pop(),c.trys.pop();continue}s=e.call(t,c)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}function S(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c}function w(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}function g(t,e,n){if(void 0===t&&(t="+"),void 0===e&&(e=0),void 0===n&&(n=0),e=parseFloat(e.toString()),n=parseFloat(n.toString()),isNaN(e)||isNaN(n))return NaN;var r=(e.toString().split(".")[1]||"").length,o=(n.toString().split(".")[1]||"").length,i=Math.max(r,o,0),c=Math.pow(10,i),s=Math.round(e*c),u=Math.round(n*c);return"+"===t?(s+u)/c:"-"===t?(s-u)/c:"*"===t?s*u/(c*c):"/"===t?s/u:(s+u)/c}function b(t,e){return void 0===t&&(t=0),void 0===e&&(e=10),Math.floor(Math.random()*(e-t+1)+t)}var x={address:{msg:"地址只能由2~200位中文、英文、数字或空格组成",regexp:/^[\u4e00-\u9fa5A-Za-z0-9 ]{2,200}$/g},count:{msg:"数量只能由数字组成",regexp:/^\d{1,}$/g},date:{msg:"日期只能由YYYY-MM-DD HH:mm:ss形式组成",regexp:/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/g},email:{msg:"邮箱只能由xxx@yyy.zzz形式组成",regexp:/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/g},idcard:{msg:"身份证只能由13位数字或12位数字与X组成",regexp:/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/g},image:{msg:"图片只能是JPG、PNG、GIF、SVG或WEBP类型",regexp:/\.(jpe?g|png|gif|svg|webp)$/g},name:{msg:"名称只能由2~50位中文、英文、数字、下划线或中划线组成",regexp:/^[\u4e00-\u9fa5\w-]{2,50}$/g},number:{msg:"计数只能由数字或小数点组成",regexp:/^[+-]?(0|([1-9]\d*))(\.\d+)?$/g},password:{msg:"密码只能由8~20位英文、数字或符号至少两种组成",regexp:/^(?![0-9]+$)(?![a-z]+$)(?![A-Z]+$)(?!([^(0-9a-zA-Z)])+$)^.{8,20}$/g},phone:{msg:"手机只能由11位数字组成且符合通讯运营商规范",regexp:/^1\d{10}$/g}},k="^$.*+-?=!:|\\/()[]{}".split("");var $={},E={fromCallback:function(t){return Object.defineProperty((function(...e){if("function"!=typeof e[e.length-1])return new Promise(((n,r)=>{t.call(this,...e,((t,e)=>null!=t?r(t):n(e)))}));t.apply(this,e)}),"name",{value:t.name})},fromPromise:function(t){return Object.defineProperty((function(...e){const n=e[e.length-1];if("function"!=typeof n)return t.apply(this,e);t.apply(this,e.slice(0,-1)).then((t=>n(null,t)),n)}),"name",{value:t.name})}},D=r,O=process.cwd,F=null,M=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return F||(F=O.call(process)),F};try{process.cwd()}catch(t){}if("function"==typeof process.chdir){var P=process.chdir;process.chdir=function(t){F=null,P.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,P)}var N=function(t){D.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(t){t.lchmod=function(e,n,r){t.open(e,D.O_WRONLY|D.O_SYMLINK,n,(function(e,o){e?r&&r(e):t.fchmod(o,n,(function(e){t.close(o,(function(t){r&&r(e||t)}))}))}))},t.lchmodSync=function(e,n){var r,o=t.openSync(e,D.O_WRONLY|D.O_SYMLINK,n),i=!0;try{r=t.fchmodSync(o,n),i=!1}finally{if(i)try{t.closeSync(o)}catch(t){}else t.closeSync(o)}return r}}(t);t.lutimes||function(t){D.hasOwnProperty("O_SYMLINK")&&t.futimes?(t.lutimes=function(e,n,r,o){t.open(e,D.O_SYMLINK,(function(e,i){e?o&&o(e):t.futimes(i,n,r,(function(e){t.close(i,(function(t){o&&o(e||t)}))}))}))},t.lutimesSync=function(e,n,r){var o,i=t.openSync(e,D.O_SYMLINK),c=!0;try{o=t.futimesSync(i,n,r),c=!1}finally{if(c)try{t.closeSync(i)}catch(t){}else t.closeSync(i)}return o}):t.futimes&&(t.lutimes=function(t,e,n,r){r&&process.nextTick(r)},t.lutimesSync=function(){})}(t);t.chown=r(t.chown),t.fchown=r(t.fchown),t.lchown=r(t.lchown),t.chmod=e(t.chmod),t.fchmod=e(t.fchmod),t.lchmod=e(t.lchmod),t.chownSync=o(t.chownSync),t.fchownSync=o(t.fchownSync),t.lchownSync=o(t.lchownSync),t.chmodSync=n(t.chmodSync),t.fchmodSync=n(t.fchmodSync),t.lchmodSync=n(t.lchmodSync),t.stat=i(t.stat),t.fstat=i(t.fstat),t.lstat=i(t.lstat),t.statSync=c(t.statSync),t.fstatSync=c(t.fstatSync),t.lstatSync=c(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(t,e,n){n&&process.nextTick(n)},t.lchmodSync=function(){});t.chown&&!t.lchown&&(t.lchown=function(t,e,n,r){r&&process.nextTick(r)},t.lchownSync=function(){});"win32"===M&&(t.rename="function"!=typeof t.rename?t.rename:function(e){function n(n,r,o){var i=Date.now(),c=0;e(n,r,(function s(u){if(u&&("EACCES"===u.code||"EPERM"===u.code)&&Date.now()-i<6e4)return setTimeout((function(){t.stat(r,(function(t,i){t&&"ENOENT"===t.code?e(n,r,s):o(u)}))}),c),void(c<100&&(c+=10));o&&o(u)}))}return Object.setPrototypeOf&&Object.setPrototypeOf(n,e),n}(t.rename));function e(e){return e?function(n,r,o){return e.call(t,n,r,(function(t){s(t)&&(t=null),o&&o.apply(this,arguments)}))}:e}function n(e){return e?function(n,r){try{return e.call(t,n,r)}catch(t){if(!s(t))throw t}}:e}function r(e){return e?function(n,r,o,i){return e.call(t,n,r,o,(function(t){s(t)&&(t=null),i&&i.apply(this,arguments)}))}:e}function o(e){return e?function(n,r,o){try{return e.call(t,n,r,o)}catch(t){if(!s(t))throw t}}:e}function i(e){return e?function(n,r,o){function i(t,e){e&&(e.uid<0&&(e.uid+=4294967296),e.gid<0&&(e.gid+=4294967296)),o&&o.apply(this,arguments)}return"function"==typeof r&&(o=r,r=null),r?e.call(t,n,r,i):e.call(t,n,i)}:e}function c(e){return e?function(n,r){var o=r?e.call(t,n,r):e.call(t,n);return o&&(o.uid<0&&(o.uid+=4294967296),o.gid<0&&(o.gid+=4294967296)),o}:e}function s(t){return!t||("ENOSYS"===t.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==t.code&&"EPERM"!==t.code))}t.read="function"!=typeof t.read?t.read:function(e){function n(n,r,o,i,c,s){var u;if(s&&"function"==typeof s){var a=0;u=function(f,l,d){if(f&&"EAGAIN"===f.code&&a<10)return a++,e.call(t,n,r,o,i,c,u);s.apply(this,arguments)}}return e.call(t,n,r,o,i,c,u)}return Object.setPrototypeOf&&Object.setPrototypeOf(n,e),n}(t.read),t.readSync="function"!=typeof t.readSync?t.readSync:(u=t.readSync,function(e,n,r,o,i){for(var c=0;;)try{return u.call(t,e,n,r,o,i)}catch(t){if("EAGAIN"===t.code&&c<10){c++;continue}throw t}});var u};var C=o.Stream,I=function(t){return{ReadStream:function e(n,r){if(!(this instanceof e))return new e(n,r);C.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,r=r||{};for(var i=Object.keys(r),c=0,s=i.length;c<s;c++){var u=i[c];this[u]=r[u]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick((function(){o._read()}));t.open(this.path,this.flags,this.mode,(function(t,e){if(t)return o.emit("error",t),void(o.readable=!1);o.fd=e,o.emit("open",e),o._read()}))},WriteStream:function e(n,r){if(!(this instanceof e))return new e(n,r);C.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,r=r||{};for(var o=Object.keys(r),i=0,c=o.length;i<c;i++){var s=o[i];this[s]=r[s]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}};var T=function(t){if(null===t||"object"!=typeof t)return t;if(t instanceof Object)var e={__proto__:_(t)};else e=Object.create(null);return Object.getOwnPropertyNames(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e},_=Object.getPrototypeOf||function(t){return t.__proto__};var j,L,A=t,R=N,W=I,Y=T,J=i;function B(t,e){Object.defineProperty(t,j,{get:function(){return e}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(j=Symbol.for("graceful-fs.queue"),L=Symbol.for("graceful-fs.previous")):(j="___graceful-fs.queue",L="___graceful-fs.previous");var U=function(){};if(J.debuglog?U=J.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(U=function(){var t=J.format.apply(J,arguments);t="GFS4: "+t.split(/\n/).join("\nGFS4: "),console.error(t)}),!A[j]){var G=p[j]||[];B(A,G),A.close=function(t){function e(e,n){return t.call(A,e,(function(t){t||z(),"function"==typeof n&&n.apply(this,arguments)}))}return Object.defineProperty(e,L,{value:t}),e}(A.close),A.closeSync=function(t){function e(e){t.apply(A,arguments),z()}return Object.defineProperty(e,L,{value:t}),e}(A.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){U(A[j]),c.equal(A[j].length,0)}))}p[j]||B(p,A[j]);var q,H=V(Y(A));function V(t){R(t),t.gracefulify=V,t.createReadStream=function(e,n){return new t.ReadStream(e,n)},t.createWriteStream=function(e,n){return new t.WriteStream(e,n)};var e=t.readFile;t.readFile=function(t,n,r){"function"==typeof n&&(r=n,n=null);return function t(n,r,o,i){return e(n,r,(function(e){!e||"EMFILE"!==e.code&&"ENFILE"!==e.code?"function"==typeof o&&o.apply(this,arguments):K([t,[n,r,o],e,i||Date.now(),Date.now()])}))}(t,n,r)};var n=t.writeFile;t.writeFile=function(t,e,r,o){"function"==typeof r&&(o=r,r=null);return function t(e,r,o,i,c){return n(e,r,o,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?"function"==typeof i&&i.apply(this,arguments):K([t,[e,r,o,i],n,c||Date.now(),Date.now()])}))}(t,e,r,o)};var r=t.appendFile;r&&(t.appendFile=function(t,e,n,o){"function"==typeof n&&(o=n,n=null);return function t(e,n,o,i,c){return r(e,n,o,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?"function"==typeof i&&i.apply(this,arguments):K([t,[e,n,o,i],r,c||Date.now(),Date.now()])}))}(t,e,n,o)});var o=t.copyFile;o&&(t.copyFile=function(t,e,n,r){"function"==typeof n&&(r=n,n=0);return function t(e,n,r,i,c){return o(e,n,r,(function(o){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?"function"==typeof i&&i.apply(this,arguments):K([t,[e,n,r,i],o,c||Date.now(),Date.now()])}))}(t,e,n,r)});var i=t.readdir;t.readdir=function(t,e,n){"function"==typeof e&&(n=e,e=null);var r=c.test(process.version)?function(t,e,n,r){return i(t,o(t,e,n,r))}:function(t,e,n,r){return i(t,e,o(t,e,n,r))};return r(t,e,n);function o(t,e,n,o){return function(i,c){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?(c&&c.sort&&c.sort(),"function"==typeof n&&n.call(this,i,c)):K([r,[t,e,n],i,o||Date.now(),Date.now()])}}};var c=/^v[0-5]\./;if("v0.8"===process.version.substr(0,4)){var s=W(t);d=s.ReadStream,p=s.WriteStream}var u=t.ReadStream;u&&(d.prototype=Object.create(u.prototype),d.prototype.open=function(){var t=this;y(t.path,t.flags,t.mode,(function(e,n){e?(t.autoClose&&t.destroy(),t.emit("error",e)):(t.fd=n,t.emit("open",n),t.read())}))});var a=t.WriteStream;a&&(p.prototype=Object.create(a.prototype),p.prototype.open=function(){var t=this;y(t.path,t.flags,t.mode,(function(e,n){e?(t.destroy(),t.emit("error",e)):(t.fd=n,t.emit("open",n))}))}),Object.defineProperty(t,"ReadStream",{get:function(){return d},set:function(t){d=t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return p},set:function(t){p=t},enumerable:!0,configurable:!0});var f=d;Object.defineProperty(t,"FileReadStream",{get:function(){return f},set:function(t){f=t},enumerable:!0,configurable:!0});var l=p;function d(t,e){return this instanceof d?(u.apply(this,arguments),this):d.apply(Object.create(d.prototype),arguments)}function p(t,e){return this instanceof p?(a.apply(this,arguments),this):p.apply(Object.create(p.prototype),arguments)}Object.defineProperty(t,"FileWriteStream",{get:function(){return l},set:function(t){l=t},enumerable:!0,configurable:!0});var h=t.open;function y(t,e,n,r){return"function"==typeof n&&(r=n,n=null),function t(e,n,r,o,i){return h(e,n,r,(function(c,s){!c||"EMFILE"!==c.code&&"ENFILE"!==c.code?"function"==typeof o&&o.apply(this,arguments):K([t,[e,n,r,o],c,i||Date.now(),Date.now()])}))}(t,e,n,r)}return t.open=y,t}function K(t){U("ENQUEUE",t[0].name,t[1]),A[j].push(t),Z()}function z(){for(var t=Date.now(),e=0;e<A[j].length;++e)A[j][e].length>2&&(A[j][e][3]=t,A[j][e][4]=t);Z()}function Z(){if(clearTimeout(q),q=void 0,0!==A[j].length){var t=A[j].shift(),e=t[0],n=t[1],r=t[2],o=t[3],i=t[4];if(void 0===o)U("RETRY",e.name,n),e.apply(null,n);else if(Date.now()-o>=6e4){U("TIMEOUT",e.name,n);var c=n.pop();"function"==typeof c&&c.call(null,r)}else{var s=Date.now()-i,u=Math.max(i-o,1);s>=Math.min(1.2*u,100)?(U("RETRY",e.name,n),e.apply(null,n.concat([o]))):A[j].push(t)}void 0===q&&(q=setTimeout(Z,0))}}process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!A.__patched&&(H=V(A),A.__patched=!0),function(t){const e=E.fromCallback,n=H,r=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter((t=>"function"==typeof n[t]));Object.assign(t,n),r.forEach((r=>{t[r]=e(n[r])})),t.exists=function(t,e){return"function"==typeof e?n.exists(t,e):new Promise((e=>n.exists(t,e)))},t.read=function(t,e,r,o,i,c){return"function"==typeof c?n.read(t,e,r,o,i,c):new Promise(((c,s)=>{n.read(t,e,r,o,i,((t,e,n)=>{if(t)return s(t);c({bytesRead:e,buffer:n})}))}))},t.write=function(t,e,...r){return"function"==typeof r[r.length-1]?n.write(t,e,...r):new Promise(((o,i)=>{n.write(t,e,...r,((t,e,n)=>{if(t)return i(t);o({bytesWritten:e,buffer:n})}))}))},t.readv=function(t,e,...r){return"function"==typeof r[r.length-1]?n.readv(t,e,...r):new Promise(((o,i)=>{n.readv(t,e,...r,((t,e,n)=>{if(t)return i(t);o({bytesRead:e,buffers:n})}))}))},t.writev=function(t,e,...r){return"function"==typeof r[r.length-1]?n.writev(t,e,...r):new Promise(((o,i)=>{n.writev(t,e,...r,((t,e,n)=>{if(t)return i(t);o({bytesWritten:e,buffers:n})}))}))},"function"==typeof n.realpath.native?t.realpath.native=e(n.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")}($);var X={},Q={};const tt=e;Q.checkPath=function(t){if("win32"===process.platform){if(/[<>:"|?*]/.test(t.replace(tt.parse(t).root,""))){const e=new Error(`Path contains invalid characters: ${t}`);throw e.code="EINVAL",e}}};const et=$,{checkPath:nt}=Q,rt=t=>"number"==typeof t?t:{mode:511,...t}.mode;X.makeDir=async(t,e)=>(nt(t),et.mkdir(t,{mode:rt(e),recursive:!0})),X.makeDirSync=(t,e)=>(nt(t),et.mkdirSync(t,{mode:rt(e),recursive:!0}));const ot=E.fromPromise,{makeDir:it,makeDirSync:ct}=X,st=ot(it);var ut={mkdirs:st,mkdirsSync:ct,mkdirp:st,mkdirpSync:ct,ensureDir:st,ensureDirSync:ct};const at=E.fromPromise,ft=$;var lt={pathExists:at((function(t){return ft.access(t).then((()=>!0)).catch((()=>!1))})),pathExistsSync:ft.existsSync};const dt=H;var pt=function(t,e,n,r){dt.open(t,"r+",((t,o)=>{if(t)return r(t);dt.futimes(o,e,n,(t=>{dt.close(o,(e=>{r&&r(t||e)}))}))}))},ht=function(t,e,n){const r=dt.openSync(t,"r+");return dt.futimesSync(r,e,n),dt.closeSync(r)};const yt=$,mt=e,vt=i;function St(t,e,n){const r=n.dereference?t=>yt.stat(t,{bigint:!0}):t=>yt.lstat(t,{bigint:!0});return Promise.all([r(t),r(e).catch((t=>{if("ENOENT"===t.code)return null;throw t}))]).then((([t,e])=>({srcStat:t,destStat:e})))}function wt(t,e){return e.ino&&e.dev&&e.ino===t.ino&&e.dev===t.dev}function gt(t,e){const n=mt.resolve(t).split(mt.sep).filter((t=>t)),r=mt.resolve(e).split(mt.sep).filter((t=>t));return n.reduce(((t,e,n)=>t&&r[n]===e),!0)}function bt(t,e,n){return`Cannot ${n} '${t}' to a subdirectory of itself, '${e}'.`}var xt={checkPaths:function(t,e,n,r,o){vt.callbackify(St)(t,e,r,((r,i)=>{if(r)return o(r);const{srcStat:c,destStat:s}=i;if(s){if(wt(c,s)){const r=mt.basename(t),i=mt.basename(e);return"move"===n&&r!==i&&r.toLowerCase()===i.toLowerCase()?o(null,{srcStat:c,destStat:s,isChangingCase:!0}):o(new Error("Source and destination must not be the same."))}if(c.isDirectory()&&!s.isDirectory())return o(new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`));if(!c.isDirectory()&&s.isDirectory())return o(new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`))}return c.isDirectory()&&gt(t,e)?o(new Error(bt(t,e,n))):o(null,{srcStat:c,destStat:s})}))},checkPathsSync:function(t,e,n,r){const{srcStat:o,destStat:i}=function(t,e,n){let r;const o=n.dereference?t=>yt.statSync(t,{bigint:!0}):t=>yt.lstatSync(t,{bigint:!0}),i=o(t);try{r=o(e)}catch(t){if("ENOENT"===t.code)return{srcStat:i,destStat:null};throw t}return{srcStat:i,destStat:r}}(t,e,r);if(i){if(wt(o,i)){const r=mt.basename(t),c=mt.basename(e);if("move"===n&&r!==c&&r.toLowerCase()===c.toLowerCase())return{srcStat:o,destStat:i,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(o.isDirectory()&&!i.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`);if(!o.isDirectory()&&i.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`)}if(o.isDirectory()&&gt(t,e))throw new Error(bt(t,e,n));return{srcStat:o,destStat:i}},checkParentPaths:function t(e,n,r,o,i){const c=mt.resolve(mt.dirname(e)),s=mt.resolve(mt.dirname(r));if(s===c||s===mt.parse(s).root)return i();yt.stat(s,{bigint:!0},((c,u)=>c?"ENOENT"===c.code?i():i(c):wt(n,u)?i(new Error(bt(e,r,o))):t(e,n,s,o,i)))},checkParentPathsSync:function t(e,n,r,o){const i=mt.resolve(mt.dirname(e)),c=mt.resolve(mt.dirname(r));if(c===i||c===mt.parse(c).root)return;let s;try{s=yt.statSync(c,{bigint:!0})}catch(t){if("ENOENT"===t.code)return;throw t}if(wt(n,s))throw new Error(bt(e,r,o));return t(e,n,c,o)},isSrcSubdir:gt,areIdentical:wt};const kt=H,$t=e,Et=ut.mkdirs,Dt=lt.pathExists,Ot=pt,Ft=xt;function Mt(t,e,n,r){if(!n.filter)return r(null,!0);Promise.resolve(n.filter(t,e)).then((t=>r(null,t)),(t=>r(t)))}function Pt(t,e,n,r,o){(r.dereference?kt.stat:kt.lstat)(e,((i,c)=>i?o(i):c.isDirectory()?function(t,e,n,r,o,i){return e?Tt(n,r,o,i):function(t,e,n,r,o){kt.mkdir(n,(i=>{if(i)return o(i);Tt(e,n,r,(e=>e?o(e):It(n,t,o)))}))}(t.mode,n,r,o,i)}(c,t,e,n,r,o):c.isFile()||c.isCharacterDevice()||c.isBlockDevice()?function(t,e,n,r,o,i){return e?function(t,e,n,r,o){if(!r.overwrite)return r.errorOnExist?o(new Error(`'${n}' already exists`)):o();kt.unlink(n,(i=>i?o(i):Nt(t,e,n,r,o)))}(t,n,r,o,i):Nt(t,n,r,o,i)}(c,t,e,n,r,o):c.isSymbolicLink()?function(t,e,n,r,o){kt.readlink(e,((e,i)=>e?o(e):(r.dereference&&(i=$t.resolve(process.cwd(),i)),t?void kt.readlink(n,((t,e)=>t?"EINVAL"===t.code||"UNKNOWN"===t.code?kt.symlink(i,n,o):o(t):(r.dereference&&(e=$t.resolve(process.cwd(),e)),Ft.isSrcSubdir(i,e)?o(new Error(`Cannot copy '${i}' to a subdirectory of itself, '${e}'.`)):Ft.isSrcSubdir(e,i)?o(new Error(`Cannot overwrite '${e}' with '${i}'.`)):function(t,e,n){kt.unlink(e,(r=>r?n(r):kt.symlink(t,e,n)))}(i,n,o)))):kt.symlink(i,n,o))))}(t,e,n,r,o):c.isSocket()?o(new Error(`Cannot copy a socket file: ${e}`)):c.isFIFO()?o(new Error(`Cannot copy a FIFO pipe: ${e}`)):o(new Error(`Unknown file: ${e}`))))}function Nt(t,e,n,r,o){kt.copyFile(e,n,(i=>i?o(i):r.preserveTimestamps?function(t,e,n,r){if(function(t){return 0==(128&t)}(t))return function(t,e,n){return It(t,128|e,n)}(n,t,(o=>o?r(o):Ct(t,e,n,r)));return Ct(t,e,n,r)}(t.mode,e,n,o):It(n,t.mode,o)))}function Ct(t,e,n,r){!function(t,e,n){kt.stat(t,((t,r)=>t?n(t):Ot(e,r.atime,r.mtime,n)))}(e,n,(e=>e?r(e):It(n,t,r)))}function It(t,e,n){return kt.chmod(t,e,n)}function Tt(t,e,n,r){kt.readdir(t,((o,i)=>o?r(o):_t(i,t,e,n,r)))}function _t(t,e,n,r,o){const i=t.pop();return i?function(t,e,n,r,o,i){const c=$t.join(n,e),s=$t.join(r,e);Mt(c,s,o,((e,u)=>e?i(e):u?void Ft.checkPaths(c,s,"copy",o,((e,u)=>{if(e)return i(e);const{destStat:a}=u;Pt(a,c,s,o,(e=>e?i(e):_t(t,n,r,o,i)))})):_t(t,n,r,o,i)))}(t,i,e,n,r,o):o()}var jt=function(t,e,n,r){"function"!=typeof n||r?"function"==typeof n&&(n={filter:n}):(r=n,n={}),r=r||function(){},(n=n||{}).clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0001"),Ft.checkPaths(t,e,"copy",n,((o,i)=>{if(o)return r(o);const{srcStat:c,destStat:s}=i;Ft.checkParentPaths(t,c,e,"copy",(o=>{if(o)return r(o);Mt(t,e,n,((o,i)=>o?r(o):i?void function(t,e,n,r,o){const i=$t.dirname(n);Dt(i,((c,s)=>c?o(c):s?Pt(t,e,n,r,o):void Et(i,(i=>i?o(i):Pt(t,e,n,r,o)))))}(s,t,e,n,r):r()))}))}))};const Lt=H,At=e,Rt=ut.mkdirsSync,Wt=ht,Yt=xt;function Jt(t,e,n,r){const o=(r.dereference?Lt.statSync:Lt.lstatSync)(e);if(o.isDirectory())return function(t,e,n,r,o){return e?Gt(n,r,o):function(t,e,n,r){return Lt.mkdirSync(n),Gt(e,n,r),Ut(n,t)}(t.mode,n,r,o)}(o,t,e,n,r);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return function(t,e,n,r,o){return e?function(t,e,n,r){if(r.overwrite)return Lt.unlinkSync(n),Bt(t,e,n,r);if(r.errorOnExist)throw new Error(`'${n}' already exists`)}(t,n,r,o):Bt(t,n,r,o)}(o,t,e,n,r);if(o.isSymbolicLink())return function(t,e,n,r){let o=Lt.readlinkSync(e);r.dereference&&(o=At.resolve(process.cwd(),o));if(t){let t;try{t=Lt.readlinkSync(n)}catch(t){if("EINVAL"===t.code||"UNKNOWN"===t.code)return Lt.symlinkSync(o,n);throw t}if(r.dereference&&(t=At.resolve(process.cwd(),t)),Yt.isSrcSubdir(o,t))throw new Error(`Cannot copy '${o}' to a subdirectory of itself, '${t}'.`);if(Yt.isSrcSubdir(t,o))throw new Error(`Cannot overwrite '${t}' with '${o}'.`);return function(t,e){return Lt.unlinkSync(e),Lt.symlinkSync(t,e)}(o,n)}return Lt.symlinkSync(o,n)}(t,e,n,r);if(o.isSocket())throw new Error(`Cannot copy a socket file: ${e}`);if(o.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${e}`);throw new Error(`Unknown file: ${e}`)}function Bt(t,e,n,r){return Lt.copyFileSync(e,n),r.preserveTimestamps&&function(t,e,n){(function(t){return 0==(128&t)})(t)&&function(t,e){Ut(t,128|e)}(n,t);(function(t,e){const n=Lt.statSync(t);Wt(e,n.atime,n.mtime)})(e,n)}(t.mode,e,n),Ut(n,t.mode)}function Ut(t,e){return Lt.chmodSync(t,e)}function Gt(t,e,n){Lt.readdirSync(t).forEach((r=>function(t,e,n,r){const o=At.join(e,t),i=At.join(n,t);if(r.filter&&!r.filter(o,i))return;const{destStat:c}=Yt.checkPathsSync(o,i,"copy",r);return Jt(c,o,i,r)}(r,t,e,n)))}var qt=function(t,e,n){"function"==typeof n&&(n={filter:n}),(n=n||{}).clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0002");const{srcStat:r,destStat:o}=Yt.checkPathsSync(t,e,"copy",n);if(Yt.checkParentPathsSync(t,r,e,"copy"),n.filter&&!n.filter(t,e))return;const i=At.dirname(e);return Lt.existsSync(i)||Rt(i),Jt(o,t,e,n)};var Ht={copy:(0,E.fromCallback)(jt),copySync:qt};const Vt=H;var Kt={remove:(0,E.fromCallback)((function(t,e){Vt.rm(t,{recursive:!0,force:!0},e)})),removeSync:function(t){Vt.rmSync(t,{recursive:!0,force:!0})}};const zt=E.fromPromise,Zt=$,Xt=e,Qt=ut,te=Kt,ee=zt((async function(t){let e;try{e=await Zt.readdir(t)}catch{return Qt.mkdirs(t)}return Promise.all(e.map((e=>te.remove(Xt.join(t,e)))))}));function ne(t){let e;try{e=Zt.readdirSync(t)}catch{return Qt.mkdirsSync(t)}e.forEach((e=>{e=Xt.join(t,e),te.removeSync(e)}))}var re={emptyDirSync:ne,emptydirSync:ne,emptyDir:ee,emptydir:ee};const oe=E.fromCallback,ie=e,ce=H,se=ut;var ue={createFile:oe((function(t,e){function n(){ce.writeFile(t,"",(t=>{if(t)return e(t);e()}))}ce.stat(t,((r,o)=>{if(!r&&o.isFile())return e();const i=ie.dirname(t);ce.stat(i,((t,r)=>{if(t)return"ENOENT"===t.code?se.mkdirs(i,(t=>{if(t)return e(t);n()})):e(t);r.isDirectory()?n():ce.readdir(i,(t=>{if(t)return e(t)}))}))}))})),createFileSync:function(t){let e;try{e=ce.statSync(t)}catch{}if(e&&e.isFile())return;const n=ie.dirname(t);try{ce.statSync(n).isDirectory()||ce.readdirSync(n)}catch(t){if(!t||"ENOENT"!==t.code)throw t;se.mkdirsSync(n)}ce.writeFileSync(t,"")}};const ae=E.fromCallback,fe=e,le=H,de=ut,pe=lt.pathExists,{areIdentical:he}=xt;var ye={createLink:ae((function(t,e,n){function r(t,e){le.link(t,e,(t=>{if(t)return n(t);n(null)}))}le.lstat(e,((o,i)=>{le.lstat(t,((o,c)=>{if(o)return o.message=o.message.replace("lstat","ensureLink"),n(o);if(i&&he(c,i))return n(null);const s=fe.dirname(e);pe(s,((o,i)=>o?n(o):i?r(t,e):void de.mkdirs(s,(o=>{if(o)return n(o);r(t,e)}))))}))}))})),createLinkSync:function(t,e){let n;try{n=le.lstatSync(e)}catch{}try{const e=le.lstatSync(t);if(n&&he(e,n))return}catch(t){throw t.message=t.message.replace("lstat","ensureLink"),t}const r=fe.dirname(e);return le.existsSync(r)||de.mkdirsSync(r),le.linkSync(t,e)}};const me=e,ve=H,Se=lt.pathExists;var we={symlinkPaths:function(t,e,n){if(me.isAbsolute(t))return ve.lstat(t,(e=>e?(e.message=e.message.replace("lstat","ensureSymlink"),n(e)):n(null,{toCwd:t,toDst:t})));{const r=me.dirname(e),o=me.join(r,t);return Se(o,((e,i)=>e?n(e):i?n(null,{toCwd:o,toDst:t}):ve.lstat(t,(e=>e?(e.message=e.message.replace("lstat","ensureSymlink"),n(e)):n(null,{toCwd:t,toDst:me.relative(r,t)})))))}},symlinkPathsSync:function(t,e){let n;if(me.isAbsolute(t)){if(n=ve.existsSync(t),!n)throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}{const r=me.dirname(e),o=me.join(r,t);if(n=ve.existsSync(o),n)return{toCwd:o,toDst:t};if(n=ve.existsSync(t),!n)throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:me.relative(r,t)}}}};const ge=H;var be={symlinkType:function(t,e,n){if(n="function"==typeof e?e:n,e="function"!=typeof e&&e)return n(null,e);ge.lstat(t,((t,r)=>{if(t)return n(null,"file");e=r&&r.isDirectory()?"dir":"file",n(null,e)}))},symlinkTypeSync:function(t,e){let n;if(e)return e;try{n=ge.lstatSync(t)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}};const xe=E.fromCallback,ke=e,$e=$,Ee=ut.mkdirs,De=ut.mkdirsSync,Oe=we.symlinkPaths,Fe=we.symlinkPathsSync,Me=be.symlinkType,Pe=be.symlinkTypeSync,Ne=lt.pathExists,{areIdentical:Ce}=xt;function Ie(t,e,n,r){Oe(t,e,((o,i)=>{if(o)return r(o);t=i.toDst,Me(i.toCwd,n,((n,o)=>{if(n)return r(n);const i=ke.dirname(e);Ne(i,((n,c)=>n?r(n):c?$e.symlink(t,e,o,r):void Ee(i,(n=>{if(n)return r(n);$e.symlink(t,e,o,r)}))))}))}))}var Te={createSymlink:xe((function(t,e,n,r){r="function"==typeof n?n:r,n="function"!=typeof n&&n,$e.lstat(e,((o,i)=>{!o&&i.isSymbolicLink()?Promise.all([$e.stat(t),$e.stat(e)]).then((([o,i])=>{if(Ce(o,i))return r(null);Ie(t,e,n,r)})):Ie(t,e,n,r)}))})),createSymlinkSync:function(t,e,n){let r;try{r=$e.lstatSync(e)}catch{}if(r&&r.isSymbolicLink()){const n=$e.statSync(t),r=$e.statSync(e);if(Ce(n,r))return}const o=Fe(t,e);t=o.toDst,n=Pe(o.toCwd,n);const i=ke.dirname(e);return $e.existsSync(i)||De(i),$e.symlinkSync(t,e,n)}};const{createFile:_e,createFileSync:je}=ue,{createLink:Le,createLinkSync:Ae}=ye,{createSymlink:Re,createSymlinkSync:We}=Te;var Ye={createFile:_e,createFileSync:je,ensureFile:_e,ensureFileSync:je,createLink:Le,createLinkSync:Ae,ensureLink:Le,ensureLinkSync:Ae,createSymlink:Re,createSymlinkSync:We,ensureSymlink:Re,ensureSymlinkSync:We};var Je={stringify:function(t,{EOL:e="\n",finalEOL:n=!0,replacer:r=null,spaces:o}={}){const i=n?e:"";return JSON.stringify(t,r,o).replace(/\n/g,e)+i},stripBom:function(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t.replace(/^\uFEFF/,"")}};let Be;try{Be=H}catch(e){Be=t}const Ue=E,{stringify:Ge,stripBom:qe}=Je;const He=Ue.fromPromise((async function(t,e={}){"string"==typeof e&&(e={encoding:e});const n=e.fs||Be,r=!("throws"in e)||e.throws;let o,i=await Ue.fromCallback(n.readFile)(t,e);i=qe(i);try{o=JSON.parse(i,e?e.reviver:null)}catch(e){if(r)throw e.message=`${t}: ${e.message}`,e;return null}return o}));const Ve=Ue.fromPromise((async function(t,e,n={}){const r=n.fs||Be,o=Ge(e,n);await Ue.fromCallback(r.writeFile)(t,o,n)}));const Ke={readFile:He,readFileSync:function(t,e={}){"string"==typeof e&&(e={encoding:e});const n=e.fs||Be,r=!("throws"in e)||e.throws;try{let r=n.readFileSync(t,e);return r=qe(r),JSON.parse(r,e.reviver)}catch(e){if(r)throw e.message=`${t}: ${e.message}`,e;return null}},writeFile:Ve,writeFileSync:function(t,e,n={}){const r=n.fs||Be,o=Ge(e,n);return r.writeFileSync(t,o,n)}};var ze={readJson:Ke.readFile,readJsonSync:Ke.readFileSync,writeJson:Ke.writeFile,writeJsonSync:Ke.writeFileSync};const Ze=E.fromCallback,Xe=H,Qe=e,tn=ut,en=lt.pathExists;var nn={outputFile:Ze((function(t,e,n,r){"function"==typeof n&&(r=n,n="utf8");const o=Qe.dirname(t);en(o,((i,c)=>i?r(i):c?Xe.writeFile(t,e,n,r):void tn.mkdirs(o,(o=>{if(o)return r(o);Xe.writeFile(t,e,n,r)}))))})),outputFileSync:function(t,...e){const n=Qe.dirname(t);if(Xe.existsSync(n))return Xe.writeFileSync(t,...e);tn.mkdirsSync(n),Xe.writeFileSync(t,...e)}};const{stringify:rn}=Je,{outputFile:on}=nn;var cn=async function(t,e,n={}){const r=rn(e,n);await on(t,r,n)};const{stringify:sn}=Je,{outputFileSync:un}=nn;var an=function(t,e,n){const r=sn(e,n);un(t,r,n)};const fn=E.fromPromise,ln=ze;ln.outputJson=fn(cn),ln.outputJsonSync=an,ln.outputJSON=ln.outputJson,ln.outputJSONSync=ln.outputJsonSync,ln.writeJSON=ln.writeJson,ln.writeJSONSync=ln.writeJsonSync,ln.readJSON=ln.readJson,ln.readJSONSync=ln.readJsonSync;var dn=ln;const pn=H,hn=e,yn=Ht.copy,mn=Kt.remove,vn=ut.mkdirp,Sn=lt.pathExists,wn=xt;function gn(t,e,n,r,o){return r?bn(t,e,n,o):n?mn(e,(r=>r?o(r):bn(t,e,n,o))):void Sn(e,((r,i)=>r?o(r):i?o(new Error("dest already exists.")):bn(t,e,n,o)))}function bn(t,e,n,r){pn.rename(t,e,(o=>o?"EXDEV"!==o.code?r(o):function(t,e,n,r){const o={overwrite:n,errorOnExist:!0};yn(t,e,o,(e=>e?r(e):mn(t,r)))}(t,e,n,r):r()))}var xn=function(t,e,n,r){"function"==typeof n&&(r=n,n={});const o=(n=n||{}).overwrite||n.clobber||!1;wn.checkPaths(t,e,"move",n,((n,i)=>{if(n)return r(n);const{srcStat:c,isChangingCase:s=!1}=i;wn.checkParentPaths(t,c,e,"move",(n=>n?r(n):function(t){const e=hn.dirname(t);return hn.parse(e).root===e}(e)?gn(t,e,o,s,r):void vn(hn.dirname(e),(n=>n?r(n):gn(t,e,o,s,r)))))}))};const kn=H,$n=e,En=Ht.copySync,Dn=Kt.removeSync,On=ut.mkdirpSync,Fn=xt;function Mn(t,e,n){try{kn.renameSync(t,e)}catch(r){if("EXDEV"!==r.code)throw r;return function(t,e,n){const r={overwrite:n,errorOnExist:!0};return En(t,e,r),Dn(t)}(t,e,n)}}var Pn=function(t,e,n){const r=(n=n||{}).overwrite||n.clobber||!1,{srcStat:o,isChangingCase:i=!1}=Fn.checkPathsSync(t,e,"move",n);return Fn.checkParentPathsSync(t,o,e,"move"),function(t){const e=$n.dirname(t);return $n.parse(e).root===e}(e)||On($n.dirname(e)),function(t,e,n,r){if(r)return Mn(t,e,n);if(n)return Dn(e),Mn(t,e,n);if(kn.existsSync(e))throw new Error("dest already exists.");return Mn(t,e,n)}(t,e,r,i)};var Nn={move:(0,E.fromCallback)(xn),moveSync:Pn},Cn={...$,...Ht,...re,...Ye,...dn,...ut,...Nn,...nn,...lt,...Kt};function In(t,r){return void 0===t&&(t=""),void 0===r&&(r=n.cwd()),e.join(r,t)}function Tn(t){return void 0===t&&(t="node -v"),u.execSync(t,{encoding:"utf8"})}exports.AbsPath=In,exports.AsyncTo=function(t,e){return m(this,void 0,void 0,(function(){return v(this,(function(n){switch(n.label){case 0:return[4,t.then((function(t){return[null,t]})).catch((function(t){return[e?Object.assign({},t,e):t,void 0]}))];case 1:return[2,n.sent()]}}))}))},exports.CalcNum=g,exports.CalcNumPlus=function(t){void 0===t&&(t="+");for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r={"*":1,"+":0,"/":1,"-":0},o=r[t]||0,i=0;i<e.length;i++)o=0!==i||"-"!==t&&"/"!==t?g(t,o,e[i]):e[i];return o},exports.CheckObjValidKey=function(t,e){return void 0===t&&(t={}),void 0===e&&(e=""),e in t},exports.CheckPath=function(e,r){return void 0===e&&(e=""),void 0===r&&(r=n.cwd()),t.existsSync(In(e,r))},exports.CheckText=function(t,e){void 0===t&&(t="phone"),void 0===e&&(e="");var n=x[t],r=n.regexp,o=n.msg,i=r.test(e);return{flag:i,msg:i?"":o}},exports.CheckTextPlus=function(t,e,n){void 0===e&&(e=""),void 0===n&&(n="");var r=t.test(e);return{flag:r,msg:r?"":n}},exports.ChunkArr=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=1),t.length?t.reduce((function(t,n){return t[t.length-1].length===e?t.push([n]):t[t.length-1].push(n),t}),[[]]):[]},exports.CopyDir=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=""),Cn.copySync(t,e,{filter:n})},exports.CreateDir=function(t){void 0===t&&(t=""),Cn.ensureDirSync(t)},exports.Debounce=function(t,e){var n;return void 0===e&&(e=50),function(){for(var r=this,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];n&&clearTimeout(n),n=setTimeout((function(){return t.apply(r,o)}),e)}},exports.DesePhone=function(t){return void 0===t&&(t=""),x.phone.regexp.test(t)?t.toString().replace(/(\d{3})\d*(\d{4})/g,"$1****$2"):t},exports.EnvType=a,exports.FillNum=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),t.toString().padStart(e,"0")},exports.FilterObjKey=function(t,e){return void 0===t&&(t={}),void 0===e&&(e=[]),Object.keys(t).reduce((function(n,r){return e.includes(r)&&(n[r]=t[r]),n}),{})},exports.FixedNum=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=2),void 0===n&&(n="round");var r=Math.pow(10,e);return(0,Math[n])(t*r)/r},exports.FormatByte=function(t){if(void 0===t&&(t=0),0===t)return"0 B";var e=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,e)).toPrecision(3)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][e]},exports.FormatCountdown=function(t){if(!t)return"时间无效";var e=+new Date,n=+new Date(t)-e;if(n>=0){var r=Math.floor(n/1e3/3600/24),o=Math.floor(n/1e3/60/60%24),i=Math.floor(n/1e3/60%60),c=Math.floor(n/1e3%60),s=r?"".concat(r,"天"):"",u=o?"".concat(o,"时"):"",a=i?"".concat(i,"分"):"",f=c?"".concat(c,"秒"):"";return"".concat(s).concat(u).concat(a).concat(f)}return"时间已到"},exports.FormatPhone=function(t,e){return void 0===t&&(t=""),void 0===e&&(e="-"),x.phone.regexp.test(t)&&["-"," "].includes(e)?t.toString().replace(/(\d{3})(\d{4})(\d{4})/g,"$1".concat(e,"$2").concat(e,"$3")):t},exports.FormatTimeDiff=function(t,e){if(void 0===e&&(e="YYYY-MM-DD"),!t)return"时间无效";var n=+new Date,r=+new Date(t),o=n-r,i=o>=0?"前":"后",c=Math.abs(o),s=30.4375,u=36e5,a=24*u,f=c/6e4,l=c/u,d=c/a,p=c/26298e5;return c/315576e5>=1||p>=12?y(r).format(e):p>=1&&p<12?"".concat(parseInt(p.toString()),"个月").concat(i):d>=1&&d<s?"".concat(parseInt(d.toString()),"天").concat(i):l>=1&&l<24?"".concat(parseInt(l.toString()),"小时").concat(i):f>=1&&f<60?"".concat(parseInt(f.toString()),"分钟").concat(i):o>=0?"刚刚":"准备"},exports.GetIP=function(){var t,e="127.0.0.1",n=s.networkInterfaces();for(var r in n)for(var o=null!==(t=n[r])&&void 0!==t?t:[],i=0;i<o.length;i++){var c=o[i],u=c.address,a=c.family,f=c.internal;if("IPv4"===a&&u!==e&&!f)return u}return e},exports.GroupArr=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=""),e?t.reduce((function(t,n){return!t[n[e]]&&(t[n[e]]=[]),t[n[e]].push(n),t}),{}):{}},exports.IsArguments=function(t){return"arguments"===f(t)},exports.IsArray=function(t){return"array"===f(t)},exports.IsAsyncFunction=function(t){return"asyncfunction"===f(t)},exports.IsBoolean=function(t){return"boolean"===f(t)},exports.IsClass=function(t){return d(t)&&/^class\s+[\dA-Za-z]/.test(t.toString())},exports.IsDate=function(t){return"date"===f(t)},exports.IsElement=function(t){return/^html(.+?)element$/.test(f(t))},exports.IsEmpty=function(t){return!t},exports.IsEmptyArray=function(t){return Array.isArray(t)&&!t.length},exports.IsEmptyObject=function(t){return l(t)&&!Object.keys(t).length},exports.IsError=function(t){return t instanceof Error},exports.IsFunction=d,exports.IsMap=function(t){return"map"===f(t)},exports.IsNode=function(){return"node"===a()},exports.IsNull=function(t){return"null"===f(t)},exports.IsNumber=function(t){return"number"===f(t)},exports.IsObject=l,exports.IsRegExp=function(t){return"regexp"===f(t)},exports.IsSet=function(t){return"set"===f(t)},exports.IsString=function(t){return"string"===f(t)},exports.IsSymbol=function(t){return"symbol"===f(t)},exports.IsSyncFunction=function(t){return"function"===f(t)},exports.IsUndefined=function(t){return"undefined"===f(t)},exports.IsWeakMap=function(t){return"weakmap"===f(t)},exports.IsWeakSet=function(t){return"weakset"===f(t)},exports.IsWeb=function(){return"web"===a()},exports.MatchBracketText=function(t,e){var n;void 0===t&&(t="(*)"),void 0===e&&(e="");var r=t.split("*").map((function(t){return k.includes(t)?"\\"+t:t})),o=new RegExp(r[0]+"(.+?)"+r[1],"g");return(null!==(n=e.match(o))&&void 0!==n?n:[]).map((function(t){return t.replace(o,"$1")}))},exports.NodeType=function(){var t=s.type().toLocaleLowerCase(),e={windows:/windows/g,macos:/darwin/g,linux:/linux/g},n=Object.keys(e).find((function(n){return e[n].test(t)}));return{nodeVs:Tn("node -v").replace(/(v|\n|\r\n)/g,""),npmVs:Tn("npm -v").replace(/\n/g,""),system:n,systemVs:s.release().split("-")[0]}},exports.RandomColor=function(){return"#"+Math.floor(16777215*Math.random()).toString(16).padEnd(6,"0")},exports.RandomId=function(t){return void 0===t&&(t=5),(t<1||t>10)&&(t=5),Math.random().toString(36).substr(3,t)},exports.RandomNum=b,exports.RandomNumPlus=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=10),void 0===n&&(n=1);for(var r=[];;){for(var o=!1,i=b(t,e),c=0;c<r.length;c++)if(i===r[c]){o=!0;break}if(o||r.push(i),r.length===n)return r}},exports.ReadDir=function r(o,i,c){var s;if(void 0===o&&(o="bfs"),void 0===i&&(i=n.cwd()),void 0===c&&(c=/(node_modules|\.git|\.DS_Store)$/),"bfs"===o){var u=[],a=[];!c.test(i)&&a.unshift(i);for(var f=function(){var n=null!==(s=a.shift())&&void 0!==s?s:"",r=t.statSync(n);if(r&&!c.test(n)){var o=r.isDirectory,i=r.isFile;o()?t.readdirSync(n).forEach((function(t){var r=e.join(n,t);a.push(r)})):i()&&u.push(n)}};a.length;)f();return u}if("dfs"===o){u=[];var l=t.statSync(i);return c.test(i)||(l.isDirectory()?t.readdirSync(i).reduce((function(t,n){var o=r("dfs",e.join(i,n),c);return t.push.apply(t,w([],S(o),!1)),t}),u):l.isFile()&&u.push(i)),u}return[]},exports.ReadJson=function(r,o){void 0===r&&(r=""),void 0===o&&(o=n.cwd());var i=In(r,o),c=e.extname(i);if(!/^\.json$/.test(c))return{};var s=t.readFileSync(i,"utf8");return JSON.parse(s)},exports.RemoveDir=function(t){void 0===t&&(t=""),Cn.removeSync(t)},exports.RemoveObjEmptyKey=function(t,e){for(var n in void 0===t&&(t={}),void 0===e&&(e=!1),t)if({}.hasOwnProperty.call(t,n)){var r=t[n];(e?!r:""===r)&&delete t[n]}},exports.RemoveTag=function(t){return void 0===t&&(t=""),t.replace(/<[^>]*>/g,"")},exports.ReverseText=function(t){return void 0===t&&(t=""),t.split("").reduceRight((function(t,e){return t+e}))},exports.RoundNum=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=2),void 0===n&&(n=!1),n?"".concat(Math.round(t*Math.pow(10,e)*100)/Math.pow(10,e),"%"):Math.round(t*Math.pow(10,e))/Math.pow(10,e)},exports.RunCmd=Tn,exports.StartScore=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=5),t<0&&(t=0),t>e&&(t=e),w(w([],S(new Array(e).fill("★")),!1),S(new Array(e).fill("☆")),!1).join("").slice(e-t,2*e-t)},exports.StatArrMemCount=function(t){return void 0===t&&(t=[]),t.reduce((function(t,e){return t[e]=(t[e]||0)+1,t}),{})},exports.StatArrMemKeyword=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=[]),e.reduce((function(e,n){return t.some((function(t){return t.includes(n)}))&&e.push(n),e}),[])},exports.StatArrMemPosition=function(t,e){return void 0===t&&(t=[]),t.reduce((function(t,n,r){return n===e&&t.push(r),t}),[])},exports.ThousandNum=function(t){return void 0===t&&(t=0),t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},exports.Throttle=function(t,e){var n;void 0===e&&(e=50);var r=!1,o=0;return function(){for(var i=this,c=[],s=0;s<arguments.length;s++)c[s]=arguments[s];r?(clearTimeout(n),n=setTimeout((function(){Date.now()-o>=e&&(t.apply(i,c),o=Date.now())}),Math.max(e-(Date.now()-o),0))):(t.apply(this,c),o=Date.now(),r=!0)}},exports.TypeOf=f,exports.WaitFor=function(t){return void 0===t&&(t=1e3),m(this,void 0,void 0,(function(){return v(this,(function(e){switch(e.label){case 0:return[4,new Promise((function(e){return setTimeout((function(){return e(!0)}),t)}))];case 1:return[2,e.sent()]}}))}))};
