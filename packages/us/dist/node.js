"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("fs"),e=require("path"),n=require("process"),r=require("constants"),o=require("stream"),i=require("util"),c=require("assert"),s=require("os"),u=require("child_process");function a(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var f=a(t),l=a(e),d=a(r),p=a(o),y=a(i),h=a(c);function m(){return"undefined"!=typeof window?"web":"undefined"!=typeof global?"node":"unknow"}function v(t){return Object.prototype.toString.call(t).replace(/\[object (\w+)\]/,"$1").toLowerCase()}function S(t){return"object"===v(t)}function w(t){return"function"===v(t)}var g="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},b={exports:{}},E=b.exports=function(){var t=1e3,e=6e4,n=36e5,r="millisecond",o="second",i="minute",c="hour",s="day",u="week",a="month",f="quarter",l="year",d="date",p="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},v=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},S={s:v,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),o=n%60;return(e<=0?"+":"-")+v(r,2,"0")+":"+v(o,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),o=e.clone().add(r,a),i=n-o<0,c=e.clone().add(r+(i?-1:1),a);return+(-(r+(n-o)/(i?o-c:c-o))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:a,y:l,w:u,d:s,D:d,h:c,m:i,s:o,ms:r,Q:f}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},w="en",g={};g[w]=m;var b=function(t){return t instanceof $},E=function t(e,n,r){var o;if(!e)return w;if("string"==typeof e){var i=e.toLowerCase();g[i]&&(o=i),n&&(g[i]=n,o=i);var c=e.split("-");if(!o&&c.length>1)return t(c[0])}else{var s=e.name;g[s]=e,o=s}return!r&&o&&(w=o),o||!r&&w},k=function(t,e){if(b(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new $(n)},x=S;x.l=E,x.i=b,x.w=function(t,e){return k(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var $=function(){function m(t){this.$L=E(t.locale,null,!0),this.parse(t)}var v=m.prototype;return v.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(x.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(y);if(r){var o=r[2]-1||0,i=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)):new Date(r[1],o,r[3]||1,r[4]||0,r[5]||0,r[6]||0,i)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},v.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},v.$utils=function(){return x},v.isValid=function(){return!(this.$d.toString()===p)},v.isSame=function(t,e){var n=k(t);return this.startOf(e)<=n&&n<=this.endOf(e)},v.isAfter=function(t,e){return k(t)<this.startOf(e)},v.isBefore=function(t,e){return this.endOf(e)<k(t)},v.$g=function(t,e,n){return x.u(t)?this[e]:this.set(n,t)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(t,e){var n=this,r=!!x.u(e)||e,f=x.p(t),p=function(t,e){var o=x.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return r?o:o.endOf(s)},y=function(t,e){return x.w(n.toDate()[t].apply(n.toDate("s"),(r?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},h=this.$W,m=this.$M,v=this.$D,S="set"+(this.$u?"UTC":"");switch(f){case l:return r?p(1,0):p(31,11);case a:return r?p(1,m):p(0,m+1);case u:var w=this.$locale().weekStart||0,g=(h<w?h+7:h)-w;return p(r?v-g:v+(6-g),m);case s:case d:return y(S+"Hours",0);case c:return y(S+"Minutes",1);case i:return y(S+"Seconds",2);case o:return y(S+"Milliseconds",3);default:return this.clone()}},v.endOf=function(t){return this.startOf(t,!1)},v.$set=function(t,e){var n,u=x.p(t),f="set"+(this.$u?"UTC":""),p=(n={},n[s]=f+"Date",n[d]=f+"Date",n[a]=f+"Month",n[l]=f+"FullYear",n[c]=f+"Hours",n[i]=f+"Minutes",n[o]=f+"Seconds",n[r]=f+"Milliseconds",n)[u],y=u===s?this.$D+(e-this.$W):e;if(u===a||u===l){var h=this.clone().set(d,1);h.$d[p](y),h.init(),this.$d=h.set(d,Math.min(this.$D,h.daysInMonth())).$d}else p&&this.$d[p](y);return this.init(),this},v.set=function(t,e){return this.clone().$set(t,e)},v.get=function(t){return this[x.p(t)]()},v.add=function(r,f){var d,p=this;r=Number(r);var y=x.p(f),h=function(t){var e=k(p);return x.w(e.date(e.date()+Math.round(t*r)),p)};if(y===a)return this.set(a,this.$M+r);if(y===l)return this.set(l,this.$y+r);if(y===s)return h(1);if(y===u)return h(7);var m=(d={},d[i]=e,d[c]=n,d[o]=t,d)[y]||1,v=this.$d.getTime()+r*m;return x.w(v,this)},v.subtract=function(t,e){return this.add(-1*t,e)},v.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||p;var r=t||"YYYY-MM-DDTHH:mm:ssZ",o=x.z(this),i=this.$H,c=this.$m,s=this.$M,u=n.weekdays,a=n.months,f=function(t,n,o,i){return t&&(t[n]||t(e,r))||o[n].slice(0,i)},l=function(t){return x.s(i%12||12,t,"0")},d=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},y={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:x.s(s+1,2,"0"),MMM:f(n.monthsShort,s,a,3),MMMM:f(a,s),D:this.$D,DD:x.s(this.$D,2,"0"),d:String(this.$W),dd:f(n.weekdaysMin,this.$W,u,2),ddd:f(n.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(i),HH:x.s(i,2,"0"),h:l(1),hh:l(2),a:d(i,c,!0),A:d(i,c,!1),m:String(c),mm:x.s(c,2,"0"),s:String(this.$s),ss:x.s(this.$s,2,"0"),SSS:x.s(this.$ms,3,"0"),Z:o};return r.replace(h,(function(t,e){return e||y[t]||o.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(r,d,p){var y,h=x.p(d),m=k(r),v=(m.utcOffset()-this.utcOffset())*e,S=this-m,w=x.m(this,m);return w=(y={},y[l]=w/12,y[a]=w,y[f]=w/3,y[u]=(S-v)/6048e5,y[s]=(S-v)/864e5,y[c]=S/n,y[i]=S/e,y[o]=S/t,y)[h]||S,p?w:x.a(w)},v.daysInMonth=function(){return this.endOf(a).$D},v.$locale=function(){return g[this.$L]},v.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=E(t,e,!0);return r&&(n.$L=r),n},v.clone=function(){return x.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},m}(),D=$.prototype;return k.prototype=D,[["$ms",r],["$s",o],["$m",i],["$H",c],["$W",s],["$M",a],["$y",l],["$D",d]].forEach((function(t){D[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),k.extend=function(t,e){return t.$i||(t(e,$,k),t.$i=!0),k},k.locale=E,k.isDayjs=b,k.unix=function(t){return k(1e3*t)},k.en=g[w],k.Ls=g,k.p={},k}();function k(t,e,n,r){return new(n||(n=Promise))((function(o,i){function c(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(c,s)}u((r=r.apply(t,e||[])).next())}))}function x(t,e){var n,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return c.label++,{value:i[1],done:!1};case 5:c.label++,r=i[1],i=[0];continue;case 7:i=c.ops.pop(),c.trys.pop();continue;default:if(!(o=c.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){c=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){c.label=i[1];break}if(6===i[0]&&c.label<o[1]){c.label=o[1],o=i;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(i);break}o[2]&&c.ops.pop(),c.trys.pop();continue}i=e.call(t,c)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function $(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),c=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)c.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return c}function D(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}function O(t,e){return void 0===t&&(t=0),void 0===e&&(e=10),Math.floor(Math.random()*(e-t+1)+t)}var M={address:{msg:"地址只能由2~200位中文、英文、数字或空格组成",regexp:/^[\u4e00-\u9fa5A-Za-z0-9 ]{2,200}$/g},count:{msg:"数量只能由数字组成",regexp:/^\d{1,}$/g},date:{msg:"日期只能由YYYY-MM-DD hh:mm:ss形式组成",regexp:/^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$/g},email:{msg:"邮箱只能由xxx@yyy.zzz形式组成",regexp:/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/g},idcard:{msg:"身份证只能由13位数字或12位数字与X组成",regexp:/^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/g},image:{msg:"图片只能是JPG、PNG、GIF、SVG或WEBP类型",regexp:/\.(jpe?g|png|gif|svg|webp)$/g},name:{msg:"名称只能由2~50位中文、英文、数字、下划线或中划线组成",regexp:/^[\u4e00-\u9fa5\w-]{2,50}$/g},number:{msg:"计数只能由数字或小数点组成",regexp:/^[+-]?(0|([1-9]\d*))(\.\d+)?$/g},password:{msg:"密码只能由8~20位英文、数字或符号至少两种组成",regexp:/^(?![0-9]+$)(?![a-z]+$)(?![A-Z]+$)(?!([^(0-9a-zA-Z)])+$)^.{8,20}$/g},phone:{msg:"手机只能由11位数字组成且需符合通讯运营商规范",regexp:/^1\d{10}$/g}},N="^$.*+-?=!:|\\/()[]{}".split("");var F={},P={fromCallback:function(t){return Object.defineProperty((function(...e){if("function"!=typeof e[e.length-1])return new Promise(((n,r)=>{t.call(this,...e,((t,e)=>null!=t?r(t):n(e)))}));t.apply(this,e)}),"name",{value:t.name})},fromPromise:function(t){return Object.defineProperty((function(...e){const n=e[e.length-1];if("function"!=typeof n)return t.apply(this,e);t.apply(this,e.slice(0,-1)).then((t=>n(null,t)),n)}),"name",{value:t.name})}},T=d.default,I=process.cwd,C=null,j=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return C||(C=I.call(process)),C};try{process.cwd()}catch(t){}if("function"==typeof process.chdir){var _=process.chdir;process.chdir=function(t){C=null,_.call(process,t)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,_)}var L=function(t){T.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(t){t.lchmod=function(e,n,r){t.open(e,T.O_WRONLY|T.O_SYMLINK,n,(function(e,o){e?r&&r(e):t.fchmod(o,n,(function(e){t.close(o,(function(t){r&&r(e||t)}))}))}))},t.lchmodSync=function(e,n){var r,o=t.openSync(e,T.O_WRONLY|T.O_SYMLINK,n),i=!0;try{r=t.fchmodSync(o,n),i=!1}finally{if(i)try{t.closeSync(o)}catch(t){}else t.closeSync(o)}return r}}(t);t.lutimes||function(t){T.hasOwnProperty("O_SYMLINK")&&t.futimes?(t.lutimes=function(e,n,r,o){t.open(e,T.O_SYMLINK,(function(e,i){e?o&&o(e):t.futimes(i,n,r,(function(e){t.close(i,(function(t){o&&o(e||t)}))}))}))},t.lutimesSync=function(e,n,r){var o,i=t.openSync(e,T.O_SYMLINK),c=!0;try{o=t.futimesSync(i,n,r),c=!1}finally{if(c)try{t.closeSync(i)}catch(t){}else t.closeSync(i)}return o}):t.futimes&&(t.lutimes=function(t,e,n,r){r&&process.nextTick(r)},t.lutimesSync=function(){})}(t);t.chown=r(t.chown),t.fchown=r(t.fchown),t.lchown=r(t.lchown),t.chmod=e(t.chmod),t.fchmod=e(t.fchmod),t.lchmod=e(t.lchmod),t.chownSync=o(t.chownSync),t.fchownSync=o(t.fchownSync),t.lchownSync=o(t.lchownSync),t.chmodSync=n(t.chmodSync),t.fchmodSync=n(t.fchmodSync),t.lchmodSync=n(t.lchmodSync),t.stat=i(t.stat),t.fstat=i(t.fstat),t.lstat=i(t.lstat),t.statSync=c(t.statSync),t.fstatSync=c(t.fstatSync),t.lstatSync=c(t.lstatSync),t.chmod&&!t.lchmod&&(t.lchmod=function(t,e,n){n&&process.nextTick(n)},t.lchmodSync=function(){});t.chown&&!t.lchown&&(t.lchown=function(t,e,n,r){r&&process.nextTick(r)},t.lchownSync=function(){});"win32"===j&&(t.rename="function"!=typeof t.rename?t.rename:function(e){function n(n,r,o){var i=Date.now(),c=0;e(n,r,(function s(u){if(u&&("EACCES"===u.code||"EPERM"===u.code)&&Date.now()-i<6e4)return setTimeout((function(){t.stat(r,(function(t,i){t&&"ENOENT"===t.code?e(n,r,s):o(u)}))}),c),void(c<100&&(c+=10));o&&o(u)}))}return Object.setPrototypeOf&&Object.setPrototypeOf(n,e),n}(t.rename));function e(e){return e?function(n,r,o){return e.call(t,n,r,(function(t){s(t)&&(t=null),o&&o.apply(this,arguments)}))}:e}function n(e){return e?function(n,r){try{return e.call(t,n,r)}catch(t){if(!s(t))throw t}}:e}function r(e){return e?function(n,r,o,i){return e.call(t,n,r,o,(function(t){s(t)&&(t=null),i&&i.apply(this,arguments)}))}:e}function o(e){return e?function(n,r,o){try{return e.call(t,n,r,o)}catch(t){if(!s(t))throw t}}:e}function i(e){return e?function(n,r,o){function i(t,e){e&&(e.uid<0&&(e.uid+=4294967296),e.gid<0&&(e.gid+=4294967296)),o&&o.apply(this,arguments)}return"function"==typeof r&&(o=r,r=null),r?e.call(t,n,r,i):e.call(t,n,i)}:e}function c(e){return e?function(n,r){var o=r?e.call(t,n,r):e.call(t,n);return o&&(o.uid<0&&(o.uid+=4294967296),o.gid<0&&(o.gid+=4294967296)),o}:e}function s(t){return!t||("ENOSYS"===t.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==t.code&&"EPERM"!==t.code))}t.read="function"!=typeof t.read?t.read:function(e){function n(n,r,o,i,c,s){var u;if(s&&"function"==typeof s){var a=0;u=function(f,l,d){if(f&&"EAGAIN"===f.code&&a<10)return a++,e.call(t,n,r,o,i,c,u);s.apply(this,arguments)}}return e.call(t,n,r,o,i,c,u)}return Object.setPrototypeOf&&Object.setPrototypeOf(n,e),n}(t.read),t.readSync="function"!=typeof t.readSync?t.readSync:(u=t.readSync,function(e,n,r,o,i){for(var c=0;;)try{return u.call(t,e,n,r,o,i)}catch(t){if("EAGAIN"===t.code&&c<10){c++;continue}throw t}});var u};var R=p.default.Stream,A=function(t){return{ReadStream:function e(n,r){if(!(this instanceof e))return new e(n,r);R.call(this);var o=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,r=r||{};for(var i=Object.keys(r),c=0,s=i.length;c<s;c++){var u=i[c];this[u]=r[u]}this.encoding&&this.setEncoding(this.encoding);if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(null!==this.fd)return void process.nextTick((function(){o._read()}));t.open(this.path,this.flags,this.mode,(function(t,e){if(t)return o.emit("error",t),void(o.readable=!1);o.fd=e,o.emit("open",e),o._read()}))},WriteStream:function e(n,r){if(!(this instanceof e))return new e(n,r);R.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,r=r||{};for(var o=Object.keys(r),i=0,c=o.length;i<c;i++){var s=o[i];this[s]=r[s]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=t.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}};var W=function(t){if(null===t||"object"!=typeof t)return t;if(t instanceof Object)var e={__proto__:Y(t)};else e=Object.create(null);return Object.getOwnPropertyNames(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e},Y=Object.getPrototypeOf||function(t){return t.__proto__};var B,J,q=f.default,U=L,G=A,H=W,V=y.default;function z(t,e){Object.defineProperty(t,B,{get:function(){return e}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(B=Symbol.for("graceful-fs.queue"),J=Symbol.for("graceful-fs.previous")):(B="___graceful-fs.queue",J="___graceful-fs.previous");var K=function(){};if(V.debuglog?K=V.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(K=function(){var t=V.format.apply(V,arguments);t="GFS4: "+t.split(/\n/).join("\nGFS4: "),console.error(t)}),!q[B]){var Z=g[B]||[];z(q,Z),q.close=function(t){function e(e,n){return t.call(q,e,(function(t){t||nt(),"function"==typeof n&&n.apply(this,arguments)}))}return Object.defineProperty(e,J,{value:t}),e}(q.close),q.closeSync=function(t){function e(e){t.apply(q,arguments),nt()}return Object.defineProperty(e,J,{value:t}),e}(q.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){K(q[B]),h.default.equal(q[B].length,0)}))}g[B]||z(g,q[B]);var X,Q=tt(H(q));function tt(t){U(t),t.gracefulify=tt,t.createReadStream=function(e,n){return new t.ReadStream(e,n)},t.createWriteStream=function(e,n){return new t.WriteStream(e,n)};var e=t.readFile;t.readFile=function(t,n,r){"function"==typeof n&&(r=n,n=null);return function t(n,r,o,i){return e(n,r,(function(e){!e||"EMFILE"!==e.code&&"ENFILE"!==e.code?"function"==typeof o&&o.apply(this,arguments):et([t,[n,r,o],e,i||Date.now(),Date.now()])}))}(t,n,r)};var n=t.writeFile;t.writeFile=function(t,e,r,o){"function"==typeof r&&(o=r,r=null);return function t(e,r,o,i,c){return n(e,r,o,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?"function"==typeof i&&i.apply(this,arguments):et([t,[e,r,o,i],n,c||Date.now(),Date.now()])}))}(t,e,r,o)};var r=t.appendFile;r&&(t.appendFile=function(t,e,n,o){"function"==typeof n&&(o=n,n=null);return function t(e,n,o,i,c){return r(e,n,o,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?"function"==typeof i&&i.apply(this,arguments):et([t,[e,n,o,i],r,c||Date.now(),Date.now()])}))}(t,e,n,o)});var o=t.copyFile;o&&(t.copyFile=function(t,e,n,r){"function"==typeof n&&(r=n,n=0);return function t(e,n,r,i,c){return o(e,n,r,(function(o){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?"function"==typeof i&&i.apply(this,arguments):et([t,[e,n,r,i],o,c||Date.now(),Date.now()])}))}(t,e,n,r)});var i=t.readdir;t.readdir=function(t,e,n){"function"==typeof e&&(n=e,e=null);var r=c.test(process.version)?function(t,e,n,r){return i(t,o(t,e,n,r))}:function(t,e,n,r){return i(t,e,o(t,e,n,r))};return r(t,e,n);function o(t,e,n,o){return function(i,c){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?(c&&c.sort&&c.sort(),"function"==typeof n&&n.call(this,i,c)):et([r,[t,e,n],i,o||Date.now(),Date.now()])}}};var c=/^v[0-5]\./;if("v0.8"===process.version.substr(0,4)){var s=G(t);d=s.ReadStream,p=s.WriteStream}var u=t.ReadStream;u&&(d.prototype=Object.create(u.prototype),d.prototype.open=function(){var t=this;h(t.path,t.flags,t.mode,(function(e,n){e?(t.autoClose&&t.destroy(),t.emit("error",e)):(t.fd=n,t.emit("open",n),t.read())}))});var a=t.WriteStream;a&&(p.prototype=Object.create(a.prototype),p.prototype.open=function(){var t=this;h(t.path,t.flags,t.mode,(function(e,n){e?(t.destroy(),t.emit("error",e)):(t.fd=n,t.emit("open",n))}))}),Object.defineProperty(t,"ReadStream",{get:function(){return d},set:function(t){d=t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"WriteStream",{get:function(){return p},set:function(t){p=t},enumerable:!0,configurable:!0});var f=d;Object.defineProperty(t,"FileReadStream",{get:function(){return f},set:function(t){f=t},enumerable:!0,configurable:!0});var l=p;function d(t,e){return this instanceof d?(u.apply(this,arguments),this):d.apply(Object.create(d.prototype),arguments)}function p(t,e){return this instanceof p?(a.apply(this,arguments),this):p.apply(Object.create(p.prototype),arguments)}Object.defineProperty(t,"FileWriteStream",{get:function(){return l},set:function(t){l=t},enumerable:!0,configurable:!0});var y=t.open;function h(t,e,n,r){return"function"==typeof n&&(r=n,n=null),function t(e,n,r,o,i){return y(e,n,r,(function(c,s){!c||"EMFILE"!==c.code&&"ENFILE"!==c.code?"function"==typeof o&&o.apply(this,arguments):et([t,[e,n,r,o],c,i||Date.now(),Date.now()])}))}(t,e,n,r)}return t.open=h,t}function et(t){K("ENQUEUE",t[0].name,t[1]),q[B].push(t),rt()}function nt(){for(var t=Date.now(),e=0;e<q[B].length;++e)q[B][e].length>2&&(q[B][e][3]=t,q[B][e][4]=t);rt()}function rt(){if(clearTimeout(X),X=void 0,0!==q[B].length){var t=q[B].shift(),e=t[0],n=t[1],r=t[2],o=t[3],i=t[4];if(void 0===o)K("RETRY",e.name,n),e.apply(null,n);else if(Date.now()-o>=6e4){K("TIMEOUT",e.name,n);var c=n.pop();"function"==typeof c&&c.call(null,r)}else{var s=Date.now()-i,u=Math.max(i-o,1);s>=Math.min(1.2*u,100)?(K("RETRY",e.name,n),e.apply(null,n.concat([o]))):q[B].push(t)}void 0===X&&(X=setTimeout(rt,0))}}process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!q.__patched&&(Q=tt(q),q.__patched=!0),function(t){const e=P.fromCallback,n=Q,r=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter((t=>"function"==typeof n[t]));Object.assign(t,n),r.forEach((r=>{t[r]=e(n[r])})),t.exists=function(t,e){return"function"==typeof e?n.exists(t,e):new Promise((e=>n.exists(t,e)))},t.read=function(t,e,r,o,i,c){return"function"==typeof c?n.read(t,e,r,o,i,c):new Promise(((c,s)=>{n.read(t,e,r,o,i,((t,e,n)=>{if(t)return s(t);c({bytesRead:e,buffer:n})}))}))},t.write=function(t,e,...r){return"function"==typeof r[r.length-1]?n.write(t,e,...r):new Promise(((o,i)=>{n.write(t,e,...r,((t,e,n)=>{if(t)return i(t);o({bytesWritten:e,buffer:n})}))}))},"function"==typeof n.writev&&(t.writev=function(t,e,...r){return"function"==typeof r[r.length-1]?n.writev(t,e,...r):new Promise(((o,i)=>{n.writev(t,e,...r,((t,e,n)=>{if(t)return i(t);o({bytesWritten:e,buffers:n})}))}))}),"function"==typeof n.realpath.native?t.realpath.native=e(n.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")}(F);var ot={},it={};const ct=l.default;it.checkPath=function(t){if("win32"===process.platform){if(/[<>:"|?*]/.test(t.replace(ct.parse(t).root,""))){const e=new Error(`Path contains invalid characters: ${t}`);throw e.code="EINVAL",e}}};const st=F,{checkPath:ut}=it,at=t=>"number"==typeof t?t:{mode:511,...t}.mode;ot.makeDir=async(t,e)=>(ut(t),st.mkdir(t,{mode:at(e),recursive:!0})),ot.makeDirSync=(t,e)=>(ut(t),st.mkdirSync(t,{mode:at(e),recursive:!0}));const ft=P.fromPromise,{makeDir:lt,makeDirSync:dt}=ot,pt=ft(lt);var yt={mkdirs:pt,mkdirsSync:dt,mkdirp:pt,mkdirpSync:dt,ensureDir:pt,ensureDirSync:dt};const ht=P.fromPromise,mt=F;var vt={pathExists:ht((function(t){return mt.access(t).then((()=>!0)).catch((()=>!1))})),pathExistsSync:mt.existsSync};const St=Q;var wt=function(t,e,n,r){St.open(t,"r+",((t,o)=>{if(t)return r(t);St.futimes(o,e,n,(t=>{St.close(o,(e=>{r&&r(t||e)}))}))}))},gt=function(t,e,n){const r=St.openSync(t,"r+");return St.futimesSync(r,e,n),St.closeSync(r)};const bt=F,Et=l.default,kt=y.default;function xt(t,e,n){const r=n.dereference?t=>bt.stat(t,{bigint:!0}):t=>bt.lstat(t,{bigint:!0});return Promise.all([r(t),r(e).catch((t=>{if("ENOENT"===t.code)return null;throw t}))]).then((([t,e])=>({srcStat:t,destStat:e})))}function $t(t,e){return e.ino&&e.dev&&e.ino===t.ino&&e.dev===t.dev}function Dt(t,e){const n=Et.resolve(t).split(Et.sep).filter((t=>t)),r=Et.resolve(e).split(Et.sep).filter((t=>t));return n.reduce(((t,e,n)=>t&&r[n]===e),!0)}function Ot(t,e,n){return`Cannot ${n} '${t}' to a subdirectory of itself, '${e}'.`}var Mt={checkPaths:function(t,e,n,r,o){kt.callbackify(xt)(t,e,r,((r,i)=>{if(r)return o(r);const{srcStat:c,destStat:s}=i;if(s){if($t(c,s)){const r=Et.basename(t),i=Et.basename(e);return"move"===n&&r!==i&&r.toLowerCase()===i.toLowerCase()?o(null,{srcStat:c,destStat:s,isChangingCase:!0}):o(new Error("Source and destination must not be the same."))}if(c.isDirectory()&&!s.isDirectory())return o(new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`));if(!c.isDirectory()&&s.isDirectory())return o(new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`))}return c.isDirectory()&&Dt(t,e)?o(new Error(Ot(t,e,n))):o(null,{srcStat:c,destStat:s})}))},checkPathsSync:function(t,e,n,r){const{srcStat:o,destStat:i}=function(t,e,n){let r;const o=n.dereference?t=>bt.statSync(t,{bigint:!0}):t=>bt.lstatSync(t,{bigint:!0}),i=o(t);try{r=o(e)}catch(t){if("ENOENT"===t.code)return{srcStat:i,destStat:null};throw t}return{srcStat:i,destStat:r}}(t,e,r);if(i){if($t(o,i)){const r=Et.basename(t),c=Et.basename(e);if("move"===n&&r!==c&&r.toLowerCase()===c.toLowerCase())return{srcStat:o,destStat:i,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(o.isDirectory()&&!i.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${t}'.`);if(!o.isDirectory()&&i.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${t}'.`)}if(o.isDirectory()&&Dt(t,e))throw new Error(Ot(t,e,n));return{srcStat:o,destStat:i}},checkParentPaths:function t(e,n,r,o,i){const c=Et.resolve(Et.dirname(e)),s=Et.resolve(Et.dirname(r));if(s===c||s===Et.parse(s).root)return i();bt.stat(s,{bigint:!0},((c,u)=>c?"ENOENT"===c.code?i():i(c):$t(n,u)?i(new Error(Ot(e,r,o))):t(e,n,s,o,i)))},checkParentPathsSync:function t(e,n,r,o){const i=Et.resolve(Et.dirname(e)),c=Et.resolve(Et.dirname(r));if(c===i||c===Et.parse(c).root)return;let s;try{s=bt.statSync(c,{bigint:!0})}catch(t){if("ENOENT"===t.code)return;throw t}if($t(n,s))throw new Error(Ot(e,r,o));return t(e,n,c,o)},isSrcSubdir:Dt,areIdentical:$t};const Nt=Q,Ft=l.default,Pt=yt.mkdirs,Tt=vt.pathExists,It=wt,Ct=Mt;function jt(t,e,n,r,o){const i=Ft.dirname(n);Tt(i,((c,s)=>c?o(c):s?Lt(t,e,n,r,o):void Pt(i,(i=>i?o(i):Lt(t,e,n,r,o)))))}function _t(t,e,n,r,o,i){Promise.resolve(o.filter(n,r)).then((c=>c?t(e,n,r,o,i):i()),(t=>i(t)))}function Lt(t,e,n,r,o){(r.dereference?Nt.stat:Nt.lstat)(e,((i,c)=>i?o(i):c.isDirectory()?function(t,e,n,r,o,i){return e?Yt(n,r,o,i):function(t,e,n,r,o){Nt.mkdir(n,(i=>{if(i)return o(i);Yt(e,n,r,(e=>e?o(e):Wt(n,t,o)))}))}(t.mode,n,r,o,i)}(c,t,e,n,r,o):c.isFile()||c.isCharacterDevice()||c.isBlockDevice()?function(t,e,n,r,o,i){return e?function(t,e,n,r,o){if(!r.overwrite)return r.errorOnExist?o(new Error(`'${n}' already exists`)):o();Nt.unlink(n,(i=>i?o(i):Rt(t,e,n,r,o)))}(t,n,r,o,i):Rt(t,n,r,o,i)}(c,t,e,n,r,o):c.isSymbolicLink()?function(t,e,n,r,o){Nt.readlink(e,((e,i)=>e?o(e):(r.dereference&&(i=Ft.resolve(process.cwd(),i)),t?void Nt.readlink(n,((e,c)=>e?"EINVAL"===e.code||"UNKNOWN"===e.code?Nt.symlink(i,n,o):o(e):(r.dereference&&(c=Ft.resolve(process.cwd(),c)),Ct.isSrcSubdir(i,c)?o(new Error(`Cannot copy '${i}' to a subdirectory of itself, '${c}'.`)):t.isDirectory()&&Ct.isSrcSubdir(c,i)?o(new Error(`Cannot overwrite '${c}' with '${i}'.`)):function(t,e,n){Nt.unlink(e,(r=>r?n(r):Nt.symlink(t,e,n)))}(i,n,o)))):Nt.symlink(i,n,o))))}(t,e,n,r,o):c.isSocket()?o(new Error(`Cannot copy a socket file: ${e}`)):c.isFIFO()?o(new Error(`Cannot copy a FIFO pipe: ${e}`)):o(new Error(`Unknown file: ${e}`))))}function Rt(t,e,n,r,o){Nt.copyFile(e,n,(i=>i?o(i):r.preserveTimestamps?function(t,e,n,r){if(function(t){return 0==(128&t)}(t))return function(t,e,n){return Wt(t,128|e,n)}(n,t,(o=>o?r(o):At(t,e,n,r)));return At(t,e,n,r)}(t.mode,e,n,o):Wt(n,t.mode,o)))}function At(t,e,n,r){!function(t,e,n){Nt.stat(t,((t,r)=>t?n(t):It(e,r.atime,r.mtime,n)))}(e,n,(e=>e?r(e):Wt(n,t,r)))}function Wt(t,e,n){return Nt.chmod(t,e,n)}function Yt(t,e,n,r){Nt.readdir(t,((o,i)=>o?r(o):Bt(i,t,e,n,r)))}function Bt(t,e,n,r,o){const i=t.pop();return i?function(t,e,n,r,o,i){const c=Ft.join(n,e),s=Ft.join(r,e);Ct.checkPaths(c,s,"copy",o,((e,u)=>{if(e)return i(e);const{destStat:a}=u;!function(t,e,n,r,o){r.filter?_t(Lt,t,e,n,r,o):Lt(t,e,n,r,o)}(a,c,s,o,(e=>e?i(e):Bt(t,n,r,o,i)))}))}(t,i,e,n,r,o):o()}var Jt=function(t,e,n,r){"function"!=typeof n||r?"function"==typeof n&&(n={filter:n}):(r=n,n={}),r=r||function(){},(n=n||{}).clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0001"),Ct.checkPaths(t,e,"copy",n,((o,i)=>{if(o)return r(o);const{srcStat:c,destStat:s}=i;Ct.checkParentPaths(t,c,e,"copy",(o=>o?r(o):n.filter?_t(jt,s,t,e,n,r):jt(s,t,e,n,r)))}))};const qt=Q,Ut=l.default,Gt=yt.mkdirsSync,Ht=gt,Vt=Mt;function zt(t,e,n,r){const o=(r.dereference?qt.statSync:qt.lstatSync)(e);if(o.isDirectory())return function(t,e,n,r,o){return e?Xt(n,r,o):function(t,e,n,r){return qt.mkdirSync(n),Xt(e,n,r),Zt(n,t)}(t.mode,n,r,o)}(o,t,e,n,r);if(o.isFile()||o.isCharacterDevice()||o.isBlockDevice())return function(t,e,n,r,o){return e?function(t,e,n,r){if(r.overwrite)return qt.unlinkSync(n),Kt(t,e,n,r);if(r.errorOnExist)throw new Error(`'${n}' already exists`)}(t,n,r,o):Kt(t,n,r,o)}(o,t,e,n,r);if(o.isSymbolicLink())return function(t,e,n,r){let o=qt.readlinkSync(e);r.dereference&&(o=Ut.resolve(process.cwd(),o));if(t){let t;try{t=qt.readlinkSync(n)}catch(t){if("EINVAL"===t.code||"UNKNOWN"===t.code)return qt.symlinkSync(o,n);throw t}if(r.dereference&&(t=Ut.resolve(process.cwd(),t)),Vt.isSrcSubdir(o,t))throw new Error(`Cannot copy '${o}' to a subdirectory of itself, '${t}'.`);if(qt.statSync(n).isDirectory()&&Vt.isSrcSubdir(t,o))throw new Error(`Cannot overwrite '${t}' with '${o}'.`);return function(t,e){return qt.unlinkSync(e),qt.symlinkSync(t,e)}(o,n)}return qt.symlinkSync(o,n)}(t,e,n,r);if(o.isSocket())throw new Error(`Cannot copy a socket file: ${e}`);if(o.isFIFO())throw new Error(`Cannot copy a FIFO pipe: ${e}`);throw new Error(`Unknown file: ${e}`)}function Kt(t,e,n,r){return qt.copyFileSync(e,n),r.preserveTimestamps&&function(t,e,n){(function(t){return 0==(128&t)})(t)&&function(t,e){Zt(t,128|e)}(n,t);(function(t,e){const n=qt.statSync(t);Ht(e,n.atime,n.mtime)})(e,n)}(t.mode,e,n),Zt(n,t.mode)}function Zt(t,e){return qt.chmodSync(t,e)}function Xt(t,e,n){qt.readdirSync(t).forEach((r=>function(t,e,n,r){const o=Ut.join(e,t),i=Ut.join(n,t),{destStat:c}=Vt.checkPathsSync(o,i,"copy",r);return function(t,e,n,r){if(!r.filter||r.filter(e,n))return zt(t,e,n,r)}(c,o,i,r)}(r,t,e,n)))}var Qt=function(t,e,n){"function"==typeof n&&(n={filter:n}),(n=n||{}).clobber=!("clobber"in n)||!!n.clobber,n.overwrite="overwrite"in n?!!n.overwrite:n.clobber,n.preserveTimestamps&&"ia32"===process.arch&&process.emitWarning("Using the preserveTimestamps option in 32-bit node is not recommended;\n\n\tsee https://github.com/jprichardson/node-fs-extra/issues/269","Warning","fs-extra-WARN0002");const{srcStat:r,destStat:o}=Vt.checkPathsSync(t,e,"copy",n);return Vt.checkParentPathsSync(t,r,e,"copy"),function(t,e,n,r){if(r.filter&&!r.filter(e,n))return;const o=Ut.dirname(n);qt.existsSync(o)||Gt(o);return zt(t,e,n,r)}(o,t,e,n)};var te={copy:(0,P.fromCallback)(Jt),copySync:Qt};const ee=Q,ne=l.default,re=h.default,oe="win32"===process.platform;function ie(t){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach((e=>{t[e]=t[e]||ee[e],t[e+="Sync"]=t[e]||ee[e]})),t.maxBusyTries=t.maxBusyTries||3}function ce(t,e,n){let r=0;"function"==typeof e&&(n=e,e={}),re(t,"rimraf: missing path"),re.strictEqual(typeof t,"string","rimraf: path should be a string"),re.strictEqual(typeof n,"function","rimraf: callback function required"),re(e,"rimraf: invalid options argument provided"),re.strictEqual(typeof e,"object","rimraf: options should be object"),ie(e),se(t,e,(function o(i){if(i){if(("EBUSY"===i.code||"ENOTEMPTY"===i.code||"EPERM"===i.code)&&r<e.maxBusyTries){r++;return setTimeout((()=>se(t,e,o)),100*r)}"ENOENT"===i.code&&(i=null)}n(i)}))}function se(t,e,n){re(t),re(e),re("function"==typeof n),e.lstat(t,((r,o)=>r&&"ENOENT"===r.code?n(null):r&&"EPERM"===r.code&&oe?ue(t,e,r,n):o&&o.isDirectory()?fe(t,e,r,n):void e.unlink(t,(r=>{if(r){if("ENOENT"===r.code)return n(null);if("EPERM"===r.code)return oe?ue(t,e,r,n):fe(t,e,r,n);if("EISDIR"===r.code)return fe(t,e,r,n)}return n(r)}))))}function ue(t,e,n,r){re(t),re(e),re("function"==typeof r),e.chmod(t,438,(o=>{o?r("ENOENT"===o.code?null:n):e.stat(t,((o,i)=>{o?r("ENOENT"===o.code?null:n):i.isDirectory()?fe(t,e,n,r):e.unlink(t,r)}))}))}function ae(t,e,n){let r;re(t),re(e);try{e.chmodSync(t,438)}catch(t){if("ENOENT"===t.code)return;throw n}try{r=e.statSync(t)}catch(t){if("ENOENT"===t.code)return;throw n}r.isDirectory()?de(t,e,n):e.unlinkSync(t)}function fe(t,e,n,r){re(t),re(e),re("function"==typeof r),e.rmdir(t,(o=>{!o||"ENOTEMPTY"!==o.code&&"EEXIST"!==o.code&&"EPERM"!==o.code?o&&"ENOTDIR"===o.code?r(n):r(o):function(t,e,n){re(t),re(e),re("function"==typeof n),e.readdir(t,((r,o)=>{if(r)return n(r);let i,c=o.length;if(0===c)return e.rmdir(t,n);o.forEach((r=>{ce(ne.join(t,r),e,(r=>{if(!i)return r?n(i=r):void(0==--c&&e.rmdir(t,n))}))}))}))}(t,e,r)}))}function le(t,e){let n;ie(e=e||{}),re(t,"rimraf: missing path"),re.strictEqual(typeof t,"string","rimraf: path should be a string"),re(e,"rimraf: missing options"),re.strictEqual(typeof e,"object","rimraf: options should be object");try{n=e.lstatSync(t)}catch(n){if("ENOENT"===n.code)return;"EPERM"===n.code&&oe&&ae(t,e,n)}try{n&&n.isDirectory()?de(t,e,null):e.unlinkSync(t)}catch(n){if("ENOENT"===n.code)return;if("EPERM"===n.code)return oe?ae(t,e,n):de(t,e,n);if("EISDIR"!==n.code)throw n;de(t,e,n)}}function de(t,e,n){re(t),re(e);try{e.rmdirSync(t)}catch(r){if("ENOTDIR"===r.code)throw n;if("ENOTEMPTY"===r.code||"EEXIST"===r.code||"EPERM"===r.code)!function(t,e){if(re(t),re(e),e.readdirSync(t).forEach((n=>le(ne.join(t,n),e))),!oe){return e.rmdirSync(t,e)}{const n=Date.now();do{try{return e.rmdirSync(t,e)}catch{}}while(Date.now()-n<500)}}(t,e);else if("ENOENT"!==r.code)throw r}}var pe=ce;ce.sync=le;const ye=Q,he=P.fromCallback,me=pe;var ve={remove:he((function(t,e){if(ye.rm)return ye.rm(t,{recursive:!0,force:!0},e);me(t,e)})),removeSync:function(t){if(ye.rmSync)return ye.rmSync(t,{recursive:!0,force:!0});me.sync(t)}};const Se=P.fromPromise,we=F,ge=l.default,be=yt,Ee=ve,ke=Se((async function(t){let e;try{e=await we.readdir(t)}catch{return be.mkdirs(t)}return Promise.all(e.map((e=>Ee.remove(ge.join(t,e)))))}));function xe(t){let e;try{e=we.readdirSync(t)}catch{return be.mkdirsSync(t)}e.forEach((e=>{e=ge.join(t,e),Ee.removeSync(e)}))}var $e={emptyDirSync:xe,emptydirSync:xe,emptyDir:ke,emptydir:ke};const De=P.fromCallback,Oe=l.default,Me=Q,Ne=yt;var Fe={createFile:De((function(t,e){function n(){Me.writeFile(t,"",(t=>{if(t)return e(t);e()}))}Me.stat(t,((r,o)=>{if(!r&&o.isFile())return e();const i=Oe.dirname(t);Me.stat(i,((t,r)=>{if(t)return"ENOENT"===t.code?Ne.mkdirs(i,(t=>{if(t)return e(t);n()})):e(t);r.isDirectory()?n():Me.readdir(i,(t=>{if(t)return e(t)}))}))}))})),createFileSync:function(t){let e;try{e=Me.statSync(t)}catch{}if(e&&e.isFile())return;const n=Oe.dirname(t);try{Me.statSync(n).isDirectory()||Me.readdirSync(n)}catch(t){if(!t||"ENOENT"!==t.code)throw t;Ne.mkdirsSync(n)}Me.writeFileSync(t,"")}};const Pe=P.fromCallback,Te=l.default,Ie=Q,Ce=yt,je=vt.pathExists,{areIdentical:_e}=Mt;var Le={createLink:Pe((function(t,e,n){function r(t,e){Ie.link(t,e,(t=>{if(t)return n(t);n(null)}))}Ie.lstat(e,((o,i)=>{Ie.lstat(t,((o,c)=>{if(o)return o.message=o.message.replace("lstat","ensureLink"),n(o);if(i&&_e(c,i))return n(null);const s=Te.dirname(e);je(s,((o,i)=>o?n(o):i?r(t,e):void Ce.mkdirs(s,(o=>{if(o)return n(o);r(t,e)}))))}))}))})),createLinkSync:function(t,e){let n;try{n=Ie.lstatSync(e)}catch{}try{const e=Ie.lstatSync(t);if(n&&_e(e,n))return}catch(t){throw t.message=t.message.replace("lstat","ensureLink"),t}const r=Te.dirname(e);return Ie.existsSync(r)||Ce.mkdirsSync(r),Ie.linkSync(t,e)}};const Re=l.default,Ae=Q,We=vt.pathExists;var Ye={symlinkPaths:function(t,e,n){if(Re.isAbsolute(t))return Ae.lstat(t,(e=>e?(e.message=e.message.replace("lstat","ensureSymlink"),n(e)):n(null,{toCwd:t,toDst:t})));{const r=Re.dirname(e),o=Re.join(r,t);return We(o,((e,i)=>e?n(e):i?n(null,{toCwd:o,toDst:t}):Ae.lstat(t,(e=>e?(e.message=e.message.replace("lstat","ensureSymlink"),n(e)):n(null,{toCwd:t,toDst:Re.relative(r,t)})))))}},symlinkPathsSync:function(t,e){let n;if(Re.isAbsolute(t)){if(n=Ae.existsSync(t),!n)throw new Error("absolute srcpath does not exist");return{toCwd:t,toDst:t}}{const r=Re.dirname(e),o=Re.join(r,t);if(n=Ae.existsSync(o),n)return{toCwd:o,toDst:t};if(n=Ae.existsSync(t),!n)throw new Error("relative srcpath does not exist");return{toCwd:t,toDst:Re.relative(r,t)}}}};const Be=Q;var Je={symlinkType:function(t,e,n){if(n="function"==typeof e?e:n,e="function"!=typeof e&&e)return n(null,e);Be.lstat(t,((t,r)=>{if(t)return n(null,"file");e=r&&r.isDirectory()?"dir":"file",n(null,e)}))},symlinkTypeSync:function(t,e){let n;if(e)return e;try{n=Be.lstatSync(t)}catch{return"file"}return n&&n.isDirectory()?"dir":"file"}};const qe=P.fromCallback,Ue=l.default,Ge=F,He=yt.mkdirs,Ve=yt.mkdirsSync,ze=Ye.symlinkPaths,Ke=Ye.symlinkPathsSync,Ze=Je.symlinkType,Xe=Je.symlinkTypeSync,Qe=vt.pathExists,{areIdentical:tn}=Mt;function en(t,e,n,r){ze(t,e,((o,i)=>{if(o)return r(o);t=i.toDst,Ze(i.toCwd,n,((n,o)=>{if(n)return r(n);const i=Ue.dirname(e);Qe(i,((n,c)=>n?r(n):c?Ge.symlink(t,e,o,r):void He(i,(n=>{if(n)return r(n);Ge.symlink(t,e,o,r)}))))}))}))}var nn={createSymlink:qe((function(t,e,n,r){r="function"==typeof n?n:r,n="function"!=typeof n&&n,Ge.lstat(e,((o,i)=>{!o&&i.isSymbolicLink()?Promise.all([Ge.stat(t),Ge.stat(e)]).then((([o,i])=>{if(tn(o,i))return r(null);en(t,e,n,r)})):en(t,e,n,r)}))})),createSymlinkSync:function(t,e,n){let r;try{r=Ge.lstatSync(e)}catch{}if(r&&r.isSymbolicLink()){const n=Ge.statSync(t),r=Ge.statSync(e);if(tn(n,r))return}const o=Ke(t,e);t=o.toDst,n=Xe(o.toCwd,n);const i=Ue.dirname(e);return Ge.existsSync(i)||Ve(i),Ge.symlinkSync(t,e,n)}};const{createFile:rn,createFileSync:on}=Fe,{createLink:cn,createLinkSync:sn}=Le,{createSymlink:un,createSymlinkSync:an}=nn;var fn={createFile:rn,createFileSync:on,ensureFile:rn,ensureFileSync:on,createLink:cn,createLinkSync:sn,ensureLink:cn,ensureLinkSync:sn,createSymlink:un,createSymlinkSync:an,ensureSymlink:un,ensureSymlinkSync:an};var ln={stringify:function(t,{EOL:e="\n",finalEOL:n=!0,replacer:r=null,spaces:o}={}){const i=n?e:"";return JSON.stringify(t,r,o).replace(/\n/g,e)+i},stripBom:function(t){return Buffer.isBuffer(t)&&(t=t.toString("utf8")),t.replace(/^\uFEFF/,"")}};let dn;try{dn=Q}catch(t){dn=f.default}const pn=P,{stringify:yn,stripBom:hn}=ln;const mn=pn.fromPromise((async function(t,e={}){"string"==typeof e&&(e={encoding:e});const n=e.fs||dn,r=!("throws"in e)||e.throws;let o,i=await pn.fromCallback(n.readFile)(t,e);i=hn(i);try{o=JSON.parse(i,e?e.reviver:null)}catch(e){if(r)throw e.message=`${t}: ${e.message}`,e;return null}return o}));const vn=pn.fromPromise((async function(t,e,n={}){const r=n.fs||dn,o=yn(e,n);await pn.fromCallback(r.writeFile)(t,o,n)}));const Sn={readFile:mn,readFileSync:function(t,e={}){"string"==typeof e&&(e={encoding:e});const n=e.fs||dn,r=!("throws"in e)||e.throws;try{let r=n.readFileSync(t,e);return r=hn(r),JSON.parse(r,e.reviver)}catch(e){if(r)throw e.message=`${t}: ${e.message}`,e;return null}},writeFile:vn,writeFileSync:function(t,e,n={}){const r=n.fs||dn,o=yn(e,n);return r.writeFileSync(t,o,n)}};var wn={readJson:Sn.readFile,readJsonSync:Sn.readFileSync,writeJson:Sn.writeFile,writeJsonSync:Sn.writeFileSync};const gn=P.fromCallback,bn=Q,En=l.default,kn=yt,xn=vt.pathExists;var $n={outputFile:gn((function(t,e,n,r){"function"==typeof n&&(r=n,n="utf8");const o=En.dirname(t);xn(o,((i,c)=>i?r(i):c?bn.writeFile(t,e,n,r):void kn.mkdirs(o,(o=>{if(o)return r(o);bn.writeFile(t,e,n,r)}))))})),outputFileSync:function(t,...e){const n=En.dirname(t);if(bn.existsSync(n))return bn.writeFileSync(t,...e);kn.mkdirsSync(n),bn.writeFileSync(t,...e)}};const{stringify:Dn}=ln,{outputFile:On}=$n;var Mn=async function(t,e,n={}){const r=Dn(e,n);await On(t,r,n)};const{stringify:Nn}=ln,{outputFileSync:Fn}=$n;var Pn=function(t,e,n){const r=Nn(e,n);Fn(t,r,n)};const Tn=P.fromPromise,In=wn;In.outputJson=Tn(Mn),In.outputJsonSync=Pn,In.outputJSON=In.outputJson,In.outputJSONSync=In.outputJsonSync,In.writeJSON=In.writeJson,In.writeJSONSync=In.writeJsonSync,In.readJSON=In.readJson,In.readJSONSync=In.readJsonSync;var Cn=In;const jn=Q,_n=l.default,Ln=te.copy,Rn=ve.remove,An=yt.mkdirp,Wn=vt.pathExists,Yn=Mt;function Bn(t,e,n,r,o){return r?Jn(t,e,n,o):n?Rn(e,(r=>r?o(r):Jn(t,e,n,o))):void Wn(e,((r,i)=>r?o(r):i?o(new Error("dest already exists.")):Jn(t,e,n,o)))}function Jn(t,e,n,r){jn.rename(t,e,(o=>o?"EXDEV"!==o.code?r(o):function(t,e,n,r){Ln(t,e,{overwrite:n,errorOnExist:!0},(e=>e?r(e):Rn(t,r)))}(t,e,n,r):r()))}var qn=function(t,e,n,r){"function"==typeof n&&(r=n,n={});const o=(n=n||{}).overwrite||n.clobber||!1;Yn.checkPaths(t,e,"move",n,((n,i)=>{if(n)return r(n);const{srcStat:c,isChangingCase:s=!1}=i;Yn.checkParentPaths(t,c,e,"move",(n=>n?r(n):function(t){const e=_n.dirname(t);return _n.parse(e).root===e}(e)?Bn(t,e,o,s,r):void An(_n.dirname(e),(n=>n?r(n):Bn(t,e,o,s,r)))))}))};const Un=Q,Gn=l.default,Hn=te.copySync,Vn=ve.removeSync,zn=yt.mkdirpSync,Kn=Mt;function Zn(t,e,n){try{Un.renameSync(t,e)}catch(r){if("EXDEV"!==r.code)throw r;return function(t,e,n){return Hn(t,e,{overwrite:n,errorOnExist:true}),Vn(t)}(t,e,n)}}var Xn=function(t,e,n){const r=(n=n||{}).overwrite||n.clobber||!1,{srcStat:o,isChangingCase:i=!1}=Kn.checkPathsSync(t,e,"move",n);return Kn.checkParentPathsSync(t,o,e,"move"),function(t){const e=Gn.dirname(t);return Gn.parse(e).root===e}(e)||zn(Gn.dirname(e)),function(t,e,n,r){if(r)return Zn(t,e,n);if(n)return Vn(e),Zn(t,e,n);if(Un.existsSync(e))throw new Error("dest already exists.");return Zn(t,e,n)}(t,e,r,i)};var Qn={move:(0,P.fromCallback)(qn),moveSync:Xn},tr={...F,...te,...$e,...fn,...Cn,...yt,...Qn,...$n,...vt,...ve};function er(t,r){return void 0===t&&(t=""),void 0===r&&(r=n.cwd()),e.join(r,t)}function nr(t){return void 0===t&&(t="node -v"),u.execSync(t,{encoding:"utf8"})}exports.AbsPath=er,exports.AsyncTo=function(t,e){return k(this,void 0,void 0,(function(){return x(this,(function(n){switch(n.label){case 0:return[4,t.then((function(t){return[null,t]})).catch((function(t){return[e?Object.assign({},t,e):t,void 0]}))];case 1:return[2,n.sent()]}}))}))},exports.CheckText=function(t,e){void 0===t&&(t=""),void 0===e&&(e="");var n=M[t],r=n.regexp,o=n.msg,i=r.test(e);return{flag:i,msg:i?"":o}},exports.CheckTextPlus=function(t,e,n){void 0===e&&(e=""),void 0===n&&(n="");var r=t.test(e);return{flag:r,msg:r?"":n}},exports.CopyDir=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=""),tr.copySync(t,e,{filter:n})},exports.CreateDir=function(t){void 0===t&&(t=""),tr.ensureDirSync(t)},exports.Debounce=function(t,e){var n;return void 0===e&&(e=50),function(){for(var r=this,o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];n&&clearTimeout(n),n=setTimeout((function(){return t.apply(r,o)}),e)}},exports.DesePhone=function(t){return void 0===t&&(t=""),M.phone.regexp.test(t)?t.toString().replace(/(\d{3})\d*(\d{4})/g,"$1****$2"):t},exports.EnvType=m,exports.FillNum=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),t.toString().padStart(e,"0")},exports.FilterObj=function(t,e){return void 0===t&&(t={}),void 0===e&&(e=[]),Object.keys(t).reduce((function(n,r){return e.includes(r)&&(n[r]=t[r]),n}),{})},exports.FormatByte=function(t){if(void 0===t&&(t=0),0===t)return"0 B";var e=Math.floor(Math.log(t)/Math.log(1024));return(t/Math.pow(1024,e)).toPrecision(3)+" "+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][e]},exports.FormatCountdown=function(t){if(!t)return"时间无效";var e=+new Date,n=+new Date(t)-e;if(n>=0){var r=Math.floor(n/1e3/3600/24),o=Math.floor(n/1e3/60/60%24),i=Math.floor(n/1e3/60%60),c=Math.floor(n/1e3%60),s=r?"".concat(r,"天"):"",u=o?"".concat(o,"时"):"",a=i?"".concat(i,"分"):"",f=c?"".concat(c,"秒"):"";return"".concat(s).concat(u).concat(a).concat(f)}return"时间已到"},exports.FormatPhone=function(t,e){return void 0===t&&(t=""),void 0===e&&(e="-"),M.phone.regexp.test(t)&&["-"," "].includes(e)?t.toString().replace(/(\d{3})(\d{4})(\d{4})/g,"$1".concat(e,"$2").concat(e,"$3")):t},exports.FormatTimeDiff=function(t){if(!t)return"时间无效";var e=+new Date,n=+new Date(t),r=e-n,o=r>=0?"前":"后",i=Math.abs(r),c=30.4375,s=36e5,u=24*s,a=i/6e4,f=i/s,l=i/u,d=i/26298e5;return i/315576e5>=1||d>=12?E(n).format("YYYY-MM-DD HH:mm:ss"):d>=1&&d<12?"".concat(parseInt(d.toString()),"个月").concat(o):l>=1&&l<c?"".concat(parseInt(l.toString()),"天").concat(o):f>=1&&f<24?"".concat(parseInt(f.toString()),"小时").concat(o):a>=1&&a<60?"".concat(parseInt(a.toString()),"分钟").concat(o):r>=0?"刚刚":"准备"},exports.GetIP=function(){var t,e="127.0.0.1",n=s.networkInterfaces();for(var r in n)for(var o=null!==(t=n[r])&&void 0!==t?t:[],i=0;i<o.length;i++){var c=o[i],u=c.address,a=c.family,f=c.internal;if("IPv4"===a&&u!==e&&!f)return u}return e},exports.GroupArrKey=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=""),e?t.reduce((function(t,n){return!t[n[e]]&&(t[n[e]]=[]),t[n[e]].push(n),t}),{}):{}},exports.IsArguments=function(t){return"arguments"===v(t)},exports.IsArray=function(t){return"array"===v(t)},exports.IsAsyncFunction=function(t){return"asyncfunction"===v(t)},exports.IsBoolean=function(t){return"boolean"===v(t)},exports.IsClass=function(t){return w(t)&&/^class\s+[\dA-Za-z]/.test(t.toString())},exports.IsDate=function(t){return"date"===v(t)},exports.IsElement=function(t){return/^html(.+?)element$/.test(v(t))},exports.IsEmpty=function(t){return!t},exports.IsEmptyArray=function(t){return Array.isArray(t)&&!t.length},exports.IsEmptyObject=function(t){return S(t)&&!Object.keys(t).length},exports.IsError=function(t){return t instanceof Error},exports.IsFunction=w,exports.IsMap=function(t){return"map"===v(t)},exports.IsNode=function(){return"node"===m()},exports.IsNull=function(t){return"null"===v(t)},exports.IsNumber=function(t){return"number"===v(t)},exports.IsObject=S,exports.IsRegExp=function(t){return"regexp"===v(t)},exports.IsSet=function(t){return"set"===v(t)},exports.IsString=function(t){return"string"===v(t)},exports.IsSymbol=function(t){return"symbol"===v(t)},exports.IsSyncFunction=function(t){return"function"===v(t)},exports.IsUndefined=function(t){return"undefined"===v(t)},exports.IsWeakMap=function(t){return"weakmap"===v(t)},exports.IsWeakSet=function(t){return"weakset"===v(t)},exports.IsWeb=function(){return"web"===m()},exports.MatchBracketText=function(t,e){var n;void 0===t&&(t="(*)"),void 0===e&&(e="");var r=t.split("*").map((function(t){return N.includes(t)?"\\"+t:t})),o=new RegExp(r[0]+"(.+?)"+r[1],"g");return(null!==(n=e.match(o))&&void 0!==n?n:[]).map((function(t){return t.replace(o,"$1")}))},exports.NodeType=function(){var t,e=s.type().toLocaleLowerCase(),n={windows:/windows/g,macos:/darwin/g,linux:/linux/g},r=null!==(t=Object.keys(n).find((function(t){return n[t].test(e)})))&&void 0!==t?t:"unknow";return{nodeVs:nr("node -v").replace(/(v|\n|\r\n)/g,""),npmVs:nr("npm -v").replace(/\n/g,""),system:r,systemVs:s.release().split("-")[0]}},exports.RandomColor=function(){return"#"+Math.floor(16777215*Math.random()).toString(16).padEnd(6,"0")},exports.RandomId=function(t){return void 0===t&&(t=5),(t<1||t>10)&&(t=5),Math.random().toString(36).substr(3,t)},exports.RandomNum=O,exports.RandomNumPlus=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=10),void 0===n&&(n=1);for(var r=[];;){for(var o=!1,i=O(t,e),c=0;c<r.length;c++)if(i===r[c]){o=!0;break}if(o||r.push(i),r.length===n)return r}},exports.ReadDir=function r(o,i,c){var s;if(void 0===o&&(o="bfs"),void 0===i&&(i=n.cwd()),void 0===c&&(c=/(node_modules|\.git|\.DS_Store)$/),"bfs"===o){var u=[],a=[];!c.test(i)&&a.unshift(i);for(var f=function(){var n=null!==(s=a.shift())&&void 0!==s?s:"",r=t.statSync(n);if(r&&!c.test(n)){var o=r.isDirectory,i=r.isFile;o()?t.readdirSync(n).forEach((function(t){var r=e.join(n,t);a.push(r)})):i()&&u.push(n)}};a.length;)f();return u}if("dfs"===o){u=[];var l=t.statSync(i);return c.test(i)||(l.isDirectory()?t.readdirSync(i).reduce((function(t,n){var o=r("dfs",e.join(i,n),c);return t.push.apply(t,D([],$(o),!1)),t}),u):l.isFile()&&u.push(i)),u}return[]},exports.ReadJson=function(r,o){void 0===r&&(r=""),void 0===o&&(o=n.cwd());var i=er(r,o),c=e.extname(i);if(!/^\.json$/.test(c))return{};var s=t.readFileSync(i,"utf8");return JSON.parse(s)},exports.RecordArrPosition=function(t,e){return void 0===t&&(t=[]),t.reduce((function(t,n,r){return n===e&&t.push(r),t}),[])},exports.RemoveDir=function(t){void 0===t&&(t=""),tr.removeSync(t)},exports.RemoveTag=function(t){return void 0===t&&(t=""),t.replace(/<[^>]*>/g,"")},exports.ReverseText=function(t){return void 0===t&&(t=""),t.split("").reduceRight((function(t,e){return t+e}))},exports.RoundNum=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=2),void 0===n&&(n=!1),n?"".concat(Math.round(t*Math.pow(10,e)*100)/Math.pow(10,e),"%"):Math.round(t*Math.pow(10,e))/Math.pow(10,e)},exports.RunCmd=nr,exports.StartScore=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=5),t<0&&(t=0),t>e&&(t=e),D(D([],$(new Array(e).fill("★")),!1),$(new Array(e).fill("☆")),!1).join("").slice(e-t,2*e-t)},exports.StatArrCount=function(t){return void 0===t&&(t=[]),t.reduce((function(t,e){return t[e]=(t[e]||0)+1,t}),{})},exports.StatArrKeyword=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=[]),e.reduce((function(e,n){return t.some((function(t){return t.includes(n)}))&&e.push(n),e}),[])},exports.ThousandNum=function(t){return void 0===t&&(t=0),t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},exports.Throttle=function(t,e){var n;void 0===e&&(e=50);var r=!1,o=0;return function(){for(var i=this,c=[],s=0;s<arguments.length;s++)c[s]=arguments[s];r?(clearTimeout(n),n=setTimeout((function(){Date.now()-o>=e&&(t.apply(i,c),o=Date.now())}),Math.max(e-(Date.now()-o),0))):(t.apply(this,c),o=Date.now(),r=!0)}},exports.TypeOf=v,exports.WaitFor=function(t){return void 0===t&&(t=1e3),k(this,void 0,void 0,(function(){return x(this,(function(e){switch(e.label){case 0:return[4,new Promise((function(e){return setTimeout((function(){return e(!0)}),t)}))];case 1:return[2,e.sent()]}}))}))};
